<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ã€ŒHackergame 2021ã€#0 èµ›åæ€»ç»“</title>
    <url>/p/c05d7b7c.html</url>
    <content><![CDATA[<p>ä¸ƒå¤©ç´§å¼ åˆºæ¿€<del>ç ´é˜²</del>çš„ Hackergame 2021 ç»ˆäºç»“æŸäº†_(:Ğ·ã€âˆ )_<br>åœ¨è¿™ä¸¢ä¸€ä¸ªæ€»ç»“å’Œ Writeup é“¾æ¥ã€‚</p>
<h2 id="Writeup"><a href="#Writeup" class="headerlink" title="Writeup"></a>Writeup</h2><ul>
<li><a href="/p/fd872e78.html">ã€ŒHackergame 2021ã€#1 Writup å¼€å±€ä¸Šåˆ†ç¯‡ 0</a><br>  ç­¾åˆ°ã€åå…­è¿›åˆ¶ã€ç”µæ³¢ã€çŒ«å’ªé—®ç­”ã€å–ç“œã€é€æ˜æ–‡ä»¶ã€æ—…è¡Œç…§ç‰‡</li>
<li><a href="/p/f54b44c.html">ã€ŒHackergame 2021ã€#2 Writup å¼€å±€ä¸Šåˆ†ç¯‡ 1</a><br>  å¤§ç åˆ€ã€å›¾ä¹‹ä¸Šã€èµ›åšå¨æˆ¿01ã€åŠ©è®°è¯1ã€pğŸ˜­q</li>
<li><a href="/p/f152ab1f.html">ã€ŒHackergame 2021ã€#3 Writup æŒç»­ç ´é˜²ç¯‡ 0</a><br>  Amnesia1ã€RSAã€LUKSã€MicroWorld</li>
<li><a href="/p/d11ec8ed.html">ã€ŒHackergame 2021ã€#4 Writup æŒç»­ç ´é˜²ç¯‡ 1</a><br>  é˜µåˆ—æ¢å¤ã€é©¬èµ›å…‹ã€minecRaftã€å¯†ç ç”Ÿæˆå™¨</li>
</ul>
<span id="more"></span>

<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>ç¬¬ä¸€æ¬¡å‚åŠ  Hackergameï¼Œå¤§æ¦‚ä¹Ÿç®—æ˜¯ç¬¬ä¸€æ¬¡å‚åŠ æ¯”è¾ƒæ­£å¼çš„ CTF æ¯”èµ›ã€‚</p>
<p>è¿™æ¬¡çš„æ—¶é—´ä¹Ÿæ¯”è¾ƒéš¾å—ï¼Œ10æœˆ23æ—¥å¼€å§‹ï¼Œç„¶è€Œå½“å¤©æœ‰ç®¡ä¹å›¢éŸ³ä¹ä¼šæ¼”å‡ºï¼Œè¦å…¨å¤©æ’ç»ƒã€‚24å·å»å¬äº†å¸ç–å®¤å†…ä¹å›¢çš„éŸ³ä¹ä¼šã€‚å‰©ä¸‹å·¥ä½œæ—¥çš„æ—¶é—´ä¹Ÿè¦ä¸Šè¯¾ï¼Œè¿˜è¦å¤ï¼ˆé¢„ï¼‰ä¹ å°æµ‹ã€‚<br>ä½†è¿˜æ˜¯æŠ½å‡ºå¾ˆé•¿æ—¶é—´æ¥æ‰“äº† Hackergameã€‚</p>
<p>ç»è¿‡ä¸ƒå¤©ï¼Œæ‹¿åˆ°äº†æµ™å¤§ç»„å†…ç¬¬ä¸‰ã€æ€»æ’è¡Œç¬¬äºŒåäºŒçš„æˆç»©<br><img src="/p/c05d7b7c/rank.jpg"><br>æ€»ä¹‹ï¼Œéå¸¸æ„Ÿè°¢é¼“åŠ±æˆ‘ï¼ˆ<del>æ‹‰å…¥å‘</del>ï¼‰çš„ GZTimeï¼Œæ„Ÿè°¢ä¸€ç›´ä¸Šåˆ†çš„ yyy å¤§ä½¬å’Œ Cage å­¦é•¿ç£ä¿ƒæˆ‘ç»§ç»­åšé¢˜ï¼ˆ<del>åˆ«å·å•¦</del>ï¼‰ï¼Œæ„Ÿè°¢çº³æ–°ç¾¤é‡Œæ´»è·ƒæ°”æ°›çš„å­¦é•¿ï¼ˆä¸æ„Ÿè°¢è†œï¼‰ï¼Œæ„Ÿè°¢å®¹å¿æˆ‘å‡Œæ™¨ä¸€ä¸¤ç‚¹åœ¨å¯å®¤åšé¢˜ã€ç¬¬äºŒå¤©æ—©ä¸Šè¢«ä¸€å †é—¹é“ƒåµé†’çš„å®¤å‹ï¼Œè¿˜è¦æ„Ÿè°¢æ²¡å‚åŠ æ¯”èµ›æ¥æš´è™æˆ‘çš„å›¾çµå¤§ä½¬ä»¬ï¼ˆï¼‰</p>
<p>å¼€èµ›çš„æ—¶å€™åˆšå¥½ä¹å›¢ä¸­åˆä¼‘æ¯ï¼Œäºæ˜¯åœ¨ä¼‘æ¯å®¤åšäº†å‡ é“é¢˜ï¼Œæ¥ç€ä¸€ä¸¤å¤©é™†ç»­æŠŠä¼šçš„æœ‰æ€è·¯çš„é¢˜åšäº†ã€‚<br>ç„¶åå°±å¼€å§‹äº†ç ´é˜²é˜¶æ®µï¼ˆï¼‰<br>ä¸€æ¯èŒ¶ï¼Œä¸€åŒ…çƒŸï¼Œä¸€é“é¢˜ç›®åšä¸€å¤©ï¼ˆx<br>åŸºæœ¬ä¸Šæ¯å¤©é™¤äº†ä¸Šè¯¾å†™ä½œä¸šçš„æ‰€æœ‰æ—¶é—´éƒ½æ¥æ‰“ hackergame äº†ï¼ˆ<del>ä¸­é—´åšé©¬èµ›å…‹ç ´é˜²çš„å¤œæ™šå‡ºå»é—²é€›äº†ä¸¤ä¸ªå°æ—¶</del>ï¼‰</p>
<p>æ€»ä¹‹æˆ‘ä¹Ÿæ‰å¤§ä¸€ï¼Œåˆšæ¥è§¦ CTF ä¸€ä¸ªå¤šæœˆï¼Œè¿™æ¬¡æ‰“å¾—ä¹ŸæŒºçˆ½ï¼Œä¸çŸ¥é“èƒ½ä¸èƒ½å€Ÿæ­¤æ··è¿› AAAï¼ˆé€ƒ </p>
<p>ä½“éªŒè‰¯å¥½ï¼Œä½†ä¸å®Œå…¨è‰¯å¥½ï¼Œä¸‹æ¬¡å†æ¥_(:Ğ·ã€âˆ )_</p>
<hr>
<p style="font-size: x-small; text-align: right;">å£°æ˜ï¼šè™½ç„¶æ€»ç»“å’Œ Writeup çš„åˆ›å»ºæ—¶é—´åœ¨æ¯”èµ›ç»“æŸå‰ï¼Œä½†å‡åœ¨æ¯”èµ›ç»“æŸåæ‰å‘å¸ƒåˆ°äº’è”ç½‘</p>]]></content>
      <categories>
        <category>Writeup</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>Writeup</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»•è¿‡ASTè§£æçš„pythonæ²™ç®±é€ƒé€¸æ–¹æ³•</title>
    <url>/p/6dee32d5.html</url>
    <content><![CDATA[<p>è¿™ç±»é¢˜æ˜¯åœ¨zjusec.comä¸Š ACTF 2019 åˆ†ç»„ä¸­chenyuanå‡ºçš„ä¸€ç³»åˆ—pythonæ²™ç®±é€ƒé€¸é¢˜ç›®ä¸­çœ‹åˆ°çš„<br>åœ¨ç½‘ä¸Šæœç´¢è²Œä¼¼ä¹Ÿåªèƒ½æœåˆ° <a href="https://infosecwriteups.com/tokyowesterns-ctf-4th-2018-writeup-part-5-6d699f07f71c">TokyoWesterns CTF 4th 2018</a> è¿™ä¸€æ¬¡æ¯”èµ›ä¸­çš„é¢˜ç›®</p>
<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>è¿™ç±»é¢˜ç›®ä¸åƒæ™®é€šçš„æ²™ç®±é€ƒé€¸ä¸€æ ·é€šè¿‡åˆ é™¤å†…ç½®å‡½æ•°å­—å…¸æˆ–è€…åˆ é™¤æŸäº›æ¨¡å—çš„å†…å®¹æ¥å®ç°<br>è€Œæ˜¯åœ¨è¾“å…¥å‘½ä»¤åå³ä½¿ç”¨pythonçš„ ast æ¨¡å—å¯¹å…¶è¿›è¡Œè¯­æ³•åˆ†æï¼Œåªè¦ä½¿ç”¨äº†æŸäº›ç¦æ­¢çš„æŠ½è±¡è¯­æ³•ï¼Œå°±æŠ›å‡ºå¼‚å¸¸å¯¼è‡´ç¨‹åºä¸­æ–­</p>
<span id="more"></span>

<p>å› ä¸ºå®ƒç›´æ¥ä½¿ç”¨ ast.parse åˆ†æäº†è¯­æ³•ï¼Œæ‰€ä»¥å¾ˆéš¾è’™æ··è¿‡å…³éª—è¿‡ astï¼Œè¿™æ—¶å°±éœ€è¦å¯»æ‰¾é¢˜ç›®ä¸­éå†è¯­æ³•æ ‘çš„æ¼æ´äº†</p>
<h2 id="é¢˜ç›®åˆ†æ"><a href="#é¢˜ç›®åˆ†æ" class="headerlink" title="é¢˜ç›®åˆ†æ"></a>é¢˜ç›®åˆ†æ</h2><p>å…ˆæ¥çœ‹çœ‹cyçš„pysandbox13ï¼Œè¿™ä¸ªæœ€ç»ˆç‰ˆçš„ASTæ£€æŸ¥ç»•è¿‡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dbgprint = sys.stderr.write</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Traversal</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node)</span><br><span class="line"></span><br><span class="line">    depth = -<span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv</span>(<span class="params">self, nodes</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(nodes, <span class="built_in">list</span>):</span><br><span class="line">            nodes = [nodes]</span><br><span class="line">        self.depth += <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> node <span class="keyword">in</span> nodes:</span><br><span class="line">            func = <span class="built_in">getattr</span>(self, <span class="string">&#x27;tisiv_&#x27;</span> + node.__class__.__name__, <span class="literal">None</span>)</span><br><span class="line">            <span class="keyword">if</span> func:</span><br><span class="line">                dbgprint(<span class="string">&quot; &quot;</span>*self.depth + <span class="string">&quot;tisiv&quot;</span>[::-<span class="number">1</span>] +<span class="string">&quot;\t&quot;</span>+ node.__class__.__name__+<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> func(node)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(node, ast.expr):</span><br><span class="line">                    <span class="keyword">raise</span> Exception(<span class="string">&quot;not allowed &quot;</span>+<span class="built_in">str</span>(node))</span><br><span class="line">        self.depth -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Call</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&quot;not allowed&quot;</span>)</span><br><span class="line">        self.tisiv(node.func)</span><br><span class="line">        self.tisiv(node.args)</span><br><span class="line">        self.tisiv(node.keywords)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Attribute</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&quot;not allowed&quot;</span>)</span><br><span class="line">        self.tisiv(node.value)</span><br><span class="line">        self.tisiv(node.attr)</span><br><span class="line">        self.tisiv(node.ctx)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Import</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&quot;not allowed&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Module</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.body)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_BoolOp</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.values)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_BinOp</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.left)</span><br><span class="line">        self.tisiv(node.right)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_UnaryOp</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.operand)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Lambda</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.body)</span><br><span class="line">        self.tisiv(node.args)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_IfExp</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.test)</span><br><span class="line">        self.tisiv(node.body)</span><br><span class="line">        self.tisiv(node.orelse)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Dict</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.keys)</span><br><span class="line">        self.tisiv(node.values)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Set</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.elts)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_ListComp</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.elt)</span><br><span class="line">        self.tisiv(node.generators)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_SetComp</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.elt)</span><br><span class="line">        self.tisiv(node.generators)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_DictComp</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.key)</span><br><span class="line">        self.tisiv(node.value)</span><br><span class="line">        self.tisiv(node.generators)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_GeneratorExp</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.elt)</span><br><span class="line">        self.tisiv(node.generators)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Yield</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.value)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Compare</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.left)</span><br><span class="line">        self.tisiv(node.comparators)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Repr</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.value)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Subscript</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.value)</span><br><span class="line">        self.tisiv(node.<span class="built_in">slice</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_List</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.elts)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Tuple</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.elts)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_Expr</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.value)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_JoinedStr</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        self.tisiv(node.values)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tisiv_NameConstant</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">Traversal(ast.parse(c))</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥è¯»å‡ºï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ª Traversal ç±»ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™å¯¹ä¼ å…¥çš„èŠ‚ç‚¹è°ƒç”¨ tisiv æ–¹æ³•ï¼Œå³å¯¹å…¶æ‰€æœ‰å­èŠ‚ç‚¹ç»§ç»­é€å±‚æ£€æŸ¥<br>å¦‚æœ tisiv_{è¯¥èŠ‚ç‚¹ç±»å} å·²ç»æœ‰äº†å­˜åœ¨çš„æ–¹æ³•ï¼Œå°±è°ƒç”¨å®ƒï¼Œåœ¨é‚£äº›æ–¹æ³•ä¸­åˆåˆ†åˆ«å¯¹å…¶å­èŠ‚ç‚¹è¿›è¡Œäº†æ£€æŸ¥<br>å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„æ–¹æ³•ï¼Œå°±æ£€æµ‹è¿™ä¸ªèŠ‚ç‚¹çš„è¯­æ³•ç±»å‹æ˜¯ä¸æ˜¯ ast.exprï¼Œå¦‚æœä¸æ˜¯å°±ç›´æ¥ç¦æ­¢</p>
<p>å†çœ‹ TokyoWesterns CTF 4th 2018 è¿™é“é¢˜ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check</span>(<span class="params">node</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(node, <span class="built_in">list</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">all</span>([check(n) <span class="keyword">for</span> n <span class="keyword">in</span> node])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        attributes = &#123;</span><br><span class="line">            <span class="string">&#x27;BoolOp&#x27;</span>: [<span class="string">&#x27;values&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;BinOp&#x27;</span>: [<span class="string">&#x27;left&#x27;</span>, <span class="string">&#x27;right&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;UnaryOp&#x27;</span>: [<span class="string">&#x27;operand&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;Lambda&#x27;</span>: [<span class="string">&#x27;body&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;IfExp&#x27;</span>: [<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;body&#x27;</span>, <span class="string">&#x27;orelse&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;Dict&#x27;</span>: [<span class="string">&#x27;keys&#x27;</span>, <span class="string">&#x27;values&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;Set&#x27;</span>: [<span class="string">&#x27;elts&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;ListComp&#x27;</span>: [<span class="string">&#x27;elt&#x27;</span>, <span class="string">&#x27;generators&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;SetComp&#x27;</span>: [<span class="string">&#x27;elt&#x27;</span>, <span class="string">&#x27;generators&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;DictComp&#x27;</span>: [<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>, <span class="string">&#x27;generators&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;GeneratorExp&#x27;</span>: [<span class="string">&#x27;elt&#x27;</span>, <span class="string">&#x27;generators&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;Yield&#x27;</span>: [<span class="string">&#x27;value&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;Compare&#x27;</span>: [<span class="string">&#x27;left&#x27;</span>, <span class="string">&#x27;comparators&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;Call&#x27;</span>: <span class="literal">False</span>, <span class="comment"># call is not permitted</span></span><br><span class="line">            <span class="string">&#x27;Repr&#x27;</span>: [<span class="string">&#x27;value&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;Num&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">            <span class="string">&#x27;Str&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">            <span class="string">&#x27;Attribute&#x27;</span>: <span class="literal">False</span>, <span class="comment"># attribute is also not permitted</span></span><br><span class="line">            <span class="string">&#x27;Subscript&#x27;</span>: [<span class="string">&#x27;value&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;Name&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">            <span class="string">&#x27;List&#x27;</span>: [<span class="string">&#x27;elts&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;Tuple&#x27;</span>: [<span class="string">&#x27;elts&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;Expr&#x27;</span>: [<span class="string">&#x27;value&#x27;</span>], <span class="comment"># root node </span></span><br><span class="line">            <span class="string">&#x27;comprehension&#x27;</span>: [<span class="string">&#x27;target&#x27;</span>, <span class="string">&#x27;iter&#x27;</span>, <span class="string">&#x27;ifs&#x27;</span>],</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> k, v <span class="keyword">in</span> attributes.items():</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">hasattr</span>(ast, k) <span class="keyword">and</span> <span class="built_in">isinstance</span>(node, <span class="built_in">getattr</span>(ast, k)):</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">isinstance</span>(v, <span class="built_in">bool</span>):</span><br><span class="line">                    <span class="keyword">return</span> v</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">all</span>([check(<span class="built_in">getattr</span>(node, attr)) <span class="keyword">for</span> attr <span class="keyword">in</span> v])</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    expr = sys.stdin.readline()</span><br><span class="line">    body = ast.parse(expr).body</span><br></pre></td></tr></table></figure>
<p>è¿™é“é¢˜ç›®çš„ä»£ç å°±æ›´åŠ æ˜ç¡®äº†ï¼Œé“ç†æ˜¯ç±»ä¼¼çš„</p>
<h2 id="ç»•è¿‡è¯­æ³•æ ‘æ£€æŸ¥"><a href="#ç»•è¿‡è¯­æ³•æ ‘æ£€æŸ¥" class="headerlink" title="ç»•è¿‡è¯­æ³•æ ‘æ£€æŸ¥"></a>ç»•è¿‡è¯­æ³•æ ‘æ£€æŸ¥</h2><p>æ­£å¦‚å‰é¢è¯´çš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾æ£€æŸ¥ç¨‹åºä¸­çš„æ¼æ´</p>
<h3 id="å¯»æ‰¾æ²¡æœ‰éå†åˆ°çš„å­èŠ‚ç‚¹"><a href="#å¯»æ‰¾æ²¡æœ‰éå†åˆ°çš„å­èŠ‚ç‚¹" class="headerlink" title="å¯»æ‰¾æ²¡æœ‰éå†åˆ°çš„å­èŠ‚ç‚¹"></a>å¯»æ‰¾æ²¡æœ‰éå†åˆ°çš„å­èŠ‚ç‚¹</h3><p>æˆ‘ä»¬å‘ç°ï¼Œåœ¨é¢˜ç›®çš„ç¨‹åºä¸­ï¼Œéƒ½æ˜¯æ‰‹åŠ¨ç¼–å†™äº†å¯¹æŸä¸ªæŠ½è±¡è¯­æ³•çš„å“ªäº›éƒ¨åˆ†è¿›è¡Œæ£€æµ‹ï¼Œæ‰€ä»¥å¯èƒ½å°±ä¼šå‡ºç°æŸä¸ªè¯­æ³•çš„æŸä¸ªéƒ¨åˆ†æ²¡è¢«æ£€æµ‹åˆ°çš„æƒ…å†µã€‚</p>
<p>è¿™æ—¶å€™å°±å¯ä»¥å»å’Œ <a href="https://docs.python.org/3/library/ast.html#abstract-grammar">ASTæ–‡æ¡£ä¸­æŠ½è±¡è¯­æ³•</a> å¯¹æ¯”ï¼Œæ–‡æ¡£ä¸­ç»™å‡ºçš„ ast.expr åŒ…å«äº†ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">expr</span> = <span class="type">BoolOp</span>(boolop op, expr* values)</span><br><span class="line">     | <span class="type">NamedExpr</span>(expr target, expr value)</span><br><span class="line">     | <span class="type">BinOp</span>(expr left, operator op, expr right)</span><br><span class="line">     | <span class="type">UnaryOp</span>(unaryop op, expr operand)</span><br><span class="line">     | <span class="type">Lambda</span>(arguments args, expr body)</span><br><span class="line">     | <span class="type">IfExp</span>(expr test, expr body, expr orelse)</span><br><span class="line">     | <span class="type">Dict</span>(expr* keys, expr* values)</span><br><span class="line">     | <span class="type">Set</span>(expr* elts)</span><br><span class="line">     | <span class="type">ListComp</span>(expr elt, comprehension* generators)</span><br><span class="line">     | <span class="type">SetComp</span>(expr elt, comprehension* generators)</span><br><span class="line">     | <span class="type">DictComp</span>(expr key, expr value, comprehension* generators)</span><br><span class="line">     | <span class="type">GeneratorExp</span>(expr elt, comprehension* generators)</span><br><span class="line">     <span class="comment">-- the grammar constrains where yield expressions can occur</span></span><br><span class="line">     | <span class="type">Await</span>(expr value)</span><br><span class="line">     | <span class="type">Yield</span>(expr? value)</span><br><span class="line">     | <span class="type">YieldFrom</span>(expr value)</span><br><span class="line">     <span class="comment">-- need sequences for compare to distinguish between</span></span><br><span class="line">     <span class="comment">-- x &lt; 4 &lt; 3 and (x &lt; 4) &lt; 3</span></span><br><span class="line">     | <span class="type">Compare</span>(expr left, cmpop* ops, expr* comparators)</span><br><span class="line">     | <span class="type">Call</span>(expr func, expr* args, keyword* keywords)</span><br><span class="line">     | <span class="type">FormattedValue</span>(expr value, int? conversion, expr? format_spec)</span><br><span class="line">     | <span class="type">JoinedStr</span>(expr* values)</span><br><span class="line">     | <span class="type">Constant</span>(constant value, string? kind)</span><br><span class="line"></span><br><span class="line">     <span class="comment">-- the following expression can appear in assignment context</span></span><br><span class="line">     | <span class="type">Attribute</span>(expr value, identifier attr, expr_context ctx)</span><br><span class="line">     | <span class="type">Subscript</span>(expr value, expr slice, expr_context ctx)</span><br><span class="line">     | <span class="type">Starred</span>(expr value, expr_context ctx)</span><br><span class="line">     | <span class="type">Name</span>(identifier id, expr_context ctx)</span><br><span class="line">     | <span class="type">List</span>(expr* elts, expr_context ctx)</span><br><span class="line">     | <span class="type">Tuple</span>(expr* elts, expr_context ctx)</span><br><span class="line"></span><br><span class="line">     <span class="comment">-- can appear only in Subscript</span></span><br><span class="line">     | <span class="type">Slice</span>(expr? lower, expr? upper, expr? step)</span><br></pre></td></tr></table></figure>
<p>æ¯”å¦‚ï¼ŒBinOp(expr left, operator op, expr right) è¡¨ç¤ºäº†äºŒå…ƒè¿ç®—è¿™ä¸ªè¯­æ³•ï¼Œleft è¡¨ç¤ºå·¦ä¾§çš„è¡¨è¾¾å¼ï¼Œop è¡¨ç¤ºäºŒå…ƒè¿ç®—ç¬¦ï¼Œright è¡¨ç¤ºå³ä¾§è¡¨è¾¾å¼ã€‚<br>åŒç† ListComp(expr elt, comprehension* generators) ä¸­ elt è¡¨ç¤ºå…¶ä¸­åˆ—è¡¨æ¨å¯¼çš„å…ƒç´ ï¼Œè€Œ generator åˆ™è¡¨ç¤ºç”Ÿæˆå™¨å­å¥</p>
<p>å†æ¥çœ‹ TWCTF è¿™é“é¢˜ï¼Œå®ƒçš„æ£€æŸ¥ä¸­å†™äº†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;Subscript&#x27;</span>: [<span class="string">&#x27;value&#x27;</span>],</span><br></pre></td></tr></table></figure>
<p>è€Œæ–‡æ¡£ä¸­ç»™çš„ç´¢å¼•è®¿é—®æ˜¯ Subscript(expr value, expr slice, expr_context ctx)</p>
<p>å› æ­¤å¯ä»¥å‘ç°ç¨‹åºå¹¶æ²¡æœ‰æ£€æµ‹ç´¢å¼•è®¿é—®ä¸­çš„åˆ‡ç‰‡ sliceï¼Œè¿™æ ·ä¾‹å¦‚ a[â€¦] ä¸­çš„ â€¦ éƒ¨åˆ†å°±ä¼šè¢«å…¨éƒ¨å¿½ç•¥<br>æ‰€ä»¥å°±å¯ä»¥åœ¨[]ä¸­è—ä¸€ä¸ªevalæ‰§è¡Œæˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½</p>
<h3 id="å¯»æ‰¾æ²¡æœ‰æ£€æŸ¥çš„èŠ‚ç‚¹"><a href="#å¯»æ‰¾æ²¡æœ‰æ£€æŸ¥çš„èŠ‚ç‚¹" class="headerlink" title="å¯»æ‰¾æ²¡æœ‰æ£€æŸ¥çš„èŠ‚ç‚¹"></a>å¯»æ‰¾æ²¡æœ‰æ£€æŸ¥çš„èŠ‚ç‚¹</h3><p>å†æ¥çœ‹ zjusec è¿™é“é¢˜ï¼Œé€šè¿‡å¯¹æ¯”å¯ä»¥å‘ç°æ‰€æœ‰æ£€æµ‹çš„èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¹Ÿéƒ½éå†äº†<br>ä½†æ˜¯å†ç»†çœ‹å¯ä»¥å‘ç° FormattedValue è¿™ä¸ªèŠ‚ç‚¹å¹¶æ²¡æœ‰åœ¨é¢˜ç›®ä»£ç é‡Œå‡ºç°</p>
<p>è€Œä¸” ast.FormattedValue å±äº ast.exprï¼Œæ‰€ä»¥å®ƒæ—¢ä¸ä¼šè¢«æ£€æŸ¥ï¼Œä¹Ÿä¸ä¼šæŠ›å‡ºå¼‚å¸¸<br>çœ‹åå­—åƒæ˜¯ f-string ç›¸å…³ï¼Œå¯ä»¥ dump ä¸€ä¸‹çœ‹çœ‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ast.dump(ast.parse(<span class="string">&quot;f&#x27;&#123;x&#125;&#x27;&quot;</span>))</span><br><span class="line"><span class="string">&quot;Module(body=[Expr(value=JoinedStr(values=[FormattedValue(value=Name(id=&#x27;x&#x27;, ctx=Load()), conversion=-1, format_spec=None)]))], type_ignores=[])&quot;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œf-string æ˜¯ JoinedStrï¼Œè€Œ FormattedValue æ˜¯å…¶ä¸­è¢«æ ¼å¼åŒ–çš„éƒ¨åˆ†</p>
<p>æ‰€ä»¥å°±å¯ä»¥å‘ f-string çš„ {} éƒ¨åˆ†è— eval æ¥å¹²åäº‹äº†</p>
<h3 id="å…¶ä»–æ¼æ´"><a href="#å…¶ä»–æ¼æ´" class="headerlink" title="å…¶ä»–æ¼æ´"></a>å…¶ä»–æ¼æ´</h3><p>è¿™ä¸ªæ˜¯ pysandbox12 çš„ä¸€ç§è§£æ³•<br>pythonä¸­çš„è¯­æ³•ä¸ä»…æœ‰ ast.expr ä¸€ç§ï¼Œè€Œä¸”å¾ˆç‰¹åˆ«çš„æ˜¯ï¼Œåˆ—è¡¨æ¨å¯¼ ListComp çš„ç”Ÿæˆå™¨å­å¥å¹¶ä¸æ˜¯ ast.exprï¼Œè€Œæ˜¯ ast.comprehension</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ast.dump(ast.parse(<span class="string">&quot;[x for x in range(n)]&quot;</span>))</span><br><span class="line"><span class="string">&quot;Module(body=[Expr(value=ListComp(elt=Name(id=&#x27;x&#x27;, ctx=Load()), generators=[comprehension(target=Name(id=&#x27;x&#x27;, ctx=Store()), iter=Call(func=Name(id=&#x27;range&#x27;, ctx=Load()), args=[Name(id=&#x27;n&#x27;, ctx=Load())], keywords=[]), ifs=[], is_async=0)]))], type_ignores=[])&quot;</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ pysandbox13 è¿™æ ·æ’é™¤äº† ast.expr ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(node, ast.expr):</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">&quot;not allowed &quot;</span>+<span class="built_in">str</span>(node))</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯12é¢˜ä¸­å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥ ast.comprehension è¿™ä¸ªç±»å‹å®Œå…¨æ²¡æœ‰è¢«æ£€æŸ¥<br>å› æ­¤ç›´æ¥å‘ç”Ÿæˆå™¨è¡¨è¾¾å¼ä¸­æ’å…¥åä¸œè¥¿å³å¯ï¼š</p>
<ul>
<li><code>[x for x in [eval(...)]]</code></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://infosecwriteups.com/tokyowesterns-ctf-4th-2018-writeup-part-5-6d699f07f71c">TokyoWesterns CTF 4th 2018 Writeup â€” Part 5</a></li>
<li><a href="https://docs.python.org/3/library/ast.html">Documentation of ast</a></li>
</ul>
]]></content>
      <tags>
        <tag>python</tag>
        <tag>CTF</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLearn Haskellã€#0 æ€»ç« </title>
    <url>/p/b3ca5c18.html</url>
    <content><![CDATA[<p style="text-align: center;">å­¦ä¹ ä¸€é—¨æ–°è¯­è¨€ä¹‹Haskell</p>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¹‹å‰ä¸€ç›´å¾ˆå¥½å¥‡å‡½æ•°å¼ç¼–ç¨‹ï¼Œè§‰å¾—HaskellæŒºæœ‰æ„æ€çš„ï¼Œæƒ³å­¦å­¦<br>ç°åœ¨é«˜è€ƒå®Œæ”¾å‡äº†ï¼Œå¯ä»¥æœ‰æ—¶é—´å…·ä½“å­¦ä¸€å­¦äº†<br>è¿™é‡Œæ²¡æœ‰Haskellçš„æ•™ç¨‹ï¼Œåªæœ‰æˆ‘åœ¨å­¦ä¹ Haskellæ—¶å†™ä¸‹çš„ç¬”è®°</p>
<span id="more"></span>

<div style="text-align: center;">

<p style="font-size: 1.3rem; font-weight: bold;">ç›®å½•</p>

<p>#0&nbsp;|&nbsp;<a href="/p/b3ca5c18.html">æ€»ç« </a>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<br>#1&nbsp;|&nbsp;<a href="/p/d63b5b5f.html">åŸºç¡€è¯­æ³•ä¸å‡½æ•°</a>&emsp;&emsp;&emsp;<br>#2&nbsp;|&nbsp;<a href="/p/53e482b7.html">é«˜é˜¶å‡½æ•°ä¸æ¨¡å—</a>&emsp;&emsp;&emsp;<br>#3&nbsp;|&nbsp;<a href="/p/369b7e08.html">ç±»å‹ä¸ç±»å‹ç±»</a>&emsp;&emsp;&emsp;&emsp;<br>#4&nbsp;|&nbsp;<a href="/p/a5bbe48a.html">è¾“å…¥è¾“å‡ºä¸æ–‡ä»¶</a>&emsp;&emsp;&emsp;<br>#5&nbsp;|&nbsp;<a href="/p/290ecb74.html">å‡½å­ã€åº”ç”¨å‡½å­ä¸å•å­</a><br>#6&nbsp;|&nbsp;<a href="/p/d4bb2633.html">åŠç¾¤ä¸å¹ºåŠç¾¤</a>&emsp;&emsp;&emsp;&emsp;<br>#7&nbsp;|&nbsp;<a href="/p/68ef8146.html">ä¸€äº›å…¶å®ƒç±»å‹ç±»</a>&emsp;&emsp;&emsp;<br>#A&nbsp;|&nbsp;<a href="/p/96c32eae.html">Haskellä¸èŒƒç•´è®º</a>&emsp;&nbsp;&thinsp;</p>
</div>

<h2 id="åŸºç¡€è¿ç®—"><a href="#åŸºç¡€è¿ç®—" class="headerlink" title="åŸºç¡€è¿ç®—"></a>åŸºç¡€è¿ç®—</h2><ul>
<li><code>+ - * / ()</code>ï¼šåŠ å‡ä¹˜é™¤</li>
<li><code>div</code>ï¼šæ•´é™¤</li>
<li><code>mod</code>ï¼šå–æ¨¡</li>
<li><code>True False</code>ï¼šå¸ƒå°”å€¼</li>
<li><code>|| &amp;&amp; not</code>ï¼šæˆ–ä¸”é</li>
<li><code>==</code>ï¼šæ¡ä»¶åˆ¤æ–­ï¼Œç›¸ç­‰</li>
<li><code>/=</code>ï¼šæ¡ä»¶åˆ¤æ–­ï¼Œä¸ç­‰</li>
</ul>
<h3 id="å‡½æ•°è°ƒç”¨"><a href="#å‡½æ•°è°ƒç”¨" class="headerlink" title="å‡½æ•°è°ƒç”¨"></a>å‡½æ•°è°ƒç”¨</h3><p>Haskellä¸­è°ƒç”¨å‡½æ•°ä¸åŠ æ‹¬å·ï¼Œå…ˆå†™å‡ºå‡½æ•°åï¼Œç„¶åé€ä¸ªåˆ—å‡ºå‚æ•°ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; max <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>å‰ç¼€ï¼ˆprefixï¼‰å‡½æ•°ä¸ä¸­ç¼€ï¼ˆinfixï¼‰å‡½æ•°è½¬æ¢ï¼š</p>
<ul>
<li>å¯¹å‰ç¼€å‡½æ•°åŠ <code>``</code>ä½¿å…¶å˜æˆä¸­ç¼€å‡½æ•°</li>
<li>å¯¹ä¸­ç¼€å‡½æ•°åŠ <code>()</code>ä½¿å…¶å˜æˆå‰ç¼€å‡½æ•°</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="number">4</span> `div` <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="number">1</span> `max` <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+) <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="title">ghci</span>&gt; (||) <span class="type">True</span> <span class="type">False</span></span><br><span class="line"><span class="type">True</span></span><br></pre></td></tr></table></figure>

<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>åˆ—è¡¨æ˜¯Haskellä¸­å¾ˆå¸¸è§çš„æ•°æ®ç±»å‹ï¼Œå’ŒPythonä¸­ä¸åŒï¼ŒHaskellä¸­çš„åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯åŒä¸€ä¸ªç±»å‹ã€‚</p>
<p>ä»¥ä¸‹æ˜¯åˆ—è¡¨å¸¸ç”¨çš„å‡½æ•°ï¼š</p>
<ul>
<li><code>(++)</code> :: [a] -&gt; [a] -&gt; [a]ï¼šåˆå¹¶ä¸¤ä¸ªåˆ—è¡¨</li>
<li><code>(:)</code> :: a -&gt; [a] -&gt; [a]ï¼šå°†å•ä¸ªå…ƒç´ å¹¶å…¥åˆ—è¡¨ã€‚[1, 2, 3]æ˜¯1:2:3:[]çš„è¯­æ³•ç³–</li>
<li><code>(!!)</code> :: [a] -&gt; Int -&gt; aï¼šé€šè¿‡ç´¢å¼•å–å‡ºæŸä¸ªä½ç½®ä¸Šçš„å…ƒç´ ã€‚a !! 1ç›¸å½“äºPythonä¸­çš„a[1]</li>
<li><code>head</code> :: [a] -&gt; aï¼šè¿”å›åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li>
<li><code>tail</code> :: [a] -&gt; [a]ï¼šè¿”å›åˆ—è¡¨ä¸­é™¤å»ç¬¬ä¸€ä¸ªå…ƒç´ åçš„åˆ—è¡¨ï¼ˆè‹¥åªæœ‰ä¸€ä¸ªå…ƒç´ åˆ™è¿”å›ç©ºåˆ—è¡¨[]ï¼‰</li>
<li><code>last</code> :: [a] -&gt; aï¼šè¿”å›åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </li>
<li><code>init</code> :: [a] -&gt; [a]ï¼šè¿”å›åˆ—è¡¨ä¸­é™¤å»æœ€åä¸€ä¸ªå…ƒç´ åçš„åˆ—è¡¨</li>
<li><code>length</code> :: Foldable t =&gt; t a -&gt; Intï¼šè¿”å›åˆ—è¡¨çš„é•¿åº¦</li>
<li><code>null</code> :: Foldable t =&gt; t a -&gt; Boolï¼šè¿”å›åˆ—è¡¨æ˜¯å¦ä¸ºç©º</li>
<li><code>reverse</code> :: [a] -&gt; [a]ï¼šè¿”å›ç¿»è½¬åçš„åˆ—è¡¨</li>
<li><code>take</code> :: Int -&gt; [a] -&gt; [a]ï¼šè¿”å›åˆ—è¡¨açš„å‰nä¸ªå…ƒç´ çš„åˆ—è¡¨(take n a)</li>
<li><code>drop</code> :: Int -&gt; [a] -&gt; [a]ï¼šè¿”å›åˆ—è¡¨aä¸­é™¤å»å‰nä¸ªå…ƒç´ åçš„åˆ—è¡¨(drop n a)</li>
<li><code>maximum</code> :: (Foldable t, Ord a) =&gt; t a -&gt; aï¼šè¿”å›åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼</li>
<li><code>minimum</code> :: (Foldable t, Ord a) =&gt; t a -&gt; aï¼šè¿”å›åˆ—è¡¨ä¸­çš„æœ€å°å€¼</li>
<li><code>sum</code> :: (Foldable t, Num a) =&gt; t a -&gt; aï¼šè¿”å›åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œ</li>
<li><code>product</code> :: (Foldable t, Num a) =&gt; t a -&gt; aï¼šè¿”å›åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„ç§¯</li>
<li><code>elem</code> :: (Foldable t, Eq a) =&gt; t a -&gt; Boolï¼šåˆ¤æ–­å€¼næ˜¯å¦åœ¨åˆ—è¡¨aä¸­(  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">elem</span> n a</span><br><span class="line"><span class="comment">-- æˆ–</span></span><br><span class="line"><span class="title">n</span> `elem` a <span class="comment">--ç”¨``åŒ…ä¸Šå¯ä»¥å˜æˆä¸­ç¼€å‡½æ•°ä½¿ç”¨</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Texas-ranges"><a href="#Texas-ranges" class="headerlink" title="Texas ranges"></a>Texas ranges</h3><p>ä½¿ç”¨<code>..</code>å¯ä»¥è¡¨ç¤ºå‡ºèŒƒå›´å¹¶è‡ªåŠ¨æ¨å¯¼ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span> .. <span class="number">10</span>]  </span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; [&#x27;a&#x27; .. &#x27;z&#x27;]  </span><br><span class="line"><span class="string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; [&#x27;<span class="type">K&#x27;</span> .. &#x27;<span class="type">Z&#x27;</span>]  </span><br><span class="line"><span class="string">&quot;KLMNOPQRSTUVWXYZ&quot;</span> </span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">2</span>, <span class="number">4</span> .. <span class="number">20</span>]  </span><br><span class="line">[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">14</span>,<span class="number">16</span>,<span class="number">18</span>,<span class="number">20</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">3</span>, <span class="number">6</span> .. <span class="number">20</span>]  </span><br><span class="line">[<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">18</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">5</span>, <span class="number">4</span> .. <span class="number">1</span>]</span><br><span class="line">[<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ç”¨æ¥ç”Ÿæˆæ— ç©·åˆ—è¡¨ï¼Œå¦‚[1..]ã€[1, 3..]ã€‚åŒæ—¶ä¹Ÿæœ‰å‡½æ•°å¯ä»¥ç”Ÿæˆæ— ç©·åˆ—è¡¨ï¼š</p>
<ul>
<li><code>cycle</code> :: [a] -&gt; [a]ï¼šå°†åŸåˆ—è¡¨ä¸æ–­å¾ªç¯ç”Ÿæˆæ— ç©·åˆ—è¡¨</li>
<li><code>repeat</code> :: a -&gt; [a]ï¼šå°†ä¼ å…¥çš„å€¼ä¸æ–­é‡å¤ç”Ÿæˆæ— ç©·åˆ—è¡¨<ul>
<li><code>replicate</code> :: Int -&gt; a -&gt; [a]ï¼šå°†å€¼aé‡å¤næ¬¡ï¼Œè¿”å›ç”Ÿæˆçš„åˆ—è¡¨(replicate n a)</li>
</ul>
</li>
</ul>
<h3 id="List-comprehension"><a href="#List-comprehension" class="headerlink" title="List comprehension"></a>List comprehension</h3><p>Haskellä¸­ä¹Ÿæœ‰åˆ—è¡¨æ¨å¯¼ï¼Œå½¢å¼æ˜¯ä¸€ä¸ªä¸­æ‹¬å·ï¼Œå·¦ä¾§ä¸ºè¡¨è¾¾å¼ï¼Œå³ä¾§ä¸ºå˜é‡çš„èŒƒå›´å’Œçº¦æŸæ¡ä»¶</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [x * <span class="number">2</span> | x &lt;- [<span class="number">1</span> .. <span class="number">10</span>]]  </span><br><span class="line">[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">14</span>,<span class="number">16</span>,<span class="number">18</span>,<span class="number">20</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; [x * <span class="number">2</span> | x &lt;- [<span class="number">1</span> .. <span class="number">10</span>], x * <span class="number">2</span> &gt;= <span class="number">12</span>]  </span><br><span class="line">[<span class="number">12</span>,<span class="number">14</span>,<span class="number">16</span>,<span class="number">18</span>,<span class="number">20</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [ x | x &lt;- [<span class="number">50</span> .. <span class="number">100</span>], x `mod` <span class="number">7</span> == <span class="number">3</span>]  </span><br><span class="line">[<span class="number">52</span>,<span class="number">59</span>,<span class="number">66</span>,<span class="number">73</span>,<span class="number">80</span>,<span class="number">87</span>,<span class="number">94</span>]   </span><br><span class="line"><span class="title">ghci</span>&gt; [x * y | x &lt;- [<span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>], y &lt;- [<span class="number">8</span>, <span class="number">10</span>, <span class="number">11</span>]]  </span><br><span class="line">[<span class="number">16</span>,<span class="number">20</span>,<span class="number">22</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">55</span>,<span class="number">80</span>,<span class="number">100</span>,<span class="number">110</span>]</span><br></pre></td></tr></table></figure>

<h2 id="Tuple"><a href="#Tuple" class="headerlink" title="Tuple"></a>Tuple</h2><p>Haskellä¸­çš„å…ƒç»„å¯ä»¥æœ‰ä¸åŒé•¿åº¦ï¼Œå…ƒç´ å¯ä»¥æœ‰ä¸åŒç±»å‹ã€‚å¹¶ä¸”ä¸€ä¸ªå…ƒç»„çš„ç±»å‹ç”±å…¶ä¸­æ‰€æœ‰å…ƒç´ çš„ç±»å‹å…±åŒå†³å®šã€‚å®ƒçš„å¸¸ç”¨å‡½æ•°ï¼š</p>
<ul>
<li><code>fst</code> :: (a, b) -&gt; aï¼šè¿”å›å«æœ‰ä¸¤ä¸ªå…ƒç´ å…ƒç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li>
<li><code>snd</code> :: (a, b) -&gt; bï¼šè¿”å›å«æœ‰ä¸¤ä¸ªå…ƒç´ å…ƒç»„ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ </li>
<li><code>zip</code> :: [a] -&gt; [b] -&gt; [(a, b)]ï¼šæ¥æ”¶ä¸¤ä¸ªåˆ—è¡¨ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¾æ¬¡å°†ä¸¤ä¸ªåˆ—è¡¨ä¸­å…ƒç´ é…å¯¹æˆçš„äºŒå…ƒç»„</li>
</ul>
<h2 id="Syntax-in-Functions"><a href="#Syntax-in-Functions" class="headerlink" title="Syntax in Functions"></a>Syntax in Functions</h2><p>å‡½æ•°å¯ä»¥ç›´æ¥å®šä¹‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">plus</span> x y = x + y</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶Haskellä¼šè‡ªåŠ¨æ¨æ–­å‡½æ•°çš„ç±»å‹ä¸º(Num a) =&gt; a -&gt; a -&gt; aã€‚ä½†æ˜¯æœ€å¥½åœ¨å®šä¹‰å‡½æ•°å‰å£°æ˜å‡½æ•°çš„ç±»å‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">plus</span> :: (<span class="type">Num</span> a) =&gt; a -&gt; a -&gt; a</span><br><span class="line"><span class="title">plus</span> x y = x + y</span><br></pre></td></tr></table></figure>

<h3 id="Pattern-matching"><a href="#Pattern-matching" class="headerlink" title="Pattern matching"></a>Pattern matching</h3><p>å®šä¹‰å‡½æ•°æ—¶å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…è¯­æ³•ã€‚è¿è¡Œæ—¶ä¾æ¬¡å°†è¾“å…¥ä¸ç»™å‡ºçš„æ¨¡å¼ç›¸åŒ¹é…ï¼Œå¦‚æœåŒ¹é…ï¼Œå°±æ‰§è¡Œå¯¹åº”æ“ä½œï¼›ä¸åŒ¹é…ï¼Œå°±ç»§ç»­ä¸ä¸‹ä¸€ä¸ªæ¨¡å¼ç›¸åŒ¹é…ï¼Œç›´åˆ°åŒ¹é…æˆåŠŸï¼Œä¹Ÿå› æ­¤ï¼Œæœ€åå¿…é¡»è¦ç»™å‡ºä¸€ç§é€šç”¨çš„åŒ¹é…æ¥æ¥æ”¶ä¸ç»™å‡ºæ¨¡å¼å…¨ä¸åŒ¹é…çš„è¾“å…¥ã€‚å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">factorial</span> :: (<span class="type">Integral</span> a) =&gt; a -&gt; a  </span><br><span class="line"><span class="title">factorial</span> <span class="number">0</span> = <span class="number">1</span>  </span><br><span class="line"><span class="title">factorial</span> n = n * factorial (n - <span class="number">1</span>)  </span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">first</span> :: (a, b, c) -&gt; a  </span><br><span class="line"><span class="title">first</span> (x, _, _) = x  </span><br><span class="line">  </span><br><span class="line"><span class="title">second</span> :: (a, b, c) -&gt; b  </span><br><span class="line"><span class="title">second</span> (_, y, _) = y  </span><br><span class="line">  </span><br><span class="line"><span class="title">third</span> :: (a, b, c) -&gt; c  </span><br><span class="line"><span class="title">third</span> (_, _, z) = z  </span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>_</code>è¡¨ç¤ºä»»ä½•å€¼ï¼Œä¸”ä¸å…³å¿ƒå®ƒçš„å†…å®¹ï¼Œåªæ˜¯ç”¨æ¥å ä½</p>
<p>åˆ—è¡¨çš„(:)æ“ä½œä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œæ¨¡å¼åŒ¹é…ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">head&#x27;</span> :: [a] -&gt; a  </span><br><span class="line"><span class="title">head&#x27;</span> [] = error <span class="string">&quot;Can&#x27;t call head on an empty list, dummy!&quot;</span>  </span><br><span class="line"><span class="title">head&#x27;</span> (x:_) = x</span><br><span class="line"></span><br><span class="line"><span class="title">sum&#x27;</span> :: (<span class="type">Num</span> a) =&gt; [a] -&gt; a  </span><br><span class="line"><span class="title">sum&#x27;</span> [] = <span class="number">0</span>  </span><br><span class="line"><span class="title">sum&#x27;</span> (x:xs) = x + sum&#x27; xs  </span><br></pre></td></tr></table></figure>
<p>ä½†(++)æ“ä½œä¸å¯ä»¥ç”¨æ¥æ¨¡å¼åŒ¹é…</p>
<p>åœ¨é’ˆå¯¹åˆ—è¡¨è¿›è¡Œæ¨¡å¼åŒ¹é…æ—¶ï¼Œå¦‚æœåŒæ—¶éœ€è¦æ•´ä¸ªåˆ—è¡¨ã€åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå€¼ã€åˆ—è¡¨é™¤ç¬¬ä¸€ä¸ªå€¼å¤–çš„å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨<code>xs@(q:qs)</code>ã€‚æ¯”å¦‚[1, 2, 3]é€šè¿‡<code>xs@(q:qs)</code>åŒ¹é…åï¼Œxsä¸º[1, 2, 3]ï¼Œqä¸º1ï¼Œqsä¸º[2, 3]</p>
<h3 id="Guard-syntax"><a href="#Guard-syntax" class="headerlink" title="Guard syntax"></a>Guard syntax</h3><p>åœ¨å‡½æ•°çš„å®šä¹‰ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®ˆå«ï¼ˆguardï¼‰è¯­æ³•ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">max&#x27;</span> :: (<span class="type">Ord</span> a) =&gt; a -&gt; a -&gt; a  </span><br><span class="line"><span class="title">max&#x27;</span> a b   </span><br><span class="line">    | a &gt; b     = a  </span><br><span class="line">    | otherwise = b </span><br></pre></td></tr></table></figure>
<p>å…ˆç»™å‡ºä¼ å…¥çš„å‚æ•°å˜é‡ï¼Œç„¶åä¸‹ä¸€è¡Œç¼©è¿›ååŠ |ï¼Œ|åé¢ç­‰å·å‰è¡¨ç¤ºè¿›è¡Œçš„åˆ¤æ–­ï¼Œå¦‚æœä¸ºTrueåˆ™è¿”å›è¿™ä¸ªç­‰å·åé¢çš„å€¼ï¼›å¦‚æœä¸ºFalseåˆ™ç»§ç»­åˆ¤æ–­ä¸‹ä¸€è¡Œï¼Œç›´åˆ°otherwise</p>
<h3 id="Case-expressions"><a href="#Case-expressions" class="headerlink" title="Case expressions"></a>Case expressions</h3><p>åœ¨å‡½æ•°çš„å®šä¹‰ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨caseè¡¨è¾¾å¼æ¥é…åˆæ¨¡å¼åŒ¹é…ä½¿ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">case</span> expression <span class="keyword">of</span> pattern -&gt; result  </span><br><span class="line">                   pattern -&gt; result</span><br><span class="line">                   ...  </span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">head&#x27;</span> :: [a] -&gt; a  </span><br><span class="line"><span class="title">head&#x27;</span> [] = error <span class="string">&quot;No head for empty lists!&quot;</span>  </span><br><span class="line"><span class="title">head&#x27;</span> (x:_) = x  </span><br><span class="line"><span class="comment">-- ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="title">head&#x27;</span> :: [a] -&gt; a  </span><br><span class="line"><span class="title">head&#x27;</span> xs = <span class="keyword">case</span> xs <span class="keyword">of</span> [] -&gt; error <span class="string">&quot;No head for empty lists!&quot;</span>  </span><br><span class="line">                      (x:_) -&gt; x  </span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">describeList</span> :: [a] -&gt; <span class="type">String</span>  </span><br><span class="line"><span class="title">describeList</span> xs = <span class="string">&quot;The list is &quot;</span> ++ <span class="keyword">case</span> xs <span class="keyword">of</span> [] -&gt; <span class="string">&quot;empty.&quot;</span>  </span><br><span class="line">                                               [x] -&gt; <span class="string">&quot;a singleton list.&quot;</span>   </span><br><span class="line">                                               xs -&gt; <span class="string">&quot;a longer list.&quot;</span>  </span><br><span class="line"><span class="comment">-- ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="title">describeList</span> :: [a] -&gt; <span class="type">String</span>  </span><br><span class="line"><span class="title">describeList</span> xs = <span class="string">&quot;The list is &quot;</span> ++ what xs  </span><br><span class="line">    <span class="keyword">where</span> what [] = <span class="string">&quot;empty.&quot;</span>  </span><br><span class="line">          what [x] = <span class="string">&quot;a singleton list.&quot;</span>  </span><br><span class="line">          what xs = <span class="string">&quot;a longer list.&quot;</span> </span><br></pre></td></tr></table></figure>

<h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><p>å£°æ˜åœ¨å‡½æ•°å®šä¹‰ä¸­è¦ä½¿ç”¨çš„å±€éƒ¨å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨whereå…³é”®å­—ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">initials</span> :: <span class="type">String</span> -&gt; <span class="type">String</span> -&gt; <span class="type">String</span>  </span><br><span class="line"><span class="title">initials</span> firstname lastname = [f] ++ <span class="string">&quot;. &quot;</span> ++ [l] ++ <span class="string">&quot;.&quot;</span>  </span><br><span class="line">    <span class="keyword">where</span> (f:_) = firstname  </span><br><span class="line">          (l:_) = lastname  </span><br></pre></td></tr></table></figure>
<p>åœ¨whereä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ¨¡å¼åŒ¹é…</p>
<h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><p><code>let &lt;bindings&gt; in &lt;expression&gt;</code>è¯­æ³•å¯ä»¥åœ¨å‡½æ•°çš„å®šä¹‰ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨æ™®é€šç®—å¼æˆ–åˆ—è¡¨ä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">cylinder</span> :: (<span class="type">RealFloat</span> a) =&gt; a -&gt; a -&gt; a  </span><br><span class="line"><span class="title">cylinder</span> r h = </span><br><span class="line">    <span class="keyword">let</span> sideArea = <span class="number">2</span> * pi * r * h  </span><br><span class="line">        topArea = pi * r ^<span class="number">2</span>  </span><br><span class="line">    <span class="keyword">in</span>  sideArea + <span class="number">2</span> * topArea  </span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="number">4</span> * (<span class="keyword">let</span> a = <span class="number">9</span> <span class="keyword">in</span> a + <span class="number">1</span>) + <span class="number">2</span>  </span><br><span class="line"><span class="number">42</span> </span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="keyword">let</span> square x = x * x <span class="keyword">in</span> (square <span class="number">5</span>, square <span class="number">3</span>, square <span class="number">2</span>)]  </span><br><span class="line">[(<span class="number">25</span>,<span class="number">9</span>,<span class="number">4</span>)] </span><br></pre></td></tr></table></figure>

<h3 id="if-statement"><a href="#if-statement" class="headerlink" title="if statement"></a>if statement</h3><p>Haskellä¸­çš„ifè¯­å¥ä¸ºï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">if</span> ... <span class="keyword">then</span> ...</span><br><span class="line"><span class="title">else</span> ...</span><br><span class="line"><span class="comment">-- or if ... then ... else ...</span></span><br><span class="line"><span class="comment">-- or</span></span><br><span class="line"><span class="title">if</span> ... <span class="keyword">then</span> ...</span><br><span class="line"><span class="title">else</span> <span class="keyword">if</span> ... <span class="keyword">then</span> ...</span><br><span class="line"><span class="title">else</span> ...</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æœ€åä¸€ä¸ªelseæ— è®ºå¦‚ä½•ä¹Ÿä¸å¯ä»¥çœå»</p>
<h2 id="Higher-Order-Functions"><a href="#Higher-Order-Functions" class="headerlink" title="Higher Order Functions"></a>Higher Order Functions</h2><h3 id="Currying"><a href="#Currying" class="headerlink" title="Currying"></a>Currying</h3><p>Haskellä¸­çš„å‡½æ•°æ˜¯æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰çš„ï¼Œå¯ä»¥çœ‹ä½œæ‰€æœ‰å‡½æ•°éƒ½åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè€Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°å®é™…ä¸Šæ˜¯è¿™ä¸ªå‡½æ•°æ¥æ”¶äº†ç¬¬ä¸€ä¸ªå‚æ•°åè¿”å›äº†ä¸€ä¸ªæ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç„¶åç”¨è¿™ä¸ªå‡½æ•°æ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿”å›æœ€ç»ˆçš„ç»“æœã€‚æ¯”å¦‚maxå‡½æ•°ï¼Œå®ƒçš„ç±»å‹ç­¾åæ˜¯ï¼š</p>
<p style="text-align: center;">max :: Ord a => a -> a -> a</p>

<p>å¯ä»¥çœ‹æˆa -&gt; (a -&gt; a)ï¼Œå³æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç±»å‹ä¸ºa -&gt; açš„å‡½æ•°ã€‚æ¯”å¦‚max 1çš„ç±»å‹ç­¾åæ˜¯ï¼š</p>
<p style="text-align: center;">max 1 :: (Ord a, Num a) => a -> a</p>

<p>å› æ­¤max 1 2ï¼Œä¹Ÿå°±ç­‰åŒäº(max 1) 2ï¼Œå³å°†å‡½æ•°max 1åº”ç”¨åœ¨æ•°å­—2ä¸Š</p>
<p>åŒæ—¶ï¼Œå‡½æ•°ä¹Ÿå¯ä»¥æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå‚æ•°æœ‰å‡½æ•°çš„å‡½æ•°å°±è¢«ç§°ä¸ºé«˜é˜¶å‡½æ•°ï¼ˆHigher Order Functionsï¼‰</p>
<h3 id="ä¸€äº›é«˜é˜¶å‡½æ•°"><a href="#ä¸€äº›é«˜é˜¶å‡½æ•°" class="headerlink" title="ä¸€äº›é«˜é˜¶å‡½æ•°"></a>ä¸€äº›é«˜é˜¶å‡½æ•°</h3><h4 id="zipWith"><a href="#zipWith" class="headerlink" title="zipWith"></a>zipWith</h4><p style="text-align: center;">zipWith :: (a -> b -> c) -> [a] -> [b] -> [c]</p>

<p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ¥æ”¶ä¸¤ä¸ªåˆ—è¡¨ï¼Œå°†å…¶å¯¹åº”å…ƒç´ ä¼ å…¥æ¥æ”¶çš„å‡½æ•°ä¸­ï¼Œå¾—åˆ°çš„ç»“æœç»„æˆä¸€ä¸ªæ–°çš„åˆ—è¡¨ã€‚å¦‚æœä¸¤ä¸ªä¼ å…¥çš„åˆ—è¡¨é•¿åº¦ä¸åŒï¼Œä»¥æœ€çŸ­çš„åˆ—è¡¨ä¸ºå‡†ï¼Œé•¿åˆ—è¡¨ä¸­è¶…å‡ºçš„å…ƒç´ çœç•¥ã€‚ç”¨ä¾‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; zipWith (+) [<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>] [<span class="number">2</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">3</span>]  </span><br><span class="line">[<span class="number">6</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">9</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; zipWith max [<span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>] [<span class="number">7</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>]  </span><br><span class="line">[<span class="number">7</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>]  </span><br></pre></td></tr></table></figure>

<h4 id="flip"><a href="#flip" class="headerlink" title="flip"></a>flip</h4><p style="text-align: center;">flip :: (a -> b -> c) -> b -> a -> c</p>

<p>flipå‡½æ•°æ¥æ”¶ä¸€ä¸ªäºŒå…ƒå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„äºŒå…ƒå‡½æ•°ï¼Œå°†å…¶è¾“å…¥çš„ä¸¤ä¸ªå‚æ•°é¡ºåºåè¿‡æ¥ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; zip [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>] <span class="string">&quot;hello&quot;</span></span><br><span class="line">[(<span class="number">1</span>,&#x27;h&#x27;),(<span class="number">2</span>,&#x27;e&#x27;),(<span class="number">3</span>,&#x27;l&#x27;),(<span class="number">4</span>,&#x27;l&#x27;),(<span class="number">5</span>,&#x27;o&#x27;)]</span><br><span class="line"><span class="title">ghci</span>&gt; flip zip [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>] <span class="string">&quot;hello&quot;</span>  </span><br><span class="line">[(&#x27;h&#x27;,<span class="number">1</span>),(&#x27;e&#x27;,<span class="number">2</span>),(&#x27;l&#x27;,<span class="number">3</span>),(&#x27;l&#x27;,<span class="number">4</span>),(&#x27;o&#x27;,<span class="number">5</span>)]</span><br></pre></td></tr></table></figure>

<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><p style="text-align: center;">map :: (a -> b) -> [a] -> [b]</p>

<p>mapå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°få’Œä¸€ä¸ªåˆ—è¡¨aï¼Œå°†å‡½æ•°fåº”ç”¨åœ¨åˆ—è¡¨açš„æ¯ä¸ªå…ƒç´ ä¸­ï¼Œå¹¶è¿”å›å¾—åˆ°çš„æ‰€æœ‰ç»“æœç»„æˆçš„åˆ—è¡¨bï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; map (+<span class="number">3</span>) [<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">6</span>]  </span><br><span class="line">[<span class="number">4</span>,<span class="number">8</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">9</span>]  </span><br></pre></td></tr></table></figure>

<h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><p style="text-align: center;">filter :: (a -> Bool) -> [a] -> [a]</p>

<p>filterå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°få’Œä¸€ä¸ªåˆ—è¡¨aï¼Œå°†åˆ—è¡¨aä¸­çš„æ¯ä¸ªå…ƒç´ ä¼ å…¥å‡½æ•°fä¸­ï¼Œå¦‚æœç»“æœä¸ºTrueå°±ä¿ç•™ï¼Œç»“æœä¸ºFalseå°±æŠ›å¼ƒï¼Œè¿”å›æ‰€æœ‰ä¿ç•™çš„å…ƒç´ ç»„æˆçš„æ–°åˆ—è¡¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; filter even [<span class="number">1.</span><span class="number">.10</span>]  </span><br><span class="line">[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>] </span><br></pre></td></tr></table></figure>

<h4 id="takeWhile"><a href="#takeWhile" class="headerlink" title="takeWhile"></a>takeWhile</h4><p style="text-align: center;">takeWhile :: (a -> Bool) -> [a] -> [a]</p>

<p>takeWhileå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°få’Œä¸€ä¸ªåˆ—è¡¨aï¼Œå°†åˆ—è¡¨aä¸­ä»å·¦å‘å³æ¯ä¸ªå…ƒç´ ä¼ å…¥å‡½æ•°fï¼Œç›´åˆ°ç»“æœä¸ºFalseåœæ­¢ï¼Œè¿”å›åœæ­¢å‰ä¼ å…¥çš„æ‰€æœ‰å…ƒç´ ç»„æˆçš„æ–°åˆ—è¡¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; takeWhile (/=&#x27; &#x27;) <span class="string">&quot;word1 word2&quot;</span></span><br><span class="line"><span class="string">&quot;word1&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Function-application"><a href="#Function-application" class="headerlink" title="Function application"></a>Function application</h3><p>å‡½æ•°åº”ç”¨å¯ä»¥ä½¿ç”¨<code>$</code>ï¼Œ<code>$</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">($) :: (a -> b) -> a -> b</p>

<p>å®ƒå¯ä»¥æ”¹å˜å‡½æ•°ç»“åˆä¼˜å…ˆçº§ï¼Œå°†å·¦ä¾§å‡½æ•°åº”ç”¨äºå…¨éƒ¨å³ä¾§å†…å®¹ä¸Šï¼Œç›¸å½“äºç»™å³ä¾§æ•´ä½“åŠ ä¸Šäº†æ‹¬å·ã€‚å¦åˆ™å‡½æ•°é»˜è®¤å·¦ç»“åˆï¼Œä¼šä¾æ¬¡å‘å³åº”ç”¨è€Œä¸ä¼šåº”ç”¨åœ¨æ•´ä½“ä¸Šã€‚</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">f</span> $ g x</span><br><span class="line"><span class="comment">-- ç­‰ä»·äº</span></span><br><span class="line"><span class="title">f</span> (g x)</span><br><span class="line"><span class="comment">-----</span></span><br><span class="line"><span class="title">f</span> g x</span><br><span class="line"><span class="comment">-- ç­‰ä»·äº</span></span><br><span class="line">(f g) x</span><br></pre></td></tr></table></figure>
<h3 id="Function-Composition"><a href="#Function-Composition" class="headerlink" title="Function Composition"></a>Function Composition</h3><p>å‡½æ•°å¤åˆå¯ä»¥ä½¿ç”¨<code>.</code>ï¼Œ<code>.</code>ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">(.) :: (b -> c) -> (a -> b) -> a -> c</p>

<p>å®šä¹‰æ˜¯ï¼š</p>
<p style="text-align: center;">f . g = \x -> f (g x)</p>

<p>ä½†æ˜¯å‡½æ•°å¤åˆçš„ä¼˜å…ˆçº§è¦æ¯”å‡½æ•°æ‰§è¡Œä½ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">sum</span> . replicate <span class="number">5</span> . max <span class="number">6.7</span> <span class="number">8.9</span></span><br></pre></td></tr></table></figure>
<p>ä¼šå…ˆæ‰§è¡Œmax 6.7 8.9å¹¶è¿”å›8.9ï¼Œç„¶åå°†sumã€replicate 5ã€8.9å¤åˆï¼Œä½†ä¸¤ä¸ªå‡½æ•°æ— æ³•å’Œä¸€ä¸ªå€¼(8.9)å¤åˆï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚å› æ­¤è¦ä½¿ç”¨<code>$</code>æ¥è§„å®šå…ˆå¤åˆå†æ‰§è¡Œï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">sum</span> . replicate <span class="number">5</span> . max <span class="number">6.7</span> $ <span class="number">8.9</span></span><br></pre></td></tr></table></figure>

<h3 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h3><p>Haskellè¯­è¨€ä¸­çš„lambdaè¡¨è¾¾å¼æ˜¯ç”¨<code>\</code>æ¥è¡¨ç¤ºçš„ï¼ˆå› ä¸ºçœ‹ç€åƒ$\mathtt{\lambda}$ï¼Ÿï¼‰<br>å…·ä½“è¯­æ³•æ˜¯</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">\para1 para2 ... -&gt; return</span><br></pre></td></tr></table></figure>
<p>â€œ-&gt;â€å‰çš„ para1 para2 â€¦ æ˜¯ä¼ å…¥å‚æ•°ï¼Œå•ä¸ªå¤šä¸ªéƒ½å¯ä»¥ï¼Œéœ€è¦ç”¨ç©ºæ ¼éš”å¼€ï¼›â€-&gt;â€åçš„ return æ˜¯è®¡ç®—å¾—åˆ°çš„è¿”å›å€¼ã€‚ä¸€èˆ¬éœ€è¦ç”¨æ‹¬å·å°†æ•´ä¸ªè¡¨è¾¾å¼æ‹¬èµ·æ¥ï¼Œé˜²æ­¢è¿”å›å€¼éƒ¨åˆ†ä¸€ç›´å‘å³å»¶ä¼¸ã€‚</p>
<h3 id="foldå’Œscan"><a href="#foldå’Œscan" class="headerlink" title="foldå’Œscan"></a>foldå’Œscan</h3><p>foldå’Œscanéƒ½æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼ˆä¸€ä¸ªäºŒå…ƒå‡½æ•°ï¼Œä¸€ä¸ªåˆå§‹å€¼accumulatorï¼Œä¸€ä¸ªè¦æŠ˜å çš„åˆ—è¡¨ï¼‰ï¼Œfoldè¿”å›ä¸€ä¸ªå€¼ï¼Œè€Œscanè¿”å›ä¸€ä¸ªåˆ—è¡¨<br>ä¼ å…¥çš„äºŒå…ƒå‡½æ•°<code>f :: a -&gt; b -&gt; b</code>å°†accumulatorå’Œä»åˆ—è¡¨ä¸­å–å‡ºçš„å€¼ä¸€åŒä¼ å…¥ï¼ˆlåˆ™accumulatoråœ¨å·¦è¾¹ä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œråˆ™accumulatoråœ¨å³è¾¹ä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼‰</p>
<h4 id="foldl"><a href="#foldl" class="headerlink" title="foldl"></a>foldl</h4><p>å·¦æŠ˜å ï¼Œæ¯æ¬¡ä»åˆ—è¡¨æœ€å·¦ä¾§å–å‡ºä¸€ä¸ªå€¼ï¼Œå’Œaccumulatorä¸€èµ·ä¼ å…¥äºŒå…ƒå‡½æ•°ï¼Œå¹¶ä¸”accumulatoråœ¨å·¦è¾¹ä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">foldl</span> f a xs</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„ç»“æœè®¡ç®—è¿‡ç¨‹ä¸º</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">&gt; foldl f a [x1, x2, x3]</span><br><span class="line">[<span class="number">1.</span>] a = f a x1</span><br><span class="line">[<span class="number">2.</span>] a = f a x2 = f (f a x1) x2</span><br><span class="line">[<span class="number">3.</span>] a = f a x3 = f (f (f a x1) x2) x3</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡º f (f a x1) x2 å…¶å®å°±æ˜¯ foldl f a [x1, x2]<br>è€Œä¸”å› æ­¤ï¼Œfoldlåœ¨è®¡ç®—æ—¶æœ€å¤–å±‚éœ€è¦æ‰¾åˆ°x3ï¼Œè¿™æ ·å¦‚æœxsæ˜¯ä¸€ä¸ªæ— ç©·åˆ—è¡¨ï¼Œé‚£ä¹ˆå°†æ— æ³•è®¡ç®—ï¼Œé™·å…¥æ— ç©·ã€‚æ‰€ä»¥foldlè™½ç„¶çœ‹èµ·æ¥ä»å·¦è¾¹å–å€¼ï¼Œä½†æ˜¯å‡½æ•°éœ€è¦ä»å³ä¾§å±•å¼€ï¼Œå¹¶ä¸é€‚ç”¨äºæ— ç©·åˆ—è¡¨</p>
<h4 id="foldr"><a href="#foldr" class="headerlink" title="foldr"></a>foldr</h4><p>å³æŠ˜å ï¼Œæ¯æ¬¡ä»åˆ—è¡¨æœ€å³ä¾§å–å‡ºä¸€ä¸ªå€¼ï¼Œå’Œaccumulatorä¸€èµ·ä¼ å…¥äºŒå…ƒå‡½æ•°ï¼Œå¹¶ä¸”accumulatoråœ¨å³è¾¹ä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">foldr</span> f a xs</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„ç»“æœè®¡ç®—è¿‡ç¨‹ä¸º</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">&gt; foldr f a [x1, x2, x3]</span><br><span class="line">[<span class="number">1.</span>] a = f x3 a</span><br><span class="line">[<span class="number">2.</span>] a = f x2 a = f x2 (f x3 a)</span><br><span class="line">[<span class="number">3.</span>] a = f x1 a = f x1 (f x2 (f x3 a))</span><br></pre></td></tr></table></figure>
<p>ä»ä¸­å¯ä»¥çœ‹å‡º f x2 (f x3 a) å°±æ˜¯ foldr f a [x2, x3]<br>å› æ­¤å¯ä»¥ä½¿ç”¨é€’å½’æ¥å†™ä¸€ä¸ªå’Œfoldræ•ˆæœä¸€æ ·çš„å‡½æ•°:</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">foldr&#x27;</span> :: (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b</span><br><span class="line"><span class="title">foldr&#x27;</span> _ x [] = x</span><br><span class="line"><span class="title">foldr&#x27;</span> f a (x:xs) = f x (foldr&#x27; f a xs)</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œæœ€å¤–å±‚è®¡ç®—æ—¶åªéœ€è¦x1å¹¶ä¸”å‘ä¸‹é€’å½’ï¼Œå¹¶ä¸ä¼šæ¥è§¦åˆ°åˆ—è¡¨æœ«å°¾ï¼Œå› æ­¤å¯ä»¥ç”¨äºæ— ç©·åˆ—è¡¨ã€‚foldrå³ä½¿çœ‹ä¸Šå»ä»å³è¾¹å–å€¼ï¼Œä½†æ˜¯è¦ä»å·¦å¼€å§‹å±•å¼€ï¼Œå¯ä»¥ç”¨äºæ— ç©·åˆ—è¡¨</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; foldr (||) <span class="type">False</span> (repeat <span class="type">True</span>)</span><br><span class="line"><span class="type">True</span>    <span class="comment">-- ç”±äºé€»è¾‘è¿ç®—å­˜åœ¨çŸ­è·¯ï¼Œè®¡ç®—å€¼å…¨åº”ä¸ºTrueï¼Œæ‰€ä»¥ç›´æ¥è¿”å›äº†</span></span><br><span class="line"><span class="title">ghci</span>&gt; foldl (||) <span class="type">False</span> (repeat <span class="type">True</span>)</span><br><span class="line"><span class="comment">-- è¿™é‡Œä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿï¼Œç›´åˆ°ç”µè„‘å†…å­˜è¢«çˆ†æ‰</span></span><br><span class="line"><span class="comment">-- å› ä¸ºå‡½æ•°åˆšå¼€å§‹å°±éœ€è¦åˆ—è¡¨æœ€å³ä¾§çš„å€¼ï¼Œæ‰€ä»¥åœ¨ä¸æ–­è®¡ç®—è¿™ä¸ªæ— ç©·åˆ—è¡¨</span></span><br></pre></td></tr></table></figure>

<h4 id="scanlå’Œscanr"><a href="#scanlå’Œscanr" class="headerlink" title="scanlå’Œscanr"></a>scanlå’Œscanr</h4><p>scanç±»ä¼¼foldï¼Œåªæ˜¯å°†ä¸­é—´å¾—åˆ°çš„æ¯ä¸€ä¸ªå€¼éƒ½æ·»åŠ è¿›ä¸€ä¸ªåˆ—è¡¨ä¸­å¹¶è¿”å›è¿™ä¸ªåˆ—è¡¨<br>scanlåˆ™å‘å³å»¶ä¼¸è¿™ä¸ªåˆ—è¡¨ï¼Œscanråˆ™å‘å·¦å»¶ä¼¸è¿™ä¸ªåˆ—è¡¨<br>ä½†æ˜¯å®ƒå’Œfoldæ°æ°ç›¸åï¼Œscanlèƒ½ç”¨äºæ— ç©·åˆ—è¡¨ï¼Œè€Œscanrä¸èƒ½</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">&gt; scanr f a [x1, x2, x3]</span><br><span class="line">[<span class="number">1.</span>] æœ€å³ä¾§å…ƒç´ (<span class="number">-1</span> <span class="keyword">in</span> python) : a</span><br><span class="line">[<span class="number">2.</span>] å³ä¾§ç¬¬äºŒä¸ªå…ƒç´ (<span class="number">-2</span>) : f x3 a</span><br><span class="line">[<span class="number">3.</span>] å³ä¾§ç¬¬ä¸‰ä¸ªå…ƒç´ (<span class="number">-3</span>) : f x2 (f x3 a)</span><br><span class="line">[<span class="number">4.</span>] å³ä¾§ç¬¬å››ä¸ªå…ƒç´ (<span class="number">-4</span>) : f x1 (f x2 (f x3 a))</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡º f x2 (f x3 a) æ˜¯ foldr f a [x2, x3]ï¼Œä¹Ÿæ˜¯ scanr f a [x2, x3] çš„ç¬¬ä¸€ä¸ªå…ƒç´ <br>å› æ­¤å¯ä»¥ç”¨é€’å½’æ¥å†™ä¸€ä¸ªå’Œscanræ•ˆæœä¸€æ ·çš„å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">scanr&#x27;</span> :: (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; [b]</span><br><span class="line"><span class="title">scanr&#x27;</span> _ x [] = [x]</span><br><span class="line"><span class="comment">-- scanr&#x27; f a (x:xs) = f x (foldr f a xs) : scanr&#x27; f a xs</span></span><br><span class="line"><span class="title">scanr&#x27;</span> f a (x:xs) = f x q : qs</span><br><span class="line">                    <span class="keyword">where</span> qs@(q:_) = scanr&#x27; f a xs</span><br></pre></td></tr></table></figure>
<p>scanlä¹Ÿæ˜¯åŒç†ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">scanl&#x27;</span> :: (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; [b]</span><br><span class="line"><span class="title">scanl&#x27;</span> _ x [] = [x]</span><br><span class="line"><span class="title">scanl&#x27;</span> f a (x:xs) = a : scanl&#x27; f (f a x) xs</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œscanrè¿”å›çš„åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æœ€åæ·»åŠ è¿›å»çš„ï¼Œæ‰€ä»¥å®ƒæ— æ³•ç”¨äºæ— ç©·åˆ—è¡¨ã€‚è€Œscanlè¿”å›çš„åˆ—è¡¨ä¸­çš„å…ƒç´ æ˜¯ä»å·¦åˆ°å³ä¾æ¬¡æ·»åŠ ï¼Œå¯ä»¥ç”¨äºæ— ç©·åˆ—è¡¨æˆªå–å‰ä¸€éƒ¨åˆ†ç»“æœï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; take <span class="number">10</span> (scanl (+) <span class="number">0</span> [<span class="number">1.</span>.])</span><br><span class="line">[<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">15</span>,<span class="number">21</span>,<span class="number">28</span>,<span class="number">36</span>,<span class="number">45</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; take <span class="number">10</span> (scanr (+) <span class="number">0</span> [<span class="number">1.</span>.])</span><br><span class="line">[*** <span class="type">Exception</span>: stack overflow</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨foldrç¼–å†™foldl"><a href="#ä½¿ç”¨foldrç¼–å†™foldl" class="headerlink" title="ä½¿ç”¨foldrç¼–å†™foldl"></a>ä½¿ç”¨foldrç¼–å†™foldl</h4><p>pdcxsè¿˜ç»™æˆ‘ä»‹ç»äº†ä¸€ä¸ªç¥å¥‡çš„æ“ä½œï¼Œç”¨foldlæ¥å®šä¹‰foldrï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">foldl&#x27;</span> f z xs = foldr (\x g y -&gt; g (f y x)) id xs z</span><br></pre></td></tr></table></figure>

<p>å®ƒåˆ©ç”¨ foldr (\x g y -&gt; g (f y x)) id xs ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼Œä½œç”¨äºzå¾—åˆ°ç»“æœã€‚</p>
<p>å…ˆæ¥çœ‹ä¸€ä¸‹foldrçš„ç±»å‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">foldr</span> :: <span class="type">Foldable</span> t =&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b</span><br><span class="line"><span class="comment">-- å¯ä»¥çœ‹æˆ (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç±»å‹bå¹¶ä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°(b -&gt; b)ã€‚</p>
<p>æ‰€ä»¥è¿™é‡Œfoldrçš„ç±»å‹å¯ä»¥å†™æˆï¼š</p>
<p style="text-align: center;">(a -> (b -> b) -> (b -> b)) -> (b -> b) -> [a] -> (b -> b)</p>

<p>å¯¹åº”äºç”¨æ³• foldr (\x g y -&gt; g (f y x)) id xs ï¼Œå®ƒè¿”å›çš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç±»å‹ä¸º b -&gt; bï¼ˆåé¢è¦ä½œç”¨äºzï¼‰<br>è€Œxså¯¹åº”äº[a]ï¼›idå¯¹åº”äº(b -&gt; b)<br>æ‰€ä»¥ (\x g y -&gt; g (f y x)) è¦å¯¹åº”äºï¼š</p>
<p style="text-align: center;">(a -> (b -> b) -> (b -> b))</p>

<p>å› æ­¤å¯ä»¥æ¨æ–­å‡ºxçš„ç±»å‹æ˜¯aï¼›yçš„ç±»å‹æ˜¯bï¼›è€Œè¿”å›çš„å€¼ä¸ºä¸€ä¸ªç±»å‹ä¸º(b -&gt; b)çš„å‡½æ•°ã€‚</p>
<p>å†çœ‹ï¼Œè¿”å›çš„å€¼æ˜¯ g (f y x) ï¼Œå…¶ä¸­ f y x è¿”å›çš„æ˜¯ä¸€ä¸ªå€¼ï¼Œç±»å‹ä¸ºb<br>æ‰€ä»¥gæ¥æ”¶ä¸€ä¸ªç±»å‹bï¼Œè¿”å›ä¸€ä¸ªç±»å‹b -&gt; bã€‚å³gçš„ç±»å‹ä¸ºï¼š</p>
<p style="text-align: center;">b -> (b -> b)</p>

<p>ç°åœ¨æ ¹æ®foldrçš„å®šä¹‰ï¼š</p>
<p style="text-align: center;">foldr f a (x:xs) = f x (foldr f a xs)</p>

<p>å¸¦å…¥è®¡ç®—ä¸€ä¸‹ï¼š</p>
<blockquote>
<p>xså³ä¸º[x1..xn]ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œç”¨xsâ€™æ¥è¡¨ç¤º[x2..xn]ï¼Œç”¨xsâ€™â€™æ¥è¡¨ç¤º[x3..xn]</p>
<p>å®šä¹‰ä¸­çš„få³ä¸º(\x g y -&gt; g (f y x))ï¼Œaå³ä¸ºid</p>
</blockquote>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  foldr (\x g y -&gt; g (f y x)) id xs z</span><br><span class="line">= (\x g y -&gt; g (f y x)) x1 (foldr (...) id xs&#x27;) z</span><br></pre></td></tr></table></figure>
<p>å†™å®Œç¬¬ä¸€æ­¥ï¼Œå¯ä»¥å‘ç°ï¼Œx1 (foldr (â€¦) id xsâ€™) z æ­£å¥½åˆ†åˆ«å¯¹åº”äº†lambdaè¡¨è¾¾å¼ä¸­çš„xã€gã€yã€‚å¯ä»¥å°†å…¶åº”ç”¨ï¼Œè¿›ä¸€æ­¥å±•å¼€ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  (\x g y -&gt; g (f y x)) x1 (foldr (...) id xs&#x27;) z</span><br><span class="line">= (foldr (...) id xs&#x27;) (f z x1)</span><br></pre></td></tr></table></figure>
<p>ä¸éš¾å‘ç°ï¼ŒåŸå¼ (foldr (â€¦) id xs) z ç­‰ä»·äºï¼š</p>
<p style="text-align: center;">(foldr (...) id xs') (f z x1)</p>

<p>è·Ÿç€è¿™ä¸ªæ€è·¯ï¼Œxsæ¯æ¬¡å°‘ä¸€ä¸ªå¼€å¤´çš„å…ƒç´ xâ€™ï¼Œzæ¯æ¬¡å˜æ¢æˆä¸º f z xâ€™<br>å› æ­¤ä¸‹ä¸€æ­¥ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  (\x g y -&gt; g (f y x)) x1 (foldr (...) id xs&#x27;) z</span><br><span class="line">= (foldr (...) id xs&#x27;) (f z x1)</span><br><span class="line">= (foldr (...) id xs&#x27;&#x27;) (f (f z x1) x2)</span><br><span class="line">= (foldr (...) id xs&#x27;&#x27;&#x27;) (f (f (f z x1) x2) x3)</span><br><span class="line">= ...</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œå·²ç»æœ‰äº†è§„å¾‹ã€‚é‚£ä¹ˆæœ€ç»ˆåœæ­¢æ—¶æ˜¯ä»€ä¹ˆæ ·å‘¢ï¼Ÿ</p>
<p>æœ€ååˆ°äº†ä¸èƒ½åœ¨å±•å¼€æ—¶ï¼Œæœ€å‰é¢çš„ foldr (â€¦) id xs å·²ç»å˜æˆäº† foldr (â€¦) id []<br>è€Œæ ¹æ®å‰é¢foldrçš„å®šä¹‰ foldr _ x [] = x ï¼Œå®ƒåº”è¯¥è¿”å›id</p>
<p>æ‰€ä»¥æœ€åçš„ç»“æœï¼š<br>(idçš„å®šä¹‰ï¼šid x = x)</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  ...</span><br><span class="line">= (foldr (...) id xs&#x27;) (f z x1)</span><br><span class="line">= (foldr (...) id xs&#x27;&#x27;) (f (f z x1) x2)</span><br><span class="line">= ...</span><br><span class="line">= (foldr (...) id []) (f (.. (f z x1) ..) xn)</span><br><span class="line">= id (f (.. (f z x1) ..) xn)</span><br><span class="line">= f (.. (f z x1) ..) xn</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆæœ€åè¿™ä¸ªç»“æœå°±å¾ˆç†Ÿæ‚‰äº†ï¼Œå®ƒå°±æ˜¯ foldl f z xsã€‚<br>æ‰€ä»¥æˆ‘ä»¬æ¨å¯¼å‡ºäº†è¿™ä¸ªç”¨foldrè¡¨ç¤ºfoldlçš„å†™æ³•æ˜¯æ­£ç¡®çš„ã€‚</p>
<h2 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h2><p>Haskellä¼šè‡ªåŠ¨åŠ è½½Preludeæ¨¡å—ï¼ˆmoduleï¼‰ï¼Œå¦‚æœåœ¨GHCiä¸­å†åŠ è½½å…¶ä»–æ¨¡å—ï¼Œéœ€è¦ä½¿ç”¨<code>:m + ...</code>ï¼Œæ¯”å¦‚åŠ è½½Data.Listæ¨¡å—ï¼š</p>
<p style="text-align: center;">Prelude> :m + Data.List</p>

<p>è€Œåœ¨hsæ–‡ä»¶ä¸­å¼•å…¥æ¨¡å—ï¼Œéœ€è¦ä½¿ç”¨<code>import</code>è¯­å¥ï¼Œä¸‹é¢å’Œpythonçš„å¯¹æ¯”å¯ä»¥ä¾¿äºç†è§£ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Data.List</span><br><span class="line"><span class="comment">-- from Data.List import *</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Data.List (<span class="title">nub</span>, <span class="title">sort</span>)</span><br><span class="line"><span class="comment">-- from Data.List import nub, sort</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Data.List <span class="keyword">hiding</span> (<span class="title">nub</span>)</span><br><span class="line"><span class="comment">-- ä»Data.Listä¸­å¼•å…¥æ‰€æœ‰ï¼Œä½†ä¸å¼•å…¥nubå‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">qualified</span> Data.List</span><br><span class="line"><span class="comment">-- import Data.List</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">qualified</span> Data.List <span class="keyword">as</span> Li</span><br><span class="line"><span class="comment">-- import Data.List as Li</span></span><br></pre></td></tr></table></figure>

<h3 id="ç¼–å†™Modules"><a href="#ç¼–å†™Modules" class="headerlink" title="ç¼–å†™Modules"></a>ç¼–å†™Modules</h3><p>æ¨¡å—ä¸­è¦åŒ…å«å°†è¦ä½¿ç”¨çš„ä¸€äº›å‡½æ•°ï¼Œåƒæ­£å¸¸çš„hsæ–‡ä»¶ä¸€æ ·å†™å³å¯ï¼Œä½†å¤´éƒ¨éœ€è¦æœ‰å¯¼å‡ºè¯­å¥ï¼ˆexportï¼‰ã€‚æ¯”å¦‚ä¸€ä¸ªæ¨¡å—æ–‡ä»¶åå«<code>ModuleA.hs</code>ï¼Œé‚£å®ƒçš„å¤´éƒ¨éœ€è¦å†™ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> ModuleA</span><br><span class="line">( <span class="title">functionA</span></span><br><span class="line">, <span class="title">functionB</span></span><br><span class="line">, <span class="title">functionC</span></span><br><span class="line">) <span class="keyword">where</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è€Œä¸”æ–‡ä»¶ä¸­çš„æ‰€æœ‰å‡½æ•°åªå¯¼å‡ºéœ€è¦ä½¿ç”¨çš„å³å¯ã€‚æ¯”å¦‚è¯¥æ–‡ä»¶ä¸­è¿˜å«æœ‰functionDä¾›å‰ä¸‰ä¸ªå‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œé‚£ä¹ˆåœ¨import ModuleAä¹‹åä¹Ÿæ— æ³•è°ƒç”¨functionDã€‚</p>
<h2 id="Types-amp-Typeclasses"><a href="#Types-amp-Typeclasses" class="headerlink" title="Types &amp; Typeclasses"></a>Types &amp; Typeclasses</h2><h3 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h3><p>Haskellæœ‰ä¸€ä¸ªé™æ€ç±»å‹ç³»ç»Ÿï¼Œä»»ä½•å˜é‡ã€å‡½æ•°éƒ½ä¼šå…·æœ‰ç±»å‹ï¼Œå¹¶ä¸”æœ‰ç±»å‹åˆ¤æ–­åŠŸèƒ½ï¼Œæ²¡ç»™å‡ºçš„ç±»å‹ä¼šè‡ªåŠ¨è¯†åˆ«ã€‚<br>Typeçš„é¦–å­—æ¯å…¨ä¸ºå¤§å†™ï¼Œå¸¸ç”¨çš„æœ‰ï¼š</p>
<ul>
<li><code>Int</code>ï¼šæ•´å‹ï¼Œæœ‰ä¸Šä¸‹ç•ŒèŒƒå›´ï¼Œ-2147483647ï½2147483648</li>
<li><code>Integer</code>ï¼šæ•´æ•°ï¼Œæ— ç•Œï¼Œä½†æ˜¯æ•ˆç‡æ¯”Intä½</li>
<li><code>Float</code>ï¼šå•ç²¾åº¦æµ®ç‚¹å‹</li>
<li><code>Double</code>ï¼šåŒç²¾åº¦æµ®ç‚¹å‹</li>
<li><code>Bool</code>ï¼šå¸ƒå°”å€¼</li>
<li><code>Char</code>ï¼šå­—ç¬¦</li>
<li><code>String</code>ï¼šå­—ç¬¦ä¸²ï¼Œç­‰åŒäº<code>[Char]</code></li>
<li><code>Ordering</code>ï¼šå¤§å°å…³ç³»ï¼ŒåŒ…å«LTã€EQã€GTï¼Œä¸”å®ƒä»¬æœ‰å¤§å°å…³ç³» LT &lt; EQ &lt; GT</li>
</ul>
<p>åˆ—è¡¨çš„ç±»å‹æ˜¯ç”±å…¶ä¸­å…ƒç´ å†³å®šçš„ï¼Œå¹¶ä¸”åˆ—è¡¨ä¸­å…ƒç´ å¿…é¡»æ˜¯åŒä¸€ç±»å‹ï¼Œæ‰€ä»¥åˆ—è¡¨çš„ç±»å‹å°±æ˜¯å…¶å…ƒç´ ç±»å‹å¤–åŠ <code>[]</code>ã€‚</p>
<p>å…ƒç»„çš„ç±»å‹ç”±å…¶ä¸­å„ä¸ªå…ƒç´ çš„ç±»å‹å…±åŒå†³å®šï¼Œå› ä¸ºå…ƒç»„ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒç±»å‹ã€‚å¦‚(â€œabcâ€, â€˜aâ€™, True)çš„ç±»å‹æ˜¯([Char], Char, Bool)ã€‚</p>
<h3 id="Typeclasses"><a href="#Typeclasses" class="headerlink" title="Typeclasses"></a>Typeclasses</h3><p>ç±»å‹ç±»ï¼ˆTypeclassï¼‰æ˜¯å®šä¹‰ä¸€ç³»åˆ—åŠŸèƒ½çš„æ¥å£ï¼Œå¦‚æœä¸€ä¸ªTypeå±äºä¸€ä¸ªTypeclassçš„æˆå‘˜ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥å®ç°è¿™ä¸ªç±»å‹ç±»æ‰€è§„å®šçš„åŠŸèƒ½ã€‚ä¸€ä¸ªTypeä¹Ÿå¯ä»¥å±äºå¤šä¸ªTypeclass<br>Typeclassçš„é¦–å­—æ¯ä¹Ÿå…¨ä¸ºå¤§å†™ï¼Œå¸¸è§çš„æœ‰ï¼š</p>
<ul>
<li><code>Eq</code>ï¼šå¯åˆ¤æ–­æ˜¯å¦ç›¸ç­‰</li>
<li><code>Ord</code>ï¼šå¯æ¯”è¾ƒå¤§å°</li>
<li><code>Show</code>ï¼šå¯å±•ç¤ºæˆå­—ç¬¦ä¸²</li>
<li><code>Read</code>ï¼šå¯ä»å­—ç¬¦ä¸²è½¬æ¢æˆç‰¹å®šç±»å‹</li>
<li><code>Enum</code>ï¼šå¯æšä¸¾ï¼ˆè¿ç»­ï¼‰ï¼Œå³å¯ä»¥ä½¿ç”¨predå’Œsuccå‡½æ•°å¾—åˆ°å‰é©±å’Œåç¼€</li>
<li><code>Bounded</code>: æœ‰ä¸Šä¸‹ç•Œï¼Œå¦‚æœå…ƒç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½å±äºBoundedï¼Œé‚£è¿™ä¸ªå…ƒç»„çš„ç±»å‹ä¹Ÿå±äºBounded</li>
<li><code>Integral</code>ï¼šæ˜¯æ•´æ•°ï¼ŒåŒ…æ‹¬Intå’ŒInteger</li>
<li><code>RealFloat</code>ï¼š æ˜¯å®æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬Floatå’ŒDouble</li>
<li><code>RealFrac</code>ï¼šæ˜¯å®åˆ†æ•°ï¼ŒåŒ…æ‹¬Floatã€Doubleå’ŒRatioï¼ˆåœ¨Data.Ratioæ¨¡å—ä¸­ï¼‰</li>
<li><code>Floating</code>ï¼šæ˜¯æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬Floatã€Doubleå’ŒComplexï¼ˆåœ¨Data.Complexæ¨¡å—ä¸­ï¼‰</li>
<li><code>Real</code>ï¼šæ˜¯å®æ•°ï¼ŒåŒ…æ‹¬Integralå’ŒRealFracçš„æˆå‘˜</li>
<li><code>Fractional</code>ï¼šæ˜¯åˆ†æ•°ï¼ŒåŒ…æ‹¬RealFracå’ŒFloatingçš„æˆå‘˜</li>
<li><code>Num</code>ï¼šæ˜¯æ•°å­—ï¼ŒåŒ…æ‹¬ä¸Šè¿°æ‰€æœ‰æ•°å­—ç›¸å…³çš„ç±»å‹</li>
</ul>
<h3 id="Type-variables"><a href="#Type-variables" class="headerlink" title="Type variables"></a>Type variables</h3><p>å¦‚æœæŸ¥çœ‹ä¸€ä¸ªå‡½æ•°çš„ç±»å‹ï¼Œæ¯”å¦‚<code>head</code>ï¼Œé‚£ä¹ˆå°†ä¼šè¿”å›ä»¥ä¸‹ç±»å‹ï¼š</p>
<p style="text-align: center;">head :: [a] -> a</p>

<p>å…¶ä¸­çš„aå°±æ˜¯ä¸€ä¸ªç±»å‹å˜é‡ï¼ˆtype variableï¼‰ï¼Œå®ƒåœ¨headä¸­å¯ä»¥å±äºä»»ä½•ç±»å‹ï¼Œåœ¨è¿™é‡Œåªæ˜¯è¡¨ç¤ºè¿”å›å€¼çš„ç±»å‹å’Œè¾“å…¥çš„åˆ—è¡¨ä¸­çš„å…ƒç´ çš„ç±»å‹ç›¸ä¸€è‡´ã€‚</p>
<p>åœ¨å‡½æ•°çš„ç±»å‹è¡¨è¾¾å¼å…¶å®å¯ä»¥çœ‹ä½œ$\lambda$è¡¨è¾¾å¼ï¼Œå®ƒé€‚ç”¨äº$\alpha$å˜æ¢ï¼ˆ$\alpha$-conversionï¼‰ã€‚å³aåœ¨è¿™é‡Œå¯ä»¥æŒ‡Intã€Charç­‰ç±»å‹ï¼Œä¹Ÿå¯ä»¥æŒ‡[Char], (Int, Char), ç”šè‡³å‡½æ•°Int -&gt; Intç­‰ã€‚</p>
<p>åœ¨å¤§éƒ¨åˆ†å‡½æ•°çš„ç±»å‹ä¸­ï¼Œç±»å‹å˜é‡éœ€è¦ä¿è¯æ˜¯æŸä¸ªTypeclassçš„æˆå‘˜æ‰èƒ½å®Œæˆæ“ä½œã€‚æ¯”å¦‚<code>(==)</code>å‡½æ•°ï¼Œå®ƒéœ€è¦ä¼ å…¥çš„å‚æ•°æ˜¯å¯åˆ¤æ–­ç›¸ç­‰çš„ï¼Œå³æ˜¯Eqçš„æˆå‘˜ï¼Œé‚£ä¹ˆ<code>(==)</code>çš„ç±»å‹å°±æ˜¯ï¼š</p>
<p style="text-align: center;">(==) :: (Eq a) => a -> a -> Bool</p>

<p>å…¶ä¸­<code>=&gt;</code>å‰çš„éƒ¨åˆ†(Eq a)å°±æ˜¯ç±»çº¦æŸï¼ˆclass constraintï¼‰ï¼Œå®ƒè§„å®šäº†aæ˜¯Eqçš„æˆå‘˜ï¼Œæ‰€ä»¥<code>(==)</code>å‡½æ•°ä¼ å…¥çš„ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯aç±»å‹ï¼Œä¸”éƒ½æ˜¯Eqçš„æˆå‘˜ï¼Œä¿è¯äº†å®ƒä»¬ä¹‹é—´æ˜¯å¯ä»¥æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰çš„ã€‚</p>
<h3 id="å®šä¹‰æ–°Type"><a href="#å®šä¹‰æ–°Type" class="headerlink" title="å®šä¹‰æ–°Type"></a>å®šä¹‰æ–°Type</h3><p>å®šä¹‰ä¸€ä¸ªæ–°çš„Typeéœ€è¦ä½¿ç”¨<code>data</code>å…³é”®å­—ï¼Œæ¯”å¦‚å®šä¹‰<code>Bool</code>éœ€è¦ä½¿ç”¨ï¼š</p>
<p style="text-align: center;">data Bool = False | True</p>

<p>å…¶ä¸­<code>=</code>å·¦ä¾§çš„éƒ¨åˆ†å®šä¹‰äº†æ–°ç±»å‹çš„åç§°<code>Bool</code>ï¼Œå³ä¾§çš„éƒ¨åˆ†å«åšå€¼æ„é€ å™¨ï¼ˆvalue constructorsï¼‰ï¼Œè¡¨ç¤ºäº†Boolç±»å‹çš„å€¼ä¸ºFalseæˆ–Trueã€‚<br>å¹¶ä¸”åç§°å’Œå€¼æ„é€ å™¨çš„é¦–å­—æ¯éƒ½éœ€è¦å¤§å†™ã€‚</p>
<p>å¦å¤–ï¼Œå€¼æ„é€ å™¨ä¹Ÿæ˜¯å‡½æ•°ï¼Œå®ƒä»¬å¯ä»¥æœ‰å‚æ•°ï¼Œå«åšé¡¹ï¼ˆfieldï¼‰ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Shape</span> = <span class="type">Circle</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span> | <span class="type">Rectangle</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span>   </span></span><br></pre></td></tr></table></figure>
<p>å®ƒå®šä¹‰äº†ä¸€ä¸ªæ–°Typeå«Shapeï¼Œå€¼æ„é€ å™¨æ˜¯Circleå’ŒRectangleï¼ŒCircleæ¥æ”¶ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯Floatç±»å‹ï¼ŒRectangleæ¥æ”¶å››ä¸ªFloatç±»å‹å‚æ•°ã€‚<br>å¦‚æœæŸ¥çœ‹Circleçš„ç±»å‹ï¼Œå°†è¿”å›ï¼š</p>
<p style="text-align: center;">Circle :: Float -> Float -> Float -> Shape</p>

<p>å¦‚æœæƒ³è¦è®©å®ƒèƒ½ç»™ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œéœ€è¦è®©å®ƒå±äºShowç±»å‹ç±»ã€‚åœ¨ä»£ç ä¸­åªéœ€è¦åœ¨ç»“å°¾åŠ ä¸Š<code>deriving (Show)</code>:</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Shape</span> = <span class="type">Circle</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span> | <span class="type">Rectangle</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span> <span class="keyword">deriving</span> (<span class="type">Show</span>)</span></span><br></pre></td></tr></table></figure>

<p>ç±»å‹çš„åç§°å’Œå€¼æ„é€ å™¨åç§°ä¹Ÿå¯ä»¥ç›¸åŒï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Point</span> = <span class="type">Point</span> <span class="type">Float</span> <span class="type">Float</span> <span class="keyword">deriving</span> (<span class="type">Show</span>)</span></span><br></pre></td></tr></table></figure>

<h4 id="å¯¼å‡ºType"><a href="#å¯¼å‡ºType" class="headerlink" title="å¯¼å‡ºType"></a>å¯¼å‡ºType</h4><p>åœ¨æ–‡ä»¶ä¸­å®šä¹‰äº†æ–°çš„Typeä¹‹åï¼Œå¦‚æœåœ¨åˆ«çš„æ–‡ä»¶ä¸­å°†å…¶ä½œä¸ºæ¨¡å—å¯¼å…¥ï¼Œåˆ™éœ€è¦å…ˆå¯¼å‡ºã€‚æ¯”å¦‚æ–‡ä»¶<code>Shapes.hs</code>ä¸­å®šä¹‰äº†Shapeå’ŒPointï¼Œä»¥åŠå…¶ä»–çš„ä¸€äº›å‡½æ•°ï¼Œé‚£ä¹ˆæ–‡ä»¶å¼€å¤´éœ€è¦å†™ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> Shapes</span><br><span class="line">( <span class="type">Shape(..)</span></span><br><span class="line">, <span class="type">Point(..)</span></span><br><span class="line">, <span class="title">functionA</span></span><br><span class="line">, <span class="title">functionB</span></span><br><span class="line">) <span class="keyword">where</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„<code>Shape(..)</code>å¯¼å‡ºäº†Shapeç±»å‹å’Œå®ƒæ‰€æœ‰çš„å€¼æ„é€ å™¨ï¼Œ<code>..</code>ä»£è¡¨äº†å®ƒçš„æ‰€æœ‰å€¼æ„é€ å™¨ã€‚å› æ­¤ï¼Œ<code>Shape(..)</code>ç›¸å½“äº<code>Shape (Circle, Rectangle)</code>ã€‚</p>
<p>å¦‚æœä¸æƒ³è¦å¯¼å‡ºå€¼æ„é€ å™¨ï¼Œå³ä¸å…è®¸ä½¿ç”¨å€¼æ„é€ å™¨çš„æ–¹æ³•æ¥åˆ›å»ºShapeç±»å‹çš„å˜é‡ã€‚é‚£ä¹ˆéœ€è¦å°†<code>Shape(..)</code>æ›¿æ¢ä¸º<code>Shape</code>ï¼Œè¿™æ ·å°±åªå¯¼å‡ºäº†Shapeç±»å‹ï¼Œè€Œä¸å¯¼å‡ºå…¶å€¼æ„é€ å™¨ã€‚</p>
<h4 id="Record-Syntax"><a href="#Record-Syntax" class="headerlink" title="Record Syntax"></a>Record Syntax</h4><p>å¦‚æœæƒ³è¦æ–¹ä¾¿åœ°å–å‡ºç±»å‹å®ä¾‹ä¸­çš„å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨Recordè¯­æ³•ï¼Œå¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Point</span> = <span class="type">Point</span> &#123; <span class="title">xcoord</span> :: <span class="type">Float</span></span></span><br><span class="line"><span class="class">                   , <span class="title">ycoord</span> :: <span class="type">Float</span></span></span><br><span class="line"><span class="class">                   &#125; <span class="keyword">deriving</span> (<span class="type">Show</span>)</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å€¼æ„é€ å™¨çš„å‚æ•°éƒ¨åˆ†å…ˆåŠ ä¸€ä¸ªå¤§æ‹¬å·ï¼Œç„¶åæŒ‡å®šå–å‡ºå€¼çš„å‡½æ•°åç§°ï¼ˆxcoord, ycoordï¼‰ï¼Œåé¢æŒ‡å®šç±»å‹ï¼ˆ:: Floatï¼‰ã€‚è¿™æ ·xcoordå’Œycoordå°±éƒ½æ˜¯ä¸€ä¸ªç±»å‹ä¸ºPoint -&gt; Floatçš„å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹æ³•æ¥è®¿é—®å€¼ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="keyword">let</span> point = <span class="type">Point</span> <span class="number">1.0</span> <span class="number">2.0</span></span><br><span class="line"><span class="title">ghci</span>&gt; xcoord point</span><br><span class="line"><span class="number">1.0</span></span><br><span class="line"><span class="title">ghci</span>&gt; ycoord point</span><br><span class="line"><span class="number">2.0</span></span><br></pre></td></tr></table></figure>
<p>åŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹æ³•æ¥åˆ›å»ºè¿™ä¸ªpointï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">point</span> = <span class="type">Point</span> &#123;ycoord=<span class="number">2.0</span>, xcoord=<span class="number">1.0</span>&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Type-parameters"><a href="#Type-parameters" class="headerlink" title="Type parameters"></a>Type parameters</h4><p>å€¼æ„é€ å™¨å¯ä»¥æ¥æ”¶å‚æ•°ï¼Œç±»å‹ä¹Ÿå¯ä»¥æ¥æ”¶å‚æ•°ï¼Œè¿™æ ·å®ƒå°±æˆä¸ºäº†ç±»å‹æ„é€ å™¨ï¼ˆtype constructorsï¼‰ã€‚å¦‚Maybeçš„å®šä¹‰ï¼š</p>
<p style="text-align: center;">data Maybe a = Nothing | Just a</p>

<p>å®ƒçš„å€¼æ˜¯Nothingæ—¶ï¼Œç±»å‹ä¸ºMaybe aï¼Œæ˜¯å¤šæ€çš„ï¼ˆpolymorphicï¼‰ã€‚<br>ä»–çš„å€¼ä¸æ˜¯Nothingæ—¶ï¼Œç±»å‹å–å†³äºå€¼Just aä¸­açš„ç±»å‹ï¼Œå¯ä»¥æ„é€ å‡ºMaybe Intã€Maybe [Char]ç­‰å¤šç§ç±»å‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="type">Nothing</span> :: <span class="type">Maybe</span> a</span><br><span class="line"><span class="type">Just</span> <span class="number">1</span> :: <span class="type">Num</span> a =&gt; <span class="type">Maybe</span> a</span><br><span class="line"><span class="type">Just</span> &#x27;a&#x27; :: <span class="type">Maybe</span> <span class="type">Char</span></span><br><span class="line"><span class="type">Just</span> <span class="string">&quot;abc&quot;</span> :: <span class="type">Maybe</span> [<span class="type">Char</span>]</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ç”¨è¿™ç§æ–¹æ³•æ”¹å†™Pointï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Point</span> x y = <span class="type">Point</span> &#123; <span class="title">xcoord</span> :: <span class="title">x</span></span></span><br><span class="line"><span class="class">                       , <span class="title">ycoord</span> :: <span class="title">y</span></span></span><br><span class="line"><span class="class">                       &#125; <span class="keyword">deriving</span> (<span class="type">Show</span>)</span></span><br></pre></td></tr></table></figure>

<p>ä½†ä½¿ç”¨ç±»å‹å‚æ•°ï¼ˆtype parametersï¼‰å¹¶ä¸æ˜¯æ€»æ˜¯æ–¹ä¾¿ï¼Œæ¯”å¦‚åœ¨å£°æ˜å‡½æ•°ç±»å‹çš„æ—¶å€™ä¸èƒ½åªä½¿ç”¨Pointæ¥è¡¨ç¤ºPointç±»å‹ï¼Œè€Œæ˜¯å¿…é¡»å†™æˆPoint Float Floatã€‚</p>
<p>è€Œä¸”ä¸èƒ½åœ¨å®šä¹‰ç±»å‹æ„é€ å™¨æ—¶æ·»åŠ ç±»çº¦æŸï¼ˆclass constraintï¼‰ï¼Œä¸ç„¶åœ¨ä¹‹åå£°æ˜å‡½æ•°ç±»å‹çš„æ—¶å€™ä¹Ÿéƒ½éœ€è¦æ·»åŠ ç±»çº¦æŸï¼Œå¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> (<span class="type">Ord</span> <span class="title">k</span>) =&gt; <span class="type">Map</span> k v = ... </span></span><br><span class="line"><span class="title">toList</span> :: (<span class="type">Ord</span> k) =&gt; <span class="type">Map</span> k a -&gt; [(k, a)]</span><br></pre></td></tr></table></figure>

<h4 id="Either"><a href="#Either" class="headerlink" title="Either"></a>Either</h4><p>Eitheræ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œå®ƒæœ‰ä¸¤ä¸ªå€¼æ„é€ å™¨ï¼Œå®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Either</span> a b = <span class="type">Left</span> a | <span class="type">Right</span> b <span class="keyword">deriving</span> (<span class="type">Eq</span>, <span class="type">Ord</span>, <span class="type">Read</span>, <span class="type">Show</span>)  </span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨äº†Leftï¼Œé‚£å®ƒçš„açš„ç±»å‹å°±æ˜¯å…·ä½“çš„ï¼›å¦‚æœä½¿ç”¨äº†Rightï¼Œé‚£å®ƒçš„bçš„ç±»å‹å°±æ˜¯å…·ä½“çš„ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Right</span> <span class="number">20</span>  </span><br><span class="line"><span class="type">Right</span> <span class="number">20</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Left</span> <span class="string">&quot;w00t&quot;</span>  </span><br><span class="line"><span class="type">Left</span> <span class="string">&quot;w00t&quot;</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; :t <span class="type">Right</span> &#x27;a&#x27;  </span><br><span class="line"><span class="type">Right</span> &#x27;a&#x27; :: <span class="type">Either</span> a <span class="type">Char</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; :t <span class="type">Left</span> <span class="type">True</span>  </span><br><span class="line"><span class="type">Left</span> <span class="type">True</span> :: <span class="type">Either</span> <span class="type">Bool</span> b  </span><br></pre></td></tr></table></figure>
<p>Eitherå¯ä»¥çœ‹ä½œMaybeçš„è¡¥å……ï¼Œæ¯”å¦‚Maybeåœ¨ä½¿ç”¨æ—¶ï¼Œå‡ºç°å¼‚å¸¸å¯ä»¥è¿”å›Nothingï¼Œä½†åªæ˜¯ä¸€ä¸ªNothingï¼Œä¸åŒ…å«ä»»ä½•ä¿¡æ¯ï¼›ä½†EitheråŒ…å«å·¦å€¼å’Œå³å€¼ï¼Œæ­£å¸¸ç»“æœè¿”å›å³å€¼ï¼Œè€Œå‡ºç°å¼‚å¸¸å°±å¯ä»¥è¿”å›åŒ…å«é”™è¯¯ä¿¡æ¯çš„å·¦å€¼ï¼Œæ¯”å¦‚å®‰å…¨é™¤æ³•ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">safeDiv</span> :: <span class="type">Int</span> -&gt; <span class="type">Int</span> -&gt; <span class="type">Maybe</span> <span class="type">Int</span></span><br><span class="line"><span class="title">safeDiv</span> _ <span class="number">0</span> = <span class="type">Nothing</span></span><br><span class="line"><span class="title">safeDiv</span> x y = <span class="type">Just</span> (x `div` y)</span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; safeDiv <span class="number">4</span> <span class="number">2</span></span><br><span class="line"><span class="type">Just</span> <span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; safeDiv <span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<p>è€Œä½¿ç”¨Eitherï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">safeDiv</span> :: <span class="type">Int</span> -&gt; <span class="type">Int</span> -&gt; <span class="type">Either</span> <span class="type">String</span> <span class="type">Int</span></span><br><span class="line"><span class="title">safeDiv</span> _ <span class="number">0</span> = <span class="type">Left</span> <span class="string">&quot;Divided by zero&quot;</span></span><br><span class="line"><span class="title">safeDiv</span> x y = <span class="type">Right</span> (x `div` y)</span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; safeDiv <span class="number">4</span> <span class="number">2</span></span><br><span class="line"><span class="type">Right</span> <span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; safeDiv <span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="type">Left</span> <span class="string">&quot;Divided by zero&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="Derived-instances"><a href="#Derived-instances" class="headerlink" title="Derived instances"></a>Derived instances</h4><p>æƒ³è¦ä½¿ä¸€ä¸ªå®šä¹‰çš„ç±»æ»¡è¶³æŸäº›Typeclassçš„éœ€æ±‚ï¼Œéœ€è¦ä»å…¶æ´¾ç”Ÿï¼ˆderiveï¼‰ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Day</span> = <span class="type">Monday</span> | <span class="type">Tuesday</span> | <span class="type">Wednesday</span> | <span class="type">Thursday</span> | <span class="type">Friday</span> | <span class="type">Saturday</span> | <span class="type">Sunday</span>   </span></span><br><span class="line">           <span class="keyword">deriving</span> (<span class="type">Eq</span>, <span class="type">Ord</span>, <span class="type">Show</span>, <span class="type">Read</span>, <span class="type">Bounded</span>, <span class="type">Enum</span>)  </span><br></pre></td></tr></table></figure>
<p>è¿™æ ·Dayç±»å‹çš„å€¼ï¼ˆMondayï½Sundayï¼‰ä¹‹é—´å°±å¯ä»¥æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰ï¼ˆä»Eqæ´¾ç”Ÿï¼‰ï¼Œæ¯”è¾ƒå¤§å°ï¼ˆä»Ordæ´¾ç”Ÿï¼Œå·¦ä¾§ä¸ºå°ï¼Œå³ä¾§ä¸ºå¤§ï¼‰ï¼Œæ˜¾ç¤ºæˆå­—ç¬¦ä¸²ï¼ˆä»Showæ´¾ç”Ÿï¼‰ï¼Œä»å­—ç¬¦ä¸²ä¸­è¯»å–ï¼ˆä»Readæ´¾ç”Ÿï¼‰ï¼ŒåŒ…å«è¾¹ç•Œï¼ˆä»Boundedæ´¾ç”Ÿï¼‰ï¼Œå¯ä»¥æšä¸¾ï¼ˆä»Enumæ´¾ç”Ÿï¼ŒæŒ‰ç…§å€¼æ„é€ å™¨ä¸­çš„é¡ºåºä¾æ¬¡å‘å³ï¼‰</p>
<h4 id="Type-synonyms"><a href="#Type-synonyms" class="headerlink" title="Type synonyms"></a>Type synonyms</h4><p>ä¸ºäº†é˜…è¯»æ–¹ä¾¿ï¼Œä¹¦å†™ç®€ä¾¿ï¼Œå¯ä»¥ä½¿ç”¨<code>type</code>å…³é”®å­—ä¸ºå·²æœ‰ç±»å‹åˆ›å»ºåˆ«åï¼ˆsynonymsï¼‰ã€‚æ¯”å¦‚Stringçš„å®šä¹‰ï¼š</p>
<p style="text-align: center;">type String = [Char]</p>

<p>åœ¨æ‰€æœ‰éœ€è¦ä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆå³[Char]ï¼‰çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨Stringæ¥ä»£æ›¿ï¼Œå®ƒä»¬æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œåªæ˜¯Stringæ›´ç®€ä¾¿æ˜“è¯»ã€‚<br>åŒæ—¶ï¼Œç±»å‹åˆ«åä¹Ÿå¯ä»¥æ¥æ”¶ç±»å‹å‚æ•°</p>
<h4 id="newtype-keyword"><a href="#newtype-keyword" class="headerlink" title="newtype keyword"></a>newtype keyword</h4><p>é™¤äº†<code>data</code>ã€<code>type</code>å…³é”®å­—ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ç”¨<code>newtype</code>å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œæ¯”å¦‚<code>Control.Applicative</code>æ¨¡å—ä¸­çš„ZipListï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">ZipList</span> a = &#123; <span class="title">getZipList</span> :: [<span class="title">a</span>] &#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸åŒäºtypeï¼Œå®ƒä¸æ˜¯åˆ«åï¼Œå¯ä»¥ä½¿ç”¨recordè¯­æ³•æ¥ç›´æ¥å®šä¹‰å–å‡ºå€¼çš„å‡½æ•°</li>
<li>ä¸åŒäºdataï¼Œå®ƒåªèƒ½æœ‰ä¸€ä¸ªå€¼æ„é€ å™¨ï¼Œä½†æ˜¯é€Ÿåº¦è¦æ¯”dataå¿«ï¼Œè€Œä¸”æ›´åŠ æ‡’æƒ°</li>
</ul>
<h4 id="Recursive-data-structures"><a href="#Recursive-data-structures" class="headerlink" title="Recursive data structures"></a>Recursive data structures</h4><p>ä¸€ä¸ªç±»å‹ä¹Ÿå¯ä»¥é€’å½’å®šä¹‰ï¼Œæ¯”å¦‚ä¸€é¢—äºŒå‰æ ‘ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Tree</span> a = <span class="type">EmptyTree</span> | <span class="type">Node</span> a (<span class="type">Tree</span> <span class="title">a</span>) (<span class="type">Tree</span> <span class="title">a</span>) <span class="keyword">deriving</span> (<span class="type">Show</span>, <span class="type">Read</span>, <span class="type">Eq</span>)  </span></span><br></pre></td></tr></table></figure>

<h3 id="å®šä¹‰æ–°Typeclass"><a href="#å®šä¹‰æ–°Typeclass" class="headerlink" title="å®šä¹‰æ–°Typeclass"></a>å®šä¹‰æ–°Typeclass</h3><p>å®šä¹‰ä¸€ä¸ªæ–°çš„Typeclasséœ€è¦ä½¿ç”¨classå…³é”®å­—ï¼Œä¾‹å¦‚å®šä¹‰Eqç±»å‹ç±»ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Eq</span> a <span class="keyword">where</span></span>  </span><br><span class="line">    (==) :: a -&gt; a -&gt; <span class="type">Bool</span>  </span><br><span class="line">    (/=) :: a -&gt; a -&gt; <span class="type">Bool</span>  </span><br><span class="line">    x == y = not (x /= y)  </span><br><span class="line">    x /= y = not (x == y)  </span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>a</code>æ˜¯ä¸€ä¸ªç±»å‹å˜é‡ï¼Œå‰ä¸¤è¡Œå£°æ˜äº†éœ€è¦å®ç°çš„å‡½æ•°çš„åå­—åŠå…¶ç±»å‹ï¼Œåä¸¤è¡Œè¡¨æ˜äº†éœ€è¦çš„å‡½æ•°ä¹‹é—´å¯ä»¥ç›¸äº’å®šä¹‰ï¼ˆä¸å¿…è¦ï¼‰ã€‚</p>
<p>åŒ…å«äº†åä¸¤è¡Œä¹‹åï¼Œåªå®šä¹‰(==)å‡½æ•°æˆ–è€…(/=)å‡½æ•°éƒ½å¯ä»¥å®Œæˆå…¨éƒ¨å®šä¹‰ï¼Œå®ƒä»¬ï¼ˆ<code>(==) | (/=)</code>ï¼‰æˆä¸ºè¿™ä¸ªç±»å‹ç±»çš„æœ€å°å®Œæ•´å®šä¹‰ï¼ˆminimal complete definitionï¼‰</p>
<p>æŸ¥çœ‹ä¸€ä¸ªç±»å‹ç±»çš„æˆå‘˜éœ€è¦å®ç°çš„å‡½æ•°å¯ä»¥åœ¨GHCiä¸­ä½¿ç”¨<code>:info</code>ï¼š</p>
<p style="text-align: center;">ghci> :info Eq</p>

<h4 id="æ‰‹åŠ¨åˆ›å»ºå®ä¾‹"><a href="#æ‰‹åŠ¨åˆ›å»ºå®ä¾‹" class="headerlink" title="æ‰‹åŠ¨åˆ›å»ºå®ä¾‹"></a>æ‰‹åŠ¨åˆ›å»ºå®ä¾‹</h4><p>ä½¿ä¸€ä¸ªç±»å‹æˆä¸ºä¸€ä¸ªç±»å‹ç±»çš„å®ä¾‹å¯ä»¥ç›´æ¥ä½¿ç”¨<code>deriving</code>æ¥è‡ªåŠ¨å®Œæˆï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨instanceå…³é”®å­—æ¥æ‰‹åŠ¨å®Œæˆã€‚æ¯”å¦‚ä½¿Pointæˆä¸ºShowçš„å®ä¾‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Show</span> <span class="type">Point</span> <span class="keyword">where</span></span></span><br><span class="line">    show (<span class="type">Point</span> x y) = <span class="string">&quot;(&quot;</span> ++ show x ++ <span class="string">&quot;, &quot;</span> ++ show y ++ <span class="string">&quot;)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- in ghci</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Point</span> <span class="number">1.0</span> <span class="number">2.0</span></span><br><span class="line">(<span class="number">1.0</span>, <span class="number">2.0</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥è‡ªå®šä¹‰æ˜¾ç¤ºçš„å†…å®¹ï¼Œå¦åˆ™ä½¿ç”¨derivingçš„è¯åªä¼šç›´æ¥å°†å…¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚</p>
<p>åŒæ—¶ä¹Ÿè¦æ³¨æ„ç±»å‹å’Œç±»å‹æ„é€ å™¨çš„åŒºåˆ«ï¼Œä¼ å…¥ç»™instanceçš„ç¬¬äºŒä¸ªå‚æ•°åº”è¯¥ä¸ºç±»å‹è€Œä¸æ˜¯ç±»å‹æ„é€ å™¨ï¼Œæ¯”å¦‚Maybeï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Eq</span> <span class="type">Maybe</span> <span class="keyword">where</span></span>  </span><br><span class="line">    ...    </span><br><span class="line"><span class="comment">-- é”™è¯¯ç”¨æ³•ï¼Œå› ä¸ºMaybeæ˜¯ç±»å‹æ„é€ å™¨è€Œä¸æ˜¯ç±»å‹</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Eq</span> (<span class="type">Maybe</span> <span class="title">m</span>) <span class="keyword">where</span></span>  </span><br><span class="line">    ...</span><br><span class="line"><span class="comment">-- é”™è¯¯ç”¨æ³•ï¼Œå› ä¸ºmä¸ä¸€å®šæ˜¯Eqçš„æˆå‘˜</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> (<span class="type">Eq</span> <span class="title">m</span>) =&gt; <span class="type">Eq</span> (<span class="type">Maybe</span> <span class="title">m</span>) <span class="keyword">where</span></span>  </span><br><span class="line">    <span class="type">Just</span> x == <span class="type">Just</span> y = x == y  </span><br><span class="line">    <span class="type">Nothing</span> == <span class="type">Nothing</span> = <span class="type">True</span>  </span><br><span class="line">    _ == _ = <span class="type">False</span>  </span><br></pre></td></tr></table></figure>

<h4 id="Functor-Typeclass"><a href="#Functor-Typeclass" class="headerlink" title="Functor Typeclass"></a>Functor Typeclass</h4><p>Functorä¹Ÿæ˜¯ä¸€ç§ç±»å‹ç±»ï¼Œå®ƒåªè§„å®šäº†ä¸€ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Functor</span> f <span class="keyword">where</span></span></span><br><span class="line">    fmap :: (a -&gt; b) -&gt; f a -&gt; f b</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>f</code>æ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…·ä½“ç±»å‹</p>
<h3 id="Kinds"><a href="#Kinds" class="headerlink" title="Kinds"></a>Kinds</h3><p>ä¸€ä¸ªå€¼çš„ç±»å‹å«åšç±»å‹ï¼ˆTypeï¼‰ï¼Œè€Œä¸€ä¸ªç±»å‹çš„ç±»å‹å«åšKindã€‚å¯ä»¥é€šè¿‡GHCiä¸­<code>:k</code>æ¥æŸ¥çœ‹Kindï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; :k <span class="type">Int</span></span><br><span class="line"><span class="type">Int</span> :: *</span><br><span class="line"><span class="title">ghci</span>&gt; :k <span class="type">Maybe</span></span><br><span class="line"><span class="type">Maybe</span> :: * -&gt; *</span><br><span class="line"><span class="title">ghci</span>&gt; :k <span class="type">Maybe</span> <span class="type">Int</span></span><br><span class="line"><span class="type">Maybe</span> <span class="type">Int</span> :: *</span><br><span class="line"><span class="title">ghci</span>&gt; :k <span class="type">Either</span></span><br><span class="line"><span class="type">Either</span> :: * -&gt; * -&gt; *</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„æ˜Ÿå·<code>*</code>ä»£è¡¨äº†ä¸€ä¸ªå…·ä½“ç±»å‹ï¼ˆconcrete typeï¼‰ã€‚Intæœ¬èº«å°±æ˜¯ä¸€ä¸ªå…·ä½“ç±»å‹ï¼Œæ‰€ä»¥Intçš„Kindæ˜¯*ã€‚è€ŒMaybeæ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå…·ä½“ç±»å‹è¿”å›ä¸€ä¸ªæ–°çš„å…·ä½“ç±»å‹ï¼Œæ‰€ä»¥Maybeçš„Kindæ˜¯* -&gt; *ã€‚å¦‚æœç»™Maybeä¼ å…¥äº†ä¸€ä¸ªIntï¼Œé‚£ä¹ˆå¾—åˆ°çš„Maybe Intå°±æ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»å‹ï¼Œå®ƒçš„Kindå°±æ˜¯*ã€‚Eitherä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œä½†å®ƒæ¥æ”¶ä¸¤ä¸ªç±»å‹æ‰äº§ç”Ÿä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œæ‰€ä»¥Eitherçš„Kindæ˜¯* -&gt; * -&gt; *ã€‚</p>
<h2 id="Input-Output"><a href="#Input-Output" class="headerlink" title="Input/Output"></a>Input/Output</h2><h3 id="è¿è¡ŒHaskellç¨‹åº"><a href="#è¿è¡ŒHaskellç¨‹åº" class="headerlink" title="è¿è¡ŒHaskellç¨‹åº"></a>è¿è¡ŒHaskellç¨‹åº</h3><p>ä¸åœ¨GHCiä¸­è¿è¡Œä¸€ä¸ªHaskellç¨‹åºæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li>ç¼–è¯‘è¿è¡Œï¼š <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ ghc --make code</span><br><span class="line">$ ./code</span><br></pre></td></tr></table></figure></li>
<li>é€šè¿‡<code>runhaskell</code>å‘½ä»¤ç›´æ¥è¿è¡Œï¼š <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ runhaskell code.hs</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="è¾“å‡ºæ–‡æœ¬"><a href="#è¾“å‡ºæ–‡æœ¬" class="headerlink" title="è¾“å‡ºæ–‡æœ¬"></a>è¾“å‡ºæ–‡æœ¬</h3><p>åœ¨ä¸€ä¸ªHaskellç¨‹åºä¸­è¾“å‡ºæ–‡å­—éœ€è¦å®šä¹‰ä¸€ä¸ªmainå‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = putStrLn <span class="string">&quot;Hello World&quot;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­putStrLnçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">putStrLn :: String -> IO ()</p>

<p>putStrLnæ¥æ”¶ä¸€ä¸ªStringç±»å‹ï¼Œå¹¶è¿”å›ä¸€ä¸ªç»“æœä¸º()ç±»å‹çš„IOåŠ¨ä½œï¼ˆI/O actionï¼‰ã€‚æ‰€ä»¥mainå‡½æ•°çš„ç±»å‹ä¸ºIO ()ã€‚ï¼ˆIOçš„Kindæ˜¯* -&gt; *ï¼‰</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–é»˜è®¤æä¾›çš„è¾“å‡ºæ–‡æœ¬çš„å‡½æ•°ï¼š</p>
<ul>
<li><code>putStr</code>ï¼šè¾“å‡ºæ–‡æœ¬ï¼Œç»“å°¾ä¸æ¢è¡Œ</li>
<li><code>putChar</code>ï¼šè¾“å‡ºå•ä¸ªå­—ç¬¦ï¼Œç»“å°¾ä¸æ¢è¡Œã€‚æ¥æ”¶çš„å‚æ•°ä¸ºå•ä¸ªCharï¼Œä¸æ˜¯Stringï¼ˆç”¨å•å¼•å·ä¸æ˜¯åŒå¼•å·ï¼‰</li>
<li><code>print</code>ï¼šå¯ä»¥æ¥æ”¶ä»»ä½•Showçš„æˆå‘˜ï¼Œå…ˆç”¨showè½¬åŒ–ä¸ºå­—ç¬¦ä¸²ç„¶åè¾“å‡ºã€‚ç­‰åŒäºputStrLn . show</li>
</ul>
<h4 id="do-block"><a href="#do-block" class="headerlink" title="do block"></a>do block</h4><p>åœ¨mainå‡½æ•°ä¸­ä½¿ç”¨å¤šä¸ªputStrLnéœ€è¦ä½¿ç”¨doè¯­å¥ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    putStrLn <span class="string">&quot;Line1&quot;</span></span><br><span class="line">    putStrLn <span class="string">&quot;Line2&quot;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æœ€åä¸€è¡Œä¸€å®šè¦è¿”å›IO ()ç±»å‹çš„å€¼</p>
<h3 id="è¾“å…¥æ–‡æœ¬"><a href="#è¾“å…¥æ–‡æœ¬" class="headerlink" title="è¾“å…¥æ–‡æœ¬"></a>è¾“å…¥æ–‡æœ¬</h3><p>è¾“å…¥æ–‡å­—éœ€è¦åœ¨doå—ä¸­ä½¿ç”¨getLineï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    line &lt;- getLine</span><br><span class="line">    putStrLn line</span><br></pre></td></tr></table></figure>
<p>getLineçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">getLine :: IO String</p>

<p>è€Œ&lt;-æ“ä½œç¬¦å°†getLineä¸­çš„Stringæå–äº†å‡ºæ¥ç»™åˆ°äº†lineï¼Œä½¿lineå˜æˆäº†Stringç±»å‹çš„ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>è€Œä¸”ä½¿ç”¨è¾“å…¥çš„å­—ç¬¦ä¸²å¿…é¡»è¦ç»è¿‡ä¸€æ¬¡&lt;-ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨getLineä½œä¸ºå­—ç¬¦ä¸²ï¼Œå› ä¸ºgetLineä¸æ˜¯Stringç±»å‹ï¼Œè€Œæ˜¯IO Stringç±»å‹ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨getCharæ¥è·å–å•ä¸ªå­—ç¬¦ï¼Œä½†ä»ç„¶éœ€è¦ä½¿ç”¨&lt;-æ“ä½œç¬¦æ¥æå–Char</p>
<h3 id="å…¶ä»–IOç›¸å…³å‡½æ•°ç”¨æ³•"><a href="#å…¶ä»–IOç›¸å…³å‡½æ•°ç”¨æ³•" class="headerlink" title="å…¶ä»–IOç›¸å…³å‡½æ•°ç”¨æ³•"></a>å…¶ä»–IOç›¸å…³å‡½æ•°ç”¨æ³•</h3><h4 id="return"><a href="#return" class="headerlink" title="return"></a>return</h4><p>Haskellä¸­çš„returnå’Œå…¶ä»–å‘½ä»¤å¼è¯­è¨€ä¸­çš„returnå®Œå…¨ä¸åŒï¼Œå®ƒä¸ä¼šä½¿å‡½æ•°ç›´æ¥ç»“æŸå¹¶è¿”å›ä¸€ä¸ªå€¼ã€‚</p>
<p>mainå‡½æ•°å¿…é¡»å®šä¹‰ä¸ºç±»å‹ä¸ºIO ()çš„å‡½æ•°ï¼Œæ‰€ä»¥åœ¨mainå‡½æ•°ä¸­ä½¿ç”¨ifè¯­å¥ï¼Œå¦‚æœä¸è¾“å‡ºçš„è¯ä¹Ÿä¸å¯ä»¥ç›´æ¥æ”¾ä¸‹ä»€ä¹ˆéƒ½ä¸å¹²ï¼Œå› ä¸ºè¿™æ—¶å€™mainå‡½æ•°çš„ç±»å‹ä¸æ˜¯IO ()ã€‚æ‰€ä»¥è¿™æ—¶éœ€è¦ä½¿ç”¨return ()æ¥ä¸ºmainå‡½æ•°æŒ‡å®šä¸ºIO ()ç±»å‹ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = <span class="keyword">do</span> </span><br><span class="line">    line &lt;- getLine</span><br><span class="line">    <span class="keyword">if</span> null line</span><br><span class="line">        <span class="keyword">then</span> return () <span class="comment">-- &lt;-è¿™é‡Œ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">do</span></span><br><span class="line">            ...</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨&lt;-æ“ä½œç¬¦ä¹Ÿå¯ä»¥ç›´æ¥å°†returnè¯­å¥ä¸­çš„å†…å®¹æå–å‡ºæ¥ï¼Œæ¯”å¦‚a &lt;- return â€˜Aâ€™ï¼Œæ‰§è¡Œåaå°±æ˜¯â€™Aâ€™ã€‚</p>
<h4 id="when"><a href="#when" class="headerlink" title="when"></a>when</h4><p>whenåŒ…å«åœ¨<code>Control.Monad</code>æ¨¡å—ä¸­ï¼Œå®ƒè¡¨ç¤ºåœ¨æ»¡è¶³ç¬¬ä¸€ä¸ªå‚æ•°çš„æ¡ä»¶ä¸‹ä¼šæ‰§è¡Œç¬¬äºŒä¸ªå‡½æ•°ï¼Œå¦åˆ™ä¼šreturn ()ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Control.Monad   </span><br><span class="line">  </span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span>  </span><br><span class="line">    c &lt;- getChar  </span><br><span class="line">    when (c /= &#x27; &#x27;) $ <span class="keyword">do</span>  </span><br><span class="line">        putChar c  </span><br><span class="line">        main  </span><br></pre></td></tr></table></figure>
<p>ç­‰åŒäºï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = <span class="keyword">do</span>     </span><br><span class="line">    c &lt;- getChar  </span><br><span class="line">    <span class="keyword">if</span> c /= &#x27; &#x27;  </span><br><span class="line">        <span class="keyword">then</span> <span class="keyword">do</span>  </span><br><span class="line">            putChar c  </span><br><span class="line">            main  </span><br><span class="line">        <span class="keyword">else</span> return () </span><br></pre></td></tr></table></figure>

<h4 id="sequence"><a href="#sequence" class="headerlink" title="sequence"></a>sequence</h4><p>sequenceåœ¨IOä¸­ä½¿ç”¨æ—¶å¯ä»¥è¾¾æˆ[IO a] -&gt; IO [a]çš„æ•ˆæœï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä½œï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">[a, b, c] &lt;- sequence [getLine, getLine, getLine]</span><br></pre></td></tr></table></figure>

<h4 id="mapM-amp-mapM"><a href="#mapM-amp-mapM" class="headerlink" title="mapM &amp; mapM_"></a>mapM &amp; mapM_</h4><p>åœ¨IOç›¸å…³çš„åœ°æ–¹ä½¿ç”¨mapï¼Œå¯ä»¥ä½¿ç”¨mapMå’ŒmapM_ï¼Œå…¶ä¸­mapMæœ‰è¿”å›å€¼è€ŒmapM_ç›´æ¥æ‰”æ‰äº†è¿”å›å€¼ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; mapM print [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]  </span><br><span class="line"><span class="number">1</span>  </span><br><span class="line"><span class="number">2</span>  </span><br><span class="line"><span class="number">3</span>  </span><br><span class="line">[(),(),()]  </span><br><span class="line"><span class="title">ghci</span>&gt; mapM_ print [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]  </span><br><span class="line"><span class="number">1</span>  </span><br><span class="line"><span class="number">2</span>  </span><br><span class="line"><span class="number">3</span>  </span><br></pre></td></tr></table></figure>

<h4 id="forever"><a href="#forever" class="headerlink" title="forever"></a>forever</h4><p>foreverå‡½æ•°åŒ…å«åœ¨<code>Control.Monad</code>æ¨¡å—ä¸­ã€‚åœ¨mainå‡½æ•°å¼€å¤´åŠ ä¸Šforeverå‡½æ•°å¯ä»¥ä½¿åé¢çš„doå—ä¸€ç›´é‡å¤æ‰§è¡Œç›´åˆ°ç¨‹åºè¢«è¿«ç»ˆæ­¢ï¼Œå¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Control.Monad</span><br><span class="line">  </span><br><span class="line"><span class="title">main</span> = forever $ <span class="keyword">do</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<h4 id="forM"><a href="#forM" class="headerlink" title="forM"></a>forM</h4><p>forMå‡½æ•°åŒ…å«åœ¨<code>Control.Monad</code>æ¨¡å—ä¸­ï¼Œå®ƒçš„åŠŸèƒ½å’ŒmapMç±»ä¼¼ï¼Œä»ç¬¬ä¸€ä¸ªå‚æ•°ä¸­é€ä¸ªå–å‡ºå…ƒç´ ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼ˆä¸€ä¸ªæ¥æ”¶ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼‰ä¸­ï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥è¿”å›IO aç±»å‹ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Control.Monad</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span> </span><br><span class="line">    colors &lt;- forM [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>] (\a -&gt; <span class="keyword">do</span></span><br><span class="line">        putStrLn $ <span class="string">&quot;Which color do you associate with the number &quot;</span> ++ show a ++ <span class="string">&quot;?&quot;</span>  </span><br><span class="line">        color &lt;- getLine  </span><br><span class="line">        return color)</span><br><span class="line">    putStrLn <span class="string">&quot;The colors that you associate with 1, 2, 3 and 4 are: &quot;</span>  </span><br><span class="line">    mapM putStrLn colors</span><br></pre></td></tr></table></figure>

<h4 id="getContents"><a href="#getContents" class="headerlink" title="getContents"></a>getContents</h4><p>getLineè·å–ä¸€æ•´è¡Œï¼Œè€ŒgetContentsä»æ ‡å‡†è¾“å…¥ä¸­è·å–å…¨éƒ¨å†…å®¹ç›´åˆ°é‡åˆ°EOFï¼Œå¹¶ä¸”å®ƒæ˜¯lazyçš„ï¼Œåœ¨æ‰§è¡Œäº†foo &lt;- getContentsåï¼Œå®ƒå¹¶ä¸ä¼šè¯»å–æ ‡å‡†è¾“å…¥å¹¶ä¸”èµ‹å€¼åˆ°fooï¼Œè€Œæ˜¯ç­‰åˆ°éœ€è¦ä½¿ç”¨fooçš„æ—¶å€™å†ä»æ ‡å‡†è¾“å…¥è¯»å–ã€‚</p>
<p>getContentsåœ¨ä½¿ç”¨ç®¡é“ä¼ å…¥æ–‡å­—æ—¶å¾ˆå¸¸ç”¨ï¼Œå¯ä»¥ä»£æ›¿forever+getLineä½¿ç”¨ï¼Œæ¯”å¦‚ä¸€ä¸ªHaskellç¨‹åºæ–‡ä»¶code.hsï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Data.Char  </span><br><span class="line">  </span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span>  </span><br><span class="line">    contents &lt;- getContents  </span><br><span class="line">    putStr (map toUpper contents)  </span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ghc â€“make codeç¼–è¯‘åï¼Œé€šè¿‡ç®¡é“ä¼ å…¥æ–‡å­—ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">cat text.txt | ./code</span><br></pre></td></tr></table></figure>
<p>ä¼šå°†text.txtä¸­çš„æ‰€æœ‰å­—æ¯è½¬ä¸ºå¤§å†™å¹¶è¾“å‡º</p>
<h4 id="interact"><a href="#interact" class="headerlink" title="interact"></a>interact</h4><p>ä¸Šè¿°åŠŸèƒ½è¿˜å¯ä»¥è½¬åŒ–ä¸ºä¸€ä¸ªString -&gt; Stringçš„å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">upperStrings</span> = unlines . map (map toUpper) . lines</span><br></pre></td></tr></table></figure>
<p>è€Œåœ¨mainä¸­ä½¿ç”¨è¿™ä¸ªå‡½æ•°å°±éœ€è¦ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    contents &lt;- getContents</span><br><span class="line">    putStr (upperStrings contents)</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯String -&gt; Stringç±»å‹çš„å‡½æ•°åœ¨è¾“å…¥è¾“å‡ºä¸­çš„ä½¿ç”¨å¤ªå¸¸è§äº†ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨interactå‡½æ•°æ¥ç®€åŒ–ã€‚interactçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">interact :: (String -> String) -> IO ()</p>

<p>å¯ä»¥çœ‹å‡ºå®ƒæ¥æ”¶ä¸€ä¸ªString -&gt; Stringçš„å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªIO ()ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨åœ¨mainä¸Šã€‚</p>
<p>äºæ˜¯æ•´ä¸ªè½¬æ¢ä¸ºå¤§å†™çš„ç¨‹åºå°±å¯ä»¥ç®€åŒ–ä¸ºï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = interact $ unlines . map (map toUpper) . lines</span><br></pre></td></tr></table></figure>

<h3 id="æ–‡ä»¶å’Œæµ"><a href="#æ–‡ä»¶å’Œæµ" class="headerlink" title="æ–‡ä»¶å’Œæµ"></a>æ–‡ä»¶å’Œæµ</h3><p>ä»¥ä¸‹ä¸æ–‡ä»¶å’Œæµç›¸å…³çš„å‡½æ•°éƒ½åŒ…å«åœ¨<code>System.IO</code>æ¨¡å—ä¸­</p>
<h4 id="openFile"><a href="#openFile" class="headerlink" title="openFile"></a>openFile</h4><p>openFileå‡½æ•°å¯ä»¥ç”¨æ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">openFile :: FilePath -> IOMode -> IO Handle</p>

<p>å…¶ä¸­<code>FilePath</code>æ˜¯Stringçš„type synonymsï¼Œç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ¥è¡¨ç¤ºéœ€è¦æ‰“å¼€çš„æ–‡ä»¶çš„è·¯å¾„</p>
<p><code>IOMode</code>çš„å®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">IOMode</span> = <span class="type">ReadMode</span> | <span class="type">WriteMode</span> | <span class="type">AppendMode</span> | <span class="type">ReadWriteMode</span></span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥å®ƒä¸€å…±åªæœ‰å››ä¸ªå€¼ï¼Œç”¨æ¥è¡¨ç¤ºè¿›è¡ŒIOæ“ä½œçš„æ¨¡å¼</p>
<p>openFileè¿”å›ä¸€ä¸ªIO Handleç±»å‹çš„å€¼ï¼Œå°†å…¶ç”¨&lt;-æ“ä½œç¬¦æå–åä¼šå‡ºç°ä¸€ä¸ªHandleçš„å€¼ã€‚ä½†ä¸èƒ½ä»Handleä¸­ç›´æ¥ä½¿ç”¨æ–‡å­—ï¼Œè¿˜éœ€è¦ä½¿ç”¨ä¸€ç³»åˆ—å‡½æ•°ï¼š</p>
<ul>
<li><code>hGetContents</code> :: Handle -&gt; IO String ï¼Œä»Handleä¸­è¯»å–å…¨éƒ¨å†…å®¹ï¼Œè¿”å›ä¸€ä¸ªIO String</li>
<li><code>hGetChar</code> :: Handle -&gt; IO Char ï¼Œä»Handleä¸­è¯»å–ä¸€ä¸ªå­—ç¬¦</li>
<li><code>hGetLine</code> :: Handle -&gt; IO String ï¼Œä»Handleä¸­è¯»å–ä¸€è¡Œï¼Œè¿”å›ä¸€ä¸ªIO String</li>
<li><code>hPutStr</code> :: Handle -&gt; String -&gt; IO () ï¼Œå‘Handleä¸­è¾“å‡ºå­—ç¬¦ä¸²</li>
<li><code>hPutStrLn</code> :: Handle -&gt; String -&gt; IO () ï¼ŒåŒä¸Š</li>
</ul>
<p>åœ¨ä½¿ç”¨openFileè¿›è¡Œæ–‡ä»¶æ“ä½œåï¼Œéœ€è¦ä½¿ç”¨hCloseæ‰‹åŠ¨å…³é—­Handleã€‚hClose :: Handle -&gt; IO ()ï¼Œæ¥æ”¶ä¸€ä¸ªHandleå¹¶è¿”å›IO ()ï¼Œå¯ä»¥ç›´æ¥æ”¾åœ¨mainå‡½æ•°æœ«å°¾</p>
<p>æ‰€ä»¥ä½¿ç”¨openFileè¯»å–ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å…¨éƒ¨å†…å®¹å¹¶è¾“å‡ºçš„å…¨éƒ¨ä»£ç æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> System.IO</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    handle &lt;- openFile <span class="string">&quot;text.txt&quot;</span> <span class="type">ReadMode</span></span><br><span class="line">    contents &lt;- hGetContents handle</span><br><span class="line">    putStrLn contents</span><br><span class="line">    hClose handle</span><br></pre></td></tr></table></figure>

<h4 id="withFile"><a href="#withFile" class="headerlink" title="withFile"></a>withFile</h4><p>withFileç±»ä¼¼Pythonä¸­çš„with openï¼Œå®ƒåœ¨è¯»å–æ–‡ä»¶ä½¿ç”¨ä¹‹åä¸éœ€è¦æ‰‹åŠ¨closeæ–‡ä»¶ã€‚å®ƒçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">withFile :: FilePath -> IOMode -> (Handle -> IO a) -> IO a</p>

<p>å¯ä»¥çœ‹å‡ºï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>FilePath</code>ï¼šä¸€ä¸ªè¡¨ç¤ºæ–‡ä»¶è·¯å¾„çš„String</li>
<li><code>IOMode</code>ï¼šæ‰“å¼€æ–‡ä»¶çš„æ¨¡å¼</li>
<li><code>(Handle -&gt; IO a)</code>ï¼šä¸€ä¸ªå‡½æ•°ï¼Œè¡¨ç¤ºå¯¹è¯»å–æ–‡ä»¶åçš„Handleç´¢è¦è¿›è¡Œçš„æ“ä½œï¼Œéœ€è¦è¿”å›ä¸€ä¸ªI/O actionï¼›è€Œè¿™ä¸ªè¿”å›å€¼ä¹Ÿå°†ä½œä¸ºwithFileçš„è¿”å›å€¼</li>
</ul>
<p>ç°åœ¨ä½¿ç”¨withFileæ¥æ”¹å†™ä¸Šè¿°ä»£ç ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> System.IO</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = withFile <span class="string">&quot;text.txt&quot;</span> <span class="type">ReadMode</span> (\handle -&gt; <span class="keyword">do</span></span><br><span class="line">    contents &lt;- hGetContents handle</span><br><span class="line">    putStrLn contents)</span><br></pre></td></tr></table></figure>

<p>withFileçš„åŠŸèƒ½ç›¸å½“äºä»¥ä¸‹å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">withFile&#x27;</span> :: <span class="type">FilePath</span> -&gt; <span class="type">IOMode</span> -&gt; (<span class="type">Handle</span> -&gt; <span class="type">IO</span> a) -&gt; <span class="type">IO</span> a  </span><br><span class="line"><span class="title">withFile&#x27;</span> path mode f = <span class="keyword">do</span>  </span><br><span class="line">    handle &lt;- openFile path mode   </span><br><span class="line">    result &lt;- f handle  </span><br><span class="line">    hClose handle  </span><br><span class="line">    return result  </span><br></pre></td></tr></table></figure>

<h4 id="readFile"><a href="#readFile" class="headerlink" title="readFile"></a>readFile</h4><p>readFileå¯ä»¥æ›´åŠ ç®€åŒ–è¯»å–æ–‡ä»¶å†…å®¹çš„æ“ä½œï¼Œå®ƒçš„ç±»å‹ï¼š</p>
<p style="text-align: center;">readFile :: FilePath -> IO String</p>

<p>å®ƒåªéœ€è¦è¾“å…¥ä¸€ä¸ªè¡¨ç¤ºæ–‡ä»¶è·¯å¾„çš„å­—ç¬¦ä¸²ï¼Œè¿”å›å…¶ä¸­ä»¥å…¶ä¸­å†…å®¹ä¸ºå†…å®¹çš„I/O actionï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> System.IO</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    contents &lt;- readFile <span class="string">&quot;text.txt&quot;</span></span><br><span class="line">    putStrLn contents</span><br></pre></td></tr></table></figure>

<h4 id="writeFile"><a href="#writeFile" class="headerlink" title="writeFile"></a>writeFile</h4><p>writeFileç®€åŒ–äº†å†™å…¥æ–‡ä»¶çš„æ“ä½œï¼Œå®ƒçš„ç±»å‹ï¼š</p>
<p style="text-align: center;">writeFile :: FilePath -> String -> IO ()</p>

<p>ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦å†™å…¥çš„æ–‡ä»¶çš„è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦å†™å…¥çš„å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªIO ()</p>
<h4 id="appendFile"><a href="#appendFile" class="headerlink" title="appendFile"></a>appendFile</h4><p>appendFileç±»ä¼¼writeFileï¼Œä½†ä½¿ç”¨å®ƒä¸ä¼šè¦†ç›–æ–‡ä»¶ä¸­åŸæ¥å†…å®¹ï¼Œè€Œæ˜¯ç›´æ¥æŠŠå­—ç¬¦ä¸²æ·»åŠ åˆ°æ–‡ä»¶æœ«å°¾</p>
<h4 id="buffer"><a href="#buffer" class="headerlink" title="buffer"></a>buffer</h4><p>æ–‡ä»¶ä»¥æµçš„å½¢å¼è¢«è¯»å–ï¼Œé»˜è®¤æ–‡å­—æ–‡ä»¶çš„ç¼“å†²åŒºï¼ˆbufferï¼‰å¤§å°æ˜¯ä¸€è¡Œï¼Œå³æ¯æ¬¡è¯»å–ä¸€è¡Œå†…å®¹ï¼›é»˜è®¤äºŒè¿›åˆ¶æ–‡ä»¶çš„ç¼“å†²åŒºå¤§å°æ˜¯ä»¥å—ä¸ºå•ä½ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™æ ¹æ®ç³»ç»Ÿé»˜è®¤æ¥é€‰æ‹©ã€‚</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡<code>hSetBuffering</code>å‡½æ•°æ¥æ‰‹åŠ¨è®¾ç½®ç¼“å†²åŒºå¤§å°ï¼Œè¿™ä¸ªå‡½æ•°çš„ç±»å‹ï¼š</p>
<p style="text-align: center;">hSetBuffering :: Handle -> BufferMode -> IO ()</p>

<p>å®ƒæ¥æ”¶ä¸€ä¸ªhandleï¼Œå’Œä¸€ä¸ªBufferModeï¼Œå¹¶è¿”å›IO ()ã€‚å…¶ä¸­BufferModeæœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li><code>NoBuffering</code>ï¼šæ²¡æœ‰ç¼“å†²åŒºï¼Œä¸€æ¬¡è¯»å…¥ä¸€ä¸ªå­—ç¬¦</li>
<li><code>LineBuffering</code>ï¼šç¼“å†²åŒºå¤§å°æ˜¯ä¸€è¡Œï¼Œå³æ¯æ¬¡è¯»å…¥ä¸€è¡Œå†…å®¹</li>
<li><code>BlockBuffering (Maybe Int)</code>ï¼šç¼“å†²åŒºå¤§å°æ˜¯ä¸€å—ï¼Œå—çš„å¤§å°ç”±Maybe IntæŒ‡å®šï¼š<ul>
<li><code>BlockBuffering (Nothing)</code>ï¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å—å¤§å°</li>
<li><code>BlockBuffering (Just 2048)</code>ï¼šä¸€å—çš„å¤§å°æ˜¯2048å­—èŠ‚ï¼Œå³æ¯æ¬¡è¯»å…¥2048bytesçš„å†…å®¹</li>
</ul>
</li>
</ul>
<p>ç¼“å†²åŒºçš„åˆ·æ–°æ˜¯è‡ªåŠ¨çš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>hFlush</code>æ¥æ‰‹åŠ¨åˆ·æ–°</p>
<p style="text-align: center;">hFlush :: Handle -> IO ()</p>

<p>ä¼ å…¥ä¸€ä¸ªhandleï¼Œè¿”å›IO ()ï¼Œå³åˆ·æ–°å¯¹åº”handleçš„ç¼“å†²åŒº</p>
<h4 id="openTempFile"><a href="#openTempFile" class="headerlink" title="openTempFile"></a>openTempFile</h4><p>openTempFileå¯ä»¥æ–°å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼š</p>
<p style="text-align: center;">openTempFile :: FilePath -> String -> IO (FilePath, Handle)</p>

<p><code>FilePath</code>æŒ‡ä¸´æ—¶æ–‡ä»¶è¦åˆ›å»ºçš„ä½ç½®è·¯å¾„ï¼Œ<code>String</code>æŒ‡ä¸´æ—¶æ–‡ä»¶åå­—çš„å‰ç¼€ï¼Œè¿”å›ä¸€ä¸ªI/O actionï¼Œå…¶å†…å®¹ç¬¬ä¸€ä¸ª<code>FilePath</code>æ˜¯åˆ›å»ºå¾—åˆ°çš„ä¸´æ—¶æ–‡ä»¶çš„è·¯å¾„ï¼Œ<code>Handle</code>æ˜¯ä¸´æ—¶æ–‡ä»¶çš„handle</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> System.IO</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    (tempFile, tempHandle) &lt;- openTempFile <span class="string">&quot;.&quot;</span> <span class="string">&quot;temp&quot;</span></span><br><span class="line">    ...</span><br><span class="line">    hClose tempHandle</span><br></pre></td></tr></table></figure>
<p><code>&quot;.&quot;</code>æŒ‡ä¸´æ—¶æ–‡ä»¶è¦åœ¨å½“å‰ç›®å½•åˆ›å»ºï¼Œ<code>&quot;temp&quot;</code>æŒ‡ä¸´æ—¶æ–‡ä»¶åå­—ä»¥tempå¼€å¤´ã€‚æœ€ç»ˆå¾—åˆ°çš„tempFileå°±æ˜¯./tempâ€¦â€¦.ï¼Œtempåä¸ºéšæœºæ•°å­—ï¼Œå¦‚<code>./temp43620-0</code></p>
<h3 id="è·¯å¾„æ“ä½œ"><a href="#è·¯å¾„æ“ä½œ" class="headerlink" title="è·¯å¾„æ“ä½œ"></a>è·¯å¾„æ“ä½œ</h3><p>ç›¸å…³å‡½æ•°éƒ½åŒ…å«åœ¨<code>System.Directory</code>æ¨¡å—ä¸­ï¼Œå…¨éƒ¨å†…å®¹è§<a href="https://hackage.haskell.org/package/directory-1.3.6.2/docs/System-Directory.html">System.Directory</a></p>
<h4 id="getCurrentDirectory"><a href="#getCurrentDirectory" class="headerlink" title="getCurrentDirectory"></a>getCurrentDirectory</h4><p style="text-align: center;">getCurrentDirectory :: IO FilePath</p>

<p>ç›´æ¥è¿”å›ä¸€ä¸ªI/O actionï¼Œå…¶å†…å®¹æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºå½“å‰è·¯å¾„çš„ç»å¯¹è·¯å¾„</p>
<h4 id="removeFile"><a href="#removeFile" class="headerlink" title="removeFile"></a>removeFile</h4><p style="text-align: center;">removeFile :: FilePath -> IO ()</p>

<p>è¾“å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œå¹¶åˆ é™¤æ‰å®ƒ</p>
<h4 id="renameFile"><a href="#renameFile" class="headerlink" title="renameFile"></a>renameFile</h4><p style="text-align: center;">renameFile :: FilePath -> FilePath -> IO ()</p>

<p>è¾“å…¥ä¸€ä¸ªåŸè·¯å¾„ï¼Œä¸€ä¸ªæ–°è·¯å¾„ï¼Œä¸ºåŸè·¯å¾„çš„æ–‡ä»¶é‡å‘½åä¸ºæ–°è·¯å¾„çš„å</p>
<h4 id="doesFileExist"><a href="#doesFileExist" class="headerlink" title="doesFileExist"></a>doesFileExist</h4><p style="text-align: center;">doesFileExist :: FilePath -> IO Bool</p>

<p>æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å¸ƒå°”å€¼çš„I/O action</p>
<h3 id="Command-line-arguments"><a href="#Command-line-arguments" class="headerlink" title="Command line arguments"></a>Command line arguments</h3><p><code>System.Environment</code>æ¨¡å—ä¸­æä¾›äº†ä¸¤ä¸ªå‡½æ•°å¯ä»¥ç”¨æ¥å¤„ç†ä¼ å…¥å‘½ä»¤è¡Œçš„å‚æ•°</p>
<h4 id="getArgs"><a href="#getArgs" class="headerlink" title="getArgs"></a>getArgs</h4><p style="text-align: center;">getArgs :: IO [String]</p>

<p>ä¸éœ€è¦è¾“å…¥å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªI/O actionï¼Œå†…å®¹ä¸ºä¼ å…¥å‘½ä»¤è¡Œçš„å‚æ•°ï¼ˆä¸€ä¸ªç”±Stringç»„æˆçš„åˆ—è¡¨ï¼‰ã€‚ç›¸å½“äºCè¯­è¨€ä¸­çš„argv[1:]</p>
<h4 id="getProgName"><a href="#getProgName" class="headerlink" title="getProgName"></a>getProgName</h4><p style="text-align: center;">getProgName :: IO String</p>

<p>è¿”å›I/O actionï¼Œå†…å®¹ä¸ºç¨‹åºçš„åå­—ï¼Œç›¸å½“äºCè¯­è¨€ä¸­çš„argv[0]</p>
<h3 id="Randomness"><a href="#Randomness" class="headerlink" title="Randomness"></a>Randomness</h3><p>å’Œéšæœºæ•°æœ‰å…³çš„å‡½æ•°éƒ½åŒ…å«åœ¨<code>System.Random</code>æ¨¡å—ä¸­ã€‚GHCiå¯åŠ¨æ—¶å¯èƒ½ä¸ä¼šåŒ…å«System.Randomçš„é…ç½®ï¼Œå¯¼è‡´æ— æ³•æ‰¾åˆ°æ¨¡å—ã€‚éœ€è¦é€šè¿‡stackæ‰“å¼€:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">stack ghci --package random</span><br></pre></td></tr></table></figure>

<p>Haskellè¦æ±‚åŒæ ·çš„ç¨‹åºéœ€è¦è¿è¡Œå‡ºåŒæ ·çš„ç»“æœï¼Œé™¤äº†ç”¨åˆ°äº†I/O actionï¼Œæ‰€æœ‰ä¼šé€ æˆä¸åŒç»“æœçš„å‡½æ•°éƒ½è¦äº¤ç»™I/O actionæ¥å®Œæˆ</p>
<p>é‚£è¦ä½¿éšæœºæ•°è„±ç¦»IOå­˜åœ¨ï¼Œå°±è¦ç”¨åˆ°éšæœºç”Ÿæˆå™¨ï¼ˆrandom generatorï¼‰</p>
<p><code>System.Random</code>æ¨¡å—æä¾›äº†å‡ ä¸ªç”Ÿæˆéšæœºæ•°çš„å‡½æ•°ï¼š</p>
<h4 id="random"><a href="#random" class="headerlink" title="random"></a>random</h4><p style="text-align: center;">random :: (Random a, RandomGen g) => g -> (a, g)</p>

<p>å…¶ä¸­åˆæœ‰ä¸¤ä¸ªæ–°çš„typeclassï¼ŒRandomè¡¨ç¤ºå¯ä»¥å–éšæœºï¼ŒRandomGenè¡¨ç¤ºéšæœºæ•°ç”Ÿæˆå™¨ã€‚randomå‡½æ•°æ¥æ”¶ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œè¿”å›ä¸€ä¸ªå…ƒç»„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ç”Ÿæˆçš„éšæœºæ•°ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªæ–°çš„éšæœºæ•°ç”Ÿæˆå™¨</p>
<p>è·å–éšæœºæ•°ç”Ÿæˆå™¨å¯ä»¥ä½¿ç”¨<code>mkStdGen</code>å‡½æ•°ï¼š</p>
<p style="text-align: center;">mkStdGen :: Int -> StdGen</p>

<p>å…¶ä¸­<code>StdGen</code>æ˜¯ä¸€ä¸ªRandomGençš„å®ä¾‹</p>
<p>è¿ç”¨randomç”Ÿæˆéšæœºæ•°éœ€è¦æŒ‡å®šç±»å‹ï¼Œä¸ç„¶ç¨‹åºæ— æ³•ç¡®å®š<code>a</code>æ˜¯ä»€ä¹ˆç±»å‹ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; random (mkStdGen <span class="number">100</span>) :: (<span class="type">Int</span>, <span class="type">StdGen</span>)</span><br><span class="line">(<span class="number">9216477508314497915</span>,<span class="type">StdGen</span> &#123;unStdGen = <span class="type">SMGen</span> <span class="number">712633246999323047</span> <span class="number">2532601429470541125</span>&#125;)</span><br><span class="line"><span class="title">ghci</span>&gt; random (mkStdGen <span class="number">100</span>) :: (<span class="type">Char</span>, <span class="type">StdGen</span>)</span><br><span class="line">(&#x27;\<span class="number">537310</span>&#x27;,<span class="type">StdGen</span> &#123;unStdGen = <span class="type">SMGen</span> <span class="number">712633246999323047</span> <span class="number">2532601429470541125</span>&#125;)</span><br><span class="line"><span class="title">ghci</span>&gt; random (mkStdGen <span class="number">100</span>) :: (<span class="type">Bool</span>, <span class="type">StdGen</span>)</span><br><span class="line">(<span class="type">True</span>,<span class="type">StdGen</span> &#123;unStdGen = <span class="type">SMGen</span> <span class="number">712633246999323047</span> <span class="number">2532601429470541125</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡è¿è¡ŒåŒæ ·çš„å‡½æ•°ï¼Œä¼šå¾—åˆ°åŒæ ·çš„ç»“æœã€‚æ‰€ä»¥å¦‚æœéœ€è¦ç”Ÿæˆå…¶ä»–çš„éšæœºæ•°ï¼Œéœ€è¦æ›´æ¢ç”Ÿæˆå™¨ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸Šä¸€æ¬¡è°ƒç”¨ç»“æœè¿”å›çš„æ–°éšæœºæ•°ç”Ÿæˆå™¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">threeCoins</span> :: <span class="type">StdGen</span> -&gt; (<span class="type">Bool</span>, <span class="type">Bool</span>, <span class="type">Bool</span>)  </span><br><span class="line"><span class="title">threeCoins</span> gen =   </span><br><span class="line">    <span class="keyword">let</span> (firstCoin, newGen) = random gen  </span><br><span class="line">        (secondCoin, newGen&#x27;) = random newGen  </span><br><span class="line">        (thirdCoin, newGen&#x27;&#x27;) = random newGen&#x27;  </span><br><span class="line">    <span class="keyword">in</span>  (firstCoin, secondCoin, thirdCoin) </span><br></pre></td></tr></table></figure>

<h4 id="randoms"><a href="#randoms" class="headerlink" title="randoms"></a>randoms</h4><p style="text-align: center;">randoms :: (Random a, RandomGen g) => g -> [a]</p>

<p>randomsæ¥æ”¶ä¸€ä¸ªRandomGenï¼Œè¿”å›ä¸€ä¸ªéšæœºçš„æ— ç©·åˆ—è¡¨ã€‚å› ä¸ºå®ƒæ˜¯æ— ç©·çš„ï¼Œæ‰€ä»¥ä¸ä¼šè¿”å›æ–°çš„éšæœºæ•°ç”Ÿæˆå™¨</p>
<h4 id="randomR"><a href="#randomR" class="headerlink" title="randomR"></a>randomR</h4><p style="text-align: center;">randomR :: (Random a, RandomGen g) => (a, a) -> g -> (a, g)</p>

<p>å¯ä»¥ç”¨æ¥ç”Ÿæˆæœ‰èŒƒå›´çš„éšæœºæ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œè¡¨ç¤ºç”Ÿæˆéšæœºæ•°çš„èŒƒå›´(é—­åŒºé—´)</p>
<h4 id="randomRs"><a href="#randomRs" class="headerlink" title="randomRs"></a>randomRs</h4><p style="text-align: center;">randomRs :: (Random a, RandomGen g) => (a, a) -> g -> [a]</p>

<p>åŒä¸Šä¸¤ä¸ªï¼Œç”Ÿæˆæœ‰èŒƒå›´çš„æ— ç©·éšæœºæ•°åˆ—è¡¨</p>
<h4 id="getStdGen"><a href="#getStdGen" class="headerlink" title="getStdGen"></a>getStdGen</h4><p>å¦‚æœæƒ³è¦è®©ç¨‹åºæ¯æ¬¡è¿è¡Œå¾—åˆ°ä¸åŒçš„éšæœºç»“æœï¼Œéœ€è¦ä½¿ç”¨<code>getStdGen</code>æ¥è·å–å…¨å±€éšæœºæ•°ç”Ÿæˆå™¨ï¼Œå®ƒä¼šåœ¨æ¯æ¬¡è¿è¡Œçš„æ—¶å€™äº§ç”Ÿä¸åŒçš„å€¼ï¼Œä¹Ÿå› æ­¤ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªI/O actionï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç›´æ¥çš„StdGen</p>
<p style="text-align: center;">getStdGen :: Control.Monad.IO.Class.MonadIO m => m StdGen</p>

<p>å³å¯ä»¥çœ‹æˆgetStdGen :: IO StdGenï¼Œéœ€è¦ä½¿ç”¨&lt;-æ“ä½œç¬¦å°†StdGenæå–å‡ºæ¥</p>
<p>ä½†æ˜¯åœ¨åŒä¸€ä¸ªç¨‹åºä¸­ï¼ŒgetStdGençš„ç»“æœæ˜¯ç›¸åŒçš„ï¼Œå…¨å±€éšæœºæ•°ç”Ÿæˆå™¨ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œæ‰€ä»¥å°±éœ€è¦å¦ä¸€ä¸ªå‡½æ•°newStdGen</p>
<h4 id="newStdGen"><a href="#newStdGen" class="headerlink" title="newStdGen"></a>newStdGen</h4><p style="text-align: center;">newStdGen :: Control.Monad.IO.Class.MonadIO m => m StdGen</p>

<p>æ‰§è¡ŒnewStdGenä¼šè¿›è¡Œä¸¤ä¸ªæ“ä½œï¼š</p>
<ul>
<li>æ›´æ–°å…¨å±€éšæœºæ•°ç”Ÿæˆå™¨ï¼Œä¸‹æ¬¡æ‰§è¡ŒgetStdGenä¼šè·å¾—ä¸åŒçš„ç»“æœ</li>
<li>è¿”å›ä¸€ä¸ªI/O actionï¼ŒåŒ…å«ä¸€ä¸ªæ–°çš„StdGenï¼ˆä½†æ˜¯è¿™ä¸ªç”Ÿæˆå™¨å’Œå…¨å±€ç”Ÿæˆå™¨ä¹Ÿä¸åŒï¼‰</li>
</ul>
<h3 id="Exceptions"><a href="#Exceptions" class="headerlink" title="Exceptions"></a>Exceptions</h3><p>ç¨‹åºåœ¨è¿è¡Œå¤±è´¥æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡<code>Control.Exception</code>æ¨¡å—ä¸­çš„<code>catch</code>å‡½æ•°æ¥æ•è·å¼‚å¸¸ï¼š</p>
<p style="text-align: center;">catch :: Exception e => IO a -> (e -> IO a) -> IO a</p>

<p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è¿›è¡Œçš„æ“ä½œï¼Œä»¥IO aä¸ºè¿”å›å€¼çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶å¼‚å¸¸å¹¶è¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Control.Exception</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = main&#x27; `catch` handler</span><br><span class="line"></span><br><span class="line"><span class="title">main&#x27;</span> :: <span class="type">IO</span> ()</span><br><span class="line"><span class="title">main&#x27;</span> = <span class="keyword">do</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="title">handler</span> :: <span class="type">Exception</span> e =&gt; e -&gt; <span class="type">IO</span> ()</span><br><span class="line"><span class="title">handler</span> e =  putStrLn <span class="string">&quot;...&quot;</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥åˆ©ç”¨å®ˆå«ï¼ˆguardï¼‰è¯­æ³•å’Œ<code>System.IO.Error</code>ä¸­çš„å‡½æ•°æ¥åˆ¤æ–­IOå¼‚å¸¸çš„ç±»å‹æ¥è¿›è¡Œä¸åŒæ“ä½œï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> System.Environment</span><br><span class="line"><span class="keyword">import</span> System.IO.Error</span><br><span class="line"><span class="keyword">import</span> Control.Exception</span><br><span class="line">  </span><br><span class="line"><span class="title">main</span> = toTry `catch` handler</span><br><span class="line">              </span><br><span class="line"><span class="title">toTry</span> :: <span class="type">IO</span> ()  </span><br><span class="line"><span class="title">toTry</span> = <span class="keyword">do</span> (fileName:_) &lt;- getArgs  </span><br><span class="line">           contents &lt;- readFile fileName  </span><br><span class="line">           putStrLn $ <span class="string">&quot;The file has &quot;</span> ++ show (length (lines contents)) ++ <span class="string">&quot; lines!&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="title">handler</span> :: <span class="type">IOError</span> -&gt; <span class="type">IO</span> ()  </span><br><span class="line"><span class="title">handler</span> e  </span><br><span class="line">    | isDoesNotExistError e = putStrLn <span class="string">&quot;The file doesn&#x27;t exist!&quot;</span>  </span><br><span class="line">    | otherwise = ioError e  </span><br></pre></td></tr></table></figure>

<p>å…·ä½“ç›¸å…³å…¨éƒ¨å‡½æ•°è§æ–‡æ¡£ï¼š<a href="https://hackage.haskell.org/package/base-4.15.0.0/docs/System-IO-Error.html">System.IO.Error</a>ã€<a href="https://hackage.haskell.org/package/base-4.15.0.0/docs/Control-Exception-Base.html">Control.Exception</a></p>
<h2 id="Functors"><a href="#Functors" class="headerlink" title="Functors"></a>Functors</h2><p>å‡½å­ï¼ˆFunctorï¼‰æ˜¯ä¸€ä¸ªç±»å‹ç±»ï¼ˆtypeclassï¼‰ï¼Œå’Œå…¶ä»–ç±»å‹ç±»ä¸€æ ·ï¼Œå®ƒè§„å®šäº†å…¶å®ä¾‹ç±»å¿…é¡»å®ç°çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚Eqç±»å‹ç±»è§„å®šäº†å®ƒçš„å®ä¾‹å¿…é¡»æ˜¯å¯ä»¥æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰çš„ï¼‰ï¼ŒFunctorè§„å®šç±»å®ƒçš„å®ä¾‹å¿…é¡»æ˜¯å¯ä»¥è¿›è¡Œæ˜ å°„çš„ã€‚Functorè¦æ±‚ä½¿ç”¨<code>fmap</code> :: (a -&gt; b) -&gt; f a -&gt; f b å‡½æ•°æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªa -&gt; bç±»å‹çš„å‡½æ•°ã€ä¸€ä¸ªå†…éƒ¨å…ƒç´ ä¸ºaç±»å‹çš„å‡½å­ï¼Œè¿”å›ä¸€ä¸ªå†…éƒ¨å…ƒç´ ä¸ºbç±»å‹çš„å‡½å­</p>
<p>Functorå¯ä»¥æ¯”ä½œç›’å­ï¼Œé‚£fmapå‡½æ•°å°±ç›¸å½“äºç»™å®šä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªç›’å­ï¼Œå°†ç›’å­ä¸­çš„å…¨éƒ¨å…ƒç´ éƒ½åº”ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå†è¿”å›åº”ç”¨å‡½æ•°åçš„ç›’å­</p>
<p>å‡½å­çš„å®ä¾‹å¿…é¡»æ˜¯ä¸€ä¸ªKindä¸º* -&gt; *çš„ç±»å‹æ„é€ å™¨ï¼Œå› ä¸ºå®ƒè¦æ±‚å…¶æ˜¯ä¸€ä¸ªç›’å­ï¼Œç›’å­åœ¨æ¥æ”¶å†…å®¹åæ‰ä¼šæˆä¸ºä¸€ä¸ªå…·ä½“çš„ç±»å‹ã€‚fmapä¸­çš„<code>f a</code>å’Œ<code>f b</code>ä¹Ÿæ˜¯å› ä¸º<code>f</code>æ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œåœ¨æ¥æ”¶ç±»å‹a/båæ‰ä¼šå˜æˆä¸€ä¸ªå…·ä½“ç±»å‹ï¼ˆf aå’Œf bï¼‰å‡ºç°åœ¨å‡½æ•°ç±»å‹å£°æ˜ä¸­</p>
<p>Functorçš„å®šä¹‰æ˜¯:</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Functor</span> f <span class="keyword">where</span></span></span><br><span class="line">    fmap :: (a -&gt; b) -&gt; f a -&gt; f b</span><br><span class="line">    (&lt;$) :: a -&gt; f a -&gt; f b</span><br><span class="line">    (&lt;$) = fmap . const</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°Functorä¸ä»…éœ€è¦fmapå‡½æ•°ï¼Œè¿˜éœ€è¦ä¸€ä¸ª&lt;$å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªaç±»å‹çš„å˜é‡å’Œä¸€ä¸ªå†…å®¹ä¸ºbç±»å‹çš„å‡½å­ï¼Œè¿”å›ä¸€ä¸ªå†…å®¹ä¸ºaç±»å‹çš„å‡½å­ï¼›ä½œç”¨å°±æ˜¯å°†ä¼ å…¥çš„å‡½å­ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ›¿æ¢ä¸ºä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; &#x27;a&#x27; &lt;$ [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="string">&quot;aaa&quot;</span></span><br></pre></td></tr></table></figure>
<p>ä½†å®ƒä¸æ˜¯å£°æ˜ä¸€ä¸ªå‡½å­å®ä¾‹å¿…é¡»çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥ä½¿ç”¨fmapå’Œconstå‡½æ•°å¤åˆæ¥å®ç°ï¼Œå…¶ä¸­constçš„ç±»å‹ç­¾åï¼š</p>
<p style="text-align: center;">const :: a -> b -> a</p>

<p>å³æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä½†å§‹ç»ˆåªè¿”å›ç¬¬ä¸€ä¸ªå‚æ•°</p>
<h3 id="Functorå®ä¾‹"><a href="#Functorå®ä¾‹" class="headerlink" title="Functorå®ä¾‹"></a>Functorå®ä¾‹</h3><h4 id><a href="#" class="headerlink" title="[]"></a>[]</h4><p>åˆ—è¡¨[]æ˜¯ä¸€ä¸ªå‡½å­ï¼Œå®ƒé€šè¿‡mapå‡½æ•°æ¥å®ç°fmapçš„åŠŸèƒ½ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> [] <span class="keyword">where</span></span></span><br><span class="line">    fmap = map</span><br></pre></td></tr></table></figure>
<p style="text-align: center;">map :: (a -> b) -> [a] -> [b]</p>

<p>mapå’Œfmapè¦æ±‚çš„ç›¸åŒï¼Œè¾¾æˆçš„ç›®çš„ä¹Ÿä¸€è‡´ã€‚mapæ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªåˆ—è¡¨ï¼Œå®ƒä¼šå°†åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½åº”ç”¨è¿™ä¸ªå‡½æ•°åå†è¿”å›è¿™ä¸ªåˆ—è¡¨</p>
<h4 id="Maybe"><a href="#Maybe" class="headerlink" title="Maybe"></a>Maybe</h4><p>Maybeä¹Ÿå…·æœ‰kind * -&gt; *ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå‡½å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    fmap f <span class="type">Nothing</span> = <span class="type">Nothing</span></span><br><span class="line">    fmap f (<span class="type">Just</span> x) = <span class="type">Just</span> (f x)</span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">2</span>) <span class="type">Nothing</span></span><br><span class="line"><span class="type">Nothing</span></span><br><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">2</span>) (<span class="type">Just</span> <span class="number">2</span>)</span><br><span class="line"><span class="type">Just</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>

<h4 id="Either-a"><a href="#Either-a" class="headerlink" title="Either a"></a>Either a</h4><p>Eitherçš„kindæ˜¯* -&gt; * -&gt; *ï¼Œæ˜¾ç„¶å®ƒä¸æ˜¯å‡½å­ï¼Œä½†æ˜¯å›ºå®šäº†ä¸€ä¸ªä¼ å…¥ç±»å‹çš„Either açš„kindæ˜¯* -&gt; *ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå‡½å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> (<span class="type">Either</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    fmap f (<span class="type">Left</span> x) = <span class="type">Left</span> x</span><br><span class="line">    fmap f (<span class="type">Right</span> x) = <span class="type">Right</span> (f x)</span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">2</span>) (<span class="type">Left</span> <span class="number">4</span>)</span><br><span class="line"><span class="type">Left</span> <span class="number">4</span></span><br><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">2</span>) (<span class="type">Right</span> <span class="number">4</span>)</span><br><span class="line"><span class="type">Right</span> <span class="number">8</span></span><br></pre></td></tr></table></figure>
<p>å› ä¸ºä½¿ç”¨Eitheræ—¶ä¸€èˆ¬ç”¨å³å€¼è¡¨ç¤ºæ­£å¸¸ç»“æœï¼Œå·¦å€¼è¡¨ç¤ºå¼‚å¸¸ä¿¡æ¯ï¼Œæ‰€ä»¥ä½¿ç”¨fmapæ—¶åªå¯¹å³å€¼è¿›è¡Œæ“ä½œï¼Œå¦‚æœæ—¶å·¦å€¼åˆ™ä¿æŒä¸å˜ï¼ˆè€Œä¸”å·¦å€¼æ­¤æ—¶ä¹Ÿä½œä¸ºç¡®å®šç±»å‹ç¡®å®šå€¼å­˜åœ¨ï¼‰</p>
<h4 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h4><p>IOä¹Ÿæ˜¯ä¸€ä¸ªå‡½å­ï¼Œä½¿ç”¨fmapå¯¹IOä¸­å†…å®¹åº”ç”¨å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> <span class="type">IO</span> <span class="keyword">where</span></span></span><br><span class="line">    fmap f action = <span class="keyword">do</span></span><br><span class="line">        result &lt;- action</span><br><span class="line">        return (f result)</span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; fmap (<span class="string">&quot;input: &quot;</span>++) getLine</span><br><span class="line"><span class="title">test</span></span><br><span class="line"><span class="string">&quot;input: test&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="a"><a href="#a" class="headerlink" title="(,) a"></a>(,) a</h4><p>(,)è¡¨ç¤ºä¸€ä¸ªäºŒå…ƒç»„çš„ç±»å‹æ„é€ å™¨ï¼Œ(,) :: * -&gt; * -&gt; *ï¼Œè€Œç¡®å®šäº†ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç±»å‹åå°±å˜æˆäº†(,) aï¼Œå®ƒçš„kindæ˜¯* -&gt; *ã€‚ä¹Ÿæ˜¯ä¸€ä¸ªå‡½å­ï¼Œè¿›è¡Œfmapå‡½æ•°æ—¶åªå¯¹ç¬¬äºŒä¸ªå…ƒç´ åº”ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((,) a) <span class="keyword">where</span></span></span><br><span class="line">    fmap f (x, y) = (x, f y)</span><br></pre></td></tr></table></figure>
<p>åªå‰©ä¸€ä¸ªå…ƒç´ çš„ä¸‰å…ƒç»„å’Œå››å…ƒç»„ä¹Ÿéƒ½æ˜¯å‡½å­ï¼Œfmapä¹Ÿåªå¯¹æœ€åä¸€ä¸ªå…ƒç´ åº”ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((,,) a b) <span class="keyword">where</span></span></span><br><span class="line">    fmap f (a, b, c) = (a, b, f c)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((,,,) a b c) <span class="keyword">where</span></span></span><br><span class="line">    fmap f (a, b, c, d) = (a, b, c, f d)</span><br></pre></td></tr></table></figure>

<h4 id="gt-r"><a href="#gt-r" class="headerlink" title="(-&gt;) r"></a>(-&gt;) r</h4><p>-&gt;ä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œå®ƒçš„kindï¼š</p>
<p style="text-align: center;">(->) :: * -> * -> *</p>

<p>ä¸€ä¸ªæ˜ å°„ï¼ˆä¸€å…ƒå‡½æ•°ï¼‰çš„ç±»å‹a -&gt; bä¹Ÿå¯ä»¥å†™æˆ(-&gt;) a bï¼Œå®ƒæ˜¯ç”±ç±»å‹aå’Œç±»å‹bè¾“å…¥åˆ°ç±»å‹æ„é€ å™¨-&gt;ä¸­åå½¢æˆçš„ä¸€ä¸ªå…·ä½“ç±»å‹ã€‚æ‰€ä»¥ç¡®å®šäº†è¾“å…¥ç±»å‹åçš„ä¸€å…ƒå‡½æ•°çš„ç±»å‹å°±æ˜¯(-&gt;) rï¼ˆå…¶ä¸­<code>r</code>æ˜¯è¾“å…¥çš„ç±»å‹ï¼‰</p>
<p>è§„å®šçš„fmapçš„ç±»å‹ç­¾åæ˜¯ï¼š</p>
<p style="text-align: center;">fmap :: (a -> b) -> f a -> f b</p>

<p>å…¶ä¸­çš„fæ˜¯å‡½å­ï¼Œè€Œåœ¨è¿™ä¸ªå®ä¾‹ä¸­(-&gt;) rå°±æ˜¯å‡½å­ï¼Œå°†å…¶å¸¦å…¥få¯ä»¥å¾—åˆ°ï¼š</p>
<p style="text-align: center;">fmap :: (a -> b) -> ((-> r) a) -> ((-> r) b)</p>

<p>æŠŠå…¶ä¸­çš„(-&gt;)æ¢æˆä¸­ç¼€å¯ä»¥å¾—åˆ°ï¼š</p>
<p style="text-align: center;">fmap :: (a -> b) -> (r -> a) -> (r -> b)</p>

<p>ä¼ å…¥ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªç±»å‹ä¸ºa -&gt; bï¼Œä¸€ä¸ªç±»å‹ä¸ºr -&gt; aï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç±»å‹ä¸ºr -&gt; bã€‚<br>ä¸éš¾æ¨æµ‹è¿™ä¸ªfmapæ˜¯å°†è¿™ä¸¤ä¸ªå‡½æ•°å¤åˆäº†ï¼Œå…ˆå¯¹è¾“å…¥å¯¹råº”ç”¨ç¬¬äºŒä¸ªå‡½æ•°äº§ç”Ÿç±»å‹açš„ç»“æœï¼Œç„¶ååœ¨åº”ç”¨ç¬¬ä¸€ä¸ªå‡½æ•°äº§ç”Ÿç±»å‹bçš„ç»“æœï¼Œæ‰€ä»¥(-&gt;) rå®šä¹‰çš„fmapæ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((-&gt;) r) <span class="keyword">where</span></span></span><br><span class="line">    fmap f g = (\x -&gt; f (g x))</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥(-&gt;) rçš„fmapå…¶å®å°±æ˜¯å‡½æ•°å¤åˆ(.)ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((-&gt;) r) <span class="keyword">where</span></span></span><br><span class="line">    fmap = (.)</span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; :t fmap (*<span class="number">3</span>) (+<span class="number">100</span>)  </span><br><span class="line"><span class="title">fmap</span> (*<span class="number">3</span>) (+<span class="number">100</span>) :: (<span class="type">Num</span> a) =&gt; a -&gt; a  </span><br><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">3</span>) (+<span class="number">100</span>) <span class="number">1</span>  </span><br><span class="line"><span class="number">303</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; (*<span class="number">3</span>) `fmap` (+<span class="number">100</span>) $ <span class="number">1</span>  </span><br><span class="line"><span class="number">303</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; (*<span class="number">3</span>) . (+<span class="number">100</span>) $ <span class="number">1</span>  </span><br><span class="line"><span class="number">303</span></span><br></pre></td></tr></table></figure>

<h3 id="Functor-Laws"><a href="#Functor-Laws" class="headerlink" title="Functor Laws"></a>Functor Laws</h3><p>æ‰€æœ‰çš„å‡½å­éƒ½åº”è¯¥æ»¡è¶³ä¸¤ä¸ªå®šå¾‹ã€‚è¿™ä¸¤ä¸ªå®šå¾‹ä¸æ˜¯Haskellå¼ºåˆ¶è¦æ±‚çš„ï¼Œä½†åº”è¯¥ç¡®ä¿ä¸€ä¸ªå‡½å­æ»¡è¶³è¿™ä¸¤ä¸ªå®šå¾‹ï¼š</p>
<ol>
<li><code>fmap id = id</code>ï¼ˆå…¶ä¸­idä¸ºå‡½æ•°<code>(\x -&gt; x)</code>ï¼‰ï¼šå³å¯¹ä¸€ä¸ªå‡½å­fmap idï¼Œé‚£å®ƒåº”è¯¥è¿”å›æœ¬èº«ï¼ˆfmap id a = id a = aï¼Œaä¸ºä¸€ä¸ªå‡½å­ï¼‰ï¼Œæ¯”å¦‚ï¼š <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; fmap id [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; fmap id (<span class="type">Just</span> <span class="number">2</span>)</span><br><span class="line"><span class="type">Just</span> <span class="number">2</span></span><br></pre></td></tr></table></figure></li>
<li><code>fmap (f . g) = fmap f . fmap g</code>ï¼šå³å‡½å­çš„fmapæ”¯æŒç»“åˆå¾‹<br> fmap (f . g) a = fmap f . fmap g $ a = fmap f (fmap g a)ï¼Œå…¶ä¸­<code>a</code>ä¸ºä¸€ä¸ªå‡½å­<br> fmap (f . g) (Just x) = fmap f (fmap g (Just x)) = fmap f (Just (g x)) = Just (f (g x)) <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; fmap ((*<span class="number">3</span>) . (+<span class="number">100</span>)) (<span class="type">Just</span> <span class="number">1</span>)</span><br><span class="line"><span class="type">Just</span> <span class="number">303</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>æ»¡è¶³ç¬¬ä¸€ä¸ªå®šå¾‹çš„å‡½å­ä¸€å®šæ»¡è¶³ç¬¬äºŒä¸ªå®šå¾‹ï¼Œæ‰€ä»¥åªè¦æ£€æŸ¥å‡½å­æ˜¯å¦æ»¡è¶³ç¬¬ä¸€ä¸ªå®šå¾‹å³å¯</p>
<h3 id="Intuition"><a href="#Intuition" class="headerlink" title="Intuition"></a>Intuition</h3><p>å¯¹äºå‡½å­å’Œfmapï¼Œæœ‰ä¸¤ç§ç†è§£æ–¹æ³•</p>
<ol>
<li>å‡½å­æ˜¯ä¸€ç§å®¹å™¨ï¼ˆcontainerï¼‰ï¼›fmapæ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªå®¹å™¨ï¼Œåœ¨å®¹å™¨å†…éƒ¨åº”ç”¨è¿™ä¸ªå‡½æ•°ï¼Œè¿”å›åº”ç”¨åçš„æ–°å®¹å™¨</li>
<li>å‡½å­æ˜¯ä¸€ç§è®¡ç®—ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰ï¼›fmapæ˜¯æŸ¯é‡ŒåŒ–çš„ï¼ŒæŠŠå…¶ç±»å‹ç­¾åçœ‹ä½œ<p style="text-align: center;">fmap :: (a -> b) -> (f a -> f b)</p>
æ¥æ”¶ä¸€ä¸ªå‡½æ•°è¿”å›å¦ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥å‡½æ•°g :: a -> bï¼Œfmapå°†å…¶è½¬æ¢ä¸ºæ–°çš„å‡½æ•°
<p style="text-align: center;">fmap g :: f a -> f b</p>
ä½¿æ™®é€šçš„å‡½æ•°gå¯ä»¥åœ¨è®¡ç®—ä¸Šä¸‹æ–‡<code>f</code>ä¸­ä½¿ç”¨ï¼Œè¿™ç§è½¬æ¢ä¹Ÿè¢«ç§°ä¸ºæå‡ï¼ˆliftï¼‰</li>
</ol>
<h3 id="å¸¸ç”¨å‡½æ•°"><a href="#å¸¸ç”¨å‡½æ•°" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h3><h4 id="lt-gt"><a href="#lt-gt" class="headerlink" title="&lt;$&gt;"></a>&lt;$&gt;</h4><p><code>&lt;$&gt;</code>å‡½æ•°æ˜¯<code>fmap</code>çš„ä¸­ç¼€å½¢å¼ï¼ˆå®ƒçœ‹ç€ç±»ä¼¼<code>$</code>ï¼Œ<code>f $ 3</code>å°†fåº”ç”¨åœ¨å•ä¸ªå€¼3ä¸Šï¼Œè€Œ<code>f &lt;$&gt; [1, 2, 3]</code>å°†fåº”ç”¨åœ¨ä¸€ä¸ªå‡½å­ä¸Šï¼Œä¹Ÿå°±æ˜¯åº”ç”¨åœ¨ä¸€ä¸ªå‡½å­å†…éƒ¨çš„æ‰€æœ‰å€¼ä¸Šï¼‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">2</span>) (<span class="type">Just</span> <span class="number">2</span>)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="title">ghci</span>&gt; (*<span class="number">2</span>) &lt;$&gt; <span class="type">Just</span> <span class="number">2</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<h4 id="gt"><a href="#gt" class="headerlink" title="$&gt;"></a>$&gt;</h4><p><code>$&gt;</code>å‡½æ•°åŒ…å«åœ¨<code>Data.Functor</code>æ¨¡å—ä¸­</p>
<p style="text-align: center;">($>) :: Functor f => f a -> b -> f b</p> 

<p>Functorå®šä¹‰æ—¶è¦æ±‚äº†<code>&lt;$</code>å‡½æ•°ï¼Œå°†å‡½å­å†…éƒ¨çš„å…ƒç´ å…¨éƒ¨æ›¿æ¢ä¸ºæŒ‡å®šçš„æŸä¸ªå€¼ï¼Œè€Œ<code>$&gt;</code>æ­£å¥½å°†<code>&lt;$</code>å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åäº†è¿‡æ¥ï¼Œç›¸å½“äº<code>flip (&lt;$)</code>ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; &#x27;a&#x27; &lt;$ [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="string">&quot;aaa&quot;</span></span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] $&gt; &#x27;a&#x27;</span><br><span class="line"><span class="string">&quot;aaa&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="void"><a href="#void" class="headerlink" title="void"></a>void</h4><p><code>void</code>å‡½æ•°ä¹ŸåŒ…å«åœ¨<code>Data.Functor</code>æ¨¡å—ä¸­</p>
<p style="text-align: center;">void :: Functor f => f a -> f ()</p>

<p>voidå‡½æ•°æŠŠä¸€ä¸ªå‡½å­å†…éƒ¨çš„å…¨éƒ¨å…ƒç´ éƒ½å˜æˆç©ºï¼ˆ<code>()</code>ï¼‰ï¼Œ<code>void x</code>ç›¸å½“äº<code>() &lt;$ x</code>ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; void [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[(), (), ()]</span><br><span class="line"><span class="title">ghci</span>&gt; void (<span class="type">Just</span> <span class="number">2</span>)</span><br><span class="line"><span class="type">Just</span> ()</span><br></pre></td></tr></table></figure>

<h2 id="Applicative-Functor"><a href="#Applicative-Functor" class="headerlink" title="Applicative Functor"></a>Applicative Functor</h2><p>åº”ç”¨å‡½å­ï¼ˆApplicative Functorï¼‰æ˜¯å‡½å­çš„å‡çº§ç‰ˆï¼Œå®ƒåŒ…å«åœ¨<code>Control.Applicative</code>æ¨¡å—ä¸­ã€‚</p>
<p>fmapè¿›è¡Œçš„æ“ä½œæ˜¯å°†ä¸€ä¸ªæ™®é€šä¸€å…ƒå‡½æ•°åº”ç”¨åœ¨ä¸€ä¸ªå‡½å­å†…éƒ¨ã€‚è€Œå¦‚æœè¦å°†ä¸€ä¸ªåŒ…å«å‡½æ•°çš„å‡½å­åº”ç”¨åœ¨å¦ä¸€ä¸ªå‡½å­ä¸Šï¼Œfmapå°±å¤„ç†ä¸äº†äº†ï¼Œä½†æ˜¯åº”ç”¨å‡½å­çš„æ–¹æ³•å¯ä»¥å¤„ç†ã€‚åº”ç”¨å‡½å­çš„å®šä¹‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Functor</span> f =&gt; <span class="type">Applicative</span> f <span class="keyword">where</span></span></span><br><span class="line">    pure :: a -&gt; f a</span><br><span class="line">    (&lt;*&gt;) :: f (a -&gt; b) -&gt; f a -&gt; f b</span><br></pre></td></tr></table></figure>
<p>åº”ç”¨å‡½å­è¦æ±‚å®ç°ä¸¤ä¸ªå‡½æ•°ï¼š</p>
<ul>
<li><code>pure</code> :: a -&gt; f aï¼Œä¸éš¾ç†è§£ï¼Œpureæ¥æ”¶ä¸€ä¸ªå€¼ï¼Œå¹¶å°†å…¶æ”¾åœ¨é»˜è®¤çš„ä¸Šä¸‹æ–‡/å®¹å™¨ä¸­ã€‚å¯¹äºåˆ—è¡¨ï¼Œpure = []ï¼›å¯¹äºMaybeï¼Œpure = Just</li>
<li><code>&lt;*&gt;</code> :: f (a -&gt; b) -&gt; f a -&gt; f bï¼Œç±»ä¼¼äºfmap :: (a -&gt; b) -&gt; f a -&gt; f bï¼Œä½†ä¸åŒçš„æ˜¯&lt;*&gt;çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹æ˜¯f (a -&gt; b)ä¸æ˜¯a -&gt; bã€‚æ‰€ä»¥&lt;*&gt;çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚æ¢å¥è¯è¯´ï¼Œ&lt;*&gt;æ¥æ”¶ä¸€ä¸ªè£…æœ‰å‡½æ•°çš„å‡½å­å’Œå¦ä¸€ä¸ªå‡½å­ï¼Œåº”ç”¨å‡½æ•°åè¿”å›æ–°çš„å‡½å­ã€‚</li>
</ul>
<h3 id="Applicative-Functorå®ä¾‹"><a href="#Applicative-Functorå®ä¾‹" class="headerlink" title="Applicative Functorå®ä¾‹"></a>Applicative Functorå®ä¾‹</h3><h4 id="Maybe-1"><a href="#Maybe-1" class="headerlink" title="Maybe"></a>Maybe</h4><p>Maybeæ˜¯ä¸€ä¸ªåº”ç”¨å‡½å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    pure = <span class="type">Just</span></span><br><span class="line">    <span class="type">Nothing</span> &lt;*&gt; _ = <span class="type">Nothing</span></span><br><span class="line">    (<span class="type">Just</span> f) &lt;*&gt; something = fmap f something</span><br></pre></td></tr></table></figure>
<ul>
<li><code>pure</code>å‡½æ•°ï¼šå°†ä¸€ä¸ªå€¼æ”¾åœ¨é»˜è®¤çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè€Œå¯¹äºMaybeï¼Œé»˜è®¤çš„ä¸Šä¸‹æ–‡å°±æ˜¯Justï¼Œæ‰€ä»¥pure x = Just x</li>
<li><code>&lt;*&gt;</code>å‡½æ•°ï¼šå°†è£…æœ‰å‡½æ•°çš„å‡½å­ä¸­çš„å‡½æ•°åº”ç”¨å¦ä¸€ä¸ªå‡½å­ä¸­<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Nothingï¼Œå³ç¬¬ä¸€ä¸ªå‡½å­ä¸åŒ…å«å‡½æ•°ï¼Œé‚£è¿”å›çš„ç»“æœå°±ä¹Ÿä¼šæ˜¯Nothing</li>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è£…æœ‰å‡½æ•°fçš„å‡½å­Just fï¼Œå°†å…¶ä¸­çš„å‡½æ•°fåº”ç”¨åœ¨å‡½å­somethingä¸­ï¼Œåªéœ€è¦å°†fæå–å‡ºæ¥ä½¿ç”¨fmapåº”ç”¨åœ¨å‡½å­somethingä¸­å³å¯</li>
</ul>
</li>
</ul>
<p>å®é™…åº”ç”¨çš„ä¾‹å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> (+<span class="number">3</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="type">Just</span> <span class="number">12</span></span><br><span class="line"><span class="title">ghci</span>&gt; pure (+<span class="number">3</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="type">Just</span> <span class="number">12</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">3</span>) &lt;$&gt; <span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="type">Just</span> <span class="number">12</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> &lt;*&gt; <span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªä¾‹å­ï¼ŒJust (+3)æ˜¯ä¸€ä¸ªåŒ…å«å‡½æ•°(+3)çš„å‡½å­ï¼Œå°†å…¶åº”ç”¨åœ¨å‡½å­Just 9ä¸­ï¼Œå°†Just (+3)ä¸­çš„å‡½æ•°(+3)æå–å‡ºæ¥ï¼Œåº”ç”¨åœ¨Just 9ä¸­ï¼Œå¾—åˆ°äº†Just 12</p>
<p>ç¬¬äºŒä¸ªä¾‹å­ï¼Œå¯ä»¥å‘ç°ï¼Œåœ¨è¿™é‡Œpure (+3)å’ŒJust (+3)ç­‰æ•ˆï¼Œå› ä¸ºpureå°†å‡½æ•°(+3)æ”¾åœ¨é»˜è®¤ä¸Šä¸‹æ–‡ä¸­ï¼Œä¹Ÿå°±æ˜¯Justä¸­äº†</p>
<p>è€Œ&lt;*&gt;èƒ½åšçš„ä¸æ­¢è¿™äº›ï¼Œä»–å¯ä»¥è¿ç»­ä¼ å…¥æ›´å¤šå‡½å­ä½œä¸ºå‚æ•°ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; pure (+) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="type">Just</span> <span class="number">12</span></span><br><span class="line"><span class="title">ghci</span>&gt; pure (\x y z -&gt; x + y + z) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> <span class="number">4</span> &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line"><span class="type">Just</span> <span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>&lt;*&gt;å‡½æ•°ä¸€æ ·æ˜¯é»˜è®¤å·¦ç»“åˆçš„ï¼Œpure (+) &lt;*&gt; Just 3 &lt;*&gt; Just 9ç›¸å½“äº(pure (+) &lt;*&gt; Just 3) &lt;*&gt; Just 9ï¼Œè€Œpure (+) &lt;*&gt; Just 3å°†(+)åº”ç”¨åœ¨Just 3ä¸Šï¼Œå¾—åˆ°çš„å°±æ˜¯Just (+3)ä¸€ä¸ªåŒ…å«å‡½æ•°çš„å‡½å­ï¼Œåˆå°†å…¶é€šè¿‡&lt;*&gt;åº”ç”¨åœ¨äº†Just 9ä¸Šï¼Œå¾—åˆ°äº†Just 12:</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  pure (\x y z -&gt; x + y + z) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> <span class="number">4</span> &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line">= (pure (\x y z -&gt; x + y + z) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">4</span> &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line">= (<span class="type">Just</span> (\y z -&gt; <span class="number">3</span> + y + z) &lt;*&gt; <span class="type">Just</span> <span class="number">4</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line">= <span class="type">Just</span> (\z -&gt; <span class="number">3</span> + <span class="number">4</span> + z) &lt;*&gt; <span class="type">Just</span> <span class="number">5</span> = <span class="type">Just</span> (+<span class="number">7</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line">= <span class="type">Just</span> <span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥å¯ä»¥ä½¿ç”¨ç±»ä¼¼pure f &lt;*&gt; x &lt;*&gt; y &lt;*&gt; â€¦æ¥å°†ä¸€ä¸ªæ™®é€šå¤šå…ƒå‡½æ•°fåº”ç”¨åœ¨å¤šä¸ªå‡½å­ä¸Šã€‚</p>
<p>è€Œä¸”pure f &lt;*&gt; xå®é™…ä¸Šå…ˆå°†æ™®é€šå‡½æ•°fæ”¾åœ¨ä¸Šä¸‹æ–‡ä¸­ï¼Œç„¶åæ‰§è¡Œ&lt;*&gt;æ—¶å†å°†å…¶æå–å‡ºæ¥æ‰§è¡Œfmapï¼Œæ‰€ä»¥å®ƒå°±ç›¸å½“äºå°†æ™®é€šå‡½æ•°åº”ç”¨åœ¨å‡½å­xä¸Šï¼Œå³fmap f xï¼Œä¹Ÿå¯ä»¥å†™æˆf &lt;$&gt; xã€‚æ‰€ä»¥å¸¸ç”¨çš„å†™æ³•å°±æ˜¯ï¼š</p>
<p style="text-align: center;">f <$> x <*> y <*> ...</*></*></$></p>

<h4 id="-1"><a href="#-1" class="headerlink" title="[]"></a>[]</h4><p>åˆ—è¡¨ä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨å‡½å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> [] <span class="keyword">where</span></span></span><br><span class="line">    pure x = [x]</span><br><span class="line">    fs &lt;*&gt; xs = [f x | f &lt;- fs, x &lt;- xs]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>pure</code>å‡½æ•°ï¼šå¯¹äºåˆ—è¡¨è€Œè¨€ï¼Œä¸€ä¸ªå€¼çš„æœ€å°ä¸Šä¸‹æ–‡å°±æ˜¯åªåŒ…å«è¿™ä¸ªå€¼çš„åˆ—è¡¨[x]</li>
<li><code>&lt;*&gt;</code>å‡½æ•°ï¼šåˆ—è¡¨çš„&lt;*&gt;å‡½æ•°æ˜¯é€šè¿‡åˆ—è¡¨æ¨å¯¼æ¥å®ç°çš„ã€‚å› ä¸ºä¸åŒäºMaybeçš„JuståªåŒ…å«ä¸€ä¸ªå€¼ï¼Œåˆ—è¡¨å¯ä»¥åŒ…å«å¾ˆå¤šå€¼ï¼Œç¬¬ä¸€ä¸ªä¼ å…¥çš„åˆ—è¡¨ä¸­å¯èƒ½ä¼šåŒ…å«å¾ˆå¤šå‡½æ•°ï¼Œç¬¬äºŒä¸ªä¼ å…¥çš„åˆ—è¡¨ä¹Ÿä¼šåŒ…å«å¾ˆå¤šå€¼ï¼Œæ‰€ä»¥å°±éœ€è¦å…ˆä»ç¬¬ä¸€ä¸ªåˆ—è¡¨ä¸­å–å‡ºä¸€ä¸ªå‡½æ•°ç„¶åä¾æ¬¡åº”ç”¨åœ¨ç¬¬äºŒä¸ªåˆ—è¡¨çš„æ¯ä¸ªå€¼ä¸­ï¼Œå†å–å‡ºç¬¬ä¸€ä¸ªåˆ—è¡¨ä¸­çš„ç¬¬äºŒä¸ªå‡½æ•°åº”ç”¨åœ¨ç¬¬äºŒä¸ªåˆ—è¡¨çš„æ¯ä¸ªå€¼ä¸­â€¦â€¦æœ€ç»ˆè¿”å›å¾—åˆ°çš„æ‰€æœ‰ç»“æœçš„åˆ—è¡¨</li>
</ul>
<p>ä½¿ç”¨ä¾‹å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [(+<span class="number">3</span>), (*<span class="number">2</span>)] &lt;*&gt; [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">[<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [(+), (*)]  &lt;*&gt;  [<span class="number">1</span>, <span class="number">2</span>]  &lt;*&gt;  [<span class="number">3</span>, <span class="number">4</span>]  </span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure>

<h4 id="IO-1"><a href="#IO-1" class="headerlink" title="IO"></a>IO</h4><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> <span class="type">IO</span> <span class="keyword">where</span></span></span><br><span class="line">    pure = return</span><br><span class="line">    a &lt;*&gt; b = <span class="keyword">do</span></span><br><span class="line">        f &lt;- a</span><br><span class="line">        x &lt;- b</span><br><span class="line">        return (f x)</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿä¸éš¾ç†è§£ï¼Œpureå‡½æ•°ç›´æ¥å°†ä¼ å…¥çš„å€¼returnï¼Œç›¸å½“äºæ”¾åœ¨äº†IOçš„ä¸Šä¸‹æ–‡ä¸­ã€‚è€Œ&lt;*&gt;å‡½æ•°å…ˆå°†ä¸¤ä¸ªIOä¸­å†…å®¹æå–å‡ºæ¥ï¼Œç„¶ååº”ç”¨å‡½æ•°åreturnï¼Œå½¢æˆæ–°çš„IOå‡½å­</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; (++) &lt;$&gt; getLine &lt;*&gt; getLine</span><br><span class="line"><span class="type">Line1</span></span><br><span class="line"><span class="type">Line2</span></span><br><span class="line"><span class="string">&quot;Line1Line2&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="gt-r-1"><a href="#gt-r-1" class="headerlink" title="(-&gt;) r"></a>(-&gt;) r</h4><p>(-&gt;) råŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨å‡½å­ï¼Œå’Œå‡½å­çš„åˆ†æä¸€æ ·ï¼Œå…ˆæ¥åˆ†æå®ƒçš„&lt;*&gt;å‡½æ•°çš„ç±»å‹ç­¾åï¼š</p>
<p style="text-align: center;"><*> :: f (a -> b) -> f a -> f b</*></p>

<p>å…¶ä¸­fä¸º(-&gt;) rï¼Œå°†å…¶ä»£å…¥å¹¶æ›¿æ¢ä¸ºä¸­ç¼€ï¼š</p>
<p style="text-align: center;"><*> :: (r -> a -> b) -> (r -> a) -> (r -> b)</*></p>

<p>å¯ä»¥çœ‹å‡ºå®ƒæ¥æ”¶ä¸¤ä¸ªå‡½æ•°f :: r -&gt; a -&gt; bã€g :: r -&gt; aï¼Œè¿”å›å¦ä¸€ä¸ªå‡½æ•°h :: (r -&gt; b)</p>
<p>é‚£ä¹ˆè¿”å›çš„å‡½æ•°çš„è¾“å…¥ä¸ºrï¼Œè¾“å‡ºä¸ºbï¼Œæ‰€ä»¥å…ˆå¯¹è¾“å…¥åº”ç”¨å‡½æ•°gå¾—åˆ°aï¼Œç„¶ååœ¨å¯¹rå’Œaåº”ç”¨få¾—åˆ°bï¼Œæ‰€ä»¥æ¨æµ‹&lt;*&gt;å‡½æ•°çš„æ“ä½œå°±æ˜¯ï¼š</p>
<p style="text-align: center;">\x -> f x (g x)</p>

<p>äºæ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> ((-&gt;) r) <span class="keyword">where</span></span></span><br><span class="line">    pure x = (\_ -&gt; x)</span><br><span class="line">    f &lt;*&gt; g = \x -&gt; f x (g x)</span><br></pre></td></tr></table></figure>
<p>å°†ä¸€ä¸ªå€¼æ”¾åœ¨å‡½æ•°çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæœ€å°ä¸Šä¸‹æ–‡å°±åº”è¯¥è¿”å›è¿™ä¸ªå€¼æœ¬èº«ï¼Œæ‰€ä»¥pureå‡½æ•°å®šä¹‰ä¸º(_ -&gt; x)ï¼Œå³æ— è®ºè¾“å…¥ä»€ä¹ˆï¼Œéƒ½è¿”å›x</p>
<p>åº”ç”¨å‡½å­çš„&lt;*&gt;å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‡½å­ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½å­ã€‚å¯¹äº(-&gt;) rï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚å…·ä½“ä¾‹å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; (+) &lt;$&gt; (+<span class="number">3</span>) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line"><span class="number">508</span></span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œè¿™å¥æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  (+) &lt;$&gt; (+<span class="number">3</span>) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line">= ((+) &lt;$&gt; (+<span class="number">3</span>)) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line">= ((+) . (+<span class="number">3</span>)) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span> = (\a -&gt; (+) ((+<span class="number">3</span>) a)) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line">= (\a b -&gt; (a + <span class="number">3</span> + b)) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line">= (\x -&gt; x + <span class="number">3</span> + ((*<span class="number">100</span>) x)) $ <span class="number">5</span></span><br><span class="line">= (\x -&gt; x + <span class="number">3</span> + x * <span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line">= <span class="number">5</span> + <span class="number">3</span> + <span class="number">5</span> * <span class="number">100</span> = <span class="number">508</span></span><br><span class="line">= (<span class="number">5</span> + <span class="number">3</span>) + (<span class="number">5</span> * <span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥å°±ç›¸å½“äºå…ˆå¯¹è¾“å…¥åˆ†åˆ«æ‰§è¡Œ(+3)å’Œ(*100)ï¼Œç„¶åå°†ä¸¤ä¸ªç»“æœæ‰§è¡Œäº†(+)</p>
<p>åŒæ ·ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; (\x y z -&gt; [x,y,z]) &lt;$&gt; (+<span class="number">3</span>) &lt;*&gt; (*<span class="number">2</span>) &lt;*&gt; (/<span class="number">2</span>) $ <span class="number">5</span>  </span><br><span class="line">[<span class="number">8.0</span>,<span class="number">10.0</span>,<span class="number">2.5</span>]  </span><br></pre></td></tr></table></figure>
<p>å…ˆå¯¹5åˆ†åˆ«æ‰§è¡Œ(+3)ã€(*2)ã€(/2)ï¼Œç„¶åå°†å¾—åˆ°çš„ä¸‰ä¸ªç»“æœä¼ å…¥(\x y z -&gt; [x,y,z])å¾—åˆ°äº†æœ€ç»ˆçš„ç»“æœ</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  f &lt;$&gt; g &lt;*&gt; h &lt;*&gt; i</span><br><span class="line">= (\x -&gt; f (g x) (h x) (i x))</span><br></pre></td></tr></table></figure>

<h4 id="ZipList"><a href="#ZipList" class="headerlink" title="ZipList"></a>ZipList</h4><p>æ™®é€šåˆ—è¡¨å®ç°çš„&lt;*&gt;å‡½æ•°æ˜¯å°†æ¯ä¸ªå‡½æ•°åº”ç”¨åœ¨æ‰€æœ‰å€¼ä¸Šï¼Œä½†è¿˜æœ‰ä¸€ç§å®ç°æ–¹æ³•æ˜¯å°†æ¯ä¸ªå‡½æ•°åº”ç”¨åœ¨å¯¹åº”å€¼ä¸Šï¼Œå› ä¸ºåŒä¸€ä¸ªç±»å‹ä¸èƒ½å­˜åœ¨åŒä¸€å‡½æ•°çš„ä¸¤ç§å®ç°å½¢å¼ï¼Œæ‰€ä»¥å¼•å…¥äº†ä¸€ä¸ªæ–°çš„åˆ—è¡¨ZipListï¼ŒåŒ…å«åœ¨<code>Control.Applicative</code>æ¨¡å—ä¸­</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> <span class="type">ZipList</span> <span class="keyword">where</span></span></span><br><span class="line">    pure x = <span class="type">ZipList</span> (repeat x)</span><br><span class="line">    <span class="type">ZipList</span> fs &lt;*&gt; <span class="type">ZipList</span> xs = <span class="type">ZipList</span> (zipWith ($) fs xs)</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ZipListå¹¶ä¸æ˜¯Showçš„å®ä¾‹ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œè¦ä½¿ç”¨<code>getZipList</code>æ¥è·å–å®ƒå†…éƒ¨çš„åˆ—è¡¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; getZipList $ (+) &lt;$&gt; <span class="type">ZipList</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] &lt;*&gt; <span class="type">ZipList</span> [<span class="number">100</span>,<span class="number">100.</span>.]  </span><br><span class="line">[<span class="number">101</span>,<span class="number">102</span>,<span class="number">103</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; getZipList $ (,,) &lt;$&gt; <span class="type">ZipList</span> <span class="string">&quot;dog&quot;</span> &lt;*&gt; <span class="type">ZipList</span> <span class="string">&quot;cat&quot;</span> &lt;*&gt; <span class="type">ZipList</span> <span class="string">&quot;rat&quot;</span>  </span><br><span class="line">[(&#x27;d&#x27;,&#x27;c&#x27;,&#x27;r&#x27;),(&#x27;o&#x27;,&#x27;a&#x27;,&#x27;a&#x27;),(&#x27;g&#x27;,&#x27;t&#x27;,&#x27;t&#x27;)]  </span><br></pre></td></tr></table></figure>

<h3 id="Applicative-Functor-Laws"><a href="#Applicative-Functor-Laws" class="headerlink" title="Applicative Functor Laws"></a>Applicative Functor Laws</h3><p>åº”ç”¨å‡½å­ä¸€èˆ¬æœ‰å››ä¸ªå®šå¾‹ï¼Œéƒ½æ˜¯ä¿è¯pureçš„æ­£ç¡®æ€§çš„ï¼š</p>
<ol>
<li><code>Identity law</code>ï¼špure id &lt;*&gt; v = v</li>
<li><code>Homomorphism</code>ï¼špure f &lt;*&gt; pure x = pure (f x)</li>
<li><code>Interchange</code>ï¼šu &lt;*&gt; pure v = pure ($ v) &lt;*&gt; u</li>
<li><code>Composition</code>ï¼šu &lt;*&gt; (v &lt;*&gt; w) = pure (.) &lt;*&gt; u &lt;*&gt; v &lt;*&gt; w</li>
</ol>
<h3 id="Intuition-1"><a href="#Intuition-1" class="headerlink" title="Intuition"></a>Intuition</h3><p>ç†è§£åº”ç”¨å‡½å­çš„æ–¹å¼ä¹Ÿæ˜¯å°†å…¶çœ‹ä½œæ˜¯è®¡ç®—ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰ï¼Œæ¯”å¦‚è¦è®¡ç®—ï¼š<br>$$<br>[[\ \ g\ x_1\ x_2\ \cdots\ x_n\ \ ]]<br>$$</p>
<p>å…¶ä¸­$x_i$çš„ç±»å‹æ˜¯$f\ t_i$ï¼Œ$f$æ˜¯åº”ç”¨å‡½å­ï¼ˆçœ‹ä½œä¸Šä¸‹æ–‡ï¼‰ã€‚è€Œå‡½æ•°$g$çš„ç±»å‹æ˜¯ï¼š</p>
<p>$$<br>t_1\to t_2\to\cdots\to t_n\to t<br>$$</p>
<p>æ‰€ä»¥åŒæ‹¬å·ï¼ˆidiom bracketsï¼‰çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ™®é€šå‡½æ•°åº”ç”¨åœ¨åŒ…å«åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å‚æ•°ä¸Šã€‚$g\ x_1$å¯ä»¥é€šè¿‡fmapæ¥æ‰§è¡Œï¼Œå°†$g$æå‡ï¼ˆliftï¼‰åˆ°$x_1$çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œç„¶ååº”ç”¨åœ¨$x_1$ä¸Šã€‚ä½†æ˜¯fmapè¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªå‡½å­ï¼Œæ¢å¥è¯è¯´ï¼Œ$g\ x_1$ç»“æœçš„ç±»å‹æ˜¯ï¼š</p>
<p>$$<br>f\ \ (t_2\to t_3\to\cdots\to t_n\to t)<br>$$</p>
<p>ä½†æ˜¯fmapå¹¶ä¸èƒ½å°†ä¸Šä¸‹æ–‡ä¸­çš„å‡½æ•°åº”ç”¨åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å‚æ•°ä¸Šï¼Œäºæ˜¯åº”ç”¨å‡½å­çš„&lt;*&gt;å‡½æ•°æä¾›äº†è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥è®¡ç®—$[[\ g\ x_1\ x_2\ \cdots\ x_n\ ]]$ï¼Œåªéœ€è¦ï¼š</p>
<p style="text-align: center;">g <$> x1 <*> x2 <*> ... <*> xn</*></*></*></$></p>

<p>è€Œpureå‡½æ•°çš„ä½œç”¨å°±æ˜¯å°†ä¸€ä¸ªä¸åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å€¼ï¼ˆå‡½æ•°æˆ–å‚æ•°ï¼‰æå‡åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œä½†ä¸è¿›è¡Œå…¶ä»–æ“ä½œã€‚æ¯”å¦‚å‚æ•°$x_2$å¦‚æœä¸åœ¨ä¸Šä¸‹æ–‡ä¸­ï¼Œéœ€è¦ç”¨pureæå‡åˆ°ä¸Šä¸‹æ–‡ä¸­æ‰èƒ½æŒ‰ä¸Šé¢è®¡ç®—ï¼š</p>
<p style="text-align: center;">g <$> x1 <*> pure x2 <*> ... <*> xn</*></*></*></$></p>

<h3 id="å¸¸ç”¨å‡½æ•°-1"><a href="#å¸¸ç”¨å‡½æ•°-1" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h3><h4 id="liftA-amp-liftA2-amp-liftA3"><a href="#liftA-amp-liftA2-amp-liftA3" class="headerlink" title="liftA &amp; liftA2 &amp; liftA3"></a>liftA &amp; liftA2 &amp; liftA3</h4><p style="text-align: center;">liftA :: Applicative f => (a -> b) -> f a -> f b</p>
<p style="text-align: center;">liftA2 :: Applicative f => (a -> b -> c) -> f a -> f b -> f c</p>
<p style="text-align: center;">liftA3 :: Applicative f => (a -> b -> c -> d) -> f a -> f b -> f c -> f d</p>

<p>ä¸éš¾æ¨æµ‹liftAå°±æ˜¯fmapï¼Œ<code>liftA2 f x1 x2</code>ç›¸å½“äº<code>f &lt;$&gt; x1 &lt;*&gt; x2</code>ï¼Œ<code>liftA3 f x1 x2 x3</code>ç›¸å½“äº<code>f &lt;$&gt; x1 &lt;*&gt; x2 &lt;*&gt; x3</code></p>
<h4 id="lt-amp-gt"><a href="#lt-amp-gt" class="headerlink" title="&lt;* &amp; *&gt;"></a>&lt;* &amp; *&gt;</h4><p>ç±»å‹ç±»ä¼¼å‡½å­çš„<code>&lt;$</code>å’Œ<code>$&gt;</code>ï¼š</p>
<p style="text-align: center;">(&lt;*) :: Applicative f => f a -> f b -> f a</p>
<p style="text-align: center;">(*>) :: Applicative f => f a -> f b -> f b</p>

<p>&lt;*æ¥æ”¶ä¸¤ä¸ªå‡½å­ï¼Œå¦‚æœä¸¤ä¸ªå‡½å­ä¸­åˆä¸€ä¸ªä¸ºç©ºï¼Œå°±è¿”å›ç©ºï¼Œå¦åˆ™è¿”å›çš„ç±»å‹ä¸ç¬¬ä¸€ä¸ªå‡½å­ç›¸åŒã€‚*&gt;åè¿‡æ¥</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="number">3</span> &lt;* <span class="type">Just</span> <span class="number">4</span></span><br><span class="line"><span class="type">Just</span> <span class="number">3</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="number">3</span> *&gt; <span class="type">Just</span> <span class="number">4</span></span><br><span class="line"><span class="type">Just</span> <span class="number">4</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> &lt;* <span class="type">Just</span> <span class="number">3</span></span><br><span class="line"><span class="type">Nothing</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> *&gt; <span class="type">Just</span> <span class="number">3</span></span><br><span class="line"><span class="type">Nothing</span></span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] &lt;* [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] *&gt; [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">[<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [] &lt;* [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[]</span><br><span class="line"><span class="title">ghci</span>&gt; [] *&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>

<h4 id="lt-gt-1"><a href="#lt-gt-1" class="headerlink" title="&lt;**&gt;"></a>&lt;**&gt;</h4><p style="text-align: center;">(**) :: Applicative f => f a -> f (a -> b) -> f b</p>

<p>æ¥æ”¶çš„å‚æ•°æ˜¯&lt;*&gt;åè½¬è¿‡æ¥çš„ï¼Œå³å…ˆæ¥æ”¶ä¸€ä¸ªå‚æ•°å‡½å­ï¼Œç„¶åæ¥æ”¶ä¸€ä¸ªå‡½æ•°å‡½å­ï¼Œåœ¨å°†å…¶åº”ç”¨è¿”å›ã€‚ä½†æ˜¯å’Œflip(&lt;*&gt;)ä¸åŒï¼Œå®ƒå…ˆå–å‚æ•°å‡½å­çš„æ¯ä¸ªå‚æ•°ï¼Œç„¶åå†å–å‡½æ•°å‡½å­ä¸­çš„å‡½æ•°é€ä¸ªåº”ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [(+<span class="number">1</span>), (+<span class="number">2</span>), (+<span class="number">3</span>)] &lt;*&gt; [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">[<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>] &lt;**&gt; [(+<span class="number">1</span>), (+<span class="number">2</span>), (+<span class="number">3</span>)]</span><br><span class="line">[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; flip(&lt;*&gt;) [<span class="number">1</span>, <span class="number">2</span>] [(+<span class="number">1</span>), (+<span class="number">2</span>), (+<span class="number">3</span>)]</span><br><span class="line">[<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<h4 id="when-amp-unless"><a href="#when-amp-unless" class="headerlink" title="when &amp; unless"></a>when &amp; unless</h4><p style="text-align: center;">when :: Applicative f => Bool -> f () -> f ()</p>

<p>ä¼ å…¥çš„ç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ªç»“æœä¸ºBoolç±»å‹çš„æµ‹è¯•ï¼Œå¦‚æœæµ‹è¯•ä¸ºTrueï¼Œåˆ™è°ƒç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™è¿”å›pure ()ã€‚ï¼ˆwhenå‡½æ•°åœ¨ä¸Šæ–‡IOæ“ä½œä¸­ä½¿ç”¨è¿‡ï¼‰</p>
<p>unlessåˆ™ä¸whenç›¸åï¼Œæµ‹è¯•ä¸ºTrueè¿”å›pure ()</p>
<h4 id="sequenceA"><a href="#sequenceA" class="headerlink" title="sequenceA"></a>sequenceA</h4><p style="text-align: center;">sequenceA :: (Traversable t, Applicative f) => t (f a) -> f (t a)</p>

<p>åº”ç”¨åœ¨åˆ—è¡¨ä¸Šæ—¶ï¼Œå®ƒçš„ç±»å‹ç›¸å½“äºï¼š</p>
<p style="text-align: center;">[f a] -> f [a]</p>

<p>æ‰€ä»¥åœ¨åˆ—è¡¨ä¸Šå®ƒçš„ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; sequenceA [<span class="type">Just</span> <span class="number">3</span>, <span class="type">Just</span> <span class="number">2</span>, <span class="type">Just</span> <span class="number">1</span>]  </span><br><span class="line"><span class="type">Just</span> [<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; sequenceA [<span class="type">Just</span> <span class="number">3</span>, <span class="type">Nothing</span>, <span class="type">Just</span> <span class="number">1</span>]  </span><br><span class="line"><span class="type">Nothing</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; sequenceA [(+<span class="number">3</span>),(+<span class="number">2</span>),(+<span class="number">1</span>)] <span class="number">3</span>  </span><br><span class="line">[<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; sequenceA [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]  </span><br><span class="line">[[<span class="number">1</span>,<span class="number">4</span>],[<span class="number">1</span>,<span class="number">5</span>],[<span class="number">1</span>,<span class="number">6</span>],[<span class="number">2</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">5</span>],[<span class="number">2</span>,<span class="number">6</span>],[<span class="number">3</span>,<span class="number">4</span>],[<span class="number">3</span>,<span class="number">5</span>],[<span class="number">3</span>,<span class="number">6</span>]]  </span><br><span class="line"><span class="title">ghci</span>&gt; sequenceA [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>],[]]  </span><br><span class="line">[]  </span><br></pre></td></tr></table></figure>
<p>å®ƒåœ¨å¯¹åŒä¸€ä¸ªå‚æ•°åº”ç”¨ä¸åŒå‡½æ•°æ—¶å¾ˆæœ‰ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; map (\f -&gt; f <span class="number">7</span>) [(&gt;<span class="number">4</span>), (&lt;<span class="number">10</span>), odd]  </span><br><span class="line">[<span class="type">True</span>,<span class="type">True</span>,<span class="type">True</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; sequenceA [(&gt;<span class="number">4</span>), (&lt;<span class="number">10</span>), odd] <span class="number">7</span>  </span><br><span class="line">[<span class="type">True</span>,<span class="type">True</span>,<span class="type">True</span>]  </span><br></pre></td></tr></table></figure>

<h2 id="Monad"><a href="#Monad" class="headerlink" title="Monad"></a>Monad</h2><p>å•å­ï¼ˆMonadï¼‰æ˜¯å¯¹Applicative Functorçš„æ‰©å±•ï¼ˆä½†æ˜¯è¯ç”Ÿæ¯”Applicativeæ—©ï¼‰ï¼ŒFunctorçš„<code>&lt;$&gt;</code>å‡½æ•°å®ç°äº†å°†æ™®é€šå‡½æ•°åº”ç”¨åœ¨ä¸Šä¸‹æ–‡å€¼ä¸Šï¼ŒApplicativeçš„<code>&lt;*&gt;</code>å‡½æ•°å°†ä¸Šä¸‹æ–‡ä¸­å‡½æ•°åº”ç”¨åœ¨ä¸Šä¸‹æ–‡å€¼ä¸Šã€‚è€ŒMonadæä¾›äº†ä¸€ä¸ªå‡½æ•°<code>&gt;&gt;=</code>ï¼ˆbindï¼‰ï¼Œå°†ä¸€ä¸ªæ¥æ”¶æ™®é€šå€¼è¿”å›ä¸Šä¸‹æ–‡å€¼çš„å‡½æ•°åº”ç”¨åœ¨ä¸Šä¸‹æ–‡å€¼ä¸Šï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Applicative</span> m =&gt; <span class="type">Monad</span> m <span class="keyword">where</span></span></span><br><span class="line">    (&gt;&gt;=) :: m a -&gt; (a -&gt; m b) -&gt; m b</span><br><span class="line">    (&gt;&gt;) :: m a -&gt; m b -&gt; m b</span><br><span class="line">    return :: a -&gt; m a</span><br><span class="line">    m &gt;&gt; n = m &gt;&gt;= \_ -&gt; n</span><br><span class="line">    return = pure</span><br></pre></td></tr></table></figure>
<ul>
<li><code>return</code>å‡½æ•°ï¼šå’Œ<code>pure</code>ä¸€æ ·ï¼Œåªæ˜¯æœ‰å¦ä¸€ä¸ªåå­—</li>
<li><code>&gt;&gt;</code>å‡½æ•°ï¼šæä¾›äº†é»˜è®¤çš„å®ç°æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨å’ŒApplicativeçš„*&gt;å‡½æ•°ä¸€æ ·</li>
<li><code>&gt;&gt;=</code>å‡½æ•°ï¼ˆbindï¼‰ï¼šæ¯”Applicativeå‡çº§çš„å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå•å­ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ¥æ”¶å€¼è¿”å›å•å­çš„å‡½æ•°ï¼Œå°†è¿™ä¸ªå‡½æ•°åº”ç”¨åœ¨ç¬¬ä¸€ä¸ªå‚æ•°å•å­ä¸­çš„å€¼ä¸Šï¼Œå¹¶è¿”å›å¾—åˆ°çš„æ–°å•å­</li>
</ul>
<h3 id="Monadå®ä¾‹"><a href="#Monadå®ä¾‹" class="headerlink" title="Monadå®ä¾‹"></a>Monadå®ä¾‹</h3><h4 id="Maybe-2"><a href="#Maybe-2" class="headerlink" title="Maybe"></a>Maybe</h4><p>Maybeæ˜¯ä¸€ä¸ªå•å­å®ä¾‹ï¼ŒApplicativeå·²ç»ä¸ºå®ƒå®ç°äº†returnï¼Œå› æ­¤åªéœ€è¦&gt;&gt;=å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    (<span class="type">Just</span> x) &gt;&gt;= f = f x </span><br><span class="line">    <span class="type">Nothing</span>  &gt;&gt;= _ = <span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<p>æ ¹æ®å®šä¹‰å°±å¾ˆå®¹æ˜“å®ç°Maybeçš„&gt;&gt;=å‡½æ•°äº†ï¼Œè€Œä¸”ä¹Ÿå¾ˆå¥½ç†è§£</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="number">1</span> &gt;&gt;= \x -&gt; <span class="type">Just</span> (x + <span class="number">1</span>)</span><br><span class="line"><span class="type">Just</span> <span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="number">1</span> &gt;&gt;= \x -&gt; return (x + <span class="number">1</span>)</span><br><span class="line"><span class="type">Just</span> <span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> &gt;&gt;= \x -&gt; <span class="type">Just</span> (x + <span class="number">1</span>)</span><br><span class="line"><span class="type">Nothing</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="number">1</span> &gt;&gt;= \x -&gt; <span class="type">Just</span> (x + <span class="number">1</span>) &gt;&gt; <span class="type">Nothing</span> &gt;&gt;= \y -&gt; <span class="type">Just</span> (y + <span class="number">1</span>)</span><br><span class="line"><span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<p>æœ€åä¸€ä¸ªä¾‹å­ä¸­å‡ºç°äº†&gt;&gt; Nothingï¼Œè¿™æ—¶Nothingå‰çš„éƒ¨åˆ†å…¨éƒ½ç›¸å½“äºæ²¡ç”¨ï¼Œå› ä¸º&gt;&gt;æ“ä½œç¬¦çš„å·¦å³ä¸¤è¾¹åªè¦æœ‰ä¸€ä¸ªå‡ºç°Nothingï¼Œé‚£æ•´ä½“å°±ä¼šæ˜¯Nothingã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥ç”¨äºåœ¨ä¸­é€”éšæ—¶åˆ¤æ–­å¤±è¯¯ï¼Œåªè¦æœ‰ä¸€å¤„å¤±è¯¯ï¼Œç»“æœå°±ä¼šæ˜¯Nothing</p>
<h4 id="-2"><a href="#-2" class="headerlink" title="[]"></a>[]</h4><p>åˆ—è¡¨ä¹Ÿæ˜¯ä¸€ä¸ªå•å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> [] <span class="keyword">where</span></span></span><br><span class="line">    xs &gt;&gt;= f = concat (map f xs)</span><br></pre></td></tr></table></figure>
<p>å°†è¿™ä¸ªå‡½æ•°åº”ç”¨åœ¨xsçš„æ¯ä¸ªå€¼ä¸Šï¼Œå°†è¿”å›çš„æ‰€æœ‰åˆ—è¡¨å¹³é“ºæˆä¸€ä¸ªåˆ—è¡¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>] &gt;&gt;= \x -&gt; [x,-x]  </span><br><span class="line">[<span class="number">3</span>,<span class="number">-3</span>,<span class="number">4</span>,<span class="number">-4</span>,<span class="number">5</span>,<span class="number">-5</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>,<span class="number">2</span>] &gt;&gt;= \n -&gt; [&#x27;a&#x27;,&#x27;b&#x27;] &gt;&gt;= \ch -&gt; return (n,ch)  </span><br><span class="line">[(<span class="number">1</span>,&#x27;a&#x27;),(<span class="number">1</span>,&#x27;b&#x27;),(<span class="number">2</span>,&#x27;a&#x27;),(<span class="number">2</span>,&#x27;b&#x27;)]  </span><br></pre></td></tr></table></figure>

<h4 id="IO-2"><a href="#IO-2" class="headerlink" title="IO"></a>IO</h4><p>IOä¹Ÿæ˜¯ä¸€ä¸ªå•å­ï¼Œä½†æ˜¯å®ç°æ–¹æ³•æ¯”è¾ƒæ·±å¥¥ï¼ˆé€ƒ</p>
<h4 id="gt-r-2"><a href="#gt-r-2" class="headerlink" title="(-&gt;) r"></a>(-&gt;) r</h4><p>(-&gt;) rä¹Ÿæ˜¯ä¸€ä¸ªå•å­ï¼Œå’ŒFunctorã€Applicativeä¸€æ ·ï¼Œå…ˆåˆ†æå®ƒçš„&gt;&gt;=ç±»å‹ç­¾åï¼š</p>
<p style="text-align: center;">(>>=) :: (-> r) a -> (a -> (-> r) b) -> (-> r) b</p>
<p style="text-align: center;">(>>=) :: (r -> a) -> (a -> r -> b) -> (r -> b)</p>

<p>ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‡½æ•°f :: r -&gt; aã€g :: a -&gt; r -&gt; bï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°h :: r -&gt; b</p>
<p>é‚£ä¹ˆå‡½æ•°hæ¥æ”¶ä¸€ä¸ªç±»å‹ä¸ºrçš„å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç±»å‹ä¸ºbçš„å€¼ã€‚æ‰€ä»¥å…ˆå¯¹è¾“å…¥åº”ç”¨få¾—åˆ°ç±»å‹ä¸ºaçš„ä¸­é—´å€¼ï¼Œç„¶åå†å°†è¿™ä¸ªå€¼å’Œè¾“å…¥å‚æ•°ä¸€èµ·ä¼ å…¥å‡½æ•°gå¾—åˆ°ç»“æœã€‚æ‰€ä»¥å‡½æ•°hçš„å®šä¹‰åº”è¯¥æ˜¯ï¼š</p>
<p style="text-align: center;">\x -> g (f x) x</p>

<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> ((-&gt;) r) <span class="keyword">where</span></span></span><br><span class="line">    f &gt;&gt;= g = \x -&gt; g (f x) x</span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">3</span>) &gt;&gt;= (+) $ <span class="number">1</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+) &lt;$&gt; (+<span class="number">3</span>) &lt;*&gt; id $ <span class="number">1</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<h3 id="do-notation"><a href="#do-notation" class="headerlink" title="do-notation"></a>do-notation</h3><p>Haskellçš„doè¯­å¥ä¸ºé“¾å¼çš„&gt;&gt;=åº”ç”¨æä¾›äº†ç±»ä¼¼å‘½ä»¤å¼ï¼ˆimperative styleï¼‰çš„è¯­æ³•ç³–ã€‚æ¯”å¦‚<code>a &gt;&gt;= \x -&gt; b &gt;&gt; c &gt;&gt;= \y -&gt; d</code>ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">a</span> &gt;&gt;= \x -&gt;</span><br><span class="line"><span class="title">b</span> &gt;&gt;</span><br><span class="line"><span class="title">c</span> &gt;&gt;= \y -&gt;</span><br><span class="line"><span class="title">d</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æœ‰abcdå››ä¸ªå€¼ï¼Œå¯ä»¥çœ‹å‡ºaä¸­å†…å®¹ç»‘å®šåˆ°äº†xä¸Šï¼Œcä¸­å†…å®¹ç»‘å®šåˆ°äº†yä¸Šã€‚ä½¿ç”¨doè¯­å¥æ¥è¡¨ç¤ºè¿™ä¸ªæ“ä½œå¯ä»¥å†™æˆï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">do</span> &#123; x &lt;- a </span><br><span class="line">   ;      b </span><br><span class="line">   ; y &lt;- c </span><br><span class="line">   ;      d </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„å¤§æ‹¬å·å’Œåˆ†å·å¯ä»¥çœç•¥ä¸å†™ï¼ˆæŒ¤åœ¨ä¸€è¡Œæ—¶ä¸èƒ½çœç•¥ï¼‰ã€‚doè¯­å¥ä¹Ÿåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒå¯ä»¥é€’å½’åœ°è½¬æ¢æˆæ™®é€šçš„Monadæ“ä½œè¯­å¥ï¼š</p>
<ul>
<li><code>do e</code>ï¼še</li>
<li><code>do &#123; e; ... &#125;</code>ï¼še &gt;&gt; do { â€¦ }</li>
<li><code>do &#123; v &lt;- e; ... &#125;</code>ï¼še &gt;&gt;= \v -&gt; do { â€¦ }</li>
<li><code>do &#123; let ...; ... &#125;</code>ï¼šlet â€¦ in do { â€¦ }</li>
</ul>
<h4 id="ApplicativeDo"><a href="#ApplicativeDo" class="headerlink" title="ApplicativeDo"></a>ApplicativeDo</h4><p>æ¯”å¦‚å¦‚ä¸‹ä¸€ä¸ªdoè¯­å¥ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">do</span> x &lt;- a </span><br><span class="line">   y &lt;- b </span><br><span class="line">   z &lt;- c </span><br><span class="line">   return (f x y z)</span><br></pre></td></tr></table></figure>
<p>å®ƒå¯ä»¥è½¬åŒ–æˆï¼š</p>
<p style="text-align: center;">a >>= \x -> b >>= \y -> c >>= \z -> return (f x y z)</p>

<p>ä½†æ˜¯ç»è¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œæ•´ä¸ªè¯­å¥å®é™…ä¸Šå°†å‡½æ•°fåº”ç”¨åœ¨äº†ä¸‰ä¸ªä¸Šä¸‹æ–‡ä¸­çš„å€¼ä¸Šï¼Œæ‰€ä»¥ä»…ç”¨Applicativeçš„&lt;$&gt;å’Œ&lt;*&gt;å®Œå…¨å¯ä»¥å®ç°ï¼š</p>
<p style="text-align: center;">f <$> a <*> b <*> c</*></*></$></p>

<p>è€Œä¸”åœ¨è¿è¡Œçš„æ—¶å€™Applicativeçš„æ•ˆç‡ä¼šæ¯”Monadé«˜ï¼Œæ‰€ä»¥Haskellä¼šå°†doè¯­å¥å°½å¯èƒ½ä¼˜å…ˆè½¬æ¢ä¸ºApplicativeçš„è¡¨ç¤ºæ–¹æ³•ç„¶åå†è®¡ç®—</p>
<h3 id="Monad-Laws"><a href="#Monad-Laws" class="headerlink" title="Monad Laws"></a>Monad Laws</h3><ol>
<li><code>Left identity</code>ï¼š return a &gt;&gt;= k      <code>=</code> k a</li>
<li><code>Right identity</code>ï¼šm        &gt;&gt;= return <code>=</code> m</li>
<li><code>Associativity</code>ï¼š(m &gt;&gt;= g) &gt;&gt;= h      <code>=</code> m &gt;&gt;= (\x -&gt; g x &gt;&gt;= h)</li>
</ol>
<p>å‰ä¸¤ä¸ªå®šå¾‹å¾ˆå¥½ç†è§£ï¼š</p>
<ul>
<li>å°†aæ³¨å…¥ä¸Šä¸‹æ–‡ä¹‹åç»‘å®šï¼ˆbindï¼‰ç»™å‡½æ•°k(:: a -&gt; m a)ï¼Œç›¸å½“äºç›´æ¥å°†aç›´æ¥ä¼ å…¥å‡½æ•°k</li>
<li>å°†å·²ç»åŒ…å«åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å€¼ç»‘å®šç»™returnå‡½æ•°ï¼Œç›¸å½“äºä¿æŒä¸å˜</li>
</ul>
<p>ç¬¬ä¸‰ä¸ªå®šå¾‹æ˜¯ç»“åˆå¾‹ï¼ŒæŠŠå®ƒå†™æˆæ›´åƒç»“åˆå¾‹çš„è¡¨ç¤ºæ–¹æ³•æ˜¯ï¼š</p>
<p style="text-align: center;">(m >>= (\x -> g x)) >>= h <code>=</code> m >>= (\x -> g x >>= h)</p>

<h4 id="ç»„åˆè¿ç®—ç¬¦ï¼ˆ-gt-gt-ï¼‰å½¢å¼"><a href="#ç»„åˆè¿ç®—ç¬¦ï¼ˆ-gt-gt-ï¼‰å½¢å¼" class="headerlink" title="ç»„åˆè¿ç®—ç¬¦ï¼ˆ&gt;=&gt;ï¼‰å½¢å¼"></a>ç»„åˆè¿ç®—ç¬¦ï¼ˆ&gt;=&gt;ï¼‰å½¢å¼</h4><p><code>Control.Monad</code>æ¨¡å—ä¸­è¿˜å®šä¹‰äº†å‡½æ•°<code>&gt;=&gt;</code>ï¼ˆKleisli-composition operatorï¼‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">infixr</span> <span class="number">1</span> &gt;=&gt;</span><br><span class="line">(&gt;=&gt;) :: <span class="type">Monad</span> m =&gt; (a -&gt; m b) -&gt; (b -&gt; m c) -&gt; (a -&gt; m c)</span><br><span class="line"><span class="title">f</span> &gt;=&gt; g = \x -&gt; f x &gt;&gt;= g</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨&gt;=&gt;è¿ç®—ç¬¦å¯ä»¥å°†ä¸¤ä¸ªç”¨äºç»‘å®šçš„å‡½æ•°ç»“åˆåœ¨ä¸€èµ·ã€‚ç”¨å®ƒè¡¨ç¤ºçš„Monadå®šå¾‹æ›´åŠ æ¸…æ™°ç›´è§‚ï¼š</p>
<ol>
<li><code>Left identity</code>ï¼šreturn &gt;=&gt; f <code>=</code> f</li>
<li><code>Right identity</code>ï¼šf &gt;=&gt; return <code>=</code> f</li>
<li><code>Associativity</code>ï¼š(f &gt;=&gt; g) &gt;=&gt; h <code>=</code> f &gt;=&gt; (g &gt;=&gt; h)</li>
</ol>
<h4 id="do-notationå½¢å¼"><a href="#do-notationå½¢å¼" class="headerlink" title="do-notationå½¢å¼"></a>do-notationå½¢å¼</h4><p>Monadçš„è¿™ä¸‰ä¸ªå®šå¾‹è¿˜å¯ä»¥ä½¿ç”¨doè¯­å¥æ¥æè¿°ï¼š</p>
<ol>
<li><code>Left identity</code>ï¼š <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">do</span> &#123; x&#x27; &lt;- return x;</span><br><span class="line">     f x&#x27;             =   <span class="keyword">do</span> &#123; f x &#125; </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
<li><code>Right identity</code>ï¼š <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">do</span> &#123; x &lt;- m; </span><br><span class="line">     return x         =   <span class="keyword">do</span> &#123; m &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
<li><code>Associativity</code>ï¼š <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">do</span> &#123; y &lt;- <span class="keyword">do</span> &#123; x &lt;- m;       <span class="keyword">do</span> &#123; x &lt;- m;              <span class="keyword">do</span> &#123; x &lt;- m;</span><br><span class="line">               f x                <span class="keyword">do</span> &#123; y &lt;- f x;            y &lt;- f x;</span><br><span class="line">             &#125;           =             g y         =        g y</span><br><span class="line">     g y                             &#125;                    &#125;</span><br><span class="line">   &#125;                            &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="Intuition-2"><a href="#Intuition-2" class="headerlink" title="Intuition"></a>Intuition</h3><p>Monadä¹Ÿå¯ä»¥å¾ˆè‡ªç„¶åœ°çœ‹æˆApplicativeçš„å‡çº§ç‰ˆï¼Œæ¯”å¦‚Applicativeçš„æ“ä½œå…¨éƒ¨æ˜¯å›ºå®šçš„ï¼Œè€ŒMonadçš„æ“ä½œå¯ä»¥åœ¨ä¸­é€”çªç„¶æ”¹å˜</p>
<p>åŒæ—¶Monadä¹Ÿå®Œæˆäº†Functorå’ŒApplicativeæ— æ³•å®Œæˆçš„æ“ä½œã€‚æ¯”å¦‚è¦ç”¨fmapå’Œå®ç°&gt;&gt;=å‡½æ•°ï¼ˆå³è¾¾æˆæ“ä½œ m a -&gt; (a -&gt; m b) -&gt; m bï¼‰ï¼Œå…ˆå‡è®¾ f :: a -&gt; m bï¼Œé‚£ä¹ˆfmap fçš„ç±»å‹å°±ä¼šæ˜¯ m a -&gt; m (m b)ï¼Œå°†m aåº”ç”¨åœ¨fmap fä¸Šä¼šå¾—åˆ°ç»“æœm (m b)ï¼Œè€Œä¸æ˜¯m bã€‚ä½†æ˜¯ç›®å‰åªå¯ä»¥ä½¿ç”¨pureå°†ä¸€ä¸ªå€¼è£…å…¥ä¸Šä¸‹æ–‡ä¸­ï¼ˆa -&gt; m aï¼‰ï¼Œè€Œæ²¡æœ‰ä¸€ä¸ªå‡½æ•°å¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æå–å€¼ï¼ˆm a -&gt; aï¼‰ã€‚é‚£ä¹ˆå°±éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„å‡½æ•°æ¥å®ç°è¿™ä¸ªæ“ä½œçš„æ•ˆæœï¼ˆm (m b) -&gt; m bï¼‰ã€‚å› æ­¤Monadçš„å¦ä¸€ä¸ªç­‰æ•ˆçš„å®šä¹‰æ–¹æ³•æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Applicative</span> m =&gt; <span class="type">Monad&#x27;</span> m <span class="keyword">where</span></span></span><br><span class="line">    join :: m (m a) -&gt; m a </span><br><span class="line">    </span><br><span class="line">    (&gt;&gt;=) :: m a -&gt; (a -&gt; m b) -&gt; m b </span><br><span class="line">    x &gt;&gt;= f = join $ fmap f x</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å®šä¹‰&gt;&gt;=å‡½æ•°ä¼šæ›´ä¸ºç›´è§‚æ–¹ä¾¿ï¼Œæ‰€ä»¥Haskellé‡‡ç”¨äº†ç”¨&gt;&gt;=å‡½æ•°å®šä¹‰Monadçš„æ–¹æ³•</p>
<p>åŒæ—¶Haskellè¿˜æä¾›äº†joinå‡½æ•°çš„å®šä¹‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">join</span> :: <span class="type">Monad</span> m =&gt; m (m a) -&gt; m a </span><br><span class="line"><span class="title">join</span> x = x &gt;&gt;= id</span><br></pre></td></tr></table></figure>

<h3 id="å¸¸ç”¨å‡½æ•°-2"><a href="#å¸¸ç”¨å‡½æ•°-2" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h3><h4 id="liftM-amp-ap"><a href="#liftM-amp-ap" class="headerlink" title="liftM &amp; ap"></a>liftM &amp; ap</h4><p style="text-align: center;">liftM :: Monad m => (a -> b) -> m a -> m b</p>
<p style="text-align: center;">ap :: Monad m => m (a -> b) -> m a -> m b</p>

<p>æ‰€ä»¥liftMå…¶å®å°±æ˜¯fmapã€apå°±æ˜¯&lt;*&gt;ï¼Œä½†æ˜¯è€ç‰ˆæœ¬çš„GHCå®šä¹‰Monadå¹¶æ²¡æœ‰Functorã€Applicativeçš„çº¦æŸï¼Œæ‰€ä»¥å®ç°äº†liftMã€apï¼Œå¹¶ä¸”ä¿ç•™äº†è¿™ä¸ªåå­—</p>
<p>å› æ­¤ä¸€ä¸ªå•å­ä¹Ÿå¯ä»¥é€šè¿‡<code>pure = return</code>ã€<code>(&lt;*&gt;) = ap</code>ç›´æ¥æˆä¸ºåº”ç”¨å‡½å­çš„å®ä¾‹</p>
<h4 id="sequence-1"><a href="#sequence-1" class="headerlink" title="sequence"></a>sequence</h4><p style="text-align: center;">sequence :: Monad m => [m a] -> m [a]</p>

<p>sequenceçš„ä½œç”¨æ˜¾è€Œæ˜“è§ï¼Œè€Œä¸”åœ¨IOéƒ¨åˆ†ä¹Ÿä½¿ç”¨åˆ°äº†ã€‚ä½†æ˜¯è¿™ä¸ªç‰ˆæœ¬æ˜¯åœ¨<code>GHC.Base</code>æ¨¡å—ä¸­å®šä¹‰çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´å¹¿æ³›çš„ä½¿ç”¨Traversableçš„å®šä¹‰åœ¨<code>Data.Traversable</code>æ¨¡å—ä¸­ </p>
<h4 id="replicateM"><a href="#replicateM" class="headerlink" title="replicateM"></a>replicateM</h4><p style="text-align: center;">replicateM :: Applicative m => Int -> m a -> m [a]</p>

<h4 id="mapM-amp-forM"><a href="#mapM-amp-forM" class="headerlink" title="mapM &amp; forM"></a>mapM &amp; forM</h4><p style="text-align: center;">mapM :: Monad m => (a -> m b) -> [a] -> m [b]</p>
<p style="text-align: center;">forM :: Monad m => [a] -> (a -> m b) -> m [b]</p>

<p>forMçš„ç”¨æ³•åœ¨IOéƒ¨åˆ†å·²ç»è¯´è¿‡ï¼ŒmapMå’ŒforMéƒ½åœ¨<code>Data.Traversable</code>æ¨¡å—ä¸­æœ‰å¹¿æ³›ç‰ˆæœ¬</p>
<p>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å‡½æ•°ï¼šfilterMã€zipWithMã€foldMã€foreverï¼Œé€šè¿‡åå­—å°±å¯ä»¥çœ‹å‡ºç”¨æ³•ï¼Œæ˜¯å°†åŸæ¥ä»…ä½¿ç”¨ä¸åˆ—è¡¨çš„å‡½æ•°æå‡è‡³å¯ä»¥é€‚ç”¨äºæ‰€æœ‰å•å­</p>
<p>å¹¶ä¸”åœ¨å‡½æ•°åååŠ ä¸‹åˆ’çº¿ï¼Œæ¯”å¦‚sequence_ã€mapM_ï¼Œä¼šå¿½ç•¥è¿”å›å€¼ï¼ˆæœ€ç»ˆç»“æœä¸º<code>m ()</code>ï¼‰</p>
<h4 id="lt-lt-amp-gt-gt-amp-lt-lt"><a href="#lt-lt-amp-gt-gt-amp-lt-lt" class="headerlink" title="=&lt;&lt; &amp; &gt;=&gt; &amp; &lt;=&lt;"></a>=&lt;&lt; &amp; &gt;=&gt; &amp; &lt;=&lt;</h4><p>ï¼ˆ<code>&gt;=&gt;</code>æ“ä½œç¬¦åœ¨ä¸Šé¢<a href="#%E7%BB%84%E5%90%88%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%88-gt-gt-%EF%BC%89%E5%BD%A2%E5%BC%8F">Monad Laws</a>éƒ¨åˆ†å·²ç»ç»™å‡ºäº†å®šä¹‰ï¼‰</p>
<ul>
<li>x &gt;&gt;= f <code>=</code> f =&lt;&lt; x </li>
<li>f &gt;=&gt; g <code>=</code> g &lt;=&lt; f </li>
</ul>
<h2 id="MonadFail"><a href="#MonadFail" class="headerlink" title="MonadFail"></a>MonadFail</h2><p>MonadFailå®šä¹‰åœ¨<code>Control.Monad.Fail</code>æ¨¡å—ä¸­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Monad</span> m =&gt; <span class="type">MonadFail</span> m <span class="keyword">where</span></span></span><br><span class="line">    fail :: <span class="type">String</span> -&gt; m a </span><br></pre></td></tr></table></figure>
<p>å®ƒåªè¦æ±‚åœ¨Monadçš„åŸºç¡€ä¸Šå®ç°failå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›ä¸€ä¸ªå•å­ã€‚è¿™ä¼šä½¿åœ¨doè¯­å¥ä¸­äº§ç”Ÿé”™è¯¯æ—¶ç›´æ¥å˜ä¸ºé”™è¯¯å€¼ï¼ˆç©ºå€¼ï¼‰ä½¿æœ€ç»ˆçš„è¿”å›å€¼ä¸ºé”™è¯¯å€¼</p>
<h3 id="MonadFailå®ä¾‹"><a href="#MonadFailå®ä¾‹" class="headerlink" title="MonadFailå®ä¾‹"></a>MonadFailå®ä¾‹</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">MonadFail</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    fail _ = <span class="type">Nothing</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">MonadFail</span> [] <span class="keyword">where</span></span></span><br><span class="line">    fail _ = []</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">MonadFail</span> <span class="type">IO</span> <span class="keyword">where</span></span></span><br><span class="line">    fail = failIO</span><br></pre></td></tr></table></figure>
<p>Maybeå’Œ[]çš„failå‡½æ•°éƒ½ä¸ç¬¬ä¸€ä¸ªå‚æ•°æ— å…³ï¼Œç›´æ¥è¿”å›ç©ºå€¼ï¼ˆNothingã€[]ï¼‰ï¼›è€ŒIOçš„failå‡½æ•°ç›´æ¥ä½¿ç”¨failIOï¼Œå®ç°æ–¹æ³•ä¹Ÿæ˜¯æ·±å¥¥ï¼ˆæ¥ç€é€ƒ</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">exampleFail</span> :: <span class="type">Maybe</span> <span class="type">Char</span> </span><br><span class="line"><span class="title">exampleFail</span> = <span class="keyword">do</span></span><br><span class="line">    (x:xs) &lt;- <span class="type">Just</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    return x </span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; exampleFail</span><br><span class="line"><span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­çš„doè¯­å¥ä¸­ï¼Œåœ¨æå–Just â€œâ€ä¸­çš„å€¼æ—¶ç”¨äº†æ¨¡å¼åŒ¹é…ï¼Œä½†æ˜¯å› ä¸ºå…¶å†…å®¹ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œx:xsåŒ¹é…ä¼šå‡ºç°é”™è¯¯ï¼Œè¿™æ—¶å°±ä¼šè§¦å‘failå‡½æ•°ç›´æ¥è¿”å›Nothing</p>
<h3 id="MonadFail-Law"><a href="#MonadFail-Law" class="headerlink" title="MonadFail Law"></a>MonadFail Law</h3><ul>
<li>fail s &gt;&gt;= m <code>=</code> fail s </li>
</ul>
<h2 id="Semigroup"><a href="#Semigroup" class="headerlink" title="Semigroup"></a>Semigroup</h2><p>åŠç¾¤ï¼ˆsemigroupï¼‰æ˜¯ä¸€ä¸ªé›†åˆ$S$ï¼Œå®ƒéœ€è¦æŒ‡å®šä¸€ä¸ªäºŒå…ƒè¿ç®—ç¬¦$\oplus$ï¼Œå¹¶ä¸”æ»¡è¶³</p>
<p>$$<br>a\oplus b \in S\quad a, b\in S<br>$$</p>
<p>ä»¥åŠç»“åˆï¼ˆassociativeï¼‰å¾‹ï¼š</p>
<p>$$<br>(a\oplus b)\oplus c = a\oplus (b\oplus c)<br>$$</p>
<p>è¿™ä¸ªäºŒå…ƒè¿ç®—ç¬¦åœ¨Haskellçš„Semigroupä¸­è¢«å®šä¹‰ä¸º<code>&lt;&gt;</code>å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Semigroup</span> a <span class="keyword">where</span></span></span><br><span class="line">    (&lt;&gt;) :: a -&gt; a -&gt; a </span><br><span class="line"></span><br><span class="line">    sconcat :: <span class="type">NonEmpty</span> a -&gt; a </span><br><span class="line">    sconcat (a :| <span class="keyword">as</span>) = go a <span class="keyword">as</span> <span class="keyword">where</span> </span><br><span class="line">        go b (c:cs) = b &lt;&gt; go c cs </span><br><span class="line">        go b []     = b</span><br><span class="line">    </span><br><span class="line">    stimes :: <span class="type">Integarl</span> b =&gt; b -&gt; a -&gt; a </span><br><span class="line">    stimes = ...</span><br></pre></td></tr></table></figure>
<p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰<code>sconcat</code>å’Œ<code>stimes</code>å‡½æ•°ï¼Œéƒ½ç»™å‡ºäº†é»˜è®¤å®ç°ã€‚å¯¹äºåˆ—è¡¨ï¼Œ&lt;&gt;ç›¸å½“äº(++)ï¼Œstimesç›¸å½“äºconcat . replicateï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>] &lt;&gt; [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; sconcat $ fromList [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; stimes <span class="number">3</span> [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br></pre></td></tr></table></figure>

<h3 id="Semigroup-Law"><a href="#Semigroup-Law" class="headerlink" title="Semigroup Law"></a>Semigroup Law</h3><ul>
<li>(x &lt;&gt; y) &lt;&gt; z <code>=</code> x &lt;&gt; (y &lt;&gt; z)</li>
</ul>
<h3 id="è¡¥ï¼šNonEmpty"><a href="#è¡¥ï¼šNonEmpty" class="headerlink" title="è¡¥ï¼šNonEmpty"></a>è¡¥ï¼šNonEmpty</h3><p>NonEmptyè¡¨ç¤ºéç©ºåˆ—è¡¨ï¼Œå®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">NonEmpty</span> a = a :| [a] <span class="keyword">deriving</span> (<span class="type">Eq</span>, <span class="type">Ord</span>)</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ä¸€ä¸ªå…ƒç´ å’Œä¸€ä¸ªåˆ—è¡¨ç”¨<code>:|</code>è¿æ¥å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªNonEmptyç±»å‹çš„åˆ—è¡¨</p>
<p><code>Data.List.NonEmpty</code>æ¨¡å—ä¸­å®ç°äº†å¾ˆå¤šæ™®é€šåˆ—è¡¨æœ‰çš„å‡½æ•°ï¼Œéœ€è¦qualified importåè°ƒç”¨ï¼Œä½¿ç”¨fromListã€toListå‡½æ•°å¯ä»¥åœ¨æ™®é€šåˆ—è¡¨å’Œéç©ºåˆ—è¡¨ä¹‹é—´è½¬æ¢</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="keyword">import</span> <span class="keyword">qualified</span> Data.List.NonEmpty <span class="keyword">as</span> NE</span><br><span class="line"><span class="title">ghci</span>&gt; arr = <span class="type">NE</span>.fromList [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; arr</span><br><span class="line"><span class="number">1</span> :| [<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">NE</span>.head arr </span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">NE</span>.tail arr </span><br><span class="line">[<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<h2 id="Monoid"><a href="#Monoid" class="headerlink" title="Monoid"></a>Monoid</h2><p>å¹ºåŠç¾¤ï¼ˆMonoidï¼‰æ˜¯ä¸€ä¸ªæœ‰å•ä½å…ƒç´ $e$çš„åŠç¾¤ï¼Œå³$e$æ»¡è¶³ï¼š</p>
<p>$$<br>e\oplus x = x\oplus e = x<br>$$</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Semigroup</span> a =&gt; <span class="type">Monoid</span> a <span class="keyword">where</span></span> </span><br><span class="line">    mempty  :: a </span><br><span class="line">    </span><br><span class="line">    mappend :: a -&gt; a -&gt; a </span><br><span class="line">    mappend = (&lt;&gt;)</span><br><span class="line"></span><br><span class="line">    mconcat :: [a] -&gt; a </span><br><span class="line">    mconcat = foldr mappend mempty </span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºMonoidè¦æ±‚äº†ä¸‰ä¸ªå‡½æ•°ï¼Œå…¶ä¸­æœ€å°‘åªéœ€è¦<code>mempty</code>ï¼Œå®ƒç›´æ¥è¿”å›ä¸€ä¸ªå€¼ï¼Œè¡¨ç¤ºå•ä½å…ƒç´ ã€‚<code>mappend</code>å³Semigroupä¸­çš„&lt;&gt;è¿ç®—ç¬¦ï¼Œ<code>mconcat</code>ä¹Ÿæä¾›äº†é»˜è®¤å®ç°</p>
<h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><h4 id="a-1"><a href="#a-1" class="headerlink" title="[a]"></a>[a]</h4><p>å› ä¸ºMonoidçš„å®ä¾‹æ˜¯ä¸€ä¸ªå…·ä½“ç±»å‹ï¼Œè€Œä¸æ˜¯åƒFunctorç­‰ä¸€æ ·ç­‰ç±»å‹æ„é€ å™¨ï¼Œæ‰€ä»¥[]å¹¶ä¸æ˜¯Monoidçš„å®ä¾‹ï¼Œä½†æ˜¯å…·ä½“ç±»å‹[a]æ˜¯ä¸€ä¸ªå¹ºåŠç¾¤ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> [a] <span class="keyword">where</span></span> </span><br><span class="line">    (&lt;&gt;) = (++)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> [a] <span class="keyword">where</span></span> </span><br><span class="line">    mempty = [] </span><br><span class="line">    mconcat xss = [x | xs &lt;- xss, x &lt;- xs]</span><br></pre></td></tr></table></figure>
<p>åˆ—è¡¨çš„å•ä½å…ƒç´ (mempty)å°±æ˜¯ç©ºåˆ—è¡¨[]ï¼Œè¿ç®—ç¬¦å°±æ˜¯åˆå¹¶åˆ—è¡¨(++)ï¼Œmconcatä¹Ÿç”¨åˆ—è¡¨æ¨å¯¼é‡æ–°å®ç°æé«˜æ•ˆç‡</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; mempty :: [<span class="type">Int</span>] </span><br><span class="line">[]</span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>] &lt;&gt; [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>] `mappend` [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; mconcat [[<span class="number">1</span>,<span class="number">2</span>], [<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br></pre></td></tr></table></figure>

<h4 id="Ordering"><a href="#Ordering" class="headerlink" title="Ordering"></a>Ordering</h4><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> <span class="type">Ordering</span> <span class="keyword">where</span></span></span><br><span class="line">    <span class="type">LT</span> &lt;&gt; _ = <span class="type">LT</span></span><br><span class="line">    <span class="type">EQ</span> &lt;&gt; y = y</span><br><span class="line">    <span class="type">GT</span> &lt;&gt; _ = <span class="type">GT</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> <span class="type">Ordering</span> <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">EQ</span></span><br></pre></td></tr></table></figure>
<p>ä¸»è¦å¯ä»¥ç”¨äºæ¯”è¾ƒå­—å…¸åºï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; mconcat (zipWith compare <span class="string">&quot;abcd&quot;</span> <span class="string">&quot;acbd&quot;</span>)</span><br><span class="line"><span class="type">LT</span></span><br></pre></td></tr></table></figure>

<h4 id="Sum-amp-Product"><a href="#Sum-amp-Product" class="headerlink" title="Sum &amp; Product"></a>Sum &amp; Product</h4><p>å¯¹äºæ•°å­—ï¼ŒåŠ æ³•å’Œä¹˜æ³•éƒ½æ»¡è¶³ç»“åˆå¾‹ï¼Œæ‰€ä»¥å¯¹äºNumï¼Œæœ‰ä¸¤ç§å®ç°Monoidçš„æ–¹å¼ï¼Œä½†æ˜¯ä¸èƒ½ä¸ºåŒä¸€ç±»å‹è®¾ç½®ä¸¤ç§å®ä¾‹æ–¹å¼ï¼Œæ‰€ä»¥<code>Data.Monoid</code>ä¸­æä¾›äº†ä¸¤ä¸ªåŒ…è£…å™¨â€”â€”â€”â€”Sumå’ŒProductï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Sum</span> a = <span class="type">Sum</span> &#123;<span class="title">getSum</span> :: <span class="title">a</span>&#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Product</span> a = <span class="type">Product</span> &#123;<span class="title">getProduct</span> :: <span class="title">a</span>&#125; <span class="keyword">deriving</span> (...)</span></span><br></pre></td></tr></table></figure>
<p>å®ƒä»¬ä½¿ç”¨Sumæˆ–Productæ¥åŒ…è£…èµ·ä¸€ä¸ªæ•°å­—ï¼Œå¯ä»¥é€šè¿‡getSumæˆ–getProductæ¥è·å–å…¶ä¸­çš„å€¼</p>
<p>å¯¹äºåŠ æ³•ï¼ŒäºŒå…ƒæ“ä½œä¸º(+)ï¼Œå•ä½å…ƒç´ ä¸º0ï¼›å¯¹äºä¹˜æ³•ï¼ŒäºŒå…ƒæ“ä½œä¸º(*)ï¼Œå•ä½å…ƒç´ ä¸º1:</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Num</span> a =&gt; <span class="type">Semigroup</span> (<span class="type">Sum</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    (&lt;&gt;) = coerce ((+) :: a -&gt; a -&gt; a)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Num</span> a =&gt; <span class="type">Monoid</span> (<span class="type">Sum</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">Sum</span> <span class="number">0</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Num</span> a =&gt; <span class="type">Semigroup</span> (<span class="type">Product</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    (&lt;&gt;) = coerce ((*) :: a -&gt; a -&gt; a)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Num</span> a =&gt; <span class="type">Monoid</span> (<span class="type">Product</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">Product</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Sum</span> <span class="number">5</span> &lt;&gt; <span class="type">Sum</span> <span class="number">6</span> &lt;&gt; <span class="type">Sum</span> <span class="number">10</span></span><br><span class="line"><span class="type">Sum</span> &#123;getSum = <span class="number">21</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; getSum . mconcat . fmap <span class="type">Sum</span> $ [<span class="number">5</span>, <span class="number">6</span>, <span class="number">10</span>]</span><br><span class="line"><span class="number">21</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Product</span> <span class="number">5</span> &lt;&gt; <span class="type">Product</span> <span class="number">6</span> &lt;&gt; <span class="type">Product</span> <span class="number">10</span></span><br><span class="line"><span class="type">Product</span> &#123;getProduct = <span class="number">300</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; getProduct . mconcat . fmap <span class="type">Product</span> $ [<span class="number">5</span>, <span class="number">6</span>, <span class="number">10</span>]</span><br><span class="line"><span class="number">300</span></span><br></pre></td></tr></table></figure>

<h4 id="All-amp-Any"><a href="#All-amp-Any" class="headerlink" title="All &amp; Any"></a>All &amp; Any</h4><p>å’Œæ•°å­—ä¸€æ ·ï¼Œå¸ƒå°”å€¼ä¹Ÿæœ‰ä¸¤ç§å®ç°Monoidçš„æ–¹å¼ï¼Œå› æ­¤<code>Data.Monoid</code>æ¨¡å—ä¸­ä¹Ÿæä¾›äº†ä¸¤ä¸ªåŒ…è£…å™¨ï¼Œåˆ†åˆ«å®ç°äº†è¿™ä¸¤ç§Monoidï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">All</span> = <span class="type">All</span> &#123; <span class="title">getAll</span> :: <span class="type">Bool</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> <span class="type">All</span> <span class="keyword">where</span></span></span><br><span class="line">        (&lt;&gt;) = coerce (&amp;&amp;)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> <span class="type">All</span> <span class="keyword">where</span></span></span><br><span class="line">        mempty = <span class="type">All</span> <span class="type">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Any</span> = <span class="type">Any</span> &#123; <span class="title">getAny</span> :: <span class="type">Bool</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> <span class="type">Any</span> <span class="keyword">where</span></span></span><br><span class="line">        (&lt;&gt;) = coerce (||)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> <span class="type">Any</span> <span class="keyword">where</span></span></span><br><span class="line">        mempty = <span class="type">Any</span> <span class="type">False</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; getAll (<span class="type">All</span> <span class="type">True</span> &lt;&gt; mempty &lt;&gt; <span class="type">All</span> <span class="type">False</span>)</span><br><span class="line"><span class="type">False</span></span><br><span class="line"><span class="title">ghci</span>&gt; getAll (mconcat (map (\x -&gt; <span class="type">All</span> (even x)) [<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]))</span><br><span class="line"><span class="type">False</span></span><br><span class="line"><span class="title">ghci</span>&gt; getAny (<span class="type">Any</span> <span class="type">True</span> &lt;&gt; mempty &lt;&gt; <span class="type">Any</span> <span class="type">False</span>)</span><br><span class="line"><span class="type">True</span></span><br><span class="line"><span class="title">ghci</span>&gt; getAny (mconcat (map (\x -&gt; <span class="type">Any</span> (even x)) [<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]))</span><br><span class="line"><span class="type">True</span></span><br></pre></td></tr></table></figure>

<h4 id="Monoid-a-gt-Maybe-a"><a href="#Monoid-a-gt-Maybe-a" class="headerlink" title="Monoid a =&gt; Maybe a"></a>Monoid a =&gt; Maybe a</h4><p>å¦‚æœaæ˜¯ä¸€ä¸ª(å¹º)åŠç¾¤ï¼Œé‚£ä¹ˆMaybe aä¹Ÿæ˜¯ä¸€ä¸ªå¹ºåŠç¾¤ï¼Œå•ä½å…ƒå°±æ˜¯Nothingï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> a =&gt; <span class="type">Semigroup</span> (<span class="type">Maybe</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    <span class="type">Nothing</span> &lt;&gt; b       = b</span><br><span class="line">    a       &lt;&gt; <span class="type">Nothing</span> = a</span><br><span class="line">    <span class="type">Just</span> a  &lt;&gt; <span class="type">Just</span> b  = <span class="type">Just</span> (a &lt;&gt; b)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> a =&gt; <span class="type">Monoid</span> (<span class="type">Maybe</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> &lt;&gt; <span class="type">Just</span> <span class="string">&quot;andy&quot;</span></span><br><span class="line"><span class="type">Just</span> <span class="string">&quot;andy&quot;</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="type">LT</span> &lt;&gt; <span class="type">Nothing</span></span><br><span class="line"><span class="type">Just</span> <span class="type">LT</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> (<span class="type">Sum</span> <span class="number">3</span>) &lt;&gt; <span class="type">Just</span> (<span class="type">Sum</span> <span class="number">4</span>) </span><br><span class="line"><span class="type">Just</span> (<span class="type">Sum</span> &#123;getSum = <span class="number">7</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="First-amp-Last"><a href="#First-amp-Last" class="headerlink" title="First &amp; Last"></a>First &amp; Last</h4><p>å¯¹äºMaybeä¹Ÿæœ‰ä¸¤ç§å®ç°Monoidçš„æ–¹æ³•ï¼Œå³&lt;&gt;æ“ä½œæ¯æ¬¡æ’å–å·¦è¾¹å’Œæ¯æ¬¡æ’å–å³è¾¹ï¼ˆåœ¨æ²¡æœ‰Nothingçš„æƒ…å†µä¸‹ï¼‰ï¼Œæ‰€ä»¥<code>Data.Monoid</code>æ¨¡å—ä¸­ä¹Ÿæä¾›äº†ä¸¤ä¸ªæ–°çš„åŒ…è£…å™¨ï¼šFirstå’ŒLastï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">First</span> a = <span class="type">First</span> &#123; <span class="title">getFirst</span> :: <span class="type">Maybe</span> <span class="title">a</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> (<span class="type">First</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    <span class="type">First</span> <span class="type">Nothing</span> &lt;&gt; b = b</span><br><span class="line">    a             &lt;&gt; _ = a</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> (<span class="type">First</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">First</span> <span class="type">Nothing</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Last</span> a = <span class="type">Last</span> &#123; <span class="title">getLast</span> :: <span class="type">Maybe</span> <span class="title">a</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> (<span class="type">Last</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    a &lt;&gt; <span class="type">Last</span> <span class="type">Nothing</span> = a</span><br><span class="line">    _ &lt;&gt; b            = b</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> (<span class="type">Last</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">Last</span> <span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; getFirst (<span class="type">First</span> (<span class="type">Just</span> <span class="string">&quot;hello&quot;</span>) &lt;&gt; <span class="type">First</span> <span class="type">Nothing</span> &lt;&gt; <span class="type">First</span> (<span class="type">Just</span> <span class="string">&quot;world&quot;</span>))</span><br><span class="line"><span class="type">Just</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="title">ghci</span>&gt; getLast (<span class="type">Last</span> (<span class="type">Just</span> <span class="string">&quot;hello&quot;</span>) &lt;&gt; <span class="type">Last</span> <span class="type">Nothing</span> &lt;&gt; <span class="type">Last</span> (<span class="type">Just</span> <span class="string">&quot;world&quot;</span>))</span><br><span class="line"><span class="type">Just</span> <span class="string">&quot;world&quot;</span></span><br><span class="line"><span class="title">ghci</span>&gt; getFirst . mconcat . map <span class="type">First</span> $ [<span class="type">Nothing</span>, <span class="type">Just</span> <span class="number">9</span>, <span class="type">Just</span> <span class="number">10</span>]  </span><br><span class="line"><span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="title">ghci</span>&gt; getLast . mconcat . map <span class="type">Last</span> $ [<span class="type">Nothing</span>, <span class="type">Just</span> <span class="number">9</span>, <span class="type">Just</span> <span class="number">10</span>]  </span><br><span class="line"><span class="type">Just</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>

<h4 id="Min-amp-Max"><a href="#Min-amp-Max" class="headerlink" title="Min &amp; Max"></a>Min &amp; Max</h4><p>å¯¹äºæœ‰ç•Œçš„ç±»å‹ï¼Œä¹Ÿæœ‰ä¸¤ç§å®ç°Monoidçš„æ–¹å¼ï¼Œæ¯æ¬¡äºŒå…ƒæ“ä½œéƒ½å–æœ€å°æˆ–æœ€å¤§ã€‚<code>Data.Semigroup</code>æ¨¡å—ä¸­æä¾›äº†ä¸¤ä¸ªåŒ…è£…å…¶å™¨ï¼šMinå’ŒMaxï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Min</span> a = <span class="type">Min</span> &#123; <span class="title">getMin</span> :: <span class="title">a</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Ord</span> a =&gt; <span class="type">Semigroup</span> (<span class="type">Min</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    (&lt;&gt;) = coerce (min :: a -&gt; a -&gt; a)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> (<span class="type">Ord</span> <span class="title">a</span>, <span class="type">Bounded</span> <span class="title">a</span>) =&gt; <span class="type">Monoid</span> (<span class="type">Min</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = maxBound</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Max</span> a = <span class="type">Max</span> &#123; <span class="title">getMax</span> :: <span class="title">a</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Ord</span> a =&gt; <span class="type">Semigroup</span> (<span class="type">Max</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    (&lt;&gt;) = coerce (max :: a -&gt; a -&gt; a)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> (<span class="type">Ord</span> <span class="title">a</span>, <span class="type">Bounded</span> <span class="title">a</span>) =&gt; <span class="type">Monoid</span> (<span class="type">Max</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = minBound</span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Min</span> <span class="number">3</span> &lt;&gt; <span class="type">Min</span> <span class="number">5</span></span><br><span class="line"><span class="type">Min</span> &#123;getMin = <span class="number">3</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Max</span> <span class="number">3</span> &lt;&gt; <span class="type">Max</span> <span class="number">5</span></span><br><span class="line"><span class="type">Max</span> &#123;getMax = <span class="number">5</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; getMin . mconcat . map <span class="type">Min</span> $ [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] :: <span class="type">Int</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="title">ghci</span>&gt; getMax . mconcat . map <span class="type">Max</span> $ [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] :: <span class="type">Int</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<h4 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h4><p>å½“å…ƒç»„å†…çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å¹ºåŠç¾¤æ—¶ï¼Œæ•´ä¸ªå…ƒç»„ä¹Ÿæ˜¯ä¸€ä¸ªå¹ºåŠç¾¤ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> (<span class="type">Semigroup</span> <span class="title">a</span>, <span class="type">Semigroup</span> <span class="title">b</span>) =&gt; <span class="type">Semigroup</span> (<span class="title">a</span>, <span class="title">b</span>) <span class="keyword">where</span></span></span><br><span class="line">        (a,b) &lt;&gt; (a&#x27;,b&#x27;) = (a&lt;&gt;a&#x27;,b&lt;&gt;b&#x27;)</span><br><span class="line">        stimes n (a,b) = (stimes n a, stimes n b)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> (<span class="type">Monoid</span> <span class="title">a</span>, <span class="type">Monoid</span> <span class="title">b</span>) =&gt; <span class="type">Monoid</span> (<span class="title">a</span>,<span class="title">b</span>) <span class="keyword">where</span></span></span><br><span class="line">        mempty = (mempty, mempty)</span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; mconcat $ map (\x -&gt; (<span class="type">Min</span> x, <span class="type">Max</span> x)) [<span class="number">1.</span><span class="number">.10</span>] :: (<span class="type">Min</span> <span class="type">Int</span>, <span class="type">Max</span> <span class="type">Int</span>)</span><br><span class="line">(<span class="type">Min</span> &#123;getMin = <span class="number">1</span>&#125;,<span class="type">Max</span> &#123;getMax = <span class="number">10</span>&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="Monoid-Laws"><a href="#Monoid-Laws" class="headerlink" title="Monoid Laws"></a>Monoid Laws</h3><ul>
<li>mempty &lt;&gt; x <code>=</code> x</li>
<li>x &lt;&gt; mempty <code>=</code> x</li>
<li>(x &lt;&gt; y) &lt;&gt; z <code>=</code> x &lt;&gt; (y &lt;&gt; z)</li>
</ul>
<h2 id="Monoidal-classes"><a href="#Monoidal-classes" class="headerlink" title="Monoidal classes"></a>Monoidal classes</h2><p>Applicativeã€Monadã€Arrowéƒ½æœ‰æœ‰å¹ºåŠç¾¤æ€§è´¨çš„å­ç±»å‹ç±»ï¼Œåˆ†åˆ«æ˜¯Alternativeã€MonadPlusã€ArrowPlus</p>
<h3 id="Alternative"><a href="#Alternative" class="headerlink" title="Alternative"></a>Alternative</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Applicative</span> f =&gt; <span class="type">Alternative</span> f <span class="keyword">where</span></span></span><br><span class="line">    <span class="comment">-- | The identity of &#x27;&lt;|&gt;&#x27;</span></span><br><span class="line">    empty :: f a</span><br><span class="line">    <span class="comment">-- | An associative binary operation</span></span><br><span class="line">    (&lt;|&gt;) :: f a -&gt; f a -&gt; f a</span><br><span class="line"></span><br><span class="line">    some :: f a -&gt; f [a]</span><br><span class="line">    some v = (:) &lt;$&gt; v &lt;*&gt; many v</span><br><span class="line">    many :: f a -&gt; f [a]</span><br><span class="line">    many v = some v &lt;|&gt; pure []</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­emptyæ˜¯å¹ºåŠç¾¤ä¸­çš„å•ä½å…ƒç´ ï¼Œ&lt;|&gt;æ˜¯å¹ºåŠç¾¤ä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚someå’Œmanyæ˜¯ä¸¤ä¸ªå‡½æ•°ï¼ˆ<del>æ„ä¹‰è¿˜ä¸æ‡‚</del>ï¼‰</p>
<h4 id="Alternativeå®ä¾‹"><a href="#Alternativeå®ä¾‹" class="headerlink" title="Alternativeå®ä¾‹"></a>Alternativeå®ä¾‹</h4><h5 id="-3"><a href="#-3" class="headerlink" title="[]"></a>[]</h5><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Alternative</span> [] <span class="keyword">where</span></span></span><br><span class="line">    empty = []</span><br><span class="line">    (&lt;|&gt;) = (++)</span><br></pre></td></tr></table></figure>
<p>å’ŒMonoidä¸€æ ·ï¼Œå•ä½å…ƒç´ æ˜¯ç©ºåˆ—è¡¨ï¼ŒäºŒå…ƒè¿ç®—æ˜¯åˆ—è¡¨åˆå¹¶</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] &lt;|&gt; empty &lt;|&gt; [<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; some []</span><br><span class="line">[]</span><br><span class="line"><span class="title">ghci</span>&gt; many []</span><br><span class="line">[[]]</span><br></pre></td></tr></table></figure>
<h5 id="Maybe-3"><a href="#Maybe-3" class="headerlink" title="Maybe"></a>Maybe</h5><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Alternative</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    empty = <span class="type">Nothing</span></span><br><span class="line">    <span class="type">Nothing</span> &lt;|&gt; r = r</span><br><span class="line">    l       &lt;|&gt; _ = l</span><br></pre></td></tr></table></figure>
<p>Maybeä½œä¸ºAlternativeçš„å•ä½å…ƒç´ æ˜¯Nothingï¼ŒäºŒå…ƒè¿ç®—æ˜¯å§‹ç»ˆå–å·¦è¾¹ï¼ˆå½“å·¦è¾¹ä¸ä¸ºNothingæ—¶ï¼‰</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> &lt;|&gt; <span class="type">Just</span> <span class="number">1</span> &lt;|&gt; <span class="type">Just</span> <span class="number">2</span> </span><br><span class="line"><span class="type">Just</span> <span class="number">1</span> </span><br><span class="line"><span class="title">ghci</span>&gt; some <span class="type">Nothing</span></span><br><span class="line"><span class="type">Nothing</span> </span><br><span class="line"><span class="title">ghci</span>&gt; many <span class="type">Nothing</span> </span><br><span class="line"><span class="type">Just</span> []</span><br></pre></td></tr></table></figure>
<h5 id="ZipList-1"><a href="#ZipList-1" class="headerlink" title="ZipList"></a>ZipList</h5><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Alternative</span> <span class="type">ZipList</span> <span class="keyword">where</span></span></span><br><span class="line">   empty = <span class="type">ZipList</span> []</span><br><span class="line">   <span class="type">ZipList</span> xs &lt;|&gt; <span class="type">ZipList</span> ys = <span class="type">ZipList</span> (xs ++ drop (length xs) ys)</span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">&lt;&gt;getZipList $ <span class="type">ZipList</span> [<span class="number">1</span>,<span class="number">2</span>] &lt;|&gt; <span class="type">ZipList</span> [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">&lt;&gt;getZipList $ <span class="type">ZipList</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>] &lt;|&gt; <span class="type">ZipList</span> [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br></pre></td></tr></table></figure>

<h4 id="Alternative-Laws"><a href="#Alternative-Laws" class="headerlink" title="Alternative Laws"></a>Alternative Laws</h4><ul>
<li><code>Monoid laws</code>:  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">empty</span> &lt;|&gt; x = x </span><br><span class="line"><span class="title">x</span> &lt;|&gt; empty = x </span><br><span class="line">(x &lt;|&gt; y) &lt;|&gt; z = x &lt;|&gt; (y &lt;|&gt; z)</span><br></pre></td></tr></table></figure></li>
<li><code>Left zero law</code>ï¼šempty &lt;*&gt; f <code>=</code> empty<br>ä»¥ä¸Šçš„å®šå¾‹æ˜¯éƒ½æ»¡è¶³éƒ½ï¼Œä¸‹é¢çš„å®šå¾‹åªæœ‰éƒ¨åˆ†æ»¡è¶³ï¼š</li>
<li><code>Right zero law</code>ï¼šf &lt;*&gt; empty <code>=</code> empty ï¼ˆå¤§éƒ¨åˆ†åŒ…æ‹¬Maybeã€[]æ»¡è¶³ï¼ŒIOä¸æ»¡è¶³ï¼‰</li>
<li><code>Left distribution</code>ï¼š(a &lt;|&gt; b) &lt;*&gt; c <code>=</code> (a &lt;*&gt; c) &lt;|&gt; (b &lt;*&gt; c) ï¼ˆMaybeã€[]æ»¡è¶³ï¼ŒIOåŠå¤§éƒ¨åˆ†parsersä¸æ»¡è¶³ï¼‰</li>
<li><code>Right distribution</code>ï¼ša &lt;*&gt; (b &lt;|&gt; c) <code>=</code> (a &lt;*&gt; b) &lt;|&gt; (a &lt;*&gt; c) ï¼ˆå¤§éƒ¨åˆ†ä¸æ»¡è¶³ï¼Œä½†Maybeæ»¡è¶³ï¼‰</li>
<li><code>Left catch</code>ï¼š(pure a) &lt;|&gt; x = pure a ï¼ˆMaybeã€IOã€parsersæ»¡è¶³ï¼Œä½†[]ä¸æ»¡è¶³ï¼‰</li>
</ul>
<h4 id="å¸¸ç”¨å‡½æ•°-3"><a href="#å¸¸ç”¨å‡½æ•°-3" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h4><ul>
<li><code>asum</code> :: (Foldable t, Alternative f) =&gt; t (f a) -&gt; f aï¼Œç›¸å½“äºfoldr (&lt;|&gt;) emptyï¼š  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; asum [<span class="type">Nothing</span>, <span class="type">Just</span> <span class="number">5</span>, <span class="type">Just</span> <span class="number">3</span>]</span><br><span class="line"><span class="type">Just</span> <span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; asum [[<span class="number">2</span>],[<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>]]</span><br><span class="line">[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br></pre></td></tr></table></figure></li>
<li><code>guard</code> :: (Alternative f) =&gt; Bool -&gt; f ()ï¼š  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">guard</span> <span class="type">True</span>  = pure ()</span><br><span class="line"><span class="title">guard</span> <span class="type">False</span> = empty </span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="MonadPlus"><a href="#MonadPlus" class="headerlink" title="MonadPlus"></a>MonadPlus</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> (<span class="type">Alternative</span> <span class="title">m</span>, <span class="type">Monad</span> <span class="title">m</span>) =&gt; <span class="type">MonadPlus</span> m <span class="keyword">where</span></span></span><br><span class="line">   mzero :: m a</span><br><span class="line">   mzero = empty</span><br><span class="line"></span><br><span class="line">   mplus :: m a -&gt; m a -&gt; m a</span><br><span class="line">   mplus = (&lt;|&gt;)</span><br></pre></td></tr></table></figure>

<h4 id="MonadPluså®ä¾‹"><a href="#MonadPluså®ä¾‹" class="headerlink" title="MonadPluså®ä¾‹"></a>MonadPluså®ä¾‹</h4><p>[]ã€Maybeéƒ½æ˜¯MonadPlusçš„å®ä¾‹ï¼Œmzeroå’Œmpluséƒ½ç”±Alternativeå®ç°</p>
<h4 id="MonadPlus-Laws"><a href="#MonadPlus-Laws" class="headerlink" title="MonadPlus Laws"></a>MonadPlus Laws</h4><ul>
<li><code>Monoid laws</code></li>
<li><code>Left zero</code>ï¼šmzero &gt;&gt;= f <code>=</code> mzero</li>
<li><code>Right zero</code>ï¼šm &gt;&gt; mzero <code>=</code> mzero </li>
</ul>
<h4 id="å¸¸ç”¨å‡½æ•°-4"><a href="#å¸¸ç”¨å‡½æ•°-4" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h4><ul>
<li><code>msum</code> = asum </li>
<li><code>mfilter</code>ï¼š  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">mfilter</span> p ma = <span class="keyword">do</span></span><br><span class="line">    a &lt;- ma</span><br><span class="line">    <span class="keyword">if</span> p a <span class="keyword">then</span> return a <span class="keyword">else</span> mzero</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="ArrowPlus"><a href="#ArrowPlus" class="headerlink" title="ArrowPlus"></a>ArrowPlus</h3><p>ArrowZeroå’ŒArrowPlusåˆ†åˆ«ä¸ºArrowè®¾ç½®äº†Monoidä¸­çš„å•ä½å…ƒç´ å’ŒäºŒå…ƒè¿ç®—ç¬¦ï¼Œä½¿ä¹‹æˆä¸ºäº†ä¸€ä¸ªå¹ºåŠç¾¤ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Arrow</span> arr =&gt; <span class="type">ArrowZero</span> arr <span class="keyword">where</span></span></span><br><span class="line">    zeroArrow :: b `arr` c</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">ArrowZero</span> arr =&gt; <span class="type">ArrowPlus</span> arr <span class="keyword">where</span></span></span><br><span class="line">    (&lt;+&gt;) :: (b `arr` c) -&gt; (b `arr` c) -&gt; (b `arr` c)</span><br></pre></td></tr></table></figure>

<h2 id="ä¸€äº›å…¶å®ƒtypeclasses"><a href="#ä¸€äº›å…¶å®ƒtypeclasses" class="headerlink" title="ä¸€äº›å…¶å®ƒtypeclasses"></a>ä¸€äº›å…¶å®ƒtypeclasses</h2><h3 id="Foldable"><a href="#Foldable" class="headerlink" title="Foldable"></a>Foldable</h3><p>Foldableæ˜¯è¡¨ç¤ºå¯ä»¥æŠ˜å ï¼ˆfoldï¼‰çš„ç±»å‹ç±»ï¼Œåœ¨<code>Data.Foldable</code>ä¸­å®šä¹‰ï¼Œè¿™ä½¿å¾—å’Œfoldç›¸å…³çš„å‡½æ•°å¯ä»¥ç”¨åœ¨ä»»æ„Foldableçš„å®ä¾‹ç±»å‹ä¸Šã€‚å®ƒçš„å®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Foldable</span> t <span class="keyword">where</span></span></span><br><span class="line">    fold     :: <span class="type">Monoid</span> m =&gt; t m -&gt; m</span><br><span class="line">    foldMap  :: <span class="type">Monoid</span> m =&gt; (a -&gt; m) -&gt; t a -&gt; m</span><br><span class="line">    foldMap&#x27; :: <span class="type">Monoid</span> m =&gt; (a -&gt; m) -&gt; t a -&gt; m</span><br><span class="line">    foldr    :: (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b</span><br><span class="line">    foldr&#x27;   :: (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b</span><br><span class="line">    foldl    :: (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b</span><br><span class="line">    foldl&#x27;   :: (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b</span><br><span class="line">    foldr1   :: (a -&gt; a -&gt; a) -&gt; t a -&gt; a</span><br><span class="line">    foldl1   :: (a -&gt; a -&gt; a) -&gt; t a -&gt; a</span><br><span class="line">    toList   :: t a -&gt; [a]</span><br><span class="line">    null     :: t a -&gt; <span class="type">Bool</span></span><br><span class="line">    length   :: t a -&gt; <span class="type">Int</span></span><br><span class="line">    elem     :: <span class="type">Eq</span> a =&gt; a -&gt; t a -&gt; <span class="type">Bool</span></span><br><span class="line">    maximum  :: <span class="type">Ord</span> a =&gt; t a -&gt; a</span><br><span class="line">    minimum  :: <span class="type">Ord</span> a =&gt; t a -&gt; a</span><br><span class="line">    sum      :: <span class="type">Num</span> a =&gt; t a -&gt; a</span><br><span class="line">    product  :: <span class="type">Num</span> a =&gt; t a -&gt; a</span><br><span class="line">    <span class="meta">&#123;-# MINIMAL foldMap | foldr #-&#125;</span></span><br></pre></td></tr></table></figure>
<p>æœ€å°‘åªè¦å®ç°<code>foldr</code>å’Œ<code>foldMap</code>å…¶ä¸­ä¹‹ä¸€å°±å¯ä»¥ä½¿ä¸€ä¸ªç±»å‹æˆä¸ºFoldableçš„å®ä¾‹ï¼Œå…¶å®ƒçš„å‡½æ•°éƒ½æœ‰ç”±è¿™ä¸¤ä¸ªå‡½æ•°æä¾›çš„é»˜è®¤å®ç°ï¼Œè€Œä¸”è¿™ä¸¤ä¸ªå‡½æ•°ä¹‹é—´ä¹Ÿæœ‰ç›¸äº’å®ç°ã€‚å› æ­¤åªè¦å®ç°foldræˆ–foldMapä¸€ä¸ªå‡½æ•°å°±å¯ä»¥ä½¿ç”¨æ‰€æœ‰å…¶å®ƒFoldableä¸­çš„å‡½æ•°ã€‚foldrå‡½æ•°åœ¨å‰é¢å·²ç»æœ‰å­¦è¿‡ï¼ŒfoldMapçš„ä¾‹å­æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; foldMap <span class="type">Sum</span> [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line"><span class="type">Sum</span> &#123;getSum = <span class="number">9</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; foldMap <span class="type">Product</span> [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line"><span class="type">Product</span> &#123;getProduct = <span class="number">15</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; foldMap (replicate <span class="number">3</span>) [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<h4 id="Foldableå®ä¾‹"><a href="#Foldableå®ä¾‹" class="headerlink" title="Foldableå®ä¾‹"></a>Foldableå®ä¾‹</h4><p>[]ã€Maybeã€Either aã€(,) aéƒ½æ˜¯Foldableçš„å®ä¾‹ï¼Œæ ‡å‡†å®¹å™¨åº“ä¸­çš„Mapã€Setç­‰ä¹Ÿéƒ½æ˜¯Foldableçš„å®ä¾‹ã€‚ä¹Ÿå¯ä»¥è‡ªå®šä¹‰äºŒå‰æ ‘ç±»å‹ï¼Œå¹¶ä½¿å…¶æˆä¸ºFoldableçš„å®ä¾‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Tree</span> a = <span class="type">Empty</span> | <span class="type">Leaf</span> a | <span class="type">Node</span> (<span class="type">Tree</span> <span class="title">a</span>) a (<span class="type">Tree</span> <span class="title">a</span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Foldable</span> <span class="type">Tree</span> <span class="keyword">where</span></span> </span><br><span class="line">    foldMap :: <span class="type">Monoid</span> m =&gt; (a -&gt; m) -&gt; <span class="type">Tree</span> a -&gt; m</span><br><span class="line">    foldMap f <span class="type">Empty</span>        = mempty</span><br><span class="line">    foldMap f (<span class="type">Leaf</span> x)     = f x</span><br><span class="line">    foldMap f (<span class="type">Node</span> l k r) = foldMap f l `mappend` f k `mappend` foldMap f r</span><br></pre></td></tr></table></figure>

<h4 id="å¸¸ç”¨å‡½æ•°-5"><a href="#å¸¸ç”¨å‡½æ•°-5" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h4><ul>
<li><code>asum</code> :: (Alternative f, Foldable t) =&gt; t (f a) -&gt; f aï¼Œç”¨&lt;|&gt;é€ä¸ªè¿æ¥æ‰€æœ‰å…ƒç´ </li>
<li><code>sequenceA_</code> :: (Applicative f, Foldable t) =&gt; t (f a) -&gt; f ()ï¼Œç”±äºä¸¢å¼ƒç»“æœï¼Œæ‰€ä»¥Foldable tå°±å¯ä»¥æ»¡è¶³ï¼›å› æ­¤ä¸åŒäºsequenceAéœ€è¦Traversable</li>
<li><code>traverse_</code> :: (Applicative f, Foldable t) =&gt; (a -&gt; f b) -&gt; t a -&gt; f ()</li>
<li><code>for_</code> :: (Applicative f, Foldable t) =&gt; t a -&gt; (a -&gt; f b) -&gt; f ()</li>
</ul>
<h3 id="Traversable"><a href="#Traversable" class="headerlink" title="Traversable"></a>Traversable</h3><p>Traversableæ˜¯è¡¨ç¤ºå¯éå†çš„ç±»å‹ç±»ï¼Œåœ¨<code>Data.Traversable</code>æ¨¡å—ä¸­å®šä¹‰ï¼Œå®ƒæ˜¯Foldableçš„å‡çº§ç‰ˆï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªFunctorï¼Œå®ƒçš„å®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> (<span class="type">Functor</span> <span class="title">t</span>, <span class="type">Foldable</span> <span class="title">t</span>) =&gt; <span class="type">Traversable</span> t <span class="keyword">where</span></span> </span><br><span class="line">    traverse  :: <span class="type">Applicative</span> f =&gt; (a -&gt; f b) -&gt; t a -&gt; f (t b)</span><br><span class="line">    sequenceA :: <span class="type">Applicative</span> f =&gt; t (f a) -&gt; f (t a)</span><br><span class="line">    mapM      ::       <span class="type">Monad</span> m =&gt; (a -&gt; m b) -&gt; t a -&gt; m (t b)</span><br><span class="line">    sequence  ::       <span class="type">Monad</span> m =&gt; t (m a) -&gt; m (t a)</span><br><span class="line">    <span class="meta">&#123;-# MINIMAL traverse | sequenceA #-&#125;</span></span><br></pre></td></tr></table></figure>
<p>æœ€å°‘åªéœ€è¦å®ç°traverseå‡½æ•°æˆ–è€…sequenceAå‡½æ•°ã€‚å…¶ä¸­å„ä¸ªå‡½æ•°çš„åŠŸèƒ½é€šè¿‡ç±»å‹ç­¾åä¹Ÿéƒ½èƒ½æ¨æµ‹å‡ºæ¥ã€‚ä½†æ˜¯å…¶ä¸­mapMå°±æ˜¯traverseï¼Œsequenceå°±æ˜¯sequenceAï¼Œå®ƒä»¬å­˜åœ¨åªæ˜¯å†å²é—ç•™ï¼ˆ</p>
<h4 id="Traversableå®ä¾‹"><a href="#Traversableå®ä¾‹" class="headerlink" title="Traversableå®ä¾‹"></a>Traversableå®ä¾‹</h4><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Traversable</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    traverse _ <span class="type">Nothing</span> = pure <span class="type">Nothing</span></span><br><span class="line">    traverse f (<span class="type">Just</span> x) = <span class="type">Just</span> &lt;$&gt; f x</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Traversable</span> [] <span class="keyword">where</span></span></span><br><span class="line">    <span class="meta">&#123;-# INLINE traverse #-&#125;</span></span><br><span class="line">    traverse f = foldr cons_f (pure [])</span><br><span class="line">      <span class="keyword">where</span> cons_f x ys = liftA2 (:) (f x) ys</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Traversable</span> (<span class="type">Either</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    traverse _ (<span class="type">Left</span> x) = pure (<span class="type">Left</span> x)</span><br><span class="line">    traverse f (<span class="type">Right</span> y) = <span class="type">Right</span> &lt;$&gt; f y</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Traversable</span> ((,) a) <span class="keyword">where</span></span></span><br><span class="line">    traverse f (x, y) = (,) x &lt;$&gt; f y</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„Treeä¹Ÿå¯ä»¥æˆä¸ºTraversableçš„å®ä¾‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> <span class="type">Tree</span> <span class="keyword">where</span></span></span><br><span class="line">    fmap :: (a -&gt; b) -&gt; <span class="type">Tree</span> a -&gt; <span class="type">Tree</span> b</span><br><span class="line">    fmap     g <span class="type">Empty</span>        = <span class="type">Empty</span></span><br><span class="line">    fmap     g (<span class="type">Leaf</span> x)     = <span class="type">Leaf</span> $ g x</span><br><span class="line">    fmap     g (<span class="type">Node</span> l x r) = <span class="type">Node</span> (fmap g l)</span><br><span class="line">                                   (g x)</span><br><span class="line">                                   (fmap g r)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Traversable</span> <span class="type">Tree</span> <span class="keyword">where</span></span></span><br><span class="line">    traverse :: <span class="type">Applicative</span> f =&gt; (a -&gt; f b) -&gt; <span class="type">Tree</span> a -&gt; f (<span class="type">Tree</span> b) </span><br><span class="line">    traverse g <span class="type">Empty</span>        = pure <span class="type">Empty</span></span><br><span class="line">    traverse g (<span class="type">Leaf</span> x)     = <span class="type">Leaf</span> &lt;$&gt; g x</span><br><span class="line">    traverse g (<span class="type">Node</span> l x r) = <span class="type">Node</span> &lt;$&gt; traverse g l</span><br><span class="line">                                   &lt;*&gt; g x</span><br><span class="line">                                   &lt;*&gt; traverse g r</span><br></pre></td></tr></table></figure>

<h4 id="Traversable-Laws"><a href="#Traversable-Laws" class="headerlink" title="Traversable Laws"></a>Traversable Laws</h4><p>Traversableä¹Ÿæœ‰ä¸¤æ¡å®šå¾‹ï¼š</p>
<ol>
<li>traverse Identity <code>=</code> Identity</li>
<li>traverse (Compose . fmap g . f) <code>=</code> Compose . fmap (traverse g) . traverse f </li>
</ol>
<p>å…¶ä¸­Identityå’ŒComposeåˆ†åˆ«å®šä¹‰åœ¨<code>Data.Functor.Identity</code>å’Œ<code>Data.Functor.Compose</code>ä¸¤ä¸ªæ¨¡å—ä¸­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Identity</span> a = <span class="type">Identity</span> &#123; <span class="title">runIdentity</span> :: <span class="title">a</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Compose</span> f g a = <span class="type">Compose</span> &#123; <span class="title">getCompose</span> :: <span class="title">f</span> (<span class="title">g</span> <span class="title">a</span>) &#125; <span class="keyword">deriving</span> (...)</span></span><br></pre></td></tr></table></figure>

<h3 id="Bifunctor"><a href="#Bifunctor" class="headerlink" title="Bifunctor"></a>Bifunctor</h3><p>Functorçš„å®ä¾‹çš„kindéƒ½æ˜¯* -&gt; *ï¼Œå› æ­¤fmapåªèƒ½å°†ä¸€ä¸ªå‡½æ•°æ˜ å°„åˆ°ä¸€ä¸ªå€¼ä¸Šã€‚è€ŒBifunctorï¼ˆåœ¨<code>Data.Bifunctor</code>æ¨¡å—ä¸­å®šä¹‰ï¼‰çš„å®ä¾‹çš„kindæ˜¯* -&gt; * -&gt; *ï¼Œè€Œä¸”å®ƒçš„bimapå¯ä»¥åŒæ—¶å°†ä¸¤ä¸ªå‡½æ•°æ˜ å°„åˆ°ä¸¤ä¸ªå€¼ä¸Šï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Bifunctor</span> p <span class="keyword">where</span></span> </span><br><span class="line">    bimap  :: (a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d </span><br><span class="line">    first  :: (a -&gt; b) -&gt; p a c -&gt; p b c </span><br><span class="line">    second :: (b -&gt; c) -&gt; p a b -&gt; p a c </span><br><span class="line">    <span class="meta">&#123;-# MINIMAL bimap | first, second #-&#125;</span></span><br></pre></td></tr></table></figure>
<p>åŒæ—¶bimapå’Œfirst,secondä¹‹é—´ä¹Ÿå¯ä»¥ç›¸äº’è½¬æ¢ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">bimap</span> f g = first f . second g</span><br><span class="line"></span><br><span class="line"><span class="title">first</span>  f = bimap f id</span><br><span class="line"><span class="title">second</span> g = bimap id g</span><br></pre></td></tr></table></figure>
<p>å¯¹äºFunctorï¼Œ((,) e)å’ŒEither eæ‰æ˜¯Functorçš„å®ä¾‹ï¼Œå› ä¸ºä»–ä»¬æ˜¯* -&gt; *ã€‚ä½†æ˜¯å¯¹äºBifunctorï¼Œ(,)å’ŒEitherå°±æ˜¯Bifunctorçš„å®ä¾‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; bimap (+<span class="number">1</span>) length (<span class="number">4</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">(<span class="number">5</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<h4 id="Bifunctor-Laws"><a href="#Bifunctor-Laws" class="headerlink" title="Bifunctor Laws"></a>Bifunctor Laws</h4><ol>
<li>bimap id id <code>=</code> id<br> first id <code>=</code> id<br> second id <code>=</code> id</li>
<li>bimap (f . g) (h . i) <code>=</code> bimap f h . bimap g i<br> first  (f . g) <code>=</code> first f  . first g<br> second (f . g) <code>=</code> second f . second g</li>
</ol>
<h3 id="Category"><a href="#Category" class="headerlink" title="Category"></a>Category</h3><p>Haskellä¸­çš„Categoryå°†ä¸€èˆ¬çš„å‡½æ•°æ¨å¹¿åˆ°äº†æ™®éçš„æ€å°„ä¸Šï¼Œå®ƒåœ¨<code>Control.Category</code>æ¨¡å—ä¸­ï¼Œå®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Category</span> cat <span class="keyword">where</span></span> </span><br><span class="line">    id  :: cat a a </span><br><span class="line">    (.) :: cat b c -&gt; cat a b -&gt; cat a c</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„å®ä¾‹æœ‰<code>(-&gt;)</code>å’Œ<code>Kleisli m</code>ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Category</span> (-&gt;) <span class="keyword">where</span></span></span><br><span class="line">    id = <span class="type">GHC</span>.<span class="type">Base</span>.id</span><br><span class="line">    (.) = (<span class="type">GHC</span>.<span class="type">Base</span>..)</span><br></pre></td></tr></table></figure>
<p>Kleisliæ˜¯ä¸€ä¸ªèŒƒç•´ï¼Œç”¨æ¥è¡¨ç¤ºå‡½æ•°a -&gt; m bï¼ŒHaskellä¸­ï¼Œå®ƒåœ¨<code>Control.Arrow</code>æ¨¡å—ä¸­å®šä¹‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Kleisli</span> m a b = <span class="type">Kleisli</span> &#123; <span class="title">runKleisli</span> :: <span class="title">a</span> -&gt; <span class="title">m</span> <span class="title">b</span> &#125;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> m =&gt; <span class="type">Category</span> (<span class="type">Kleisli</span> <span class="title">m</span>) <span class="keyword">where</span></span></span><br><span class="line">    id :: <span class="type">Kleisli</span> m a a</span><br><span class="line">    id = <span class="type">Kleisli</span> return</span><br><span class="line"></span><br><span class="line">    (.) :: <span class="type">Kleisli</span> m b c -&gt; <span class="type">Kleisli</span> m a b -&gt; <span class="type">Kleisli</span> m a c</span><br><span class="line">    <span class="type">Kleisli</span> g . <span class="type">Kleisli</span> h = <span class="type">Kleisli</span> (h &gt;=&gt; g)</span><br></pre></td></tr></table></figure>
<p>Categoryè¦æ»¡è¶³çš„å®šå¾‹åªæœ‰idæ˜¯(.)æ“ä½œçš„å•ä½å…ƒï¼Œä»¥åŠ(.)æ“ä½œæ˜¯å¯ç»“åˆçš„</p>
<p>åŒæ—¶Categoryè¿˜æä¾›äº†ä¸¤ä¸ªå‡½æ•°<code>&lt;&lt;&lt;</code>å’Œ<code>&gt;&gt;&gt;</code>ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">(&lt;&lt;&lt;) :: <span class="type">Category</span> cat =&gt; cat b c -&gt; cat a b -&gt; cat a c</span><br><span class="line">(&lt;&lt;&lt;) = (.)</span><br><span class="line"></span><br><span class="line">(&gt;&gt;&gt;) :: <span class="type">Category</span> cat =&gt; cat a b -&gt; cat b c -&gt; cat a c </span><br><span class="line"><span class="title">f</span> &gt;&gt;&gt; g = g . f </span><br></pre></td></tr></table></figure>

<h3 id="Arrow"><a href="#Arrow" class="headerlink" title="Arrow"></a>Arrow</h3><p>Arrowå°†å‡½æ•°è¿›ä¸€æ­¥æŠ½è±¡åŒ–ï¼Œå®ƒå®šä¹‰åœ¨<code>Control.Arrow</code>æ¨¡å—ä¸­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Category</span> a =&gt; <span class="type">Arrow</span> a <span class="keyword">where</span></span> </span><br><span class="line">    arr    :: (b -&gt; c) -&gt; a b c </span><br><span class="line">    first  :: a b c -&gt; a (b, d) (c, d)</span><br><span class="line">    second :: a b c -&gt; a (d, b) (d, c)</span><br><span class="line">    (***)  :: a b c -&gt; a b&#x27; c&#x27; -&gt; a (b, b&#x27;) (c, c&#x27;)</span><br><span class="line">    (&amp;&amp;&amp;)  :: a b c -&gt; a b c&#x27; -&gt; a b (c, c&#x27;)</span><br><span class="line">    <span class="meta">&#123;-# MINIMAL arr, (first | (***)) #-&#125;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><code>arr</code>å‡½æ•°å°†ä¸€ä¸ªå‡½æ•°å˜æˆä¸€ä¸ªArrow</li>
<li><code>first</code>å‡½æ•°å°†ä¸€ä¸ªArrowå˜æˆä¸€ä¸ªäºŒå…ƒç»„é—´çš„Arrowï¼Œä¸”åªä¼šå¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¿æŒä¸å˜</li>
<li><code>second</code>å‡½æ•°ä¸firstç›¸åï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¿æŒä¸å˜</li>
<li><code>***</code>å‡½æ•°æ˜¯Arrowä¹‹é—´çš„parallel compositionï¼Œå¯¹äºå‡½æ•°: (g *** h) (x, y) = (g x, h y)</li>
<li><code>&amp;&amp;&amp;</code>å‡½æ•°æ˜¯Arrowä¹‹é—´çš„fanout compositionï¼Œå¯¹äºå‡½æ•°: (g &amp;&amp;&amp; h) x = (g x, h x)</li>
</ul>
<p>å®ƒçš„å®ä¾‹ä¹Ÿæœ‰(-&gt;)å’ŒKleisliï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Arrow</span> (-&gt;) <span class="keyword">where</span></span></span><br><span class="line">  arr :: (b -&gt; c) -&gt; (b -&gt; c)</span><br><span class="line">  arr g = g</span><br><span class="line"></span><br><span class="line">  first :: (b -&gt; c) -&gt; ((b,d) -&gt; (c,d))</span><br><span class="line">  first g (x,y) = (g x, y)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> m =&gt; <span class="type">Arrow</span> (<span class="type">Kleisli</span> <span class="title">m</span>) <span class="keyword">where</span></span></span><br><span class="line">  arr :: (b -&gt; c) -&gt; <span class="type">Kleisli</span> m b c</span><br><span class="line">  arr f = <span class="type">Kleisli</span> (return . f)</span><br><span class="line"></span><br><span class="line">  first :: <span class="type">Kleisli</span> m b c -&gt; <span class="type">Kleisli</span> m (b,d) (c,d)</span><br><span class="line">  first (<span class="type">Kleisli</span> f) = <span class="type">Kleisli</span> (\ ~(b,d) -&gt; <span class="keyword">do</span> c &lt;- f b</span><br><span class="line">                                              return (c,d) )</span><br></pre></td></tr></table></figure>
<p>å¸¸ç”¨å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">returnA</span> :: <span class="type">Arrow</span> a =&gt; a b b</span><br><span class="line"><span class="title">returnA</span> = arr id</span><br><span class="line"></span><br><span class="line">(^&gt;&gt;) :: <span class="type">Arrow</span> a =&gt; (b -&gt; c) -&gt; a c d -&gt; a b d</span><br><span class="line"><span class="title">f</span> ^&gt;&gt; a = arr f &gt;&gt;&gt; a</span><br><span class="line"></span><br><span class="line">(&gt;&gt;^) :: <span class="type">Arrow</span> a =&gt; a b c -&gt; (c -&gt; d) -&gt; a b d</span><br><span class="line"><span class="title">a</span> &gt;&gt;^ f = a &gt;&gt;&gt; arr f</span><br><span class="line"></span><br><span class="line">(&lt;&lt;^) :: <span class="type">Arrow</span> a =&gt; a c d -&gt; (b -&gt; c) -&gt; a b d</span><br><span class="line"><span class="title">a</span> &lt;&lt;^ f = a &lt;&lt;&lt; arr f</span><br><span class="line"></span><br><span class="line">(^&lt;&lt;) :: <span class="type">Arrow</span> a =&gt; (c -&gt; d) -&gt; a b c -&gt; a b d</span><br><span class="line"><span class="title">f</span> ^&lt;&lt; a = arr f &lt;&lt;&lt; a</span><br></pre></td></tr></table></figure>

<h4 id="Arrow-notation"><a href="#Arrow-notation" class="headerlink" title="Arrow notation"></a>Arrow notation</h4><p>ç±»ä¼¼do-notationï¼ŒArrowä¹Ÿæä¾›äº†ä¸€å¥—æ–¹ä¾¿çš„è¯­å¥ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">proc</span> x -&gt; <span class="keyword">do</span> </span><br><span class="line">    y &lt;- action1 -&lt; ... </span><br><span class="line">    z &lt;- action2 -&lt; ...</span><br><span class="line">    returnA -&lt; ...</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­procä»£æ›¿äº†lambdaè¡¨è¾¾å¼ä¸­çš„æ–œæ \ï¼Œ-&lt;å³è¾¹çš„ä¸ºè¾“å…¥ï¼Œå·¦è¾¹çš„ä¸ºæ¥æ”¶è¾“å…¥çš„å‡½æ•°ã€‚æ¯”å¦‚ï¼Œä¸‹é¢ä¸‰ç§å†™æ³•è¾¾æˆçš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">f</span> :: <span class="type">Int</span> -&gt; (<span class="type">Int</span>, <span class="type">Int</span>)</span><br><span class="line"><span class="title">f</span> = \x -&gt;</span><br><span class="line">    <span class="keyword">let</span> y  = <span class="number">2</span> * x</span><br><span class="line">        z1 = y + <span class="number">3</span></span><br><span class="line">        z2 = y - <span class="number">5</span></span><br><span class="line">    <span class="keyword">in</span> (z1, z2) </span><br><span class="line"><span class="comment">-- ghci&gt; f 10 </span></span><br><span class="line"><span class="comment">-- (23,15)</span></span><br><span class="line"></span><br><span class="line"><span class="title">fM</span> :: <span class="type">Int</span> -&gt; <span class="type">Identity</span> (<span class="type">Int</span>, <span class="type">Int</span>)</span><br><span class="line"><span class="title">fM</span> = \x -&gt; <span class="keyword">do</span></span><br><span class="line">    y  &lt;- return (<span class="number">2</span> * x)</span><br><span class="line">    z1 &lt;- return (y + <span class="number">3</span>)</span><br><span class="line">    z2 &lt;- return (y - <span class="number">5</span>)</span><br><span class="line">    return (z1, z2)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ghci&gt; runIdentity (fM 10)</span></span><br><span class="line"><span class="comment">-- (23,15)</span></span><br><span class="line"></span><br><span class="line"><span class="title">fA</span> :: <span class="type">Int</span> -&gt; (<span class="type">Int</span>, <span class="type">Int</span>)</span><br><span class="line"><span class="title">fA</span> = <span class="keyword">proc</span> x -&gt; <span class="keyword">do</span></span><br><span class="line">    y  &lt;- (<span class="number">2</span> *) -&lt; x</span><br><span class="line">    z1 &lt;- (+ <span class="number">3</span>) -&lt; y</span><br><span class="line">    z2 &lt;- (subtract <span class="number">5</span>) -&lt; y</span><br><span class="line">    returnA -&lt; (z1, z2)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ghci&gt; fA 10</span></span><br><span class="line"><span class="comment">-- (23,15)</span></span><br></pre></td></tr></table></figure>

<h4 id="ArrowChoice"><a href="#ArrowChoice" class="headerlink" title="ArrowChoice"></a>ArrowChoice</h4><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Arrow</span> a =&gt; <span class="type">ArrowChoice</span> a <span class="keyword">where</span></span></span><br><span class="line">    left :: a b c -&gt; a (<span class="type">Either</span> b d) (<span class="type">Either</span> c d)</span><br><span class="line">    left = (+++ id)</span><br><span class="line"></span><br><span class="line">    right :: a b c -&gt; a (<span class="type">Either</span> d b) (<span class="type">Either</span> d c)</span><br><span class="line">    right = (id +++)</span><br><span class="line"></span><br><span class="line">    (+++) :: a b c -&gt; a b&#x27; c&#x27; -&gt; a (<span class="type">Either</span> b b&#x27;) (<span class="type">Either</span> c c&#x27;)</span><br><span class="line">    f +++ g = left f &gt;&gt;&gt; arr mirror &gt;&gt;&gt; left g &gt;&gt;&gt; arr mirror</span><br><span class="line">      <span class="keyword">where</span></span><br><span class="line">        mirror :: <span class="type">Either</span> x y -&gt; <span class="type">Either</span> y x</span><br><span class="line">        mirror (<span class="type">Left</span> x) = <span class="type">Right</span> x</span><br><span class="line">        mirror (<span class="type">Right</span> y) = <span class="type">Left</span> y</span><br><span class="line"></span><br><span class="line">    (|||) :: a b d -&gt; a c d -&gt; a (<span class="type">Either</span> b c) d</span><br><span class="line">    f ||| g = f +++ g &gt;&gt;&gt; arr untag</span><br><span class="line">      <span class="keyword">where</span></span><br><span class="line">        untag (<span class="type">Left</span> x) = x</span><br><span class="line">        untag (<span class="type">Right</span> y) = y</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">ArrowChoice</span> (-&gt;) <span class="keyword">where</span></span></span><br><span class="line">    left f = f +++ id</span><br><span class="line">    right f = id +++ f</span><br><span class="line">    f +++ g = (<span class="type">Left</span> . f) ||| (<span class="type">Right</span> . g)</span><br><span class="line">    (|||) = either</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> m =&gt; <span class="type">ArrowChoice</span> (<span class="type">Kleisli</span> <span class="title">m</span>) <span class="keyword">where</span></span></span><br><span class="line">    left f = f +++ arr id</span><br><span class="line">    right f = arr id +++ f</span><br><span class="line">    f +++ g = (f &gt;&gt;&gt; arr <span class="type">Left</span>) ||| (g &gt;&gt;&gt; arr <span class="type">Right</span>)</span><br><span class="line">    <span class="type">Kleisli</span> f ||| <span class="type">Kleisli</span> g = <span class="type">Kleisli</span> (either f g)</span><br></pre></td></tr></table></figure>

<h4 id="ArrowZero-amp-ArrowPlus"><a href="#ArrowZero-amp-ArrowPlus" class="headerlink" title="ArrowZero &amp; ArrowPlus"></a>ArrowZero &amp; ArrowPlus</h4><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Arrow</span> a =&gt; <span class="type">ArrowZero</span> a <span class="keyword">where</span></span></span><br><span class="line">    zeroArrow :: a b c</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">ArrowZero</span> a =&gt; <span class="type">ArrowPlus</span> a <span class="keyword">where</span></span></span><br><span class="line">    (&lt;+&gt;) :: a b c -&gt; a b c -&gt; a b c</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">MonadPlus</span> m =&gt; <span class="type">ArrowZero</span> (<span class="type">Kleisli</span> <span class="title">m</span>) <span class="keyword">where</span></span></span><br><span class="line">    zeroArrow = <span class="type">Kleisli</span> (\_ -&gt; mzero)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">MonadPlus</span> m =&gt; <span class="type">ArrowPlus</span> (<span class="type">Kleisli</span> <span class="title">m</span>) <span class="keyword">where</span></span></span><br><span class="line">    <span class="type">Kleisli</span> f &lt;+&gt; <span class="type">Kleisli</span> g = <span class="type">Kleisli</span> (\x -&gt; f x `mplus` g x)</span><br></pre></td></tr></table></figure>

<h4 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; runKleisli ((<span class="type">Kleisli</span> (\x -&gt; [x * <span class="number">2</span>])) &lt;+&gt; (<span class="type">Kleisli</span> (\x -&gt; [x, -x]))) <span class="number">2</span></span><br><span class="line">[<span class="number">4</span>,<span class="number">2</span>,<span class="number">-2</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; either (+<span class="number">2</span>) (*<span class="number">3</span>) (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; either (+<span class="number">2</span>) (*<span class="number">3</span>) (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">2</span>) ||| (*<span class="number">3</span>) $ (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">2</span>) +++ (*<span class="number">3</span>) $ (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Left</span> <span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">2</span>) ||| (*<span class="number">3</span>) $ (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">2</span>) +++ (*<span class="number">3</span>) $ (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Right</span> <span class="number">9</span></span><br><span class="line"><span class="title">ghci</span>&gt; left (+<span class="number">2</span>) (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Left</span> <span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; right (*<span class="number">3</span>) (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Right</span> <span class="number">9</span></span><br><span class="line"><span class="title">ghci</span>&gt; left (+<span class="number">2</span>) (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Right</span> <span class="number">3</span></span><br><span class="line"><span class="title">ghci</span>&gt; right (*<span class="number">3</span>) (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Left</span> <span class="number">3</span></span><br><span class="line"><span class="title">ghci</span>&gt; runKleisli ((<span class="type">Kleisli</span> (\x -&gt; [x * <span class="number">2</span>])) ||| (<span class="type">Kleisli</span> (\x -&gt; [x, -x]))) (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line">[<span class="number">6</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; runKleisli ((<span class="type">Kleisli</span> (\x -&gt; [x * <span class="number">2</span>])) ||| (<span class="type">Kleisli</span> (\x -&gt; [x, -x]))) (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line">[<span class="number">3</span>,<span class="number">-3</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; runKleisli ((<span class="type">Kleisli</span> (\x -&gt; [x * <span class="number">2</span>])) +++ (<span class="type">Kleisli</span> (\x -&gt; [x, -x]))) (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line">[<span class="type">Left</span> <span class="number">6</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; runKleisli ((<span class="type">Kleisli</span> (\x -&gt; [x * <span class="number">2</span>])) +++ (<span class="type">Kleisli</span> (\x -&gt; [x, -x]))) (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line">[<span class="type">Right</span> <span class="number">3</span>,<span class="type">Right</span> (<span class="number">-3</span>)]</span><br></pre></td></tr></table></figure>


<h2 id="Haskellä¸èŒƒç•´è®º"><a href="#Haskellä¸èŒƒç•´è®º" class="headerlink" title="Haskellä¸èŒƒç•´è®º"></a>Haskellä¸èŒƒç•´è®º</h2><p>Haskellä¸­çš„å‡½å­å•å­ç­‰éƒ½ä¸èŒƒç•´è®ºï¼ˆcategory theoryï¼‰æœ‰å¾ˆå¤šè”ç³»ï¼Œæ‰€ä»¥æ‰“ç®—ç®€å•äº†è§£ä¸€ä¸‹èŒƒç•´è®ºçš„ç›¸å…³å†…å®¹ã€‚</p>
<blockquote>
<p><strong>èŒƒç•´è®º</strong>æ˜¯æ•°å­¦çš„ä¸€é—¨å­¦ç§‘ï¼Œä»¥æŠ½è±¡çš„æ–¹æ³•å¤„ç†æ•°å­¦æ¦‚å¿µï¼Œå°†è¿™äº›æ¦‚å¿µå½¢å¼åŒ–æˆä¸€ç»„ç»„çš„â€œç‰©ä»¶â€åŠâ€œæ€å°„â€ã€‚æ•°å­¦ä¸­è®¸å¤šé‡è¦çš„é¢†åŸŸå¯ä»¥å½¢å¼åŒ–ä¸ºèŒƒç•´ã€‚ä½¿ç”¨èŒƒç•´è®ºå¯ä»¥ä»¤è¿™äº›é¢†åŸŸä¸­è®¸å¤šéš¾ç†è§£ã€éš¾æ‰æ‘¸çš„æ•°å­¦ç»“è®ºæ›´å®¹æ˜“å™è¿°è¯æ˜ã€‚</p>
<div style="text-align: right">â€”â€”â€”â€” ç»´åŸºç™¾ç§‘</div>
</blockquote>
<h3 id="èŒƒç•´ï¼ˆCategoryï¼‰"><a href="#èŒƒç•´ï¼ˆCategoryï¼‰" class="headerlink" title="èŒƒç•´ï¼ˆCategoryï¼‰"></a>èŒƒç•´ï¼ˆCategoryï¼‰</h3><p>èŒƒç•´æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç®€å•çš„é›†åˆï¼Œä¸€ä¸ªèŒƒç•´$\mathbf{C}$åŒ…å«ä¸‰ä¸ªç»„æˆæˆåˆ†ï¼š</p>
<!--more-->
<ul>
<li>ä¸€ä¸ªç±»$\mathrm{ob}(\mathbf{C})$ï¼šå…¶ä¸­å…ƒç´ ç§°ä¸º<strong>å¯¹è±¡ï¼ˆobjectsï¼‰</strong></li>
<li>ä¸€ä¸ªç±»$\mathrm{hom}(\mathbf{C})$ï¼šå…¶ä¸­å…ƒç´ ç§°ä¸º<strong>æ€å°„ï¼ˆmorphismsï¼‰</strong>ï¼ˆæˆ–<strong>ç®­å·ï¼ˆarrowsï¼‰</strong>ï¼‰ï¼šæ¯ä¸ªæ€å°„è¿æ¥äº†ä¸¤ä¸ªå¯¹è±¡ï¼šæºå¯¹è±¡ï¼ˆsource objectï¼‰ã€ç›®æ ‡å¯¹è±¡ï¼ˆtarget objectï¼‰ã€‚å¦‚æœ$f$æ˜¯ä»æºå¯¹è±¡$A$åˆ°ç›®æ ‡å¯¹è±¡$B$ï¼ˆ$A, B\in \mathrm{ob}(\mathbf{C})$ï¼‰çš„æ€å°„ï¼Œé‚£ä¹ˆè®°ä¸º$f : A\to B$</li>
<li>ä¸€ä¸ªäºŒå…ƒè¿ç®—ï¼Œç§°ä¸ºæ€å°„<strong>å¤åˆï¼ˆcompositionï¼‰</strong>ï¼šä¸¤ä¸ªæ€å°„$g : A\to B$ã€$f : B\to C$çš„å¤åˆè®°ä¸º$f\circ g : A\to C$<br>åœ¨Haskellå’Œå¤§éƒ¨åˆ†æ•°å­¦ç†è®ºä¸­éƒ½æ˜¯ä»å³å‘å·¦è®¡ç®—ï¼Œå³$f\circ g$ä¸­æ˜¯å…ˆè®¡ç®—$g : A\to B$å†è®¡ç®—$f : B\to C$</li>
</ul>
<p>è®¸å¤šä¸œè¥¿éƒ½å¯ä»¥ç»„æˆèŒƒç•´ã€‚æ¯”å¦‚:</p>
<p>&emsp;$\mathbf{Set}$æ˜¯ä¸€ä¸ªèŒƒç•´ï¼Œå¯¹è±¡ä¸ºæ‰€æœ‰é›†åˆï¼Œæ€å°„ä¸ºé›†åˆä¹‹é—´çš„å‡½æ•°ï¼Œå¤åˆå³å‡½æ•°ä¹‹é—´çš„å¤åˆ</p>
<p>&emsp;$\mathbf{Grp}$æ˜¯ä¸€ä¸ªèŒƒç•´ï¼Œå¯¹è±¡ä¸ºæ‰€æœ‰ç¾¤ï¼Œæ€å°„ä¸ºç¾¤åŒæ€ï¼ˆgroup homomorphismsï¼‰ï¼Œä¾‹å¦‚å¯¹äºç¾¤$(G,*)$å’Œ$(H,\cdot )$ï¼Œæœ‰ç¾¤åŒæ€$h : (G,*)\to (H,\cdot )$ï¼Œåˆ™éœ€è¦å¯¹äº$G$ä¸­çš„ä»»æ„å…ƒç´ $u,v$æ»¡è¶³<br>$$h(u*v)=h(u)\cdot h(v)$$</p>
<p><strong>æ³¨æ„</strong>ï¼šæ€å°„ä¸å¿…é¡»ä¸ºå‡½æ•°ï¼›è€Œä¸”å¯ä»¥å­˜åœ¨æºå¯¹è±¡å’Œç›®æ ‡å¯¹è±¡éƒ½ç›¸åŒçš„ä¸åŒæ€å°„</p>
<h4 id="èŒƒç•´å…¬ç†"><a href="#èŒƒç•´å…¬ç†" class="headerlink" title="èŒƒç•´å…¬ç†"></a>èŒƒç•´å…¬ç†</h4><p>æ¯ä¸ªèŒƒç•´éƒ½éœ€è¦æ»¡è¶³ä¸‰æ¡å®šå¾‹ï¼š</p>
<ol>
<li>æ€å°„å¤åˆéœ€è¦æ»¡è¶³<strong>ç»“åˆå¾‹ï¼ˆassociativityï¼‰</strong>ï¼š<br>$$f\circ (g\circ h) = (f\circ g)\circ h$$</li>
<li>èŒƒç•´åœ¨å¤åˆæ“ä½œä¸‹æ˜¯<strong>é—­åˆçš„ï¼ˆclosedï¼‰</strong>ï¼š<br>&emsp;&emsp;&emsp;å¦‚æœèŒƒç•´$\mathbf{C}$ä¸­å­˜åœ¨æ€å°„$f : B\to C$ã€$g : A\to B$ï¼Œé‚£ä¹ˆèŒƒç•´$\mathbf{C}$ä¸­ä¹Ÿä¸€å®šå­˜åœ¨æ€å°„$h : A\to C$ï¼Œä¸”$h=f\circ g$</li>
<li>æ¯ä¸ªå¯¹è±¡éƒ½éœ€è¦æœ‰<strong>å•ä½æ€å°„ï¼ˆidentity morphismsï¼‰</strong>ï¼š<br>&emsp;&emsp;&emsp;å¯¹äºèŒƒç•´$\mathbf{C}$ä¸­çš„å¯¹è±¡$A$ï¼Œä¸€å®šå­˜åœ¨å•ä½æ€å°„$\mathrm{id}_A : A\to A$ï¼Œä¸”å¯¹äºæ¯ä¸ªæ€å°„$g : A\to B$ï¼Œä¸€å®šæœ‰ï¼š<br>$$g\circ\mathrm{id}_A = \mathrm{id}_B\circ g = g$$</li>
</ol>
<h4 id="mathbf-Hask-èŒƒç•´"><a href="#mathbf-Hask-èŒƒç•´" class="headerlink" title="$\mathbf{Hask}$èŒƒç•´"></a>$\mathbf{Hask}$èŒƒç•´</h4><p>èŒƒç•´$\mathbf{Hask}$çš„å¯¹è±¡ä¸ºHaskellä¸­çš„ç±»å‹ï¼ˆtypesï¼‰ï¼Œæ€å°„æ˜¯Haskellä¸­çš„å‡½æ•°ï¼Œå¤åˆè¿ç®—æ˜¯<code>(.)</code>ã€‚å³ä»ç±»å‹Aåˆ°ç±»å‹Bçš„å‡½æ•° f :: A -&gt; B å°±æ˜¯$\mathbf{Hask}$èŒƒç•´ä¸­çš„ä¸€ä¸ªæ€å°„ã€‚è€Œå‡½æ•° f :: B -&gt; C ã€g :: A -&gt; B çš„ç»„åˆ f . g å°±æ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•° h :: A -&gt; Cã€‚</p>
<p>å¯¹äºä¸‰æ¡å®šå¾‹ï¼š</p>
<ol>
<li>ç¬¬ä¸€æ¡æ˜¾ç„¶æ»¡è¶³ï¼šf . (g . h) = (f . g) . h</li>
<li>ç¬¬äºŒæ¡ä¹Ÿæ˜¾ç„¶æ»¡è¶³ï¼Œå¦‚æœæœ‰å‡½æ•° f :: B -&gt; C ã€g :: A -&gt; Bï¼Œä¸€å®šæœ‰å‡½æ•° h = (f . g) :: A -&gt; C </li>
<li>å¯¹äºç¬¬ä¸‰æ¡å®šå¾‹ï¼ŒHaskellä¸­å­˜åœ¨å•ä½å‡½æ•° id ï¼Œä½†idæ˜¯å¤šæ€ï¼ˆpolymorphicï¼‰çš„ï¼Œè¦ä¸ºå…¶æŒ‡å®šç±»å‹ä½¿å…¶å˜æˆå•æ€ï¼ˆmonomorphicï¼‰çš„ã€‚æ¯”å¦‚æ€å°„$\mathrm{id}_A$åœ¨Haskellä¸­å°±å¯ä»¥è¡¨ç¤ºä¸º id :: A -&gt; Aã€‚å¹¶ä¸”æ˜¾ç„¶æ»¡è¶³ç¬¬ä¸‰æ¡å®šå¾‹ï¼ˆå…¶ä¸­ f :: A -&gt; Bï¼‰ï¼š<p style="text-align: center;">(id :: B -> B) . f = f . (id :: A -> A) = f</p></li>
</ol>
<h3 id="å‡½å­ï¼ˆFunctorsï¼‰"><a href="#å‡½å­ï¼ˆFunctorsï¼‰" class="headerlink" title="å‡½å­ï¼ˆFunctorsï¼‰"></a>å‡½å­ï¼ˆFunctorsï¼‰</h3><p>ä¸€ä¸ªèŒƒç•´ä¸­çš„æ€å°„å°†ä¸¤ä¸ªå¯¹è±¡è”ç³»èµ·æ¥ï¼Œè€Œå‡½å­åˆ™ä¼šå°†ä¸¤ä¸ªèŒƒç•´è”ç³»èµ·æ¥ã€‚æ¢å¥è¯è¯´ï¼Œå‡½å­å°±æ˜¯ä»ä¸€ä¸ªèŒƒç•´åˆ°å¦ä¸€ä¸ªèŒƒç•´çš„å˜æ¢ã€‚æ¯”å¦‚å¯¹äºèŒƒç•´$\mathbf{C}$ã€$\mathbf{D}$ï¼Œå®šä¹‰å‡½å­$F : \mathbf{C}\to\mathbf{D}$æ»¡è¶³ï¼š</p>
<ul>
<li>å¯¹äº$\mathbf{C}$ä¸­çš„ä»»æ„å¯¹è±¡$A$ï¼Œåœ¨$\mathbf{D}$ä¸­éƒ½æœ‰å¯¹è±¡$F(A)$</li>
<li>å¯¹äº$\mathbf{C}$ä¸­çš„ä»»æ„æ€å°„$f : A\to B$ï¼Œåœ¨$\mathbf{D}$ä¸­éƒ½æœ‰æ€å°„$F(f) : F(A)\to F(B)$</li>
</ul>
<p>æ¯”å¦‚ï¼š</p>
<p>&emsp;é—å¿˜å‡½å­ï¼ˆforgetful functorï¼‰$U : \mathbf{Grp}\to\mathbf{Set}$ï¼Œå°†ä¸€ä¸ªç¾¤æ˜ å°„åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼Œå°†ç¾¤åŒæ€æ˜ å°„åˆ°é›†åˆé—´çš„å‡½æ•°</p>
<p>&emsp;å¹‚é›†å‡½å­ï¼ˆpower set functorï¼‰$P : \mathbf{Set}\to\mathbf{Set}$ï¼Œå°†ä¸€ä¸ªé›†åˆæ˜ å°„åˆ°å®ƒçš„å¹‚é›†ï¼Œå°†åŸé›†åˆä¸­çš„å‡½æ•°$f : A\to B$æ˜ å°„åˆ°å‡½æ•°$P(f) : \mathcal{P}(A)\to\mathcal{P}(B)$ï¼Œå³ä»$U\subseteq A$åˆ°å€¼åŸŸ$f(U)\subseteq B$çš„æ˜ å°„</p>
<p>&emsp;è‡ªå‡½å­ï¼ˆendofunctorï¼‰$1_{\mathbf{C}} : \mathbf{C}\to\mathbf{C}$ï¼Œå°†ä¸€ä¸ªèŒƒç•´æ˜ å°„åˆ°å®ƒæœ¬èº«</p>
<h4 id="å‡½å­å…¬ç†"><a href="#å‡½å­å…¬ç†" class="headerlink" title="å‡½å­å…¬ç†"></a>å‡½å­å…¬ç†</h4><p>å‡½å­$F : \mathbf{C}\to\mathbf{D}$ä¹Ÿéœ€è¦æ»¡è¶³ä¸¤ä¸ªå…¬ç†ï¼š</p>
<ol>
<li>å¯¹äºä»»æ„å¯¹è±¡$X\in\mathbf{C}$ï¼Œæ’æœ‰$F(\mathrm{id}_X)=\mathrm{id}_{F(X)}$</li>
<li>å¯¹äºæ€å°„$f : Y\to Z$ã€$g : X\to Y$ï¼Œæ’æœ‰$F(f\circ g) = F(f)\circ F(g)$</li>
</ol>
<h4 id="mathbf-Hask-èŒƒç•´ä¸Šçš„å‡½å­"><a href="#mathbf-Hask-èŒƒç•´ä¸Šçš„å‡½å­" class="headerlink" title="$\mathbf{Hask}$èŒƒç•´ä¸Šçš„å‡½å­"></a>$\mathbf{Hask}$èŒƒç•´ä¸Šçš„å‡½å­</h4><p>Haskellä¸­çš„Functorå®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Functor</span> (<span class="title">f</span> :: * -&gt; *) <span class="keyword">where</span></span> </span><br><span class="line">    fmap :: (a -&gt; b) -&gt; f a -&gt; f b</span><br></pre></td></tr></table></figure>
<p>å¯¹äºHaskellä¸­çš„Functorï¼Œå®ƒå®é™…ä¸Šæ˜¯ä»$\mathbf{Hask}$èŒƒç•´ï¼ˆtypesï¼‰åˆ°å®ƒå­èŒƒç•´çš„å˜æ¢ã€‚æ¯”å¦‚åˆ—è¡¨å‡½å­$\mathtt{[]} : \mathbf{Hask}\to\mathbf{Lst}$ï¼ˆå…¶ä¸­$\mathbf{Lst}$æ˜¯æ‰€æœ‰Haskellä¸­åˆ—è¡¨ç±»å‹æ„æˆçš„èŒƒç•´ï¼‰</p>
<p>å®ƒä¹Ÿè¾¾æˆäº†èŒƒç•´è®ºä¸­å¯¹äºå‡½å­çš„è¦æ±‚ã€‚å‡½å­éœ€è¦è¿›è¡Œä¸¤ä¸ªæ“ä½œï¼šå°†ä¸€ä¸ªèŒƒç•´ä¸­çš„å¯¹è±¡æ˜ å°„åˆ°å¦ä¸€ä¸ªèŒƒç•´ä¸­ã€å°†ä¸€ä¸ªèŒƒç•´ä¸­çš„æ€å°„æ˜ å°„åˆ°å¦ä¸€ä¸ªèŒƒç•´ä¸­ã€‚ä»¥Maybeä¸ºä¾‹ï¼Œå®ƒå®ç°äº†å‡½å­çš„è¦æ±‚ï¼š</p>
<ol>
<li>Maybeæ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œä»–å¯ä»¥å°†ä»»æ„ç±»å‹ T å˜æˆæ–°ç±»å‹ Maybe Tï¼Œç›¸å½“äºä»$\mathbf{Hask}$èŒƒç•´çš„å¯¹è±¡å˜æˆäº†$\mathbf{Maybe}$èŒƒç•´çš„å¯¹è±¡ </li>
<li>fmapå‡½æ•°æ¥æ”¶ä¸€ä¸ª a -&gt; b ç±»å‹çš„å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª Maybe a -&gt; Maybe b ç±»å‹çš„å‡½æ•°ï¼Œç›¸å½“äºå°†$\mathbf{Hask}$èŒƒç•´ä¸­çš„æ€å°„$f : A\to B$æ˜ å°„æˆäº†$\mathbf{Maybe}$èŒƒç•´ä¸­çš„æ€å°„$\mathbf{Maybe}(f) : \mathbf{Maybe}(A)\to\mathbf{Maybe}(B)$</li>
</ol>
<p><strong>æ³¨æ„</strong>ï¼šæ—¶åˆ»è®°ä½è¿™é‡Œç ”ç©¶çš„æ˜¯$\mathbf{Hask}$èŒƒç•´å’Œå®ƒçš„å­èŒƒç•´ï¼Œå¯¹è±¡æ˜¯ç±»å‹è€Œä¸æ˜¯å€¼ï¼Œæ€å°„æ˜¯å‡½æ•°ä¹ŸæŒ‡çš„æ˜¯ä»ç±»å‹åˆ°ç±»å‹</p>
<p>åŒæ—¶ï¼ŒHaskellä¸­çš„Functorä¹Ÿæ»¡è¶³å‡½å­å…¬ç†ï¼š</p>
<ol>
<li>fmap id = id å³ fmap (id :: A -&gt; A) = (id :: f A -&gt; f A)</li>
<li>fmap (f . g) = fmap f . fmap g</li>
</ol>
<h3 id="å•å­ï¼ˆMonadsï¼‰"><a href="#å•å­ï¼ˆMonadsï¼‰" class="headerlink" title="å•å­ï¼ˆMonadsï¼‰"></a>å•å­ï¼ˆMonadsï¼‰</h3><blockquote>
<p>ä¸€ä¸ªå•å­è¯´ç™½äº†ä¸è¿‡å°±æ˜¯è‡ªå‡½å­èŒƒç•´ä¸Šçš„ä¸€ä¸ªå¹ºåŠç¾¤è€Œå·² _(:Ğ·ã€âˆ )_</p>
</blockquote>
<p>è‡ªå‡½å­åœ¨å‰é¢è¯´åˆ°è¿‡æ˜¯ä»ä¸€ä¸ªèŒƒç•´åˆ°è‡ªèº«çš„ä¸€ä¸ªå‡½å­ï¼Œå¦‚èŒƒç•´$\mathbf{C}$ä¸Šçš„è‡ªå‡½å­æ˜¯$F : \mathbf{C}\to\mathbf{C}$ã€‚è‡ªå‡½å­èŒƒç•´å°±æ˜¯å¯¹è±¡éƒ½æ˜¯è‡ªå‡½å­çš„èŒƒç•´ã€‚å¹ºåŠç¾¤å’ŒHaskellä¸­å­¦åˆ°çš„Monoidç±»å‹ç±»ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªæœ‰å¯ç»“åˆäºŒå…ƒè¿ç®—å’Œå•ä½å…ƒçš„ä»£æ•°ç»“æ„ã€‚å› æ­¤å•å­å°±æ˜¯ä¸€ä¸ªè‡ªå‡½å­ï¼Œè€Œä¸”å®ƒæœ‰å¯ç»“åˆäºŒå…ƒè¿ç®—ï¼ˆHaskellä¸­<code>&gt;=&gt;</code>ï¼‰å’Œå•ä½å…ƒï¼ˆHaskellä¸­<code>return</code>ï¼‰ã€‚</p>
<p>ä¸€ä¸ªå•å­$M : \mathbf{C}\to\mathbf{C}$è¿˜åŒ…å«ä¸¤ä¸ªæ€å°„ï¼ˆå¯¹äºèŒƒç•´$\mathbf{C}$ä¸­çš„æ‰€æœ‰å¯¹è±¡$X$ï¼‰ï¼š</p>
<ol>
<li>$\mathrm{unit}_X^M : X\to M(X)$</li>
<li>$\mathrm{join}_X^M : M(M(X))\to M(X)$</li>
</ol>
<p>ï¼ˆå½“å¼å­ä¸­çš„å•å­æ˜æ˜¾æ˜¯$M$æ—¶ï¼Œå¯ä»¥çœç•¥ä¸Šæ ‡${}^M$ï¼‰</p>
<p>Haskellä¸­Monadçš„å®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Functor</span> m =&gt; <span class="type">Monad</span> m <span class="keyword">where</span></span> </span><br><span class="line">    return :: a -&gt; m a </span><br><span class="line">    (&gt;&gt;=)  :: m a -&gt; (a -&gt; m b) -&gt; m b</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­å¾ˆæ˜¾ç„¶å¤šæ€å‡½æ•°<code>return</code>å¯¹åº”äº†å®šä¹‰ä¸­çš„$\mathrm{unit}$ï¼Œä½†æ˜¯<code>&gt;&gt;=</code>å’Œ$mathrm{join}$çš„å¯¹åº”å…³ç³»å¹¶ä¸æ˜æ˜¾ã€‚å› æ­¤Haskellä¸­æœ‰ä¸€ä¸ªå·¥å…·å‡½æ•°<code>join</code>ï¼Œå®ƒçš„æ•ˆæœå°±æ˜¯å®šä¹‰ä¸­çš„$\mathrm{join}$ï¼Œè€Œä¸”å®ƒå¯ä»¥å’Œ<code>&gt;&gt;=</code>äº’ç›¸å®šä¹‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">join</span> :: <span class="type">Monad</span> m =&gt; m (m a) -&gt; m a</span><br><span class="line"><span class="title">join</span> x = x &gt;&gt;= id</span><br><span class="line"></span><br><span class="line">(&gt;&gt;=) :: m a -&gt; (a -&gt; m b) -&gt; m b </span><br><span class="line"><span class="title">x</span> &gt;&gt;= f = join $ fmap f x</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥Haskellä¸­ä¸ºMonadè¦æ±‚å®šä¹‰<code>&gt;&gt;=</code>å°±ç›¸å½“äºå®šä¹‰äº†$\mathrm{join}$</p>
<p>ä¾‹å¦‚ï¼Œå¹‚é›†å‡½å­$P : \mathbf{Set}\to\mathbf{Set}$ä¹Ÿæ˜¯ä¸€ä¸ªå•å­ï¼Œå¯ä»¥ä¸ºå®ƒå®šä¹‰$\mathrm{unit}$å’Œ$\mathrm{join}$ä¸¤ä¸ªæ€å°„ã€‚Haskellä¸­çš„åˆ—è¡¨ä¹Ÿå¯ä»¥è¿‘ä¼¼çœ‹ä½œå¹‚é›†å‡½å­ã€‚</p>
<p>&emsp;æ€å°„/å‡½æ•°çš„ç±»å‹ï¼š</p>
<table>
<thead>
<tr>
<th align="center">å¹‚é›†å‡½å­</th>
<th align="center">Haskellä¸­åˆ—è¡¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ä¸€ä¸ªé›†åˆ$S$å’Œä¸€ä¸ªæ€å°„$f : A\to B$</td>
<td align="center">ä¸€ä¸ªç±»å‹ T å’Œä¸€ä¸ªå‡½æ•° f :: A -&gt; B</td>
</tr>
<tr>
<td align="center">$P(f) : \mathcal{P}(A)\to\mathcal{P}(B)$</td>
<td align="center">fmap f :: [A] -&gt; [B]</td>
</tr>
<tr>
<td align="center">$\mathrm{unit}_S : S\to\mathcal{P}(S)$</td>
<td align="center">return :: T -&gt; [T]</td>
</tr>
<tr>
<td align="center">$\mathrm{join}_S : \mathcal{P}(\mathcal{P}(S))\to\mathcal{P}(S)$</td>
<td align="center">join :: [[T]] -&gt; [T]</td>
</tr>
</tbody></table>
<p>&emsp;æ€å°„/å‡½æ•°çš„å®šä¹‰ï¼š</p>
<table>
<thead>
<tr>
<th align="center">å¹‚é›†å‡½å­</th>
<th align="center">Haskellä¸­åˆ—è¡¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$(\mathcal{P}(f))(S) = \{f(a):a\in S\}$</td>
<td align="center">fmap f xs = [ f a | a &lt;- xs ]</td>
</tr>
<tr>
<td align="center">$\mathrm{unit}_S(x) = \{x\}$</td>
<td align="center">return x = [x]</td>
</tr>
<tr>
<td align="center">$\mathrm{join}_S(L) = \bigcup L$</td>
<td align="center">join xs = concat xs</td>
</tr>
</tbody></table>
<h4 id="å•å­å…¬ç†"><a href="#å•å­å…¬ç†" class="headerlink" title="å•å­å…¬ç†"></a>å•å­å…¬ç†</h4><p>ç»™å®šä¸€ä¸ªå•å­$M : \mathbf{C}\to\mathbf{C}$ï¼Œå’Œä¸€ä¸ªæ€å°„$f : A\to B$ï¼ˆå…¶ä¸­$A,B\in \mathbf{C}$ï¼‰ï¼Œé‚£ä¹ˆæ»¡è¶³ä¸‹é¢å››æ¡å®šå¾‹ï¼š</p>
<ol>
<li>$\mathrm{join}\circ M(\mathrm{join})=\mathrm{join}\circ\mathrm{join}$</li>
<li>$\mathrm{join}\circ M(\mathrm{unit})=\mathrm{join}\circ\mathrm{unit}=\mathrm{id}$</li>
<li>$\mathrm{unit}\circ f = M(f)\circ\mathrm{unit}$</li>
<li>$\mathrm{join}\circ M(M(f)) = M(f)\circ\mathrm{join}$</li>
</ol>
<p>ä¹Ÿå¯ä»¥å¾ˆè‡ªç„¶åœ°å°†å…¶è½¬åŒ–ä¸ºHaskellä¸­çš„è¡¨è¿°ï¼š</p>
<ol>
<li>join . fmap join <code>=</code> join . join </li>
<li>join . fmap return <code>=</code> join . return <code>=</code> id </li>
<li>return . f <code>=</code> fmap f . return </li>
<li>join . fmap (fmap f) <code>=</code> fmap f . join</li>
</ol>
<p>åœ¨Haskellä¸­ï¼Œä½¿ç”¨<code>&gt;&gt;=</code>ä¹Ÿæœ‰ä¸‰ä¸ªå®šå¾‹å’Œè¿™å››ä¸ªå®šå¾‹æ˜¯ç­‰ä»·çš„ï¼š</p>
<ol>
<li>return x &gt;&gt;= f <code>=</code> f x <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  return x &gt;&gt;= f </span><br><span class="line">= join (fmap f (return x)) = join (fmap f . return $ x)</span><br><span class="line">= join (return (f x)) = join (return . f $ x)</span><br><span class="line">= join . return $ (f x)</span><br><span class="line">= id (f x)</span><br><span class="line">= f x</span><br></pre></td></tr></table></figure></li>
<li>m &gt;&gt;= return <code>=</code> m<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  m &gt;&gt;= return </span><br><span class="line">= join (fmap return m) = join . fmap return $ m </span><br><span class="line">= id m</span><br><span class="line">= m </span><br></pre></td></tr></table></figure></li>
<li>(m &gt;&gt;= f) &gt;&gt;= g <code>=</code> m &gt;&gt;= (\x -&gt; f x &gt;&gt;= g)<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  (m &gt;&gt;= f) &gt;&gt;= g </span><br><span class="line">= (join (fmap f m)) &gt;&gt;= g = join (fmap g (join (fmap f m)))</span><br><span class="line">= join . fmap g . join $ fmap f m </span><br><span class="line">= join . join . fmap (fmap g) $ fmap f m </span><br><span class="line">= join . join . fmap (fmap g) . fmap f $ m </span><br><span class="line">= join . join . fmap (fmap g . f) $ m </span><br><span class="line">= join . fmap join . fmap (fmap g . f) $ m </span><br><span class="line">= join . fmap (join . (fmap g . f)) $ m </span><br><span class="line">= join . fmap (\x -&gt; join (fmap g (f x))) $ m </span><br><span class="line">= join . fmap (\x -&gt; f x &gt;&gt;= g) $ m </span><br><span class="line">= join (fmap (\x -&gt; f x &gt;&gt;= g) m)</span><br><span class="line">= m &gt;&gt;= (\x -&gt; f x &gt;&gt;= g)</span><br></pre></td></tr></table></figure></li>
</ol>
<p>æœ‰å…³doè¯­å¥å’Œ<code>&gt;=&gt;</code>çš„å…¬ç†è¡¨è¿°åœ¨ä¸Šæ–‡ä¸­å·²ç»è¯´è¿‡</p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>å•ƒäº†å°†è¿‘ä¸€ä¸ªæœˆï¼Œç®—æ˜¯æŠŠHaskellçš„ä¸»è¦å†…å®¹éƒ½å•ƒå®Œäº†ã€‚ä¸»è¦å°±æ˜¯å‰æœŸçœ‹<a href="http://learnyouahaskell.com/chapters">Learn You a Haskell</a>ï¼ŒåæœŸçœ‹<a href="https://wiki.haskell.org/Typeclassopedia">Typeclassopedia</a>ï¼Œéƒ½æ˜¯pdcxsæ¨èç»™çš„æ•™ç¨‹ã€‚ä½†æ˜¯ä¸€å †è§†é¢‘ä¸€ä¸ªéƒ½æ²¡æœ‰è€å¿ƒçœ‹è¿›å»qwq</p>
<p>åé¢çš„éƒ¨åˆ†çš„ç†è§£æ„Ÿè§‰ä¹Ÿæ²¡åˆ°ä½ï¼ŒCategoryã€Arrowç­‰è¿™äº›ç±»å‹ç±»ä¹Ÿå°±æ˜¯å¤§è‡´åœ°çœ‹äº†ä¸€çœ¼ï¼Œç”šè‡³æœ‰ä»€ä¹ˆç”¨éƒ½ä¸å¤ªæ¸…æ¥š_(:Ğ·ã€âˆ )_</p>
<p>æ„Ÿè§‰Haskellè¿™é—¨è¯­è¨€ç¡®å®å¾ˆç¥å¥‡ï¼Œå¾ˆå¤šè¯­æ³•éƒ½å¾ˆæœ‰æ„æ€ï¼Œè€Œä¸”å¯ä»¥åšåˆ°éå¸¸è´´è¿‘æ•°å­¦ã€è´´è¿‘æ•°å­¦æ¦‚å¿µã€‚å­¦çš„æ—¶å€™ä¹Ÿæ˜¯è¶Šå­¦å‘è¶Šå¤šï¼Œå…ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹å¼•ç”³åˆ°äº†lambdaæ¼”ç®—ï¼Œç„¶åæ˜¯å‡½å­ç­‰ä¸€ç³»åˆ—æ¦‚å¿µå¼•ç”³åˆ°äº†èŒƒç•´è®ºï¼Œç›®å‰èŒƒç•´è®ºç®€å•åœ°çœ‹äº†ä¸€éƒ¨åˆ†ï¼Œlambdaæ¼”ç®—ä¹Ÿæ²¡æ·±å…¥ç ”ç©¶ï¼Œä»¥åæœ‰æ—¶é—´å†è¯´äº†ï¼ˆå’•å’•å’•ï¼‰</p>
<p>ç°åœ¨æ„Ÿè§‰æˆ‘å­¦åˆ°çš„Haskellç®€ç›´æ˜¯çš®æ¯›ï¼Œè¿˜æœ‰ä¸€å †æºç é‡Œçš„ä¸œè¥¿ä¸çŸ¥é“æ˜¯æ€ä¹ˆå›äº‹ï¼ˆåŒ…æ‹¬ä½†ä¸é™äº#ï¼Œ~ï¼‰ï¼Œä¹Ÿè¿˜æœ‰ä¸€å †ç±»å‹ç±»å’Œç”¨æ³•æ²¡æœ‰å­¦åˆ°ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºMonad Transformerã€Writerã€Readerã€Stateã€Comonadã€MonadFixã€Lensã€Parsecã€â€¦â€¦ï¼‰<del>mdï¼Œè¿™ä¹ˆä¸€çœ‹å·®çš„è¿˜çœŸå¤š</del>ï¼Œä»¥åæœ‰æ—¶é—´å†æ…¢æ…¢å­¦äº†ï¼Œè¿™ä¸ªå‡æœŸè¿˜æœ‰å¥½å¤šå…¶å®ƒäº‹è¦å¹²å‘¢ï¼ŒHaskellè¿™è¾¹å…ˆæ‘¸äº†_(:Ğ·ã€âˆ )_</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://learnyouahaskell.com/chapters">Learn You a Haskell</a></li>
<li><a href="https://stackoverflow.com/questions/6172004/writing-foldl-using-foldr">Writing foldl using foldr - StackOverflow</a></li>
<li><a href="https://blog.csdn.net/WinterShiver/article/details/103308165">Haskellï¼šç”¨foldrå®šä¹‰foldl</a></li>
<li><a href="https://wiki.haskell.org/Typeclassopedia">Typeclassopedia - Haskell wiki</a></li>
<li><a href="https://hoogle.haskell.org/">Hoogle</a></li>
<li><a href="https://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html">Functors, Applicatives, And Monads In Pictures</a></li>
<li><a href="http://02s949.coding-pages.com/2018/08/15/haskellc/">Haskellå­¦ä¹  - functor</a></li>
<li><a href="https://blog.csdn.net/zwvista/article/details/54863519">Haskellè¯­è¨€å­¦ä¹ ç¬”è®°ï¼ˆ8ï¼‰Monoid - zwvista</a></li>
<li><a href="https://blog.csdn.net/zwvista/article/details/62238541">Haskellè¯­è¨€å­¦ä¹ ç¬”è®°ï¼ˆ16ï¼‰Alternative - zwvista</a></li>
<li><a href="https://blog.csdn.net/zwvista/article/details/78679542">Haskellè¯­è¨€å­¦ä¹ ç¬”è®°ï¼ˆ40ï¼‰Arrowï¼ˆ1ï¼‰ - zwvista</a></li>
<li><a href="https://ocharles.org.uk/blog/guest-posts/2014-12-21-arrows.html">24 Days of GHC Extensions: Arrows - Tom Ellis</a></li>
<li><a href="https://blog.csdn.net/zwvista/article/details/78690485">Haskellè¯­è¨€å­¦ä¹ ç¬”è®°ï¼ˆ47ï¼‰Arrowï¼ˆ2ï¼‰ - zwvista</a></li>
<li><a href="https://en.wikibooks.org/wiki/Haskell/Category_theory">Haskell/Category theory - wikibooks</a></li>
<li><a href="https://en.wikipedia.org/wiki/Category_theory">Category theory - wikipedia</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E8%8C%83%E7%95%B4%E8%AE%BA">èŒƒç•´è®º - ç»´åŸºç™¾ç§‘</a></li>
<li><a href="https://en.wikipedia.org/wiki/Monad_(category_theory)">Monad (category theory) - wikipedia</a></li>
<li><a href="https://en.wikipedia.org/wiki/Functor">Functor - wikipedia</a></li>
</ul>
<p style="text-align: center; font-size: x-large; font-weight: bolder"> "The End?" </p>]]></content>
      <tags>
        <tag>Haskell</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒHackergame 2021ã€#4 Writup æŒç»­ç ´é˜²ç¯‡ 1</title>
    <url>/p/d11ec8ed.html</url>
    <content><![CDATA[<p><a href="/p/f152ab1f.html">&lt; #3</a></p>
<p>è¿™é‡Œæ¥<a href="/p/fd872e78.html">ä¸Šä¸€ç¯‡</a>ï¼ŒWriteup çš„æœ‰ï¼šé˜µåˆ—æ¢å¤ã€é©¬èµ›å…‹ã€minecRaftã€å¯†ç ç”Ÿæˆå™¨<br>ï¼ˆå…¶å® minecRaft åº”è¯¥ç®—â€œå¼€å±€ä¸Šåˆ†â€ç¯‡ï¼Œä½†æ˜¯ä¸å¥½å¡äº†ï¼Œå°±æ”¾è¿™é‡Œäº†ï¼‰<br>å‰©ä¸‹çš„å°±æ˜¯åšä¸ä¸Šçš„äº†ï¼Œçœ‹å®˜æ–¹ Writeup äº†ï¼ˆ</p>
<span id="more"></span>
<h2 id="é˜µåˆ—æ¢å¤å¤§å¸ˆ"><a href="#é˜µåˆ—æ¢å¤å¤§å¸ˆ" class="headerlink" title="é˜µåˆ—æ¢å¤å¤§å¸ˆ"></a>é˜µåˆ—æ¢å¤å¤§å¸ˆ</h2><p>ï¼ˆè¿™é¢˜æ•´æ•´åšäº†æˆ‘ä¸¤å¤©å¤šï¼Œæ¯å¤©æ™šä¸Šéƒ½å¯¹ç€ç£ç›˜é˜µåˆ—â€¦â€¦ï¼‰</p>
<blockquote>
<p>ä»¥ä¸‹æ˜¯ä¸¤ä¸ªå‹ç¼©åŒ…ï¼Œåˆ†åˆ«æ˜¯ä¸€ä¸ª RAID 0 é˜µåˆ—çš„ç£ç›˜å‹ç¼©åŒ…ï¼Œå’Œä¸€ä¸ª RAID 5 é˜µåˆ—çš„ç£ç›˜å‹ç¼©åŒ…ï¼Œå¯¹åº”æœ¬é¢˜çš„ä¸¤å°é—®ã€‚ä½ éœ€è¦è§£æå¾—åˆ°æ­£ç¡®å®Œæ•´çš„ç£ç›˜é˜µåˆ—ï¼ŒæŒ‚è½½ç¬¬ä¸€ä¸ªåˆ†åŒºååœ¨è¯¥åˆ†åŒºæ ¹ç›®å½•ä¸‹ä½¿ç”¨ Python 3.7 æˆ–ä»¥ä¸Šç‰ˆæœ¬æ‰§è¡Œ getflag.py è„šæœ¬ä»¥è·å– flagã€‚ç£ç›˜æ•°æ®ä¿è¯æ— æŸåã€‚</p>
</blockquote>
<h3 id="RAID-5"><a href="#RAID-5" class="headerlink" title="RAID 5"></a>RAID 5</h3><p>è™½ç„¶ RAID 5 æ˜¯ç¬¬äºŒé—®ï¼Œè€Œä¸”åˆ†æ•°é«˜ï¼Œä½†æ˜¯æ›´å¥½åšï¼Œè€Œä¸”åšå‡ºçš„äººä¹Ÿå¤šã€‚<br>å› ä¸ºæ•°æ®ä¿è¯æ— æŸåï¼Œæ‰€ä»¥è¦åšçš„ä»…ä»…æ˜¯æ‰¾å‡ºäº”ä¸ªç£ç›˜çš„é¡ºåºå’Œå—å¤§å°</p>
<p>é¡ºåºå¯ä»¥å…ˆç®€å•åœ°çœ‹çœ‹ strings *.img è¾“å‡ºçš„å†…å®¹<br>é€ä¸ªæ–‡ä»¶çœ‹ï¼Œå¯ä»¥å‘ç°æ¯ä¸ªæ–‡ä»¶æ¯”è¾ƒé å‰çš„åœ°æ–¹ä¼šæœ‰ä¸€æ®µæ˜¯ git å†å²è®°å½•çš„ä¸€éƒ¨åˆ†:<br><img src="/p/d11ec8ed/raid5.png"><br>æ ¹æ®é‡Œé¢çš„æ—¶é—´å¯ä»¥æ¨æ–­å‡ºç£ç›˜çš„é¡ºåºå¤§è‡´æ˜¯ï¼š</p>
<p style="text-align: center;">Qj... -> 60... -> 3R... -> Ir... -> 3D...</p>
åªæ˜¯ï¼Œè¿™ä¸ªé¡ºåºåº”è¯¥æ˜¯ä¸€ä¸ªç¯ï¼Œè°åœ¨ç¬¬ä¸€è¿˜æ²¡åŒºåˆ†å‡ºæ¥

<p>åœ¨çœ‹æ¯ä¸ªæ–‡ä»¶çš„å¤´éƒ¨ï¼Œåªæœ‰ 60â€¦ å’Œ 3Râ€¦ æœ‰ â€œEFI PARTâ€:<br><img src="/p/d11ec8ed/raid5_.png"><br>æ‰€ä»¥åº”è¯¥æ˜¯ä¸€ä¸ªåœ¨å¼€å¤´ï¼Œä¸€ä¸ªåœ¨ç»“å°¾ã€‚æ‰€ä»¥æœ€ç»ˆçš„é¡ºåºæ˜¯ï¼š</p>
<p style="text-align: center;">3R... -> Ir... -> 3D... -> Qj... -> 60...</p>

<p>ç„¶åéœ€è¦æ‰¾åˆ°å—å¤§å°<br>ç›´æ¥ä¸¢åˆ° DiskGenius é‡Œç»„å»ºè™šæ‹Ÿ RAIDï¼Œé€‰å·¦åŒæ­¥ï¼Œç„¶åå¯ä»¥è¯•å‡ºæ¥å½“å—å¤§å°æ˜¯ 64k çš„æ—¶å€™æ­£å¥½å¯ä»¥æ‹¼å‡ºå®Œæ•´ç£ç›˜<br>ç„¶åå…‹éš†ç£ç›˜ç”Ÿæˆ img æ–‡ä»¶ï¼Œå†æŒ‚è½½ï¼Œè¿›å…¥ï¼Œæ‰§è¡Œ getflag.py å°±å¾—åˆ°äº† flag </p>
<h3 id="RAID-0"><a href="#RAID-0" class="headerlink" title="RAID 0"></a>RAID 0</h3><p>åœ¨åš RAID 5 çš„æ—¶å€™è¿˜å‘ç°äº†ä¸€ä¸ªå« Raid Reconstructor çš„è½¯ä»¶ï¼Œå¯ä»¥çˆ†ç ´ RAID é˜µåˆ—é¡ºåºå’Œå—å¤§å°<br>æ‰€ä»¥è¿™é—®ä¹Ÿå°±æ‡’å¾—çœ‹äº†ï¼Œç›´æ¥ä¸¢ç»™ Raid Reconstructor æ¥çˆ†ç ´ï¼Œå¾—åˆ°æœ€æ¨èçš„é¡ºåºï¼š</p>
<p style="text-align: center;">wl. -> jC. -> 1G. -> 5q. -> d3. -> eR. -> RA. -> ID.</p>
å’Œå—å¤§å° 128k

<p>ç„¶åç›´æ¥ç”¨ Raid Reconstructor çš„ Copy å¯¼å‡º img æ–‡ä»¶ï¼Œæå–ååˆå¾—åˆ°ä¸€ä¸ªæ–°çš„ img æ–‡ä»¶<br>é€šè¿‡ file å¯ä»¥çœ‹åˆ°ç»“æœçš„æ–‡ä»¶ç³»ç»Ÿæ˜¯ XFS</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ file MyDisk.img</span><br><span class="line">MyDisk.img: SGI XFS filesystem data (blksz 4096, inosz 512, v2 <span class="built_in">dirs</span>)</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å§‹ç»ˆæ— æ³•æŒ‚è½½ï¼ˆæäº†ä¸€å¤©ï¼‰<br>å¯èƒ½æ˜¯ Raid Reconstructor çš„é—®é¢˜ï¼Œæ‰€ä»¥åˆç”¨ DiskGenius è¯•äº†ä¸‹<br>å› ä¸º win å’Œ DiskGenius è¯»ä¸äº† XFS æ–‡ä»¶ç³»ç»Ÿï¼Œæ‰€ä»¥æ‹¼èµ·æ¥ä¹‹åç›´æ¥å…‹éš†å‡º img æ–‡ä»¶<br>ç„¶åæ‹–åˆ° Kali Linux é‡ŒæŒ‚è½½ï¼ŒæˆåŠŸæŒ‚è½½åè¿›å…¥ã€è¿è¡Œ getflag.py å°±å¾—åˆ°äº† flag </p>
<hr>
<h2 id="é©¬èµ›å…‹"><a href="#é©¬èµ›å…‹" class="headerlink" title="é©¬èµ›å…‹"></a>é©¬èµ›å…‹</h2><p>ï¼ˆè¿™é“é¢˜å·²ç»åšç ´é˜²äº†ï¼Œæœ¬ä»¥ä¸ºæ˜¯ä¸ªé’é“œï¼Œç»“æœæ˜¯ä¸ªç‹è€…â€¦â€¦ï¼‰<br>æˆ‘åšçš„è‚¯å®šä¸æ˜¯æ­£è§£ï¼Œåˆ©ç”¨äºŒç»´ç çº é”™èƒ½åŠ›å‹‰å¼ºæ‹¿åˆ°äº† flagï¼Œæ‰€ä»¥å°±ä¸è¯¦ç»†å†™ writeup äº†ï¼Œä¸»è¦è¿˜æ˜¯è¦çœ‹å®˜æ–¹ wpï¼ˆé€ƒ</p>
<p>å¤§æ¦‚æ­¥éª¤å°±æ˜¯ï¼š</p>
<ol>
<li>è¯»å›¾ç‰‡</li>
<li>æŠŠå·²çŸ¥çš„åƒç´ æå–å‡ºæ¥</li>
<li>æŠŠå››ä¸ªå°å®šä½å—å¡«ä¸Š</li>
<li>æŒ¨ä¸ªé©¬èµ›å…‹å—å¯»æ‰¾ä½¿è¿˜åŸçš„æ•°æ®å¹³å‡æ•°ä¸åŸé©¬èµ›å…‹å€¼å·®çš„ç»å¯¹å€¼å°äº1çš„å¡«è¡¥æ–¹æ³•<ul>
<li>å¦‚æœåªæœ‰ä¸€ç§å°±å¡«ä¸Šï¼Œå¹¶ä¸”æ ‡æ³¨å·²ç»å¡«å¥½ï¼Œä»¥åä¸å†æœå¯»</li>
<li>å¦‚æœæœ‰å¤šç§å°±å…ˆæ”¾ä¸‹ä¸å¡«</li>
</ul>
</li>
<li>é‡å¤4çš„è¿‡ç¨‹ï¼Œè¿™æ˜¯è¿˜ä¼šæœ‰å”¯ä¸€ç¡®å®šçš„å¡«è¡¥æ–¹æ¡ˆã€‚é‡å¤4æ¬¡å¤§æ¦‚å°±ä¸å‰©å”¯ä¸€è§£äº†</li>
<li>è¿™æ—¶é‡å¤4ï¼Œæ‰¾å‡ºä»…æœ‰2ä¸­å¡«è¡¥æ–¹æ³•çš„ï¼Œé€‰è¯¯å·®æœ€å°çš„å¡«ä¸Š</li>
<li>ç„¶åå†é‡å¤4</li>
<li>ç„¶åé‡å¤6</li>
<li>ç„¶åé‡å¤4 </li>
<li>è¿™æ—¶å¯ä»¥çœ‹åˆ°å·²ç»è¿˜åŸå¾—å·®ä¸å¤šäº†ï¼Œå‰©ä¸‹çš„ä¸ç®¡ç›´æ¥æ‰«ç ä¹Ÿå¯ä»¥æ‰«å‡º flag äº† <div style="text-align: center;"><img src="/p/d11ec8ed/msc.jpg" width="35%" height="35%"></div></li>
</ol>
<p><del>çœ‹ï¼Œåšæ³•å¾ˆçƒ‚å¯¹å§</del></p>
<hr>
<h2 id="minecRaft"><a href="#minecRaft" class="headerlink" title="minecRaft"></a>minecRaft</h2><blockquote>
<p>kk åŒå­¦å¾ˆå–œæ¬¢ç© Minecraftï¼Œä»–æœ€è¿‘æ”¶åˆ°äº†ä¸€å¼  MC åœ°å›¾ï¼Œåœ°å›¾é‡Œé¢æœ‰ä¸‰ç›ç¯ï¼Œè¿˜æœ‰å¾ˆå¤šå¥‡å¥‡æ€ªæ€ªçš„å‹åŠ›æ¿ã€‚</p>
<p>ä½†ä»–å‘ç°è¿™äº›ç¯å¥½åƒä¸å¤ªç¬¦åˆ MC ç”µç£å­¦ï¼ˆRed stoneï¼‰ï¼Œä½ èƒ½å¸®ä»–æŠŠç¯å…¨éƒ¨ç‚¹äº®å—ï¼Ÿ</p>
<p>æ³¨ï¼šæœ¬é¢˜è§£æ³•ä¸åŸç‰ˆ Minecraft æ¸¸æˆæ— å…³ã€‚</p>
<p>è¡¥å……è¯´æ˜ï¼šflag èŠ±æ‹¬å·å†…ä¸ºè®©ä¸‰ç›ç¯å…¨éƒ¨ç‚¹äº®çš„æœ€çŸ­çš„è¾“å…¥åºåˆ—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¸©è¸å‹åŠ›æ¿è¾“å…¥çš„æœ€çŸ­çš„åºåˆ—ä¸º abcï¼Œåˆ™ç­”æ¡ˆä¸º flag{abc}ã€‚</p>
</blockquote>
<p>è¿˜æŒºå¥½ç©çš„é¢˜ï¼Œåœ¨ç½‘é¡µä¸­æ¨¡æ‹Ÿäº†ä¸€ä¸ªmcå‡ºæ¥<br>çœ‹æºç çœ‹åˆ°äº†å¼•å…¥äº† flag.js æ–‡ä»¶ï¼Œæ‰€ä»¥å¯èƒ½å°±æ˜¯è¦é€šè¿‡å®ƒæ¥å¾—åˆ°ç­”æ¡ˆï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jsm/miscs/flag.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆåˆ¤æ–­æ˜¯å¦æ­£ç¡®æ˜¯é€šè¿‡è°ƒç”¨ <code>gyflagh(input)</code> æ˜¯å¦ä¸º true æ¥åˆ¤æ–­ï¼Œè€Œ gyflagh ä¹Ÿåœ¨ flag.js ä¸­ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦çœ‹ flag.js </p>
<p>ä½†æ˜¯ flag.js æ˜¯ç»è¿‡ç®€å•æ··æ·†è¿‡çš„ï¼Œè¿˜æ˜¯è¦è´¹ç‚¹æ—¶é—´è¯»ä¸€ä¸‹</p>
<p>å…¶ä¸­æœ‰å››ä¸ªè½¬æ¢ Str4 Base16 å’Œ Long çš„å‡½æ•°å¯ä»¥ç•¥æ‰ä¸ç®¡<br>æ³¨æ„åˆ°äº† <code>_0x381b()</code> è¿™ä¸ªå‡½æ•°é‡Œæœ‰ä¸€ä¸ªåˆ—è¡¨ï¼Œè€Œä¸”æ¯”è¾ƒç®€å•ï¼Œå…¶å®å®ƒè¿”å›çš„å°±æ˜¯è¿™ä¸ªåˆ—è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[&#x27;encrypt&#x27;, &#x27;33MGcQht&#x27;, &#x27;6fbde674819a59bfa12092565b4ca2a7a11dc670c678681daf4afb6704b82f0c&#x27;, &#x27;14021KbbewD&#x27;, &#x27;charCodeAt&#x27;, &#x27;808heYYJt&#x27;, &#x27;5DlyrGX&#x27;, &#x27;552oZzIQH&#x27;, &#x27;fromCharCode&#x27;, &#x27;356IjESGA&#x27;, &#x27;784713mdLTBv&#x27;, &#x27;2529060PvKScd&#x27;, &#x27;805548mjjthm&#x27;, &#x27;844848vFCypf&#x27;, &#x27;4bIkkcJ&#x27;, &#x27;1356853149054377&#x27;, &#x27;length&#x27;, &#x27;slice&#x27;, &#x27;1720848ZSQDkr&#x27;]</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯åœ¨ Console é‡Œé¢è°ƒç”¨ _0x381b å¾—åˆ°çš„å´æ˜¯ä»¥ â€˜sliceâ€™ å¼€å¤´ã€â€™lengthâ€™ ç»“å°¾çš„åˆ—è¡¨ï¼Œå°†è¿™ä¸ªåˆ—è¡¨è®°ä¸º lst æ–¹ä¾¿è¡¨è¿°<br>è€Œä¸”æºç ä¸­åªæœ‰æœ€å¼€å¤´çš„è°ƒç”¨åŒ¿åå‡½æ•°é‡Œé¢æœ‰ <code>[&#39;push&#39;]</code> å’Œ <code>[&#39;shift&#39;]</code>ï¼Œæ‰€ä»¥æ¨æµ‹è¿™ä¸ªåŒ¿åå‡½æ•°å°±æ˜¯å°†è¿™ä¸ªåˆ—è¡¨å¾ªç¯å³ç§»ä¸¤ä¸ªä½ç½®<br>é‚£è¿™ä¸ªåŒ¿åå‡½æ•°ä¹Ÿä¸ç”¨çœ‹äº†</p>
<p>å†æ¥çœ‹ <code>_0x2c9e()</code> è¿™ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_0x2c9e</span>(<span class="params">_0x49e6ff, _0x310d40</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> _0x381b4c = _0x381b();</span><br><span class="line">    <span class="keyword">return</span> _0x2c9e = <span class="function"><span class="keyword">function</span>(<span class="params">_0x2c9ec6, _0x2ec3bd</span>) </span>&#123;</span><br><span class="line">        _0x2c9ec6 = _0x2c9ec6 - <span class="number">0x1a6</span>;</span><br><span class="line">        <span class="keyword">let</span> _0x4769df = _0x381b4c[_0x2c9ec6];</span><br><span class="line">        <span class="keyword">return</span> _0x4769df;</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    _0x2c9e(_0x49e6ff, _0x310d40);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ <code>_0x381b4c</code> æ˜¯åˆšåˆšè¯´çš„é‚£ä¸ªåˆ—è¡¨ lstã€‚ç„¶å return é‡Œé¢é‡æ–°å®šä¹‰äº† <code>_0x2c9e</code>ï¼Œä½†æ˜¯æ–°çš„å®šä¹‰é‡Œç¬¬äºŒä¸ªå‚æ•°å¹¶æ²¡æœ‰ç”¨ï¼Œç„¶åè°ƒç”¨è¿”å›ï¼Œæ‰€ä»¥æ•´ä¸ªå‡½æ•°å°±ç›¸å½“äºï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_0x2c9e</span>(<span class="params">_0x2c9ec6, ...</span>) </span>&#123;</span><br><span class="line">    _0x2c9ec6 = _0x2c9ec6 - <span class="number">0x1a6</span>;</span><br><span class="line">    <span class="keyword">return</span> lst[_0x2c9ec6];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>0x1a6 æ˜¯ 422ï¼Œæ‰€ä»¥æ•´ä¸ªå‡½æ•°ä¹Ÿå°±ç›¸å½“äº function(x) { return lst[x - 422]; }<br>åŒæ—¶æ ¹æ®ç¬¬ä¸€è¡Œï¼Œç¨‹åºä¸­æ‰€æœ‰ <code>_0x22517d</code> ä¹Ÿæ˜¯è¿™ä¸ªå‡½æ•°</p>
<p>ç„¶åçœ‹åˆ¤æ–­ç­”æ¡ˆçš„ <code>gyflagh</code> å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gyflagh</span>(<span class="params">_0x111955</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> _0x50051f = _0x22517d;</span><br><span class="line">    <span class="keyword">let</span> _0x3b790d = _0x111955[_0x50051f(<span class="number">0x1a8</span>)](_0x50051f(<span class="number">0x1b7</span>));</span><br><span class="line">    <span class="keyword">if</span> (_0x3b790d === _0x50051f(<span class="number">0x1aa</span>))</span><br><span class="line">        <span class="keyword">return</span> !![];</span><br><span class="line">    <span class="keyword">return</span> ![];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ²¡å•¥ç‰¹åˆ«çš„ï¼Œç»“åˆ lst å¯ä»¥å¾—åˆ°ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gyflagh</span>(<span class="params">ans</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (ans[<span class="string">&quot;encrypt&quot;</span>](<span class="string">&quot;1356853149054377&quot;</span>) === <span class="string">&quot;6fbde674819a59bfa12092565b4ca2a7a11dc670c678681daf4afb6704b82f0c&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥ç»“åˆ lst ä¸­çš„å€¼å’Œç´¢å¼•ï¼Œç¿»è¯‘å‡ºæœ€é‡è¦çš„å‡½æ•°<br>å†è¿›è¡Œä¸€äº›è¿ç®—ï¼Œç”¨æ³¨é‡Šæ ‡æ³¨ä¸€ä¸‹å·²çŸ¥çš„å€¼å°±å¯ä»¥å¾—åˆ°ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">String</span>[<span class="string">&quot;prototype&quot;</span>][<span class="string">&quot;encrypt&quot;</span>] = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123; <span class="comment">// key = &quot;1356853149054377&quot;</span></span><br><span class="line">    <span class="keyword">const</span> left = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">const</span> right = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">4</span>);</span><br><span class="line">    <span class="keyword">let</span> res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    ans = <span class="built_in">escape</span>(<span class="built_in">this</span>); <span class="comment">// this := ans</span></span><br><span class="line">    right = [<span class="number">909456177</span>, <span class="number">825439544</span>, <span class="number">892352820</span>, <span class="number">926364468</span>]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; ans[<span class="string">&quot;length&quot;</span>]; i = i + <span class="number">8</span>) &#123;</span><br><span class="line">      left[<span class="number">0</span>] = Str4ToLong(ans[<span class="string">&quot;slice&quot;</span>](i, i + <span class="number">4</span>));</span><br><span class="line">      left[<span class="number">1</span>] = Str4ToLong(ans[<span class="string">&quot;slice&quot;</span>](i + <span class="number">4</span>, i + <span class="number">8</span>));</span><br><span class="line">      code(left, right);</span><br><span class="line">      res = res + (LongToBase16(left[<span class="number">0</span>]) + LongToBase16(left[<span class="number">1</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;  <span class="comment">// 6fbde674819a59bfa12092565b4ca2a7a11dc670c678681daf4afb6704b82f0c</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å†æ¥çœ‹ <code>code</code> å‡½æ•°ï¼Œæ ¹æ® &lt;&lt; 4ã€ ^ã€ &gt;&gt;&gt; 5 å¯ä»¥å¤§èƒ†æ¨æµ‹ç±»ä¼¼ TEAï¼Œç„¶åè§£ç å°±ç›´æ¥ç¿»è¿‡æ¥å°±å¥½äº†ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dec</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">2654435769</span> * <span class="number">32</span>; i != <span class="number">0</span>;) &#123;</span><br><span class="line">        left[<span class="number">1</span>] -= ((left[<span class="number">0</span>] &lt;&lt; <span class="number">4</span> ^ left[<span class="number">0</span>] &gt;&gt;&gt; <span class="number">5</span>) + left[<span class="number">0</span>] ^ i + right[i &gt;&gt;&gt; <span class="number">11</span> &amp; <span class="number">3</span>]);</span><br><span class="line">        i -= <span class="number">2654435769</span>;</span><br><span class="line">        left[<span class="number">0</span>] -= ((left[<span class="number">1</span>] &lt;&lt; <span class="number">4</span> ^ left[<span class="number">1</span>] &gt;&gt;&gt; <span class="number">5</span>) + left[<span class="number">1</span>] ^ i + right[i &amp; <span class="number">3</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(left);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€åæŠŠè¦å¾—åˆ°çš„ res åˆ†å—ï¼Œæ¯ 8 ä¸ªä¸€ç»„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">6fbde674 819a59bf a1209256 5b4ca2a7 a11dc670 c678681d af4afb67 04b82f0c</span><br></pre></td></tr></table></figure>
<p>ç„¶åä»åå¾€å‰ï¼Œæ¯ä¸¤ä¸ªæ‰§è¡Œ Base16ToLongï¼Œç„¶åä½œä¸º left ä¼ ç»™ dec å‡½æ•°è§£ç ï¼Œç„¶åå† LongToStr4 å¾—åˆ°å››ä¸ªå­—ç¬¦:<br><img src="/p/d11ec8ed/minecRaft.jpg"><br>æ‹¼èµ·æ¥å°±æ˜¯ flag äº†ï¼š<code>flag&#123;McWebRE_inMlnCrA1t_3a5y_1cIuop9i&#125;</code></p>
<hr>
<h2 id="å¯†ç ç”Ÿæˆå™¨"><a href="#å¯†ç ç”Ÿæˆå™¨" class="headerlink" title="å¯†ç ç”Ÿæˆå™¨"></a>å¯†ç ç”Ÿæˆå™¨</h2><blockquote>
<p>å° T æœ€è¿‘åˆå†™äº†ä¸€ä¸ª web åº”ç”¨ã€‚</p>
<p>ä»–å‘ç°å¾ˆå¤šç”¨æˆ·éƒ½å–œæ¬¢è®¾ç½®å¼±å¯†ç ï¼Œäºæ˜¯å†³å®šè®©æ‰€æœ‰ç”¨æˆ·çš„å¯†ç éƒ½å¿…é¡»æ˜¯ 16 ä½é•¿ï¼Œå¹¶ä¸”å„ç§ç¬¦å·éƒ½è¦æœ‰ã€‚ä¸ºäº†è®©å¤§å®¶å¯ä»¥æ–¹ä¾¿ç”Ÿæˆè¿™æ ·çš„å¯†ç ï¼Œä»–è¿˜å†™äº†ä¸€ä¸ªå¯†ç ç”Ÿæˆå™¨ï¼Œè®©ç”¨æˆ·å¯ä»¥ç”Ÿæˆç¬¦åˆè§„åˆ™çš„å¯†ç ã€‚</p>
<p>ä½†è¿™æ ·æœçœŸå®‰å…¨å—ï¼Ÿ</p>
</blockquote>
<p>ï¼ˆæ„Ÿè§‰è¿™æ¬¡ Hackergame é¢˜çš„ tag éƒ½å¾ˆè¯¡å¼‚ã€‚è¿™é¢˜æ˜æ˜æ˜¯ misc(general) ä¸ºä»€ä¹ˆæ‰“äº† binary çš„ tagï¼‰</p>
<p>çœ‹åˆ° binary tag ç›´æ¥å…ˆå¾€ IDA é‡Œé¢ä¸¢ï¼Œç„¶åæŠ¥é”™äº†ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºéƒ¨åˆ† winapi å¯¼å…¥ä¸è¿›å»çš„é—®é¢˜ï¼ˆï¼Ÿï¼‰<br>ç„¶åå°±ä¸ä¼šäº†â€¦â€¦ å¯¹ç€ IDA å¹²çªçœ¼</p>
<p>çœ‹é¢˜ï¼Œé¢˜ç›®ç»™äº†ä¸€ä¸ªç½‘ç«™ï¼Œç”¨æ¥å‘å¸ƒå±•æ¿ï¼Œçœ‹èµ·æ¥åªæœ‰ admin ç”¨æˆ·ï¼Œè€Œä¸”æ²¡æœ‰æ³¨å†Œç³»ç»Ÿï¼Œæ‰€ä»¥åº”è¯¥å°±æ˜¯è¦æåˆ° admin çš„å¯†ç äº†<br>å†ç»†çœ‹ç½‘ç«™ï¼Œç‰¹æ„æåˆ° â€œç½‘é¡µæ˜¾ç¤º<strong>æ—¶é—´</strong>â€ï¼Œè€Œä¸”å±•æ¿åé¢éƒ½æœ‰å‘å¸ƒæ—¶é—´ï¼Œç‚¹è¿› admin çš„ç”¨æˆ·é¡µé¢å‘ç°ä¹Ÿæœ‰æ³¨å†Œæ—¶é—´ï¼Œç€å®æœ‰äº›è®¸è¯¡å¼‚ï¼ˆ<br>æ‰€ä»¥æ—¶é—´åº”è¯¥æ˜¯ä¸€ä¸ªæç¤º</p>
<p>è€Œå†™ä»£ç çš„æ—¶å€™è®¾ç½®éšæœºæ•°ç§å­åˆå¸¸ä»¥å½“å‰æ—¶é—´ä½œä¸ºç§å­ï¼Œæ‰€ä»¥ç”Ÿæˆçš„å¯†ç å¯èƒ½æ˜¯å’Œæ—¶é—´æœ‰å…³ç³»çš„<br>é€šè¿‡è°ƒç³»ç»Ÿæ—¶é—´ï¼Œå¯ä»¥å‘ç°åœ¨åŒä¸€ç§’ç‚¹ä¸‹ç”Ÿæˆï¼Œäº§ç”Ÿçš„å¯†ç æ˜¯ä¸€æ ·çš„<br>æ‰€ä»¥åªéœ€è¦æŠŠç³»ç»Ÿæ—¶é—´è°ƒåˆ° admin çš„æ³¨å†Œæ—¶é—´å·¦å³ï¼Œç„¶åæ¯ç§’ç”Ÿæˆå¯†ç ï¼Œå†æŒ¨ä¸ªè¾“è¿›å»çˆ†ç ´å³å¯</p>
<p>æœ€åå¾—åˆ° 2021-09-22 23:10:53 æ—¶ç”Ÿæˆçš„å¯†ç  <code>$Z=CBDL7TjHu~mEX</code> å°±æ˜¯ admin çš„å¯†ç <br>ç„¶åç™»å½•å³å¯åœ¨â€œæˆ‘çš„â€é‡Œçœ‹åˆ°ä¸€æ¡ç§å¯†å±•æ¿ï¼Œå†…å®¹æ˜¯ flag</p>
<p>ï¼ˆå…¶å®è¿™é¢˜æå¾—é—¹å¿ƒçš„æ˜¯æ¯ç§’ç”Ÿæˆå¯†ç ï¼Œåƒæˆ‘è¿™æ ·çš„åŸå§‹äººåªä¼šåå¤è°ƒæ—¶é—´ç„¶åæ‰‹åŠ¨ç”Ÿæˆã€å¤åˆ¶ç²˜è´´ï¼Œç„¶åå†å¤åˆ¶ç²˜è´´æ£€éªŒå¯†ç ï¼‰<br>ï¼ˆè€Œä¸”å…¶å®è¿™ä¸ªæ—¶é—´ä¹Ÿè¯•äº†å¾ˆé•¿æ—¶é—´ï¼Œè¯•äº† 23:11 çš„æ‰€æœ‰ç§’ï¼Œ15:11 çš„æ‰€æœ‰ç§’ï¼ˆè€ƒè™‘åˆ°äº†æåˆ°çš„æ—¶åŒºé—®é¢˜ï¼‰ï¼‰<br>ï¼ˆç„¶åä¸€å…± 120s é‡Œä¹Ÿæ²¡æœ‰æ­£ç¡®å¯†ç ï¼Œå°±å¾ˆé—¹å¿ƒï¼Œæœ€åçš„æ—¶é—´æ˜¯ 23:11 çš„å‰ä¸€åˆ†é’Ÿé‡Œçš„â€¦â€¦æˆ‘å½“æ—¶ç”šè‡³æƒ³äº†ï¼Œè¿™äº›æ“ä½œåœ¨ä¸€åˆ†é’Ÿä¹‹å†…éƒ½èƒ½å®Œæˆï¼Œç„¶åå°±æ²¡è€ƒè™‘å‰ä¸€åˆ†é’Ÿç”Ÿæˆå¯†ç ã€åä¸€åˆ†é’Ÿæ³¨å†Œçš„é—®é¢˜â€¦â€¦ï¼‰<br>ï¼ˆäºæ˜¯å°±æœ‰äº†ï¼š</p>
<div style="text-align: center;"><img src="/p/d11ec8ed/generator.png" width="15%" height="15%"></div>

<hr>
<p>å¥½äº†ï¼Œæˆ‘åšä¸Šçš„é¢˜ä¹Ÿå°±è¿™äº›äº†ï¼Œå‹‰å‹‰å¼ºå¼ºæ··äº† 4k2pt<br>æ²¡åšä¸Šçš„é¢˜ä¹Ÿå¥½å¤šï¼šAmnesia2ã€èµ›åšå¨æˆ¿23ã€ç¯ã€åªè¯»ã€ä¸€çŸ³äºŒé¸Ÿã€GPAã€é“¾ä¸Šé¢„è¨€å®¶ã€åŠ©è®°è¯2ã€Co-Programã€å¤–æ˜Ÿäººã€befunã€fzuuã€wishã€OIé€†å‘<br>ï¼ˆè‰ï¼Œå¥½å¤šqwqï¼‰<br>å‰©ä¸‹çš„å°±çœ‹å®˜æ–¹ Writeup äº†ï¼ˆ</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li>RAID ç›¸å…³çš„å¥½å¤šæ–‡ç« ï¼Œæ²¡ç•™ä½œè®°å½•</li>
</ul>
]]></content>
      <categories>
        <category>Writeup</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>Writeup</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒHackergame 2021ã€#3 Writup æŒç»­ç ´é˜²ç¯‡ 0</title>
    <url>/p/f152ab1f.html</url>
    <content><![CDATA[<div style="display: flex; justify-content: space-between;">

<p><a href="/p/f54b44c.html">&lt; #2</a></p>
<p><a href="/p/d11ec8ed.html">#4 &gt;</a></p>
</div>

<p>å®Œæˆäº†å‰é¢ä¸¤ç¯‡è¯´åˆ°çš„é‚£äº›é¢˜åï¼Œå‰©ä¸‹çš„å°±å¼€å§‹åå¤æŠ˜ç£¨æˆ‘äº†qwq<br>æ¯å¤©åŸºæœ¬éƒ½è‚åˆ°ä¸€ç‚¹å·¦å³ï¼Œç”šè‡³å››äº”ä¸ªå°æ—¶æ¯«æ— æˆæœ_(Â´à½€`ã€ âˆ )__<br>å…¶ä¸­æœ‰äº›é¢˜å›è¿‡å¤´æ¥çœ‹å…¶å®å¾ˆç®€å•ï¼Œä½†æ˜¯åšçš„æ—¶å€™å°±æ˜¯æ­»æ´»æƒ³ä¸å‡ºæ¥ï¼ˆ</p>
<p>è¿™ç¯‡ Writeup é‡Œé¢æœ‰ï¼šAmnesia1ã€RSAã€LUKSã€MicroWorld</p>
<span id="more"></span>

<hr>
<h2 id="Amnesia"><a href="#Amnesia" class="headerlink" title="Amnesia"></a>Amnesia</h2><h3 id="è½»åº¦å¤±å¿†"><a href="#è½»åº¦å¤±å¿†" class="headerlink" title="è½»åº¦å¤±å¿†"></a>è½»åº¦å¤±å¿†</h3><blockquote>
<p>ä½ çš„ç¨‹åºåªéœ€è¦è¾“å‡ºå­—ç¬¦ä¸² Hello, world!ï¼ˆç»“å°¾æœ‰æ— æ¢è¡Œå‡å¯ï¼‰å¹¶æ­£å¸¸ç»“æŸã€‚</p>
<p>ç¼–è¯‘æŒ‡ä»¤ï¼š<code>gcc -O file.c -m32</code></p>
<p>è¿è¡ŒæŒ‡ä»¤ï¼š<code>./a.out</code></p>
<p>ç¼–è¯‘å ELF æ–‡ä»¶çš„ .data å’Œ .rodata æ®µä¼šè¢«æ¸…é›¶ã€‚</p>
</blockquote>
<p>ELFï¼ˆExecutable and Linkable Formatï¼‰æ˜¯ Linux ä¸‹å¸¸ç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šä¸åŒçš„èŠ‚ï¼š</p>
<ul>
<li><code>.text</code> èŠ‚ï¼šç¨‹åºè¿è¡Œéœ€è¦çš„ä»£ç </li>
<li><code>.data</code> èŠ‚ï¼šå­˜æ”¾å¯ä¿®æ”¹çš„æ•°æ®ï¼Œä¸€èˆ¬æ˜¯é const å…¨å±€å˜é‡å’Œé™æ€å˜é‡</li>
<li><code>.rodata</code> èŠ‚ï¼šå³ read only dataï¼Œä¸€èˆ¬æ˜¯å¸¸é‡æˆ–è€…å­—ç¬¦ä¸²</li>
<li><code>.bss</code> èŠ‚ï¼šæ²¡æœ‰è¢«åˆå§‹åŒ–çš„å˜é‡</li>
<li>â€¦â€¦</li>
</ul>
<p>è€Œè¿™é“é¢˜ç›®åˆ™æ˜¯åœ¨ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ a.out åï¼Œæ¸…ç©º .data å’Œ .rodata<br>é¦–å…ˆä¸å¦¨æ­£å¸¸ç¼–å†™ä¸€ä¸ªè¾“å‡º â€œHello, world!â€ çš„ç¨‹åºï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Hello, world!\n&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>ç„¶åç¼–è¯‘ï¼Œå†æ‹–åˆ° IDA é‡Œ<br><img src="/p/f152ab1f/amn1.png"><br>å¯ä»¥å‘ç°ï¼Œæ­¤æ—¶çš„ â€œHello, world!â€ è¢«æ”¾åˆ°äº† .rodata èŠ‚ä¸­ï¼Œä¼šè¢«æ¸…é™¤æ‰ï¼Œæ‰€ä»¥è¿™æ ·å†™ä¸è¡Œ</p>
<p>ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²ä¼šè¢«æ”¾åˆ° .rodata ä¸­æ¸…é™¤ï¼Œå†™æˆå…¨å±€å˜é‡åˆä¼šæ”¾åˆ° .data ä¸­<br>ä½†æ˜¯ï¼Œå¦‚æœå†™æˆå±€éƒ¨å˜é‡å‘¢ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">char</span> str[] = <span class="string">&quot;Hello, world!\n&quot;</span>;</span><br><span class="line"><span class="built_in">printf</span>(str);</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘ï¼Œæ‹–åˆ° IDA é‡Œ<br><img src="/p/f152ab1f/amn2.png"><br>å¯ä»¥çœ‹å‡ºï¼Œè¿™æ¬¡çš„å­—ç¬¦ä¸²ç›´æ¥å†™åˆ°äº† .text èŠ‚ä¸­ï¼Œåˆ æ‰äº† .data .rodata ä¹Ÿæ²¡æœ‰å½±å“<br>æ‰€ä»¥æŠŠè¿™ä¸ªä»£ç äº¤ä¸Šå»å°±å¯ä»¥è¾“å‡º â€œHello, world!â€œ æ‹¿åˆ° flag äº† </p>
<p>æ¸…é™¤è®°å¿†ç›´æ¥æŠŠ .text èŠ‚å…¨åˆ æ‰äº†ï¼Œæƒ³äº†å¾ˆä¹…ä¹Ÿä¸çŸ¥é“å’‹æï¼Œè™½ç„¶å¯ä»¥ __attribute__ ((section (â€œâ€¦â€))) æ¥æŠŠå‡½æ•°æˆ–å˜é‡å¡åˆ°æŒ‡å®šçš„èŠ‚ä¸­ã€‚ä½†è¿˜æ˜¯ä¸æ¸…æ¥šè¦æ€ä¹ˆè§£å†³æ®µé”™è¯¯çš„é—®é¢˜qwq </p>
<hr>
<h2 id="Easy-RSA"><a href="#Easy-RSA" class="headerlink" title="Easy RSA"></a>Easy RSA</h2><blockquote>
<p>è‡ªä» Hackergame 2018 å…¬ç„¶æ­éœ²äº†å¤§æ•´æ•°å¯ä»¥è¢«ç¥ç«¥å£ç®—åˆ†è§£çš„äº‹å®ï¼ŒRSA åœ¨ hackergame ä¸­å·²ç»åªèƒ½å¤„äºä½åˆ†å€¼çš„åœ°ä½äº†ã€‚å¦‚æœä¸åœ¨å…¶åç§°å‰é¢åŠ ä¸Š Easy è¿™ä¸ªå•è¯ï¼Œä¼¼ä¹å°±ä¼šæ˜¾å¾—å®Œå…¨å¯¹ä¸èµ·å…¶ä»–é¢˜ç›®ã€‚</p>
<p>æ›´ä½•å†µï¼Œåœ¨æœ¬é¢˜çš„é™„ä»¶ä¸­ï¼Œä½ è¿˜è·å¾—äº†æ„é€  p å’Œ q çš„æ–¹å¼ã€‚æ•°ç†åŸºç¡€æ‰å®çš„ä½ åº”è¯¥å¯ä»¥è½»æ¾è§£å†³è¿™äº›é—®é¢˜å§ã€‚</p>
</blockquote>
<p><del>è°¢é‚€ï¼Œæ²¡æœ‰æ•°ç†åŸºç¡€</del></p>
<p>çœ‹ä»£ç ï¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">e = <span class="number">65537</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_p</span>():</span></span><br><span class="line">    x = <span class="number">11124440021748127159092076861405454814981575144744508857178576572929321435002942998531420985771090167262256877805902135304112271641074498386662361391760451</span></span><br><span class="line">    y = <span class="number">11124440021748127159092076861405454814981575144744508857178576572929321435002942998531420985771090167262256877805902135304112271641074498386662361391661439</span></span><br><span class="line">    value_p = sympy.nextprime((math.factorial(y)) % x)  <span class="comment"># Hintï¼šè¿™é‡Œç›´æ¥è®¡ç®—ä¼šæº¢å‡ºï¼Œè¯·ä½ ä»”ç»†è§‚å¯Ÿ x å’Œ y çš„ç‰¹å¾</span></span><br><span class="line">    <span class="keyword">return</span> value_p</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_q</span>():</span></span><br><span class="line">    value = [getPrime(<span class="number">256</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">        value.append(sympy.nextprime(value[i - <span class="number">1</span>]))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;value[-1] = &quot;</span>, value[-<span class="number">1</span>])</span><br><span class="line">    <span class="comment"># value[-1] = 80096058210213458444437404275177554701604739094679033012396452382975889905967</span></span><br><span class="line">    n = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        n = n * value[i]</span><br><span class="line">    q = getPrime(<span class="number">512</span>)</span><br><span class="line">    value_q = <span class="built_in">pow</span>(q, e, n)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;value_q = &quot;</span>, value_q)</span><br><span class="line">    <span class="comment"># value_q = 5591130088089053683141520294620171646179623062803708281023766040254675625012293743465254007970358536660934858789388093688621793201658889399155357407224541324547522479617669812322262372851929223461622559971534394847970366311206823328200747893961649255426063204482192349202005330622561575868946656570678176047822163692259375233925446556338917358118222905050574458037965803154233167594946713038301249145097770337253930655681648299249481985768272321820718607757023350742647019762122572886601905212830744868048802864679734428398229280780215896045509020793530842541217790352661324630048261329493088812057300480085895399922301827190211956061083460036781018660201163819104150988531352228650991733072010425499238731811243310625701946882701082178190402011133439065106720309788819</span></span><br><span class="line">    <span class="keyword">return</span> sympy.nextprime(q)</span><br><span class="line"></span><br><span class="line"><span class="comment"># this destroyes the rsa cryptosystem</span></span><br><span class="line">p = get_p()</span><br><span class="line">q = get_q()</span><br><span class="line"></span><br><span class="line">m = <span class="built_in">int</span>.from_bytes(<span class="built_in">open</span>(<span class="string">&quot;flag.txt&quot;</span>, <span class="string">&quot;rb&quot;</span>).read(), <span class="string">&quot;big&quot;</span>)</span><br><span class="line">c = <span class="built_in">pow</span>(m, e, p * q)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;c = &quot;</span>, c)</span><br><span class="line"><span class="comment"># c = 110644875422336073350488613774418819991169603750711465190260581119043921549811353108399064284589038384540018965816137286856268590507418636799746759551009749004176545414118128330198437101472882906564195341277423007542422286760940374859966152871273887950174522820162832774361714668826122465471705166574184367478</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸­è¦è§£å†³çš„å°±æ˜¯ <code>get_p()</code> ä¸­ y! % x æº¢å‡ºçš„é—®é¢˜ï¼Œä»¥åŠ <code>get_q()</code> ä¸­ q æ˜¯å“ªä¸ªéšæœºçš„512ä½è´¨æ•°çš„é—®é¢˜</p>
<h3 id="get-p"><a href="#get-p" class="headerlink" title="get_p"></a>get_p</h3><p>ä»£ç é‡Œä¹Ÿç»™äº† Hintï¼Œè§‚å¯Ÿ x å’Œ y çš„ç‰¹å¾ã€‚x å’Œ y éƒ½å¾ˆå¤§ï¼Œä½†æ˜¯ä¸¤ä¸ªçš„å·®å¹¶ä¸å¤§ï¼›è€Œä¸”å¯ä»¥ä¸¢åˆ° python é‡ŒéªŒè¯å‡º x æ˜¯ä¸€ä¸ªè´¨æ•°<br>æ‰€ä»¥å¯ä»¥ä½¿ç”¨<a href="https://en.wikipedia.org/wiki/Wilson's_theorem"><strong>å¨å°”é€Šå®šç†</strong></a><br>ä¹ŸæŸ¥åˆ°äº†å¨å°”é€Šå®šç†åœ¨ RSA é¢˜ç›®ä¸­çš„åº”ç”¨ï¼š<a href="https://blog.csdn.net/xiao_han_a/article/details/118974504">BUU-RSA [RoarCTF2019]babyRSA</a></p>
<p>è¦æ±‚ y! % xï¼ˆxæ˜¯è´¨æ•°ï¼‰<br>æ ¹æ®å¨å°”é€Šå®šç†ï¼Œæœ‰</p>
<p>$$<br>(x - 1)! \equiv -1\pmod{x}<br>$$</p>
<p>æ‰€ä»¥ï¼š</p>
<p>$$<br>y!\times \frac{(x - 1)!}{y!}\equiv -1\pmod{x}<br>$$</p>
<p>ä»¤ $k = \dfrac{(x - 1)!}{y!} = (y+1)(y+2)â€¦(x-1)x$ ï¼Œæ‰€ä»¥æœ‰ï¼š</p>
<p>$$<br>y!\equiv -\mathrm{inv}(k, x)\pmod{x}<br>$$</p>
<p>ï¼ˆå…¶ä¸­ $\mathrm{inv}(k, x)$ è¡¨ç¤ºæ¨¡ x ä¸‹ k çš„é€†å…ƒï¼‰<br>æ‰€ä»¥é‡å†™ get_p() å³å¯æ­£ç¡®çš„å¾—åˆ° pï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_p</span>():</span></span><br><span class="line">    x = ...</span><br><span class="line">    y = ...</span><br><span class="line">    k = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(y + <span class="number">1</span>, x):</span><br><span class="line">        k = (k * i) % x </span><br><span class="line">    res = (-gmpy2.invert(k, x)) % x </span><br><span class="line">    <span class="keyword">return</span> sympy.nextprime(res)</span><br></pre></td></tr></table></figure>

<h3 id="get-q"><a href="#get-q" class="headerlink" title="get_q"></a>get_q</h3><p>ç›¸æ¯”æ¥è¯´ï¼Œget_q å°±æ²¡é‚£ä¹ˆéœ€è¦æŠ€å·§äº†<br>ç»™å‡ºäº† value[-1] çš„å€¼ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨ <code>sympy.prevprime</code> é€†æ¨å‡ºæ•´ä¸ª value æ•°ç»„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">value = [<span class="number">80096058210213458444437404275177554701604739094679033012396452382975889905967</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">    value.append(sympy.prevprime(value[i - <span class="number">1</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;value[-1] = &quot;</span>, value[-<span class="number">1</span>])</span><br></pre></td></tr></table></figure>

<p>åé¢è®¡ç®— value_q ç»†çœ‹å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ª RSA ç®—æ³•ï¼š</p>
<ul>
<li>qï¼šå¯†æ–‡</li>
<li>eï¼šç§é’¥</li>
<li>value_qï¼šæ˜æ–‡</li>
<li>nï¼šå°±æ˜¯ nï¼Œåªä¸è¿‡ä¸æ˜¯ä¸¤ä¸ªè´¨æ•°ç›¸ä¹˜ï¼Œæ˜¯åä¸ªè´¨æ•°ç›¸ä¹˜ </li>
</ul>
<p>åä¸ªè´¨æ•°ç›¸ä¹˜å¾—åˆ° n çš„ RSA ç®—æ³•ä¹Ÿä¸€æ ·ï¼Œå› ä¸º RSA çš„æ­£ç¡®æ€§å¹¶æ²¡æœ‰è¦æ±‚ n ä¸€å®šæ˜¯ä¸¤ä¸ªå¤§è´¨æ•°ç›¸ä¹˜ï¼Œè¿™æ ·åªæ˜¯éš¾ä»¥ç ´è§£ä¿è¯å®‰å…¨æ€§<br>è§£å†³è¿™ä¸ªåŒæ ·ä¹Ÿæ˜¯éœ€è¦å…¬é’¥ dï¼Œæ‰€ä»¥éœ€è¦ phi(n)<br>æ ¹æ®<a href="https://en.wikipedia.org/wiki/Euler%27s_totient_function">æ¬§æ‹‰å‡½æ•°</a>çš„æ€§è´¨ï¼Œphi(n) ç­‰äº n çš„æ‰€æœ‰è´¨å› æ•°å‡ä¸€çš„ç§¯<br>å³ phi(n) = (value[0] - 1) * (value[1] - 1) * â€¦ * (value[9] - 1)</p>
<p>å†è§£å¯†å³å¯å¾—åˆ°å¯†æ–‡ qï¼Œç„¶åä¹Ÿå°±å¾—åˆ°äº† get_q çš„ç»“æœ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n = phi = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    n = n * value[i]</span><br><span class="line">    phi *= (value[i] - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">value_q = ...</span><br><span class="line">d = <span class="built_in">pow</span>(e, -<span class="number">1</span>, phi) </span><br><span class="line">q = <span class="built_in">pow</span>(value_q, d, n)</span><br><span class="line"><span class="keyword">return</span> sympy.nextprime(q)</span><br></pre></td></tr></table></figure>

<h3 id="flag"><a href="#flag" class="headerlink" title="flag"></a>flag</h3><p>æå®šäº† get_p å’Œ get_q ä¹‹åå°±å¯ä»¥ç›´æ¥è§£å‡º flag äº†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">e = <span class="number">65537</span></span><br><span class="line">p = get_p()</span><br><span class="line">q = get_q()</span><br><span class="line"></span><br><span class="line">c = ...</span><br><span class="line">d = <span class="built_in">pow</span>(e, -<span class="number">1</span>, (p-<span class="number">1</span>) * (q-<span class="number">1</span>))</span><br><span class="line">m = <span class="built_in">pow</span>(c, d, p * q)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>.to_bytes(m, <span class="number">30</span>, byteorder=<span class="string">&quot;big&quot;</span>))</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="åŠ å¯†çš„-U-ç›˜"><a href="#åŠ å¯†çš„-U-ç›˜" class="headerlink" title="åŠ å¯†çš„ U ç›˜"></a>åŠ å¯†çš„ U ç›˜</h2><p>ï¼ˆæœ¬æ¥æŒºå¥½åšçš„ä¸€é“é¢˜ï¼Œæ€ä¹ˆé¢˜ç»™çš„æç¤ºæˆ‘å°±ç¡¬æ˜¯æ²¡é¢†ä¼šåˆ°ï¼‰</p>
<blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªå…³äº LUKS (Linux Unified Key Setup) çš„æ•…äº‹ã€‚</p>
<p>ç¬¬ä¸€å¤©<br>å° Tï¼šã€Œä½ è¦çš„éšæœºè¿‡ç¨‹çš„è¯¾ä»¶æˆ‘å¸®ä½ æ‹·å¥½äº†ï¼Œåœ¨è¿™ä¸ª U ç›˜é‡Œï¼ŒLUKS åŠ å¯†çš„å¯†ç æ˜¯ suijiguocheng123123ã€‚ã€<br>å° Zï¼šã€Œå•Šï¼Œä½ åˆæäº† Linux æ–‡ä»¶ç³»ç»ŸåŠ å¯†ï¼ŒçœŸæ‹¿ä½ æ²¡åŠæ³•ã€‚æˆ‘ç°åœ¨ä¸æ–¹ä¾¿ç”¨ Linuxï¼Œæˆ‘ç›´æ¥æŠŠè¿™å—ç›˜åšæˆç£ç›˜é•œåƒæ–‡ä»¶å†å›å»å¤„ç†å§ã€‚ã€</p>
<p>ç¬¬äºŒå¤©<br>å° Zï¼šã€Œè°¢è°¢ä½ æ˜¨å¤©å¸®æˆ‘æ‹·çš„è¯¾ä»¶ã€‚ä½ æ¯æ¬¡éƒ½æè¿™ä¸ªåŠ å¯†ï¼Œå®ƒçœŸçš„å®‰å…¨å—ï¼Ÿã€<br>å° Tï¼šã€Œå½“ç„¶äº†ï¼ä½ çœ‹ï¼Œä½ è¿˜ç»™æˆ‘ä¹‹åï¼Œæˆ‘å·²ç»æŠŠè¿™å—ç›˜çš„å¼±å¯†ç æ”¹æ‰äº†ï¼Œç°åœ¨æ˜¯éšæœºç”Ÿæˆçš„å¼ºå¯†ç ï¼Œè¿™æ ·é™¤äº†æˆ‘è‡ªå·±ï¼Œä¸–ç•Œä¸Šä»»ä½•äººéƒ½æ— æ³•è§£å¯†å®ƒäº†ã€‚ã€<br>å° Zï¼šã€Œæˆ‘å¯ä¸ä¿¡ã€‚ã€<br>å° Tï¼šã€Œä½ ä¸ä¿¡ï¼Ÿä½ çœ‹ï¼Œæˆ‘ç°åœ¨å¾€ U ç›˜é‡Œæ”¾ä¸€ä¸ª flag æ–‡ä»¶ï¼Œç„¶åè¿™ä¸ª U ç›˜å°±ç»™ä½ äº†ï¼Œä½ ç»å¯¹è§£å¯†ä¸å‡ºæ¥è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚å½“åˆæ LUKS çš„æ—¶å€™æˆ‘å¯ç ”ç©¶äº†å¥½å‡ å¤©ï¼Œç­ä¸Šå¯æ²¡äººæ¯”æˆ‘æ›´æ‡‚åŠ å¯†ï¼ã€</p>
</blockquote>
<p>ä¸€å…±ç»™äº†ä¸¤ä¸ª img æ–‡ä»¶ï¼Œé€šè¿‡ file å¯ä»¥çœ‹å‡ºéƒ½æ˜¯ DOS/MBR boot sector</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ file *.img </span><br><span class="line">day1.img:      DOS/MBR boot sector; partition 1 : ID=0xee, start-CHS (0x0,0,2), end-CHS (0x3ff,255,63), startsector 1, 40959 sectors, extended partition table (last)</span><br><span class="line">day2.img:      DOS/MBR boot sector; partition 1 : ID=0xee, start-CHS (0x0,0,2), end-CHS (0x3ff,255,63), startsector 1, 40959 sectors, extended partition table (last)</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥å…ˆç›´æ¥ 7z æå–ï¼Œå¾—åˆ°ä¸¤ä¸ªæ–°çš„ imgï¼Œå† fileï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ file *.img </span><br><span class="line">My Disk.img:   LUKS encrypted file, ver 2 [, , sha256] UUID: e9a660d5-4a91-4dca-bda5-3f6a49eea998</span><br><span class="line">My Disk 2.img: LUKS encrypted file, ver 2 [, , sha256] UUID: e9a660d5-4a91-4dca-bda5-3f6a49eea998</span><br></pre></td></tr></table></figure>
<p>å‘ç°éƒ½æ˜¯ LUKS encrypted file</p>
<p>åœ¨ Kali Linux é‡Œå°è¯•ç›´æ¥æŒ‚è½½ç¬¬ä¸€ä¸ª imgï¼Œè¦æ±‚è¾“å…¥å¯†ç ï¼ŒæŠŠé¢˜ç»™çš„å¯†ç è¾“å…¥å°±å¯ä»¥çœ‹åˆ° â€œè¯¾ä»¶â€</p>
<p>ä»¥ä¸Šéƒ½æ˜¯å·²çŸ¥çš„è¯•éªŒéƒ¨åˆ†ï¼ŒçœŸæ­£è¦åšçš„æ˜¯è§£å¼€ç¬¬äºŒä¸ªæœªçŸ¥å¯†ç çš„ LUKS img<br>å·²çŸ¥ç£ç›˜çš„åŠ å¯†ä½¿ç”¨çš„æ˜¯ luks2ï¼Œåœ¨ç½‘ä¸ŠæŸ¥äº†ç ´è§£ luks2 ä¹‹ç±»çš„éƒ½è¯´ luks2 <strong>ä¸å¯ç ´è§£</strong>ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨å·²çŸ¥çš„å¯†ç å­—å…¸æ¥çˆ†ç ´<br>ä½†æ˜¯é¢˜é‡Œè¯´äº† â€œ<strong>éšæœºç”Ÿæˆ</strong>çš„å¼ºå¯†ç â€ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯æ²¡æœ‰å¯†ç å­—å…¸çš„</p>
<p>å…¶å®è¿™é“é¢˜çš„æœ€å¤§æç¤ºå°±åœ¨äºå®ƒç»™äº†ä¸¤ä¸ª imgï¼Œæ—¢ç„¶ç¬¬ä¸€ä¸ª img æ‰“å¼€åä»…ä»…æ˜¯ä¸€ä¸ªè¯¾ä»¶ï¼Œå¦‚æœå®ƒçš„ç”¨å¤„ä»…ä»…æ˜¯ç”¨æ¥è¯•éªŒ luks æ€ä¹ˆæ‰“å¼€çš„è¯ï¼Œæ ¹æœ¬å®ƒæ²¡å¿…è¦ç»™å‡º<br>æ‰€ä»¥ç¬¬ä¸€ä¸ª img è‚¯å®šè¿˜æ˜¯æœ‰ç”¨çš„ã€‚</p>
<p>å†çœ‹é¢˜ç›®ï¼Œåå¤è¯´äº† U ç›˜ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ª img åº”è¯¥æ˜¯åŒä¸€ä¸ª U ç›˜çš„é•œåƒæ–‡ä»¶ï¼Œåªæ˜¯æ›´æ”¹äº†å¯†ç è€Œå·²ï¼ˆfile çœ‹åˆ°çš„ uuid ä¹Ÿæ˜¯ä¸€è‡´çš„ï¼‰<br>äºæ˜¯ç»§ç»­å¿…åº”ï¼Œå‘ç°åŒä¸€ä¸ªç£ç›˜çš„ <code>master-key</code> æ˜¯ä¸€æ ·çš„ï¼Œè€Œä¸”å¯ä»¥ç”¨ master-key æ¥æ·»åŠ å¯†ç æ¢å¤ç£ç›˜ï¼ˆè§ï¼š<a href="https://www.thegeekstuff.com/2016/03/cryptsetup-lukskey/">10 Linux cryptsetup Examples for LUKS Key Management</a>ï¼‰</p>
<p>æ‰€ä»¥å°±è·Ÿç€æ–‡ç« é‡Œçš„åšæ³•ï¼Œä»ç¬¬ä¸€ä¸ª img ä¸­æå–å‡º master-keyï¼Œç„¶åç”¨å®ƒæ¥æä¾› AddKey çš„æƒé™ã€‚æ·»åŠ äº†æ–° passphrase åå°±å¯ä»¥ç”¨æ–°å¯†ç æ‰“å¼€ç£ç›˜äº†ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ cryptsetup luksDump --dump-master-key MyDisk.img  <span class="comment"># è¾“å‡º master-key</span></span><br><span class="line">...</span><br><span class="line">MK dump:    be 97 db 91 5c 30 47 ce 1c 59 c5 c0 8c 75 3c 40 </span><br><span class="line">            72 35 85 9d fe 49 c0 52 c4 f5 26 60 af 3e d4 2c </span><br><span class="line">            ec a3 60 53 aa 96 70 4d f3 f2 ff 56 8f 49 a1 82 </span><br><span class="line">            60 18 7c 58 d7 6a ec e8 00 c1 90 c1 88 43 f8 9a</span><br><span class="line">$ cat <span class="string">&quot;be...9a&quot;</span> &gt; master_key.txt <span class="comment"># å­˜å…¥æ–‡ä»¶</span></span><br><span class="line">$ xxd -r -p master_key.txt master_key.bin <span class="comment"># è½¬ä¸ºäºŒè¿›åˆ¶</span></span><br><span class="line">$ cryptsetup luksAddKey MyDisk2.img --master-key-file &lt;(cat master_key.bin) <span class="comment"># æ·»åŠ å¯†ç </span></span><br><span class="line">Enter new passphrase <span class="keyword">for</span> key slot:    <span class="comment"># è¾“å…¥æ–°å¯†ç å³å¯ï¼Œå› ä¸ºmaster-key-fileç›¸å½“äºæä¾›äº†åŸå§‹å¯†ç </span></span><br><span class="line">Verify passphrase: </span><br></pre></td></tr></table></figure>
<p>ï¼ˆä¸€å®šè¦ç”¨ root æƒé™æ‰å¯ä»¥åŠ å¯†ç ï¼‰<br>ç„¶åæŒ‚è½½ã€è¾“å…¥å¯†ç ï¼Œå°±å¯ä»¥çœ‹åˆ° flag.txt äº†</p>
<hr>
<h2 id="Micro-World"><a href="#Micro-World" class="headerlink" title="Micro World"></a>Micro World</h2><blockquote>
<p>å®‡å®™ä¸­æŸä¸€ç‰‡æå…¶å¾®å°çš„åŒºåŸŸé‡Œçš„ç²’å­è¢«ä¸€è‚¡ç¥ç§˜åŠ›é‡åˆå§‹åŒ–è®¾ç½®æˆäº† flag çš„å½¢çŠ¶ï¼Œç¨‹åºå¿ å®åœ°è®°å½•äº†ä¸€æ®µæ—¶é—´ä¹‹åè¿™ç‰‡åŒºåŸŸçš„ç²’å­è¿åŠ¨æƒ…å†µã€‚</p>
</blockquote>
<p>æ‹¿åˆ°äº† exe æ–‡ä»¶ï¼Œçœ‹èµ·æ¥æŒºç²¾è‡´ï¼Œè¿è¡Œèµ·æ¥æ˜¯ä¸€äº›ç‚¹è¿åŠ¨ç¢°æ’çš„åœºæ™¯<br>æ‹–åˆ° IDA é‡Œçœ‹çœ‹ï¼Œå‘ç°äº† __main__ ä»¥åŠ .rdata é‡Œä¸€äº› py æœ‰å…³çš„å­—ç¬¦ä¸²ï¼š<br><img src="/p/f152ab1f/microworld.png"><br>æ‰€ä»¥æ¨æµ‹æ˜¯ä½¿ç”¨ python ç¼–å†™çš„ï¼Œç„¶åç”¨ pyinstaller æ‰“åŒ…</p>
<p>è¿™æ ·çš„è¯è¯•ç€ç”¨ <a href="https://github.com/extremecoders-re/pyinstxtractor">pyinstxtractor</a> è§£åŒ… .exeï¼ŒæˆåŠŸå¾—åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹<br>é‡Œé¢æ˜¯ä¸€å † .pyc .pyd .dll æ–‡ä»¶ï¼Œä»åå­—å°±å¯ä»¥çœ‹å‡ºå¤§éƒ¨åˆ†æ˜¯ import çš„åŒ…ï¼Œåªæœ‰ä¸€ä¸ªç‰¹åˆ«çš„ 2.pyc<br>æ‰€ä»¥è¿™ä¸ªåº”è¯¥å°±æ˜¯ç¼–è¯‘åçš„æºç äº†</p>
<p>æ¥ä¸‹æ¥ç”¨ <a href="https://github.com/rocky/python-uncompyle6/">uncompyle6</a> æ¥åç¼–è¯‘ pyc æ–‡ä»¶ï¼Œè¾“å‡ºå¾—åˆ°äº†æºç  2.py<br>å°è¯•è¿è¡Œï¼Œå‘ç°è·‘èµ·æ¥ä¹‹ååªæœ‰ä¸€ä¸ªç‚¹åœ¨è¿åŠ¨ï¼Œåº”è¯¥æ˜¯åç¼–è¯‘æ—¶å‡ºäº†äº›é—®é¢˜<br>äºæ˜¯å¼€å§‹çœ‹æºç  </p>
<p>åŸºæœ¬ä¸Šç®€å•è¯´å°±æ˜¯ï¼Œåˆå§‹æœ‰ä¸€äº›æ•°æ®ï¼Œè¡¨ç¤ºæ¯ä¸ªç‚¹çš„ä½ç½®å’Œé€Ÿåº¦ï¼Œç„¶åè¿è¡Œï¼Œæ¯æ¬¡è¿è¡Œéƒ½æ£€æµ‹ç¢°æ’ï¼Œç„¶åè·å¾—æ–°çš„ç‚¹ä½ç½®ï¼Œå†ç»˜åˆ¶å‡ºæ¥<br>è°ƒè¯•ä¸€ä¸‹ï¼Œè¾“å‡ºæ¯æ¬¡çš„ pointlistï¼Œå‘ç°ç¬¬ä¸€æ¬¡æ˜¯æ‰€æœ‰ç‚¹ï¼Œç¬¬äºŒæ¬¡å˜æˆ2ä¸ªï¼Œç¬¬ä¸‰æ¬¡å¾€åå°±åªæœ‰ä¸€ä¸ªäº†<br>æ‰€ä»¥é—®é¢˜å¤§æ¦‚å°±å‡ºåœ¨äº† next_pos_list å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">next_pos_list</span>(<span class="params">Pointlist</span>):</span></span><br><span class="line">    pointlist = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(Pointlist)):</span><br><span class="line">        <span class="keyword">for</span> point <span class="keyword">in</span> Pointlist[i + <span class="number">1</span>:]:</span><br><span class="line">            times = checkcrush(Pointlist[i], point)</span><br><span class="line">            <span class="keyword">if</span> times != <span class="literal">None</span>:</span><br><span class="line">                a, b = get_new_point(times, Pointlist[i], point)</span><br><span class="line">                pointlist.extend([a, b])</span><br><span class="line">                Pointlist[i].flag = <span class="number">0</span></span><br><span class="line">                point.flag = <span class="number">0</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">for</span> item <span class="keyword">in</span> Pointlist:</span><br><span class="line">                <span class="keyword">if</span> item.flag != <span class="number">0</span>:</span><br><span class="line">                    pointlist.append(Point((item.x + item.vx, item.y + item.vy), item.vx, item.vy))</span><br><span class="line">                <span class="keyword">for</span> poi <span class="keyword">in</span> pointlist:</span><br><span class="line">                    poi.x = poi.x % WIDTH</span><br><span class="line">                    poi.y = poi.y % HEIGHT</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">return</span> pointlist</span><br></pre></td></tr></table></figure>
<p>ä»”ç»†è¯»ä¸€è¯»ï¼Œå¯ä»¥å‘ç°è¿™é‡Œé¢çš„ for-else å—å¾ˆå¥‡æ€ªï¼Œå¯¼è‡´å¾ªç¯ç»“æŸå’Œ return éƒ½æ—©äº†ï¼Œæ‰€ä»¥æ ¹æ®å‡½æ•°çš„æ„æ€æ”¹ä¸€æ”¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">next_pos_list</span>(<span class="params">Pointlist</span>):</span></span><br><span class="line">    pointlist = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(Pointlist)):</span><br><span class="line">        <span class="keyword">for</span> point <span class="keyword">in</span> Pointlist[i + <span class="number">1</span>:]:</span><br><span class="line">            ...</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> Pointlist:</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">return</span> pointlist</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥æˆåŠŸè¿è¡Œäº†</p>
<p>ä½†æ˜¯ç”»é¢ä»ç„¶æ˜¯æ‚ä¹±çš„ã€‚å› ä¸ºé¢˜é‡Œè¯´äº† â€œè®°å½•äº†<strong>ä¸€æ®µæ—¶é—´ä¹‹å</strong>è¿™ç‰‡åŒºåŸŸçš„ç²’å­è¿åŠ¨æƒ…å†µâ€<br>æ‰€ä»¥éœ€è¦å°†è½¨è¿¹å¾€å‰æ¨ï¼Œæœ€æ–¹ä¾¿çš„æ–¹æ³•å°±æ˜¯æ›´æ”¹æ¯ä¸ªç‚¹çš„é€Ÿåº¦æ–¹å‘ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Pointlist = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> list_:</span><br><span class="line">    Pointlist.append(Point((item[<span class="number">0</span>], item[<span class="number">1</span>]), -item[<span class="number">2</span>], -item[<span class="number">3</span>]))</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œåç­‰å¾…ä¸€å°ä¼šå„¿å°±å¯ä»¥çœ‹åˆ°ç‚¹é€æ¸æœ‰åºï¼Œåœ¨æŸä¸€åˆ»æ±‡æˆäº† flagï¼š<br><img src="/p/f152ab1f/mwans.jpg"><br>è™½ç„¶ä¸å¤ªæ¸…æ™°ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥çŒœä¸ªå¤§æ¦‚</p>
<hr>
<p>åˆå†™äº†è›®é•¿çš„ï¼Œå‰©ä¸‹çš„æ”¾åœ¨<a href="/p/d11ec8ed.html">ä¸‹ä¸€ç¯‡</a><em>(:Ğ·ã€âˆ )</em></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://en.wikipedia.org/wiki/Wilson's_theorem">Wilsonâ€™s theorem - wikipedia</a></li>
<li><a href="https://blog.csdn.net/xiao_han_a/article/details/118974504">BUU-RSA [RoarCTF2019]babyRSA - CSDN</a></li>
<li><a href="https://en.wikipedia.org/wiki/Euler%27s_totient_function">Eulerâ€™s totient function - wikipedia</a></li>
<li><a href="https://gitlab.com/cryptsetup/LUKS2-docs/blob/master/luks2_doc_wip.pdf">LUKS2 doc pdf</a></li>
<li><a href="https://www.thegeekstuff.com/2016/03/cryptsetup-lukskey/">10 Linux cryptsetup Examples for LUKS Key Management</a></li>
<li><a href="https://github.com/extremecoders-re/pyinstxtractor">pyinstxtractor</a></li>
<li><a href="https://github.com/rocky/python-uncompyle6/">uncompyle6</a></li>
</ul>
<div style="display: flex; justify-content: space-between;">

<p><a href="/p/f54b44c.html">&lt; #2</a></p>
<p><a href="/p/d11ec8ed.html">#4 &gt;</a></p>
</div>]]></content>
      <categories>
        <category>Writeup</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>Writeup</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒHackergame 2021ã€#2 Writup å¼€å±€ä¸Šåˆ†ç¯‡ 1</title>
    <url>/p/f54b44c.html</url>
    <content><![CDATA[<div style="display: flex; justify-content: space-between;">

<p><a href="/p/fd872e78.html">&lt; #1</a></p>
<p><a href="/p/f152ab1f.html">#3 &gt;</a></p>
</div>

<p>è¿™é‡Œæ¥<a href="/p/fd872e78.html">ä¸Šä¸€ç¯‡</a>ï¼ŒWriteup çš„æœ‰ï¼šå¤§ç åˆ€ã€å›¾ä¹‹ä¸Šã€èµ›åšå¨æˆ¿01ã€åŠ©è®°è¯1ã€pğŸ˜­q<br>æœ‰äº›è™½ç„¶ååã€åˆ†å€¼é«˜ï¼Œä½†æ˜¯æ€»ä½“å¹¶ä¸éš¾</p>
<span id="more"></span>
<hr>
<h2 id="FLAG-åŠ©åŠ›å¤§çº¢åŒ…"><a href="#FLAG-åŠ©åŠ›å¤§çº¢åŒ…" class="headerlink" title="FLAG åŠ©åŠ›å¤§çº¢åŒ…"></a>FLAG åŠ©åŠ›å¤§çº¢åŒ…</h2><blockquote>
<p>å‚ä¸æ´»åŠ¨ï¼ŒåŠ©åŠ›æŠ½å¥–ï¼é›†æ»¡ 1 ä¸ª flagï¼Œå³å¯æå– 1 ä¸ª flagã€‚</p>
<p>æ­å–œä½ ç§¯æ”’åˆ° 0.5â€¦â€¦ ä¸ª flagï¼Œ<br>å‰©ä½™æ—¶é—´ï¼š10åˆ†00ç§’</p>
<p>å·²æœ‰ 0 ä½å¥½å‹ä¸ºæ‚¨åŠ©åŠ›ã€‚</p>
<p>å°†å¦‚ä¸‹é“¾æ¥åˆ†äº«ç»™å¥½å‹ï¼Œå¯ä»¥è·å¾—å¥½å‹åŠ©åŠ›ï¼Œè·å¾—æ›´å¤š flagï¼šâ€¦â€¦</p>
</blockquote>
<p><del>è€å¹¶å¤•å¤•äº†</del>ï¼Œç»è¿‡ä¸€äº›æµ‹è¯•å’Œçœ‹è§„åˆ™å¯ä»¥çŸ¥é“ï¼Œip åœ¨åŒä¸€ /8 ç½‘æ®µçš„ç”¨æˆ·è¢«è§†ä¸ºåŒä¸€ç”¨æˆ·ï¼Œå³ ip åœ°å€çš„ç¬¬ä¸€ä¸ªç‚¹å‰é¢çš„æ•°å­—ä¸ä¸€æ ·æ‰æ˜¯ä¸åŒç”¨æˆ·<br>å†ç”¨è™šæ‹Ÿæœºå’Œæ‰‹æœºè¯•ä¸€ä¸‹ï¼Œå‘ç°æ¯ä¸ªç”¨æˆ·å¢åŠ çš„ flag æ•°é‡å¾ˆå°<br>æ‰€ä»¥æ¨æµ‹éœ€è¦200+ä¸ª ip åœ°å€ï¼Œè‚¯å®šä¸ä¼šè¦çœŸçš„è½¬å‘ï¼Œè€Œä¸”ä¹Ÿå¾ˆéš¾å‡‘å‡ºå¾ˆå¤šä¸åœ¨åŒä¸€ /8 ç½‘æ®µçš„ ip</p>
<p>äºæ˜¯åœ¨ BurpSuite é‡Œé¢æŠ“åŒ…å¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡ç‚¹å‡»â€œåŠ©åŠ›â€éƒ½ä¼šå‘é€ä¸€ä¸ªåˆ°åŠ©åŠ›é“¾æ¥çš„ POSTï¼Œå†…å®¹ä¸º ip åœ°å€<br><img src="/p/f54b44c/burp.png"><br>ç„¶åå°†å…¶å‘é€åˆ° Repeater ä¸­ï¼Œå°è¯•æ›´æ”¹ ip åœ°å€ï¼Œå¾—åˆ°çš„ Response ä¸­è¯´ â€œå¤±è´¥ï¼æ£€æµ‹åˆ°å‰åç«¯æ£€æµ‹ IPv4 åœ°å€ä¸åŒ¹é…â€</p>
<p>æ‰€ä»¥ä»…ä»…æ›´æ”¹ POST å†…å®¹çš„ ip æ˜¯ä¸å¤Ÿçš„ï¼Œè€Œæä¾›ç»™æ£€æµ‹çš„å†…å®¹ä¹Ÿä»…ä»…æ˜¯ä¸€ä¸ª POSTï¼Œæ‰€ä»¥å¯ä»¥æ›´æ”¹ POST å¤´ï¼Œæ·»åŠ  <strong>X-Forwarded-For</strong><br>ç„¶åä½¿ç”¨ python å°±å¯ä»¥å¾ªç¯å‘é€ POST å¹¶ä¼ªé€  ip åœ°å€å¾—åˆ°256ä¸ªåŠ©åŠ›äº†ï¼Œåˆšå¥½è¾¾åˆ°1ä¸ªflagï¼š<br>ï¼ˆè¦æ³¨æ„ sleep ä¸€æ®µæ—¶é—´ï¼Œä¸ç„¶ä¼šå‡ºç°æ“ä½œè¿‡å¿«æ‹’ç»çš„æƒ…å†µï¼›ä¹Ÿä¸è¦ sleep è¿‡é•¿ï¼Œå¦åˆ™è¶…è¿‡10åˆ†é’Ÿ flag å°±æ— æ•ˆäº†ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests </span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://202.38.93.111:10888/invite/...&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tqdm(total=<span class="number">256</span>) <span class="keyword">as</span> pbar:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">        res = requests.post(url, data=&#123;<span class="string">&quot;ip&quot;</span>: <span class="string">f&quot;<span class="subst">&#123;i&#125;</span>.0.0.0&quot;</span>&#125;, headers=&#123;<span class="string">&quot;X-Forwarded-For&quot;</span>: <span class="string">f&quot;<span class="subst">&#123;i&#125;</span>.0.0.0&quot;</span>&#125;)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;æˆåŠŸ&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> res.text:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;[x] å¤±è´¥&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(res.text)</span><br><span class="line">        time.sleep(<span class="number">1.5</span>)</span><br><span class="line">        pbar.update(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å›¾ä¹‹ä¸Šçš„ä¿¡æ¯"><a href="#å›¾ä¹‹ä¸Šçš„ä¿¡æ¯" class="headerlink" title="å›¾ä¹‹ä¸Šçš„ä¿¡æ¯"></a>å›¾ä¹‹ä¸Šçš„ä¿¡æ¯</h2><blockquote>
<p>å° T å¬è¯´ GraphQL æ˜¯ä¸€ç§ç‰¹åˆ«çš„ API è®¾è®¡æ¨¡å¼ï¼Œä¹Ÿæ˜¯ RESTful API çš„æœ‰åŠ›ç«äº‰è€…ï¼Œæ‰€ä»¥ä»–å†™äº†ä¸ªå°ç½‘ç«™æ¥å®éªŒè¿™é¡¹æŠ€æœ¯ã€‚</p>
<p>ä½ èƒ½é€šè¿‡è¿™ä¸ªå…¨æ–°çš„æ¥å£ï¼Œè·å–åˆ°æ²¡æœ‰å…¬å¼€å‡ºæ¥çš„ç®¡ç†å‘˜çš„é‚®ç®±åœ°å€å—ï¼Ÿ</p>
</blockquote>
<p>é¢˜ç›®ä¿¡æ¯ç»™çš„å¾ˆå……åˆ†ï¼Œç”¨çš„æ˜¯ GraphQLï¼Œè¦ç”¨å…¶å¾—åˆ° admin çš„é‚®ç®±</p>
<p>æ²¡æ¥è§¦è¿‡ GraphQLï¼Œæ‰€ä»¥ç›´æ¥å¿…åº”ï¼ˆé€ƒ<br>æŸ¥åˆ°äº†å¾ˆå¤šæœ‰ç”¨çš„ä¸œè¥¿ï¼š</p>
<ul>
<li><a href="https://graphql.cn/">GraphQLå®˜ç½‘</a>ï¼šäº†è§£ä¸€ä¸‹ GraphQL æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œè¦æ€ä¹ˆç”¨</li>
<li><a href="https://www.electronjs.org/apps/graphiql">GraphiQL</a>ï¼šä¸€ä¸ªè¿›è¡Œ GraphQL æŸ¥è¯¢çš„ GUI</li>
<li><a href="https://zhuanlan.zhihu.com/p/390876937">ã€å®‰å…¨è®°å½•ã€‘ç©è½¬GraphQL - DVGAé¶åœºï¼ˆä¸Šï¼‰- çŸ¥ä¹</a></li>
<li><a href="https://apis.guru/graphql-voyager/">GraphQL Voyager</a>ï¼šå¯è§†åŒ–ç°å® GraphQL å†…çœå‡ºçš„ç»“æ„</li>
</ul>
<p>ç®€è€Œè¨€ä¹‹ï¼ŒGraphQL å°±æ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡ä¸€æ¬¡ query è¯·æ±‚æŸ¥è¯¢å¤šä¸ªèµ„æºçš„ API æ¨¡å¼ï¼Œåªè¦ <code>ç½‘å€/graphql?query=...</code> å°±å¯ä»¥å®ç°æŸ¥è¯¢<br>æœ‰äº›ä½¿ç”¨ GraphQL çš„ç½‘ç«™å¯ä»¥ç›´æ¥é€šè¿‡è®¿é—® <code>ç½‘å€/graphiql</code> å¾—åˆ°æŸ¥è¯¢çš„ GUI<br>ä½†æ˜¯æœ¬é¢˜ä¸­ç¦æ­¢äº†ï¼Œä½†å¯ä»¥ä½¿ç”¨ GraphiQL è½¯ä»¶æ¥è¿›è¡ŒæŸ¥è¯¢</p>
<p>åœ¨ç¬¬ä¸‰ä¸ªé“¾æ¥ä¸­å¯ä»¥äº†è§£åˆ°ï¼Œå¯ä»¥åˆ©ç”¨ GraphQL çš„å†…çœæŸ¥è¯¢æ¥æ³„éœ²å‡ºå†…éƒ¨çš„ç»“æ„ï¼ŒæŠŠå…¶ä¸­çš„æŸ¥è¯¢è¯­å¥ä¸¢åˆ° GraphiQL ä¸­å¯ä»¥å¾—åˆ°ç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query IntrospectionQuery &#123; __schema &#123; queryType &#123; name &#125; mutationType &#123; name &#125; subscriptionType &#123; name &#125; types &#123; ...FullType &#125; directives &#123; name description locations args &#123; ...InputValue &#125; &#125; &#125;&#125;fragment FullType on __Type &#123; kind name description fields(includeDeprecated: true) &#123; name description args &#123; ...InputValue &#125; type &#123; ...TypeRef &#125; isDeprecated deprecationReason &#125; inputFields &#123; ...InputValue &#125; interfaces &#123; ...TypeRef &#125; enumValues(includeDeprecated: true) &#123; name description isDeprecated deprecationReason &#125; possibleTypes &#123; ...TypeRef &#125;&#125;fragment InputValue on __InputValue &#123; name description type &#123; ...TypeRef &#125; defaultValue&#125;fragment TypeRef on __Type &#123; kind name ofType &#123; kind name ofType &#123; kind name ofType &#123; kind name ofType &#123; kind name ofType &#123; kind name ofType &#123; kind name ofType &#123; kind name &#125; &#125; &#125; &#125; &#125; &#125; &#125;&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/p/f54b44c/graphiql.png"></p>
<p>ç„¶åæŠŠç»“æœä¸¢åˆ° GraphQL Voyager ä¸­å°±å¯ä»¥å¾—åˆ°å¯è§†åŒ–çš„ç»“æ„ï¼š<br><img src="/p/f54b44c/graphql.png"></p>
<p>æ‰€ä»¥åªéœ€è¦æ ¹æ® id query ä¸€ä¸‹ user å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">query &#123; user(<span class="built_in">id</span>: <span class="number">1</span>) &#123; privateEmail, &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;user&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;privateEmail&quot;</span>: <span class="string">&quot;flag&#123;...&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="èµ›åšå¨æˆ¿"><a href="#èµ›åšå¨æˆ¿" class="headerlink" title="èµ›åšå¨æˆ¿"></a>èµ›åšå¨æˆ¿</h2><blockquote>
<p>è™½ç„¶è¿™æ˜¯ä½ çš„é¤å…ï¼Œä½†åªæœ‰æœºå™¨äººå¯ä»¥åœ¨å¨æˆ¿å·¥ä½œã€‚æœºå™¨äººç²¾ç¡®åœ°æŒ‰ç…§ç¨‹åºå·¥ä½œï¼Œåœ¨å¨æˆ¿ä¸­ç§»åŠ¨ï¼Œä»ç‰©å“æºå–å‡ºé£Ÿæï¼ŒæŒ‰ç…§èœè°±çš„é¡ºåºæŠŠé£Ÿæä¾æ¬¡æ”¾å…¥é”…å†…ã€‚</p>
<p>æœºå™¨äººä¸éœ€è¦ä¼‘æ¯ï¼Œåªéœ€è¦ä¸€ä¸ªæ™šä¸Šçš„æ—¶é—´æ¥å­¦ä¹ ä½ æ•™ç»™å®ƒçš„ç¨‹åºï¼Œåœ¨æ­¤ä¹‹åä½ å°±å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è®©æœºå™¨äººæ‰§è¡Œè¿™ä¸ªç¨‹åºï¼Œç¨‹åºçš„æ¯ä¸€æ­¥æ‰§è¡Œéƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿ä½ æ£€æŸ¥æœºå™¨äººåšèœçš„è¿‡ç¨‹ã€‚</p>
<p>å¦å¤–ä¸ºäº†ç¬¦åˆé£Ÿå“å®‰å…¨æ³•çš„è¦æ±‚ï¼Œèµ›åšå¨æˆ¿ä¸­çš„æœºå™¨äººåŒä¸€æ—¶é—´æ‰‹é‡Œåªèƒ½æ‹¿ä¸€ç§é£Ÿç‰©ï¼Œæ¯æ¬¡åšèœå‰éƒ½å¿…é¡»æ‰§è¡Œæ¸…ç†å¨æˆ¿çš„æ“ä½œï¼ŒæŠŠå„å¤„çš„é£Ÿç‰©æ®‹æ¸£æ¸…ç†æ‰ï¼Œç„¶åå›åˆ°å¨æˆ¿è§’è½å¾…å‘½ã€‚</p>
<p>æ¯å¤©çš„èœè°±å¯èƒ½ä¸åŒï¼Œä½†ä¹Ÿè®¸ä¹Ÿå­˜åœ¨ä¸€äº›è§„å¾‹ã€‚</p>
<p>å¯¹æœºå™¨äººç¼–ç¨‹å¯ä»¥ä½¿ç”¨çš„æŒ‡ä»¤æœ‰ï¼ˆn, m ä¸ºæ•´æ•°å‚æ•°ï¼Œç¨‹åºçš„è¡Œå·ä» 0 å¼€å§‹ï¼Œæ³¨æ„æŒ‡ä»¤ä¸­éœ€è¦æ­£ç¡®ä½¿ç”¨ç©ºæ ¼ï¼‰ï¼š</p>
<blockquote>
<p>å‘ä¸Š n æ­¥<br>å‘ä¸‹ n æ­¥<br>å‘å·¦ n æ­¥<br>å‘å³ n æ­¥<br>æ”¾ä¸‹ n ä¸ªç‰©å“<br>æ‹¿èµ· n ä¸ªç‰©å“<br>æ”¾ä¸‹ç›˜å­<br>æ‹¿èµ·ç›˜å­<br>å¦‚æœæ‰‹ä¸Šçš„ç‰©å“å¤§äºç­‰äº n å‘ä¸Šè·³è½¬ m è¡Œ<br>å¦‚æœæ‰‹ä¸Šçš„ç‰©å“å¤§äºç­‰äº n å‘ä¸‹è·³è½¬ m è¡Œ</p>
</blockquote>
<p>èµ¶ç´§è¿›å…¥èµ›åšå¨æˆ¿å¼€å§‹åšèœå§ï¼</p>
</blockquote>
<p>åˆšçœ‹é¢˜è¿˜æ˜¯æŒºæ‡µçš„ï¼Œæƒ³äº†å¥½åŠå¤©æ‰æ˜ç™½<br>ç®€å•è¯´æ¥å°±æ˜¯ï¼Œæ¯å¤©å¯ä»¥ç¼–å†™æ–°çš„ç¨‹åºï¼Œä½†æ˜¯åªèƒ½è¿è¡Œä¸€ä¸ªä¹‹å‰ç¼–å†™è¿‡çš„ç¨‹åº<br>æ¯ä¸ªç¨‹åºåªæœ‰å‡ ç§æŒ‡ä»¤å¯ä»¥ä½¿ç”¨ï¼Œéœ€è¦åœ¨å…¶ä¸­æ»¡è¶³èœè°±çš„é¡ºåºè¦æ±‚</p>
<p>è€Œé—®é¢˜åœ¨äºï¼Œç¼–å†™ç¨‹åºåçš„ç¬¬äºŒå¤©çš„èœè°±å¯èƒ½ä¼šä¸åŒï¼Œå¯¼è‡´å‰é¢ç¼–å†™çš„ç¨‹åºæ— æ³•ä½¿ç”¨<br>æ‰€ä»¥å°±éœ€è¦<em>é¢„æµ‹</em>ç¬¬äºŒå¤©çš„èœè°±</p>
<h3 id="Level-0"><a href="#Level-0" class="headerlink" title="Level 0"></a>Level 0</h3><p>å¯ä»¥çœ‹åˆ°ç¬¬ 0 å¤©çš„èœè°±æ˜¯ 1, 0ï¼Œä¹Ÿå°±æ˜¯è¦åœ¨åŒä¸€ä¸ªç¨‹åºä¸­ä¾æ¬¡å‘é”…(1,0)ä¸­æ”¾å…¥ 1 å·é£Ÿç‰©(0,2)å’Œ 0 å·é£Ÿç‰©(0,1)<br>éšä¾¿ç¼–å†™ç¨‹åºä¿å­˜ï¼Œç›´æ¥åˆ°ä¸‹ä¸€å¤©ï¼Œå¯ä»¥å‘ç°èœè°±å‘ç”Ÿäº†å˜åŒ–<br>å¤šæ¬¡å°è¯•ä¹‹åå‘ç°èœè°±<strong>åªæœ‰ 0,0 / 0,1 / 1,0 / 1,1 å››ç§</strong></p>
<p>æ‰€ä»¥åœ¨ç¬¬ 0 å¤©ç¼–å†™å­¦ä¹ å››ä¸ªç¨‹åºï¼Œåˆ°ä¸‹ä¸€å¤©å°±å¯ä»¥æ ¹æ®èœè°±æ¥æ‰§è¡Œäº†<br>ä¾‹å¦‚ç¨‹åº 1,0 å°±å¯ä»¥ç¼–å†™ä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å‘å³ 2 æ­¥</span><br><span class="line">æ‹¿èµ· 1 ä¸ªç‰©å“</span><br><span class="line">å‘å·¦ 2 æ­¥</span><br><span class="line">å‘ä¸‹ 1 æ­¥</span><br><span class="line">æ”¾ä¸‹ 1 ä¸ªç‰©å“</span><br><span class="line">å‘ä¸Š 1 æ­¥</span><br><span class="line">å‘å³ 1 æ­¥</span><br><span class="line">æ‹¿èµ· 1 ä¸ªç‰©å“</span><br><span class="line">å‘å·¦ 1 æ­¥</span><br><span class="line">å‘ä¸‹ 1 æ­¥</span><br><span class="line">æ”¾ä¸‹ 1 ä¸ªç‰©å“</span><br><span class="line">å‘ä¸Š 1 æ­¥</span><br></pre></td></tr></table></figure>
<p>åªè¦æ­£ç¡®äº†ä¸€å¤©ï¼Œå°±å¯ä»¥æ‹¿åˆ° flag äº†</p>
<h3 id="Level-1"><a href="#Level-1" class="headerlink" title="Level 1"></a>Level 1</h3><p>åªæœ‰ 1 ä¸ªé£Ÿç‰©ï¼Œèœè°±æ˜¯å¥½å¤š 0<br>åŒæ ·éšä¾¿ç¼–å†™ç¨‹åºä¿å­˜è¿›å…¥ä¸‹ä¸€å¤©ï¼Œå‘ç°èœè°±<strong>æ²¡æœ‰å˜åŒ–</strong>ï¼Œè¿˜æ˜¯ 73 ä¸ª 0<br>æ‰€ä»¥è¿™ä¸€å…³å¯èƒ½åªæ˜¯å¾ªç¯çš„æ•™ç¨‹<br>å¯ç”¨çš„æŒ‡ä»¤ä¸­æœ‰ä¸€æ¡ â€œå¦‚æœæ‰‹ä¸Šçš„ç‰©å“å¤§äºç­‰äº n å‘ä¸Šè·³è½¬ m è¡Œâ€<br>å¯ä»¥ç”¨å®ƒæ¥è¾¾åˆ°<strong>å¾ªç¯</strong>çš„æ•ˆæœ</p>
<p>åªéœ€è¦æ‹¿ 73 ä¸ªç‰©å“ï¼Œç„¶åå¾ªç¯æ”¾ä¸‹ç›´åˆ°æ‰‹ä¸­æ²¡æœ‰äº†å³å¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å‘å³ 1 æ­¥</span><br><span class="line">æ‹¿èµ· 73 ä¸ªç‰©å“</span><br><span class="line">å‘å·¦ 1 æ­¥</span><br><span class="line">å‘ä¸‹ 1 æ­¥</span><br><span class="line">æ”¾ä¸‹ 1 ä¸ªç‰©å“</span><br><span class="line">å¦‚æœæ‰‹ä¸Šçš„ç‰©å“å¤§äºç­‰äº 1 å‘ä¸Šè·³è½¬ 1 è¡Œ</span><br></pre></td></tr></table></figure>
<p>åŒæ ·ä¿å­˜ä¸‹ä¸€å¤©æ‰§è¡Œå°±å¯ä»¥æ‹¿åˆ° flag äº† </p>
<p><del>å‰©ä¸‹çš„ä¸¤ä¸ªçœ‹èµ·æ¥å¤§æ¦‚æ˜¯é€šè¿‡æºç æ¥æ¨æµ‹å‡ºèœè°±çš„ç”Ÿæˆæ–¹æ³•ï¼Œç„¶åç¼–å†™ç›¸åº”çš„æŒ‡ä»¤ï¼Œå¤ªéš¾äº†ï¼Œä¸ä¼šqwq</del></p>
<hr>
<h2 id="åŠ©è®°è¯"><a href="#åŠ©è®°è¯" class="headerlink" title="åŠ©è®°è¯"></a>åŠ©è®°è¯</h2><p>é¢˜ç›®æœ‰æ•ˆå†…å®¹ï¼š</p>
<blockquote>
<p>ä½ çš„å®¤å‹ç»ˆäºè¿å¤œèµ¶å®Œäº†ä»–çš„ Java è¯­è¨€ç¨‹åºè®¾è®¡çš„è¯¾ç¨‹å¤§ä½œä¸šã€‚çœ‹èµ·æ¥ä»–ä½¿ç”¨ Java 17 å†™äº†ä¸€ä¸ªä¿å­˜åŠ©è®°è¯çš„åç«¯ï¼Œå½“ç„¶è¿˜æœ‰é…å¥—çš„å‰ç«¯ã€‚åŠ©è®°è¯ç”±å››ä¸ªè‹±æ–‡å•è¯ç»„æˆï¼Œæ¯ä¸ªç”¨æˆ·æœ€å¤šä¿å­˜ 32 æ¡ã€‚</p>
<p>ä½ ä»ä»–å……æ»¡æ¿€æƒ…å´åˆå¤¹æ‚ä¸æ¸…çš„è¡¨è¿°ä¸­å¾—çŸ¥ï¼Œä»–ä¼¼ä¹è¿˜ä¸ºæ­¤ä¸“é—¨åœ¨å¤§ä½œä¸šé‡Œè—äº†ä¸¤ä¸ª flagï¼šå½“è®¿é—®å»¶è¿Ÿè¾¾åˆ°ä¸¤ä¸ªç‰¹æ®Šçš„é˜ˆå€¼æ—¶ï¼Œflag ä¾¿ä¼šæ‰“å°å‡ºæ¥ï¼Œå±Šæ—¶ä½ ä¾¿å¯ä»¥æ‹¿ç€ flag è®©ä½ çš„å®¤å‹è¯·ä½ åƒä¸€é¡¿å¤§é¤ã€‚</p>
</blockquote>
<p>ä¸‹è½½åˆ°æºç åç¿»ä¸€ç¿»ï¼Œæœ‰ç”¨çš„å°±åªæœ‰ Phrase.java å’Œ Instance.java<br>å…¶ä¸­ Phrase.java å®šä¹‰äº† Phraseï¼Œå…¶ä¸­é‡è½½äº† <code>equals</code> æ–¹æ³•ï¼Œå…¶ä¸­æœ‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    TimeUnit.MILLISECONDS.sleep(EQUALS_DURATION_MILLIS); <span class="comment">// 20ms</span></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> remove it since it is for debugging</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥åœ¨æ¯æ¬¡æ¯”è¾ƒç›¸ç­‰çš„æ—¶å€™å°±ä¼š sleep 20ms </p>
<p>è€Œ Instance.java çš„ post æ–¹æ³•ä¸­å¯¹äºæ¯æ¬¡çš„è¾“å…¥ï¼Œéå†è¾“å…¥çš„åˆ—è¡¨ï¼Œç„¶åé€ä¸ªåŠ è¿› HashMap ä¸­<br>åœ¨åŠ å…¥ HashMap çš„æ—¶å€™å°±æ¶‰åŠåˆ°åˆ¤æ–­æ˜¯å¦ç›¸ç­‰<br>è€Œæœ€ç»ˆä¼šåˆ¤æ–­åœ¨å®Œæˆå‰åçš„æ€»çš„æ—¶é—´é—´éš”æ˜¯å¤šå°‘ï¼Œå¦‚æœå¤§äº 600ms å°±æå–å‡ºç¬¬ä¸€ä¸ª flagï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> modified = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> before = System.nanoTime();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; input.length() &amp;&amp; i &lt; MAX_PHRASES &amp;&amp; phrases.size() &lt; MAX_PHRASES; ++i) &#123;</span><br><span class="line">    <span class="keyword">var</span> text = input.optString(i, <span class="string">&quot;&quot;</span>).toLowerCase(Locale.ENGLISH);</span><br><span class="line">    modified += phrases.add(Phrase.create(<span class="keyword">this</span>.mnemonics, text, token)) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// è¿™é‡Œä¼š sleep</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> after = System.nanoTime();</span><br><span class="line"><span class="keyword">var</span> duration = TimeUnit.MILLISECONDS.convert(after - before, TimeUnit.NANOSECONDS);</span><br><span class="line"><span class="keyword">if</span> (duration &gt; FLAG1_DURATION_MILLIS) &#123; <span class="comment">// 600ms</span></span><br><span class="line">    token.addFlag(<span class="number">1</span>, flag -&gt; output.put(<span class="string">&quot;flag1&quot;</span>, flag));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œåœ¨ç½‘é¡µä¸­æ·»åŠ æ¡ç›®çš„æ—¶å€™ï¼Œä¸€æ¬¡åªèƒ½æ·»åŠ ä¸€æ¡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª POST é‡Œé¢åªæœ‰ä¸€ä¸ª Phrase<br>ä½†æ˜¯æºç ä¸­æœ‰ä¸€ä¸ªå¾ªç¯ï¼Œéå†æ•´ä¸ª inputï¼Œæ‰€ä»¥ä¸€ä¸ª POST é‡Œçš„å†…å®¹å…¶å®æ˜¯ä¸€ä¸ªåˆ—è¡¨<br>æ‰€ä»¥å¯ä»¥ç”¨ BurpSuite è·å– POST ç„¶åæ›´æ”¹ä¸€ä¸‹å†…å®¹å†å‘é€å‡ºå»ï¼ˆå…ˆ random ä¸€ä¸ªï¼Œç„¶å addï¼‰<br><img src="/p/f54b44c/mnemonic.png"><br>æ ¹æ® flag é‡Œçš„æç¤ºï¼Œæ­£è§£ï¼ˆç¬¬äºŒé¡¿å¤§é¤ï¼‰åº”è¯¥æ˜¯ä½¿ç”¨å“ˆå¸Œç¢°æ’ï¼Œ<del>ä½†æ˜¯ä¸ä¼š</del></p>
<hr>
<h2 id="pğŸ˜­q"><a href="#pğŸ˜­q" class="headerlink" title="pğŸ˜­q"></a>pğŸ˜­q</h2><blockquote>
<p>å­¦ä¼šå‚…é‡Œå¶çš„ä¸€ç¬é—´ï¼Œæ‚”æ¨çš„æ³ªæ°´æµäº†ä¸‹æ¥ã€‚</p>
<p>å½“æˆ‘çœ‹åˆ°éŸ³é¢‘æ’­æ”¾å™¨ä¸­è·³åŠ¨çš„é¢‘è°±åŠ¨ç”»ï¼Œæœˆæ˜æ˜Ÿç¨€çš„å¤œæ™šï¼Œæ·±é‚ƒçš„é“¶æ²³ï¼Œåªæœ‰å¤©ä½¿åœ¨æµ…åŸä½å”±ï¼Œå¤æ‚çš„æƒ…æ„Ÿäºæˆ‘çœ¼ä¸­æº¢å‡ºï¼Œåƒæ˜¯æ²‰å…¥äº†é›¾é‡Œæœ¦èƒ§çš„æµ·ä¸€æ ·çš„æ¸©æŸ”ã€‚</p>
<p>è¿™ä¸€åˆ»æˆ‘æ‰çŸ¥é“ï¼Œè€³æœºéŸ³å“ä¹Ÿå°±å›¾ä¸€ä¹ï¼ŒçœŸå¬éŸ³ä¹è¿˜å¾—é çœ¼ç›ã€‚</p>
<p>ï¼ˆæ³¨æ„ï¼šflag èŠ±æ‹¬å·å†…æ˜¯ä¸€ä¸ª 12 ä½æ•´æ•°ï¼Œç”± 0-9 æ•°ä½ç»„æˆï¼Œæ²¡æœ‰å…¶å®ƒå­—ç¬¦ã€‚ï¼‰</p>
</blockquote>
<p>è™½ç„¶è¿™é¢˜æ˜¯åœ¨å€’æ•°ç¬¬ä¸‰é¢˜ï¼Œè¿˜å€¼ 400ptï¼Œ<del>ä½†ä½ ä¸€è¯´å‚…é‡Œå¶æˆ‘å¯å°±ä¸å›°äº†å—·</del></p>
<p>ä¸‹è½½é¢˜ç›®åŒ…ï¼Œæœ‰ä¸€ä¸ªç”Ÿæˆ gif çš„ py ä»£ç å’Œé‚£ä¸ª gif æ–‡ä»¶<br>æ­£å¥½å‰é¢çš„ç”µæ³¢ä¹Ÿæœ‰ä¸€æ®µéŸ³é¢‘ï¼Œå¯ä»¥ç”¨é‚£ä¸ªå¸¦å…¥åˆ° generate_sound_visualization.py ä¸­ç”Ÿæˆä¸€ä¸ª gifï¼Œç„¶åç”¨è¿™ä¸ªæ¥æµ‹è¯•</p>
<p>å†ä»”ç»†çœ‹ä¸€çœ‹ generate_sound_visualization.py è¿™ä¸ªæ–‡ä»¶<br>ä¸»è¦ä½¿ç”¨äº† <code>librosa</code>ï¼Œäºæ˜¯å°±å¯ä»¥ç¿»<a href="https://librosa.org/doc/latest/index.html">æ–‡æ¡£</a>æ¥çœ‹æ‡‚è¿™ä¸ªç¨‹åºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">y, sample_rate = librosa.load(<span class="string">&quot;flag.mp3&quot;</span>) <span class="comment"># ä»mp3ä¸­è¯»å–æ•°æ®å’Œé‡‡æ ·ç‡</span></span><br><span class="line"></span><br><span class="line">spectrogram = numpy.around( <span class="comment"># å››èˆäº”å…¥ï¼Œä½†ä¼šé€ æˆé€†å‘çš„æ—¶å€™æœ‰å°‘è®¸è¯¯å·®å¯¼è‡´æ‚éŸ³</span></span><br><span class="line">    librosa.power_to_db( <span class="comment"># æŠŠä»¥åŠŸç‡ä¸ºå•ä½çš„é¢‘è°±å›¾è½¬æ¢ä¸ºä»¥åˆ†è´ä¸ºå•ä½</span></span><br><span class="line">        librosa.feature.melspectrogram( <span class="comment"># é€šè¿‡éŸ³é¢‘æ•°æ®å’Œé‡‡æ ·ç‡è®¡ç®—æ¢…å°”é¢‘è°±</span></span><br><span class="line">            y, sample_rate, n_mels=num_freqs,</span><br><span class="line">            n_fft=fft_window_size, </span><br><span class="line">            hop_length=frame_step_size, </span><br><span class="line">            window=window_function_type</span><br><span class="line">        )</span><br><span class="line">    ) / quantize <span class="comment"># é™¤ä»¥2</span></span><br><span class="line">) * quantize <span class="comment"># ä¹˜ä»¥2</span></span><br></pre></td></tr></table></figure>

<p>ç„¶ååˆé€šè¿‡ä¸€äº› <code>numpy</code> çš„éªšæ“ä½œæ¥ç”Ÿæˆæ¯ä¸€å¸§çš„æ•°æ®ï¼Œç„¶åé€šè¿‡ <code>array2gif</code> åŒ…çš„ write_gif å‡½æ•°æ¥ç”Ÿæˆ gif </p>
<p>æ‰€ä»¥ä¸»è¦æ€è·¯å°±æ˜¯æŠŠæ•´ä¸ªç¨‹åº<strong>å®Œæ•´åœ°é€†è¿‡æ¥</strong></p>
<p>ç”±äºå¿…åº”æ²¡æœ‰æŸ¥åˆ° <code>gif2array</code> çš„åŒ…ï¼Œæ‰€ä»¥è¯»å– gif å°±ç”¨äº†ç»å…¸ <code>PIL.Image</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line">file = Image.<span class="built_in">open</span>(<span class="string">&quot;flag.gif&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        gif_data.append(np.array(file))</span><br><span class="line">        file.seek(file.tell() + <span class="number">1</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[+] Read gif file&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ˜¯è§£å†³é‚£ä¸€å¤§æ®µ numpy éªšæ“ä½œçš„é€†éªšæ“ä½œï¼ˆ<br>ä½†æ˜¯æ•°ç†åŸºç¡€è¿™ä¹ˆå·®çš„æˆ‘å½“ç„¶æ˜¯ä¸æƒ³ä»”ç»†ç ”ç©¶äº†ï¼Œæ‰€ä»¥ç›´æ¥ç”¨ç”µæ³¢é‚£é¢˜çš„ radio.mp3 å¸¦å…¥ï¼Œçœ‹ä¸€çœ‹è¦å¾—åˆ°çš„ spectrogram æ˜¯ä»€ä¹ˆæ ·å­<br>è¾“å‡ºå¾—åˆ°çš„ spectrogram æ˜¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[[-<span class="number">58.</span> -<span class="number">48.</span> -<span class="number">30.</span> ... -<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span>]</span><br><span class="line"> [-<span class="number">58.</span> -<span class="number">44.</span> -<span class="number">26.</span> ... -<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span>]</span><br><span class="line"> [-<span class="number">58.</span> -<span class="number">40.</span> -<span class="number">16.</span> ... -<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span>]</span><br><span class="line"> ...</span><br><span class="line"> [-<span class="number">58.</span> -<span class="number">42.</span> -<span class="number">30.</span> ... -<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span>]</span><br><span class="line"> [-<span class="number">58.</span> -<span class="number">44.</span> -<span class="number">32.</span> ... -<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span>]</span><br><span class="line"> [-<span class="number">58.</span> -<span class="number">46.</span> -<span class="number">34.</span> ... -<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span>]]</span><br></pre></td></tr></table></figure>
<p>è€Œè½¬ç½®è¿‡æ¥æ˜¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[[-<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span> ... -<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span>]</span><br><span class="line"> [-<span class="number">48.</span> -<span class="number">44.</span> -<span class="number">40.</span> ... -<span class="number">42.</span> -<span class="number">44.</span> -<span class="number">46.</span>]</span><br><span class="line"> [-<span class="number">30.</span> -<span class="number">26.</span> -<span class="number">16.</span> ... -<span class="number">30.</span> -<span class="number">32.</span> -<span class="number">34.</span>]</span><br><span class="line"> ...</span><br><span class="line"> [-<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span> ... -<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span>]</span><br><span class="line"> [-<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span> ... -<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span>]</span><br><span class="line"> [-<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span> ... -<span class="number">58.</span> -<span class="number">58.</span> -<span class="number">58.</span>]]</span><br></pre></td></tr></table></figure>
<p>å‡å» min_db=-60 ç¬¬ä¸€è¡Œæ­£å¥½æ˜¯ 2ï¼Œç¬¬äºŒè¡Œæ˜¯ [12. 16. 20. â€¦ 18. 16. 14.]<br>å†å¯¹åº”åˆ°ç”Ÿæˆçš„ gif æ–‡ä»¶ä¸­ï¼Œå¯ä»¥çœ‹å‡º gif çš„ç¬¬ä¸€å¸§æ¯ä¸ªçŸ©å½¢çš„é«˜åº¦éƒ½æ˜¯ 2<br>è€Œç¬¬äºŒå¸§æ¯ä¸ªçŸ©å½¢çš„é«˜åº¦ä¹Ÿæ°å¥½æ˜¯åˆšå¾—å‡ºçš„é‚£ç»„æ•°<br>æ‰€ä»¥è¦å¾—åˆ°çš„ spectrogram å°±æ˜¯ <strong>gif æ¯ä¸€å¸§æ‰€æœ‰çŸ©å½¢çš„é«˜åº¦æ„æˆçš„çŸ©é˜µçš„è½¬ç½®</strong></p>
<p>å†ç»“åˆæºç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">numpy.array([</span><br><span class="line">    [</span><br><span class="line">        red_pixel <span class="keyword">if</span> freq % <span class="number">2</span> <span class="keyword">and</span> <span class="built_in">round</span>(frame[freq // <span class="number">2</span>]) &gt; threshold <span class="keyword">else</span> white_pixel </span><br><span class="line">        <span class="keyword">for</span> threshold <span class="keyword">in</span> <span class="built_in">list</span>(<span class="built_in">range</span>(min_db, max_db + <span class="number">1</span>, quantize))[::-<span class="number">1</span>]</span><br><span class="line">    ] </span><br><span class="line">    <span class="keyword">for</span> freq <span class="keyword">in</span> <span class="built_in">range</span>(num_freqs * <span class="number">2</span> + <span class="number">1</span>)</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªçŸ©å½¢åŠ ä¸Šå·¦è¾¹çš„ç©ºæ ¼æ­£å¥½æ˜¯ 4 ä¸ªåƒç´ ï¼Œæ‰€ä»¥æ¯å››åˆ—è¯»å–æœ€åä¸€åˆ—å³å¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">spectrogramT = []</span><br><span class="line"><span class="keyword">for</span> data <span class="keyword">in</span> gif_data:</span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">for</span> ind, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(data.transpose()): <span class="comment"># å°†æ¯ä¸€å¸§è½¬ç½®ï¼Œæ–¹ä¾¿è®¡ç®—</span></span><br><span class="line">        num = <span class="built_in">sum</span>(line) <span class="comment"># è®¡ç®—æ¯ä¸ªçŸ©å½¢çš„é«˜åº¦ï¼ˆè½¬ç½®åæ˜¯å®½åº¦ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> ind % <span class="number">4</span> == <span class="number">3</span>:</span><br><span class="line">            res.append(num + min_db) <span class="comment"># å¾—åˆ°çš„æ•°è¦åŠ ä¸Š-60æ‰ç¬¦åˆè§„çŸ©</span></span><br><span class="line">    spectrogramT.append(res)</span><br><span class="line"></span><br><span class="line">spectrogram = np.array(spectrogramT).transpose() <span class="comment"># å¾—åˆ°çš„ç»“æœè½¬ç½®ä¸€ä¸‹</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±å¾—åˆ°äº†æ¢…å°”é¢‘è°±å›¾çš„æ•°æ®ï¼Œå¯ä»¥å¯¹ librosa çš„éƒ¨åˆ†è¿›è¡Œé€†è¿‡ç¨‹äº†<br>ç¿» librosa çš„æ–‡æ¡£ï¼Œæœ‰ <code>power_to_db</code> å½“ç„¶ä¹Ÿå°±æœ‰ <code>db_to_power</code><br>è€Œä¸”ç±»ä¼¼äº melspectrogram å‡½æ•°åœ¨ librosa.feature ä¸­ï¼Œå¯ä»¥ä¸“é—¨çœ‹ <a href="https://librosa.org/doc/latest/feature.html">feature éƒ¨åˆ†çš„æ–‡æ¡£</a><br>ç¿»åˆ°äº† inverse éƒ¨åˆ†ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªå‡½æ•° <code>librosa.feature.inverse.mel_to_audio</code> å¯ä»¥ç›´æ¥æŠŠæ¢…å°”é¢‘è°±å›¾ä¸“ä¸ºéŸ³é¢‘æ•°æ®ï¼Œæ‰€ä»¥å°±ç”¨å®ƒäº†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">y = librosa.feature.inverse.mel_to_audio(</span><br><span class="line">    librosa.db_to_power(spectrogram), <span class="comment"># ä¹˜äºŒé™¤äºŒæ²¡ä»€ä¹ˆå¤§ç”¨ï¼Œè€Œä¸”å½±å“æ•ˆæœï¼Œå°±åˆ äº†</span></span><br><span class="line">    sample_rate, n_iter=num_freqs, <span class="comment"># é‡‡æ ·ç‡é¢˜ç›®æä¾›äº†ï¼Œæ˜¯ 22050Hz</span></span><br><span class="line">    n_fft=fft_window_size,</span><br><span class="line">    hop_length=frame_step_size,</span><br><span class="line">    window=window_function_type,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±å®Œæˆäº†è¿˜åŸï¼Œæœ€åæ˜¯è¾“å‡ºï¼Œä½†æ˜¯å¹¶æ²¡åœ¨ librosa ä¸­æ‰¾åˆ°éŸ³é¢‘è¾“å‡ºçš„å‡½æ•°ï¼Œæ‰€ä»¥å°±ç”¨äº†ç»å…¸ <code>soundfile</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> soundfile <span class="keyword">as</span> sf</span><br><span class="line">sf.write(<span class="string">&quot;flag.wav&quot;</span>, y, sample_rate)</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰“å¼€å¬å°±è¡Œäº†ï¼Œé¢˜ç›®è¯´äº†æ˜¯ä¸ª 12 ä½æ•°ï¼Œæ‰€ä»¥å‰©ä¸‹çš„å°±æ˜¯è‹±è¯­å¬åŠ›äº†ï¼Œç¿»è¯‘è¿‡æ¥çš„æ•°å­—å°±æ˜¯ flag äº† </p>
<hr>
<p>åŸºæœ¬ä¸Šæˆ‘è§‰å¾—æ¯”è¾ƒç®€å•çš„ä¹Ÿå°±è¿™äº›äº†ï¼Œå‰©ä¸‹çš„ä»¤æˆ‘ç ´é˜²çš„æ”¾ä¸‹ä¸€ç¯‡_(:Ğ·ã€âˆ )_</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.cnblogs.com/holdon521/p/4686849.html">ä¼ªé€ httpè¯·æ±‚ipåœ°å€ - åšå®¢å›­</a></li>
<li><a href="https://graphql.cn/">GraphQLå®˜ç½‘</a>ã€<a href="https://www.electronjs.org/apps/graphiql">GraphiQL</a>ã€<a href="https://apis.guru/graphql-voyager/">GraphQL Voyager</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/390876937">ã€å®‰å…¨è®°å½•ã€‘ç©è½¬GraphQL - DVGAé¶åœºï¼ˆä¸Šï¼‰- çŸ¥ä¹</a></li>
<li><a href="https://librosa.org/doc/latest/index.html">librosaæ–‡æ¡£</a></li>
<li><a href="https://pysoundfile.readthedocs.io/en/latest/">PySoundFileæ–‡æ¡£</a></li>
</ul>
<div style="display: flex; justify-content: space-between;">

<p><a href="/p/fd872e78.html">&lt; #1</a></p>
<p><a href="/p/f152ab1f.html">#3 &gt;</a></p>
</div>]]></content>
      <categories>
        <category>Writeup</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>Writeup</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒHackergame 2021ã€#1 Writup å¼€å±€ä¸Šåˆ†ç¯‡ 0</title>
    <url>/p/fd872e78.html</url>
    <content><![CDATA[<div style="display: flex; justify-content: space-between;">

<p><a href="/p/c05d7b7c.html">&lt; #0</a></p>
<p><a href="/p/f54b44c.html">#2 &gt;</a></p>
</div>

<p>è¿™ç¯‡ Writeup å†™ä¸€ä¸‹ Hackergame 2021 é‡Œé¢æ¯”è¾ƒå¥½åšçš„ä¸€äº›é¢˜ç›®åšæ³•ï¼ˆ<del>ä»¥åŠåæ§½</del>ï¼‰ï¼š<br>ç­¾åˆ°ã€åå…­è¿›åˆ¶ã€ç”µæ³¢ã€çŒ«å’ªé—®ç­”ã€å–ç“œã€é€æ˜æ–‡ä»¶ã€æ—…è¡Œç…§ç‰‡</p>
<p>å¼€å±€åŸºæœ¬ä¸Šå°±é è¿™äº›ä¸Šåˆ†äº†ï¼ˆé€ƒ<br>ä¹Ÿéƒ½æ˜¯çœ‹ä¸Šå»å°±çŸ¥é“è¯¥æ€ä¹ˆåšï¼Œåªæ˜¯å®ç°çš„éš¾åº¦ä¸åŒäº†ï¼ˆ</p>
<span id="more"></span>

<hr>
<h2 id="ç­¾åˆ°"><a href="#ç­¾åˆ°" class="headerlink" title="ç­¾åˆ°"></a>ç­¾åˆ°</h2><blockquote>
<p>ä¸ºäº†èƒ½è®©å¤§å®¶é¡ºåˆ©ç­¾åˆ°ï¼Œå‘½é¢˜ç»„æŠŠæ¯ä¸€ç§’çš„ flag éƒ½è®°å½•ä¸‹æ¥åˆ¶æˆäº†æ—¥è®°æœ¬çš„ä¸€é¡µã€‚ä½ åªéœ€è¦æ‰“å¼€æ—¥è®°ï¼Œç¿»åˆ° Hackergame 2021 æ¯”èµ›è¿›è¡ŒæœŸé—´çš„ä»»ä½•ä¸€é¡µå°±èƒ½å¾—åˆ° flagï¼</p>
</blockquote>
<p>å¾ˆæ˜ç¡®ï¼Œè¿›å…¥ç½‘å€åä¸€ç›´ç‚¹ Next ç¿»åˆ°æ¯”èµ›æ—¶é—´å°±å¥½äº†ï¼ˆè¯¯</p>
<p>çœ‹åˆ°äº† URI é‡Œæœ‰ <code>?page=...</code>ï¼Œæ‰€ä»¥ä¹Ÿæ‡’å¾—è®¡ç®—äº†ï¼Œæ‰‹åŠ¨äºŒåˆ†ï¼Œå¤§æ¦‚ <code>?page=1635000000</code> å·¦å³å°±å¯ä»¥çœ‹åˆ° flag äº†</p>
<p><del>èµ›åæ‰ååº”è¿‡æ¥åŸæ¥æ˜¯ UNIX æ—¶é—´æˆ³</del></p>
<hr>
<h2 id="è¿›åˆ¶åå…­â€”â€”å‚ä¸Š"><a href="#è¿›åˆ¶åå…­â€”â€”å‚ä¸Š" class="headerlink" title="è¿›åˆ¶åå…­â€”â€”å‚ä¸Š"></a>è¿›åˆ¶åå…­â€”â€”å‚ä¸Š</h2><p><img src="/p/fd872e78/hex_editor.png"><br>ä¹Ÿå¾ˆæ˜ç¡®ï¼Œç›´æ¥æŠŠå³ä¾§æŒ¡ä½çš„ flag éƒ¨åˆ†å¯¹åº”å·¦è¾¹çš„åå…­è¿›åˆ¶æ•°æ¢ç®—æˆåè¿›åˆ¶ï¼Œç„¶åæ ¹æ® ASCII ç è½¬æˆå­—ç¬¦ã€‚æˆ–è€…ç›´æ¥æŠŠå·¦ä¾§æŠ„è¿› Hex Friend ä¹Ÿå¯ä»¥ç›´æ¥å¾—åˆ°å³ä¾§çš„flagã€‚</p>
<p>ï¼ˆ**å½“æ—¶è¿™é¢˜æŠ„ä¸²è¡Œäº†ä¸¤ä¸‰æ¬¡â€¦â€¦ï¼‰</p>
<hr>
<h2 id="å»å§ï¼è¿½å¯»è‡ªç”±çš„ç”µæ³¢"><a href="#å»å§ï¼è¿½å¯»è‡ªç”±çš„ç”µæ³¢" class="headerlink" title="å»å§ï¼è¿½å¯»è‡ªç”±çš„ç”µæ³¢"></a>å»å§ï¼è¿½å¯»è‡ªç”±çš„ç”µæ³¢</h2><blockquote>
<p>å½“ç„¶ï¼Œå¦‚æœåªæ˜¯è¿™æ ·è¿˜è¿œè¿œä¸å¤Ÿã€‚éµä¾å²ç§°â€œè€çˆ¹â€çš„ä¸Šå¤å…ˆè´¤çš„è‡³ç†åè¨€ï¼Œå¿…é¡»è¦â€œç”¨é­”æ³•æ‰“è´¥é­”æ³•â€ã€‚X åŒå­¦å‘ä¸Šçº§ç”³è¯·åˆ°äº†ç§‘å¤§è¥¿åŒºåŒæ­¥è¾å°„å®éªŒå®¤è®¾å¤‡çš„ä½¿ç”¨æƒé™ï¼Œä»¥æ­¤æ‰“é€šæ¬¡å…ƒç©ºé—´ï¼Œå€ŸåŠ©åˆ°å¦ä¸€ä¸ªå¹³è¡Œå®‡å®™ä¸­ Z åŒå­¦çš„æ³•åŠ›è¿›è¡Œæ•°æ®å¯¹å†²ï¼Œæ–¹æ‰äºä¹±ä¸­æå¾—ä¸€ä¸æœºä¼šï¼Œå°† flag ç”¨æ— çº¿ç”µçš„å½¢å¼å‘å°„äº†å‡ºå»ã€‚</p>
<p>è€ƒè™‘åˆ°ä¿¡æ¯çš„é²æ£’æ€§ï¼ŒX åŒå­¦ä½¿ç”¨äº†æ— çº¿ç”µä¸­æƒ¯ç”¨çš„æ–¹æ³•æ¥åŒºåˆ†å­—ç¬¦ä¸²ä¸­è¯»éŸ³ç›¸è¿‘çš„å­—æ¯ã€‚å³ä½¿å¦‚æ­¤ï¼Œæ‰“ç ´æ¬¡å…ƒçš„å¼ºå¤§èƒ½é‡æ‰­æ›²äº†æ—¶ç©ºï¼Œä½¿å¾—æœ€ç»ˆæ¥å—åˆ°çš„å½•éŸ³çš„é€Ÿåº¦æœ‰æ‰€æ”¹å˜ã€‚</p>
</blockquote>
<p>ï¼ˆè¿™é¢˜åœ¨ç¾¤é‡Œçœ‹èµ·æ¥å¥½åƒå¡äº†å¾ˆå¤šäººï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼‰<br>é¢˜ç›®ä¸‹è½½ä¸‹æ¥æ˜¯ä¸€ä¸ªå¬èµ·æ¥æ‚ä¹±çš„éŸ³é¢‘</p>
<p>é¢˜é‡Œæœ€åè¯´äº† â€œæœ€ç»ˆæ¥å—åˆ°çš„å½•éŸ³çš„<strong>é€Ÿåº¦</strong>æœ‰æ‰€æ”¹å˜â€ï¼Œæ‰€ä»¥è€ƒè™‘å°†éŸ³é¢‘æ—¶é—´æ‹‰é•¿ã€‚<br>æœ€å¼€å§‹ä½¿ç”¨äº† Adobe Auditionï¼Œä½†æ˜¯æ•ˆæœä¸æ˜¯å¾ˆç†æƒ³ï¼Œå¤§æ¦‚æ˜¯é‡æ–°é‡‡æ ·ç­‰ä¸€ç³»åˆ—ç®—æ³•å¯¼è‡´çš„<br>æ‰€ä»¥æ¢äº† Adobe Premier Pro ç›´æ¥ç”¨æ¯”ç‡æ‹‰ä¼¸å·¥å…·æ‹‰é•¿éŸ³é¢‘ï¼Œè¿˜æ˜¯å¯ä»¥å¬æ¸…çš„<br>ä¸æ–­å°è¯•ä¹‹åï¼Œå¤§æ¦‚æ”¾æ…¢ä¸‰å€å·¦å³å°±å¯ä»¥å¬å‡ºè¯»çš„æ˜¯è‹±è¯­å•è¯äº†</p>
<p>é¢˜é‡Œè¯´åˆ°äº† â€œè€ƒè™‘åˆ°ä¿¡æ¯çš„é²æ£’æ€§ï¼ŒX åŒå­¦ä½¿ç”¨äº†<strong>æ— çº¿ç”µä¸­æƒ¯ç”¨çš„æ–¹æ³•</strong>æ¥åŒºåˆ†å­—ç¬¦ä¸²ä¸­è¯»éŸ³ç›¸è¿‘çš„å­—æ¯â€ï¼Œæ‰€ä»¥å°±æŸ¥åˆ°äº†<a href="https://zhuanlan.zhihu.com/p/101866561">å›½é™…èˆªç©ºæ— çº¿ç”µé€šè®¯26ä¸ªè‹±æ–‡å­—æ¯è¯»æ³•</a><br>ç„¶åä»”ç»†å¬ï¼Œè¾¨åˆ«æ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªéŸ³å°±å¯ä»¥å¾—åˆ° flag äº†</p>
<hr>
<h2 id="çŒ«å’ªé—®ç­”-Pro-Max"><a href="#çŒ«å’ªé—®ç­”-Pro-Max" class="headerlink" title="çŒ«å’ªé—®ç­” Pro Max"></a>çŒ«å’ªé—®ç­” Pro Max</h2><p>äº”é“åˆé’»çš„é¢˜ç›®ï¼Œä½†æ˜¯è¿˜æ˜¯å¥½æŸ¥åˆ°çš„ï¼Œé¢˜ç›®é‡Œä¹Ÿè¯´äº†â€œè§£å‡ºè°œé¢˜ä¸éœ€è¦æ˜¯ç§‘å¤§åœ¨æ ¡å­¦ç”Ÿâ€</p>
<blockquote>
<ol>
<li>2017 å¹´ï¼Œä¸­ç§‘å¤§ä¿¡æ¯å®‰å…¨ä¿±ä¹éƒ¨ï¼ˆSEC@USTCï¼‰å¹¶å…¥ä¸­ç§‘å¤§ Linux ç”¨æˆ·åä¼šï¼ˆUSTCLUGï¼‰ã€‚ç›®å‰ï¼Œä¿¡æ¯å®‰å…¨ä¿±ä¹éƒ¨çš„åŸŸåï¼ˆsec.ustc.edu.cnï¼‰å·²ç»æ— æ³•è®¿é—®ï¼Œä½†ä½ èƒ½æ‰¾åˆ°ä¿¡æ¯å®‰å…¨ä¿±ä¹éƒ¨çš„ç¤¾å›¢ç« ç¨‹åœ¨å“ªä¸€å¤©çš„ä¼šå‘˜ä»£è¡¨å¤§ä¼šä¸Šé€šè¿‡çš„å—ï¼Ÿ</li>
</ol>
</blockquote>
<p>çœ‹åˆ°äº† â€œç›®å‰ï¼Œå·²ç»æ— æ³•è®¿é—®â€ è¯´æ˜è¿™ä¸ªåŸŸåæ›¾ç»æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œç›´æ¥é€šè¿‡<del>äº’è”ç½‘çš„è®°å¿†</del>archive.orgï¼ŒæŸ¥åˆ°è¿™ä¸ªåŸŸåçš„å†å²å­˜æ¡£ï¼Œéšä¾¿æ‰¾ä¸€å¤©å°±å¯ä»¥çœ‹åˆ°ä»–ä»¬å®˜ç½‘ä¸­çš„<a href="https://web.archive.org/web/20170613090934/http://sec.ustc.edu.cn/doku.php/codes">ä¿¡æ¯å®‰å…¨ä¿±ä¹éƒ¨ç¤¾å›¢ç« ç¨‹</a>ã€‚<br>å…¶ä¸­ç¬¬ä¸€è¡Œå°±å†™äº† â€œæœ¬ç« ç¨‹åœ¨ <em>2015 å¹´ 5 æœˆ 4 æ—¥</em>ï¼Œç»ä¼šå‘˜ä»£è¡¨å¤§ä¼šå®¡è®®é€šè¿‡ã€‚â€</p>
<p>æ‰€ä»¥ç­”æ¡ˆå°±æ˜¯ <strong>20150504</strong></p>
<blockquote>
<ol start="2">
<li>ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ Linux ç”¨æˆ·åä¼šåœ¨è¿‘äº”å¹´å¤šå°‘æ¬¡è¢«è¯„ä¸ºæ ¡äº”æ˜Ÿçº§ç¤¾å›¢ï¼Ÿ</li>
</ol>
</blockquote>
<p>ç›´æ¥å»ç§‘å¤§ LUG å®˜ç½‘çš„ <a href="https://lug.ustc.edu.cn/wiki/intro/">Intro é¡µé¢</a>ï¼Œå°±å¯ä»¥çœ‹åˆ° â€œäº 2015 å¹´ 5 æœˆã€2017 å¹´ 7 æœˆã€2018 å¹´ 9 æœˆã€2019 å¹´ 8 æœˆåŠ 2020 å¹´ 9 æœˆè¢«è¯„ä¸ºä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦äº”æ˜Ÿçº§å­¦ç”Ÿç¤¾å›¢ã€‚â€<br>æ‰€ä»¥æ˜¯4æ¬¡ï¼ˆx<br>ä½†æ˜¯æ€€ç–‘ä¸€ä¸‹ä¸ºä»€ä¹ˆæ²¡æœ‰2021å¹´ï¼Œå› ä¸ºéƒ½æ˜¯åœ¨9æœˆä»½å·¦å³ï¼Œæ‰€ä»¥å¯èƒ½æ˜¯æ•°æ®æ²¡æ›´æ–°ï¼Œè¿™é¢˜4å’Œ5éƒ½æœ‰å¯èƒ½</p>
<p>å°è¯•åå¾—åˆ°ç­”æ¡ˆæ˜¯ <strong>5</strong></p>
<blockquote>
<ol start="3">
<li>ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ Linux ç”¨æˆ·åä¼šä½äºè¥¿åŒºå›¾ä¹¦é¦†çš„æ´»åŠ¨å®¤é—¨å£çš„ç‰Œå­ä¸Šâ€œLUG @ USTCâ€ä¸‹æ–¹çš„å°å­—æ˜¯ï¼Ÿ</li>
</ol>
</blockquote>
<p>è¿™é¢˜ä¹Ÿç®€å•ï¼Œç›´æ¥é—®ç§‘å¤§åŒå­¦å°±å¥½äº†ï¼ˆx<br>ç¿»äº† LUG çš„å¾®ä¿¡å…¬ä¼—å·å’Œ QQ å®˜æ–¹å·ï¼Œéƒ½æ²¡å•¥æ”¶è·ï¼Œæœ€åå‘ç°å®˜ç½‘ä¸Šæœ‰ <a href="https://lug.ustc.edu.cn/news/">News</a>ã€‚è¿™æ ·çš„è¯ï¼Œå¦‚æœæ–°å¯ç”¨æ´»åŠ¨å®¤çš„è¯ï¼Œä¸€å®šä¼šæœ‰ä¸€ç¯‡æ–°é—»ç¨¿ï¼Œæœç´¢â€œå›¾ä¹¦é¦†â€å¾—åˆ°äº†<a href="https://lug.ustc.edu.cn/news/2016/06/new-activity-room-in-west-library/">ã€Œè¥¿åŒºå›¾ä¹¦é¦†æ–°æ´»åŠ¨å®¤å¯ç”¨ã€</a>è¿™ç¯‡æ–‡ç« ï¼Œå¼€ç¯‡ç¬¬ä¸€å¼ å¤§å›¾å°±æ˜¯é—¨å£ç‰Œå­çš„ç…§ç‰‡</p>
<p>æ‰€ä»¥ç­”æ¡ˆæ˜¯ <strong>Development Team of Library</strong> ï¼ˆæ³¨æ„å¤§å°å†™ï¼‰</p>
<blockquote>
<ol start="4">
<li>åœ¨ SIGBOVIK 2021 çš„ä¸€ç¯‡å…³äºäºŒè¿›åˆ¶ Newcomb-Benford å®šå¾‹çš„è®ºæ–‡ä¸­ï¼Œä½œè€…ä¸€å…±å±•ç¤ºäº†å¤šå°‘ä¸ªæ•°æ®é›†å¯¹å…¶ç†è®ºç»“æœè¿›è¡ŒéªŒè¯ï¼Ÿ</li>
</ol>
</blockquote>
<p>åº”è¯¥æ²¡å¿…è¦æœè°·æ­Œå­¦æœ¯ä¹‹ç±»çš„ï¼Œç›´æ¥å¿…åº”æŸ¥ â€œSIGBOVIK Newcomb-Benfordâ€ å°±å¯ä»¥æ‰¾åˆ° SIGBOVIK çš„<a href="http://sigbovik.org/2021/proceedings.pdf">è¿™ä¸€ç¯‡å¤§æ–‡ç« åˆé›†</a>ï¼Œå†æœç´¢ Newcomb å°±å¯ä»¥çœ‹åˆ°é¢˜ç›®é‡Œè¯´çš„è®ºæ–‡äº†ã€‚<br>å…¨æ–‡ä¹Ÿä¸é•¿ï¼Œåªæœ‰å››é¡µï¼Œåä¸¤é¡µå…¨æ˜¯æ•°æ®çš„å›¾ï¼Œæ•°ä¸€ä¸‹ï¼Œä¸€å…±æœ‰13å¹…</p>
<p>æ‰€ä»¥ç­”æ¡ˆæ˜¯ <strong>13</strong></p>
<blockquote>
<ol start="5">
<li>ä¸ä¸¥æ ¼éµå¾ªåè®®è§„èŒƒçš„æ“ä½œç€å®ä»¤äººç”ŸåŒï¼Œå¥½åœ¨ IETF äº 2021 å¹´æˆç«‹äº† Protocol Police ä»¥ç›‘ç£å¹¶æƒ©æˆ’æ‰€æœ‰è¿èƒŒ RFC æ–‡æ¡£çš„è¡Œä¸ºä¸ªä½“ã€‚å‡å¦‚ä½ å‘ç°äº†æŸä½åŒå­¦å¯èƒ½è¿åäº†åè®®è§„èŒƒï¼Œæ ¹æ® Protocol Police ç›¸å…³æ–‡æ¡£ä¸­è§„å®šçš„ä¸¾æŠ¥æ–¹æ³•ï¼Œä½ åº”è¯¥å°†ä½ çš„ä¸¾æŠ¥ä¿¡å‘å¾€ä½•å¤„ï¼Ÿ</li>
</ol>
</blockquote>
<p>æ²¡å•¥å¥½è¯´çš„ï¼Œç›´æ¥æŸ¥ï¼Œç­”æ¡ˆ <strong>/dev/null</strong></p>
<p>ç„¶åæäº¤å°±å¯ä»¥å¾—åˆ°flag</p>
<hr>
<h2 id="å–ç“œ"><a href="#å–ç“œ" class="headerlink" title="å–ç“œ"></a>å–ç“œ</h2><p>é¢˜ç›®é‡Œæ¯”è¾ƒé‡è¦çš„è¯å°±æ˜¯ï¼š</p>
<blockquote>
<p>è¡¥å……è¯´æ˜ï¼šå½“ç§°çš„æ•°å­—å˜ä¸ºæµ®ç‚¹æ•°è€Œä¸æ˜¯æ•´æ•°æ—¶ï¼ŒHQ ä¸ä¼šè®¤å¯æœ€ç»ˆçš„ç§°é‡ç»“æœã€‚</p>
</blockquote>
<p>é¢˜ç›®çš„ç›®çš„ä¹Ÿå¾ˆæ˜ç¡®ï¼Œç”¨ä¸€å †9å’Œä¸€å †6åŠ èµ·æ¥å¾—åˆ°20ã€‚è‚¯å®šä¸èƒ½<del>åƒåå¼ºä¸€æ ·</del>åŠˆç“œï¼Œæ‰€ä»¥è¾“å…¥ä¸€å®šæ˜¯æ•´æ•°<br>é‚£å°±å¯ä»¥è€ƒè™‘æº¢å‡º<br>ä½†æ˜¯ç»è¿‡å°è¯•ï¼Œç»™çš„æ•°å­—å¤ªå¤§ï¼Œå°±ä¼šä½¿ç»“æœæº¢å‡ºåˆ°æµ®ç‚¹æ•°ï¼Œè¿™ä¸æ˜¯æƒ³è¦çš„ï¼ˆå› ä¸ºå³ä½¿å‡‘åˆ°äº†20.0ä¹Ÿä¸æ­£ç¡®ï¼‰</p>
<p>é‚£å¦‚æœæ•°å­—å†å¤§å‘¢ï¼Œæ¯”å¦‚ 2000000000000000000ï¼ˆ18ä¸ª0ï¼‰ä¸ª9æ–¤çš„ç“œï¼Œå¯ä»¥å‘ç°ï¼Œè¿™æ—¶ç›´æ¥æº¢å‡ºåˆ°äº†è´Ÿæ•´å‹ -446744073709551616<br>å†è¡¥ä¸Š 49638230412172000 ä¸ª9æ–¤çš„ç“œå°±å¯ä»¥å¾—åˆ° -3616ï¼ŒåŠ ä¸Š20å¯ä»¥è¢«6æ•´é™¤ï¼Œæ‰€ä»¥å†åŠ ä¸Š606ä¸ª6æ–¤çš„ç“œå°±å¯ä»¥å¾—åˆ° 20</p>
<p><del>æ­å–œä½ é€ƒè¿‡ä¸€åŠ«ï¼åå¼ºï½åå¼ºï¼</del></p>
<hr>
<h2 id="é€æ˜çš„æ–‡ä»¶"><a href="#é€æ˜çš„æ–‡ä»¶" class="headerlink" title="é€æ˜çš„æ–‡ä»¶"></a>é€æ˜çš„æ–‡ä»¶</h2><blockquote>
<p>ä¸€ä¸ªé€æ˜çš„æ–‡ä»¶ï¼Œç”¨äºåœ¨ç»ˆç«¯ä¸­å±•ç¤ºä¸€ä¸ªäº”é¢œå…­è‰²çš„ flagã€‚</p>
<p>å¯èƒ½æ˜¯åœ¨ cmd.exe ç­‰åŠ£è´¨ç»ˆç«¯ä¸­è¢«é•¿æœŸä½¿ç”¨çš„åŸå› ï¼Œè¿™ä¸ªæ–‡ä»¶å¤±å»äº†ä¸€äº›é‡è¦æˆåˆ†ï¼Œå˜æˆäº†ä¸€å †ä¹±ç ï¼Œä¹Ÿä¸ä¼šå†æ˜¾ç¤ºå‡º flag äº†ã€‚</p>
<p>æ³¨æ„ï¼šflag å†…éƒ¨çš„å­—ç¬¦å…¨éƒ¨ä¸ºå°å†™å­—æ¯ã€‚</p>
</blockquote>
<p>æ‹¿åˆ°æ–‡ä»¶ï¼Œçœ‹åˆ°é‡Œé¢å¥½å¤š <code>[ ; m</code> ä¹‹ç±»çš„ï¼Œå†ç»“åˆç»ˆç«¯ä¸­è¾“å‡ºå¸¦é¢œè‰²æ–‡å­—çš„ <code>\033[...m;</code> ä¹‹ç±»çš„æ–¹æ³•ï¼Œä»¥åŠé¢˜ç›®ä¸­çš„ â€œå¤±å»äº†ä¸€äº›<strong>é‡è¦æˆåˆ†</strong>â€<br>æ‰€ä»¥ç›´æ¥å°è¯•æŠŠ <code>[</code> å…¨å±€æ›¿æ¢ä¸º <code>\033[</code>ï¼Œç„¶åå¤åˆ¶åˆ° python ä¸­ printï¼Œå°±å¯ä»¥çœ‹åˆ°ç¥å¥‡çš„ä¸€å¹•äº†ï¼ˆå…¶å®å¹¶æ²¡å®Œå…¨åšå®Œï¼Œä½†æ˜¯å¯ä»¥å·²ç»çœ‹äº†ï¼‰<br><img src="/p/fd872e78/transparent.png"><br>ç„¶åè¯»å‡º flag å³å¯ï¼ˆå…¨æ˜¯å°å†™å­—æ¯ï¼‰</p>
<hr>
<h2 id="æ—…è¡Œç…§ç‰‡"><a href="#æ—…è¡Œç…§ç‰‡" class="headerlink" title="æ—…è¡Œç…§ç‰‡"></a>æ—…è¡Œç…§ç‰‡</h2><blockquote>
<p>ä½ çš„å­¦é•¿å†³å®šæ¥ä¸€åœºè¯´èµ°å°±èµ°çš„æ—…è¡Œã€‚é€šè¿‡ä»–å‘ç»™ä½ çš„ç…§ç‰‡æ¥çœ‹ï¼Œä»–åº”è¯¥æ˜¯åœ¨é…’åº—ä½ä¸‹äº†ã€‚</p>
<p>ä»ç…§ç‰‡æ¥çœ‹ï¼Œé…’åº—ä¼¼ä¹åœ¨å°åŒºçš„ä¸€æ ‹é«˜æ¥¼é‡Œï¼Œé™„è¿‘è¿˜æœ‰ä¸€å®¶ KFC åˆ†åº—ã€‚çªç„¶ï¼Œä½ æ„è¯†åˆ°ç…§ç‰‡é‡Œé€éœ²å‡ºæ¥çš„ä¿¡æ¯æ¯”è¡¨é¢ä¸Šçœ‹èµ·æ¥çš„è¦å¤šã€‚</p>
<p>è¯·è§‚å¯Ÿç…§ç‰‡å¹¶ç­”å¯¹å…¨éƒ¨ 5 é“é¢˜ä»¥è·å– flagã€‚æ³¨æ„ï¼šå›¾ç‰‡æœªåœ¨å…¶ä»–åœ°æ–¹å…¬å¼€å‘å¸ƒè¿‡ï¼Œä¹Ÿæœªé‡‡å–ä»»ä½•éšå†™æªæ–½ï¼ˆé€šè¿‡æ‰‹æœºæ‹æ‘„å±å¹•äº¦å¯ç­”é¢˜ï¼‰ã€‚<br><img src="/p/fd872e78/travel-photo.jpg"></p>
</blockquote>
<p>â€œæ‰‹æœºæ‹æ‘„å±å¹•äº¦å¯ç­”é¢˜â€ï¼Œæ‰€ä»¥ç…§ç‰‡ä¸­æ²¡æœ‰ä»»ä½•åœ°å€çš„å…ƒä¿¡æ¯ï¼Œåªèƒ½é çœ‹å›¾<br><strong>çº¿ç´¢</strong>ï¼šæµ·è¾¹ã€KFCã€é«˜æ¥¼ã€å¤§çŸ³å¤´ã€åœè½¦ä½</p>
<p>å…ˆçœ‹é‚£ä¸ªKFCï¼Œå¤§æ¦‚æ˜¯ä¸ªç½‘çº¢åº—ï¼Œæ‰€ä»¥æœç´¢ â€œç½‘çº¢ æµ·è¾¹ KFCâ€ï¼ŒæŸ¥åˆ°äº†ç§¦çš‡å²›ï¼Œè€Œä¸”ä¹Ÿæ˜¯æµ·è¾¹<br>å†è¿›ä¸€æ­¥çœ‹åœ°å›¾å’Œè¡—æ™¯åœ°å›¾å°±å¯ä»¥ç¡®å®šåœ°ç‚¹åœ¨ <strong>ç§¦çš‡å²›æ–°æ¾³æµ·åº•ä¸–ç•Œ</strong></p>
<p>ç„¶åæ˜¯5ä¸ªé—®é¢˜</p>
<blockquote>
<p>è¯¥ç…§ç‰‡æ‹æ‘„è€…çš„é¢æœæ–¹å‘ä¸ºï¼š</p>
</blockquote>
<p>æ ¹æ®åœ°å›¾ï¼Œå¯¹æ¯”ä¸€ä¸‹å°±å¯ä»¥å¾—åˆ°ï¼Œé¢æœæ–¹å‘æ˜¯ <strong>ä¸œå—</strong></p>
<blockquote>
<p>è¯¥ç…§ç‰‡çš„æ‹æ‘„æ—¶é—´å¤§è‡´ä¸ºï¼š</p>
</blockquote>
<p>æ ¹æ®é€‰é¡¹é‡Œçš„æ—¶é—´ï¼Œä¸‹åˆæ˜¯ä¸¤ç‚¹åŠå·¦å³ï¼Œè€Œåœ¨ä¸œåŒ—çš„ä¸¤ç‚¹åŠå·¦å³å…¶å®å’Œä¸­åˆå·®ä¸å¤šï¼Œå½±å­å’Œå…‰æ¸©ä¹Ÿä¸å¤ªåƒè¿™ä¸ªæ ·å­ï¼Œæ‰€ä»¥å¯ä»¥ç¡®å®šæ—¶é—´å¤§è‡´æ˜¯ <strong>å‚æ™š</strong></p>
<blockquote>
<p>è¯¥ç…§ç‰‡çš„æ‹æ‘„è€…æ‰€åœ¨æ¥¼å±‚ä¸ºï¼š</p>
</blockquote>
<p>ä¸å¥½ç¡®å®šï¼Œä½†æ˜¯ç­”æ¡ˆå¯ä»¥äº¤å¾ˆå¤šæ¬¡ï¼Œæ‰€ä»¥ä»9å±‚å·¦å³ä¾æ¬¡è¯•å°±å¯ä»¥äº†ï¼Œæœ€åå¾—åˆ°æ¥¼å±‚æ˜¯ <strong>14</strong></p>
<blockquote>
<p>è¯¥ç…§ç‰‡å·¦ä¸Šè§’ KFC åˆ†åº—çš„ç”µè¯å·ç æ˜¯ï¼š</p>
</blockquote>
<p>ç›´æ¥ç”¨åœ°å›¾è½¯ä»¶æœ â€œç§¦çš‡å²›æ–°æ¾³ KFCâ€ å°±å¯ä»¥æŸ¥åˆ°é‚£å®¶åº—é“ºï¼Œä¹Ÿç»™äº†ç”µè¯ï¼Œæˆ–è€…æœç´¢ â€ç½‘çº¢ æµ·è¾¹ KFCâ€œ ä¹Ÿå¯ä»¥ç›´æ¥å¾—åˆ°ç”µè¯ï¼š<strong>0335-7168800</strong></p>
<blockquote>
<p>è¯¥ç…§ç‰‡å·¦ä¸Šè§’ KFC åˆ†åº—å·¦ä¾§å»ºç­‘æœ‰ä¸‰ä¸ªæ°´å¹³æ’åˆ—çš„æ±‰å­—ï¼Œå®ƒä»¬æ˜¯ï¼š</p>
</blockquote>
<p>é€šè¿‡è¡—æ™¯åœ°å›¾å°±å¯ä»¥çœ‹åˆ° KFC å·¦è¾¹çš„å»ºç­‘ä¸Šå†™äº† <strong>æµ·è±šé¦†</strong></p>
<hr>
<p>çœ‹æ¥å†™äº†ä¸å°‘äº†ï¼Œå‰©ä¸‹çš„ç®€å•é¢˜æ”¾åˆ°ä¸‹ä¸€ç¯‡é‡Œ_(:Ğ·ã€âˆ )_</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://hack.lug.ustc.edu.cn/">Hackergame</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/101866561">å›½é™…èˆªç©ºæ— çº¿ç”µé€šè®¯26ä¸ªè‹±æ–‡å­—æ¯è¯»æ³• - çŸ¥ä¹</a></li>
<li><a href="https://lug.ustc.edu.cn/">LUG@USTC å®˜ç½‘</a></li>
<li><a href="https://archive.org/">Wayback Machine archive.org</a></li>
<li><a href="http://sigbovik.org/2021/proceedings.pdf">SIGBOVIK 2021</a></li>
<li><a href="http://quanjing.baidu.com/">ç™¾åº¦å…¨æ™¯åœ°å›¾</a></li>
</ul>
<div style="display: flex; justify-content: space-between;">

<p><a href="/p/c05d7b7c.html">&lt; #0</a></p>
<p><a href="/p/f54b44c.html">#2 &gt;</a></p>
</div>]]></content>
      <categories>
        <category>Writeup</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>Writeup</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒZJUSec Writeupã€cyçš„pythonæ²™ç®±é€ƒé€¸ç³»åˆ—</title>
    <url>/p/e8996288.html</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç ä¸å¯¹å“¦" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹">
  <script id="hbeData" type="hbeData" data-hmacdigest="e91f0422af60bf7f54e51e55f240bc713adbd17816f0dfa8fb538f7d7f1ce334">64cf36da832c32ee150f47182e85c12ad08e8fdc7585aba87e7caa43ef24ea022ddcd838c221edd44ce79d4382c4fb2a74a2a61c083a697ca366d8dabf906ff9cb977e2710eeea3b8665606c597245f9f66aaa8aa22b8d5b2d1684f09275090bd4b7d3188beb27c45725d276fcdcf3ae57bfa442335531788e63d75df4fcf1fcfd15e92f8112599c4866a6079026a5fa9152331f68e4abdf9025def0aa02a5b0e37c6daf00b3a2b203a9e9f2d7e9eea7f2b1dbc49486232143013cdaa01fd99c8805e6a12626f0e243fbeb22664d1a50421fca401b58c44b6886982e475810037f3e254e2dd27f0ddbe819e923f3d18b663455a9d8870cb5d49dacdcd4c4235e401da124c87617cd2e091e7d7cd1be23b33628afb1e5ea1d264473d5d9da6c36cb6bd9c3b66ffbf4dbf22f774d58451ce46a5b30390352a4e4ffa037305813298adf392ed06eccc3ad88c8381241d7e74dde7dd34270ab36bb0896f5739b9e16ce4b9b1618ce707ad0464491a72361640e3174f61d8ed93929e0747ba5ee39780bf4591c35351151103d2245eba2dfe47ee2091013013903b1e71a04a38c7e2df148c1014423b438b4ac4a77011d7f66265c25fe6323fe17aba66aede8e62406ad7419eebb351c55395a27e149c2dc0fbd3d0a1bb35e49cab3a1af15529c472c992d9cfbff7b3b3aa0f11f7c250eb6bf2af2501a0cc8fcbb2a8adf63438a959716dd2a0d42e56b87dbd4dd8fa504aa39a8f5ab0ed1402d2c9eb4b373afcea577e6a796daf15d894c7e1d358ea20b0cf15799b885472ae2e0e246bcf51932278fa4253d722610d13340f6b03e599fa8622312069f3db8f0302fc46a924f6b841364107a936c767434c9439e97e4e0b00c6fe2cb88e30c5a4fb92f8112f0fca9e321b84020a42ae30ce9d214fd30d166b0606d7db0adbb2032472d02103c1a2a6645ceeb41c7fedf420bc585c9afedbeab13edeecb4a7eecfc2dbbd672545a1b1bf6952812250a40840692d1c9d0a33e24280025191fb741711ade955dee0e2782dd0497ced9a8c288ee777ba9ae026c0558ef971458a5b6c3813f61b0d950e15bec2c955955be9379445b9a1a53f3837378cecb48d2c6e611bb7ba61343895d04e4f7604fc2e9ccb29a90777c563fdffce54329685c52e50da0dc57557b02a473cdfb64ad41e1685c1f78026f56633de036875ecb4c30d1299b9d6c9cc452909136fd146c2e240633c20abbff091923388d2fb5ad348e3bdf0c29659e37225784a463e3be36fc9c0645272edd36ee91cd71bf44016a756cf3bd0db0385743f3ef26edd1737e2220297ef9a373cbc2bb6a57f11f5e3f0abb20c14d630ec5f854d04884b5a709a77fdae8ff7d608d4f13d3ecd34d9415261d9ebceed5fe04a23e81169bc4006efa02f1322bd932c8a4a2c3fa0e7c56dc5eb41db5424648f8c7e4c81c3cc871fdbb24d292724616a00b8470fef023d148b027e0604070bcde2bfe1cf89b3c1ba242badd7f8f5932b5b961472bc5cb6ae66828462fa016f0e502f22ce878acb15ea8d164d088afd9eaa2771d4b3739cc990c4910e5e225796e1f3aceb5e280b686e960aa4f04a94b1fee8879d0d541e8ea5966ef4673bc18afdd45a28a3151bacc91a4d9c469cbaff8f570defa9357a8645c91da1565da741df9e724fe439ef456d8d485974f1bfcd17759784eb94f915fb7232dabd5f4dda27cf2949b1f1c2ce6b27f4f87b7c0d0ac89b524602d5584a2d86044302a95c0b254b044e9f50fb25592e92016c594298f15a127456811f70f370b1944545f60cca7018fbf74ba146a00c4ed58f13d3cb1ec02fd3d8a822bba47ee473bd06828848015caa8f344e4e55467bf45b938e045122d5633a5aba91020151d0446b7f17dfee313dd2c50c7694e71ab35a878b9561c893b0b128dcb54cb05307beb31c35440bddb1408e4ca5ef21c4ab6f2a8b5c1f4bee47fa39ef73b6e60f035abbd4bb498d0476bec408696975fc6f0181ecb564900f8502fb02668ab5ce427862cafe6c42d012294f8fb97158b571a44c0696edb342418af6cd9d189b7002b3a37b3aeb738ba800018c446af13a8d2da28f400293825695fdfca5e1d43217ed5ca445789bb022707fe24fb99aa07d8b4c122b21de532d610e8912161335d678d3998fba5307e3bdd24c32afb8e13eb4ab625ac48945deeeac71abf8d8c74525bb22d9832cc8f52c74829dbd8106e63a36efa52dd6470f0f13d2044c818cdbc5c01377a5b76ccbc0ae47caa036844fa3e511cede6da1fba4ccc38c46d3dc29d7e160ae43bd111f47570b875852ae8b771af6acf5ac79d7f165101f3c71768dfa73fe4a8a1f3341427b9b4170b6ea17696c93706500d7235b886c01672b421e7c238bf6216ef2ba9c77f3ae128136e4ba28662e2217cf9a6f68ff19fb73ad0b5256d8f09d8b29a80c7fb45b9f6ed859844ce0c186c64e812e59d5f84120c900d3f22c80ada37da9f5585b290c401621ac25db83be1aa574cedd74cf7ac95312376755e6045fedbca51634167f31f7780570aa5b7756e5402deb99ee3d07d8c1d26f2890bc4ca82b91933570195776ddbc75a2c1ab004111dde8ecc509bc377f446529fd5025aa320065b81f6237e68e7f2ee97ee03cb89c9b14f0458ac4834624947a08e157da874cb71e989e5403c0769e94f17e0d4b2b38a9938ec18af8d480e7d0c57badccebd4d9242f3092edf0690b6c47077a2b4797e42e4953c51d6b633a2e201e6b0a949eebc5e8d094e3a5761eac87cb3029376257080bccbfa63c360257432cb3afa31472b54d2aac7d26d4ed233783b3817add2fc1015d5019078e65148c5d363c4f52c1312c37553bde86c7bce48fc74b54e7832cca6f9971d944ecd346a9c3e8af08ed3bd0cee66c300040a8eea8c2e45c1c8ea9c98396a02cd0032af301771d10d9a828f6bd14b6b1f4e15c2d9fc767d218e5fc391946aefc11e25827284e54c478de248903908cca4ebfa4fcab0cbe8d764fab8ee6956f8648008bfc4fd0b924cf8cca7e6b01955031e8cd4391904164f5ead3e45018826d17916e521592bbc7fb150145c0450b7cb73a75f9b92a3fc3c62e31c6745c9b579244d5f731c719536016cb0f88328284d608f4f29f5612d66f985b990ee0aedf4607a7b835790cc8c13495d873abd6593c89027dc0f7c211120b1ec4933d70536c4562b5b3dafb196e5fb83422edb26628f42e283c1e2626b52bd40c6b55219e060239b667f4cb4dba5796e01db505511efe0fa597b76e82281901f11e61451d0a627cbeaec13065eef2256736032789c425d4fee058a0937e299afcb26351572a37710875e10e6d396bcff54e2286aabfda147213f75ae154a703f1be115c4f0f97c17810a4d818fb56e8ef7ae8afa7c02367bd71d24c13e3cdbb3c38da7624c4a47ba62ce5e5bcb7a0eaa9a2aa3399ab11e2becd696fdac2c23fd09e2bae8f6d658ad97be029018c5a766ed62a7e4a6405445e5135562bd143d349a765924b3a98aa02a382846d7c3620bfb8cd16a5594f47b28315b6e33a399ab88be1a2e64f9eea1031e96861b98d2bc7470450d852c86a1392a6cadfa03c91e298df8f025c2d857797a6c192bb47c6f5fdb459c58acbd4ec54b94d59131c221d39e6726c51932eadbf0c3d3d4273e5ce0648d4886fffbefcfbb8df2d07e3e2941ad1a8a24b0b89d5d7415aa0f4d06d36b1d000c37fc3ce2a2059aa67c26eada6d33b4675db37f74289750e834a513f569bfc602ebadbf21780790a2680a8ab4f878570eee3124e10e8dab2a58cd4ea88691877b3dc6f17cc9a71aedfac2d403c45688715c4fda9fb4c8895d315545adffa91e33681ed41070a9178cf958819dbe9cb2063dea92f54ff44e72f13ce2c3706f314643b13af0b7a36cd89c986a7aa1eada7567788cc0a7f563c6d20c11bfcc7d1e53c9079c21c14bebd909a7f293c1492310dc4b9f852573d8cf829c4f73dbb86d73c6c1ede361f6a4a2cb4bfd45460673c5ea258d762713d3bb2d250be1eada634203e06b68206a10878d032390e681744c13403b539855776bd5bd40bd28dac86ffcf8c6d23ecd205e615fd4d278479b5304455022bcbf77f7e795bc78b79d99e1cba24467ce2b5d6eb8967678abd7f1b39fa24e77ed53a0db55bab48db9cd1e1089d7c1e08270656dc5d6248bfd1ce85c0da80e5c291533d078d5f82f4324b1c0d203dd3daefb6d097c1532121aa740edd8e9877e9fa2c07c0048fc0f8811dbc26fbc0b986d11ec2fb581e6f2deee2203779f027c2465c34a48ea1f9195e9a84f3ad2fc7efa47aecc021360db7de6d694a33ff08f6af543668df2eb340ac91b8b8aac4a70829382d5d2a720038f4dadea12194f3c22145e0ffda57f287f60d0e17255d5e4f216b5270a58dc8a3ef216d93c4322e8020871d14bb46a8892612a7e8d0f81c42f736fc49cdd5194e85e2cf9b2b18fdc841e447aa8b7d9a1a2b942fd1a29b28ebd91cee582a51720c2785935b08b4398a6d521de619fb51905e4aa3174821d6ee6b225412526c8b196d498d576a51879d47184afac4feec7ffb1022298bacf0f3f26519ef379db70326f37e68b0b343967d3595660cf310614fcc077b573644e578ec2010c8a79b7832047361d55e699e0eb87503a1ceed840b9dd8c0b2a82eb0fba42564efe136ff3c98951885e655b1172d0cc68b376ba50c89b285b16b0a878aaca8b699617a0aa08af55173270648dae074363e790e7f9fe169613bc66296403231a84d97d428696c3fb10a14dbe42941463b144d3d7266fc69adb37c9923cf68b29301e101c547725ed068bdeb378027119bbb2f99a0fad44e6537b99309d0264016a89b77091314ae0486f30b88280679c7ecd4ae41424b0d4ecf482358bb2ecfa0f0739cde518df02d352d2e5f7b12229eecbbcf78e6523c8596f49faada419203361b34778261c2b99f0f2cbe0981080e86b1e150dbad65c43a8b0c19b7fe290dfde1fe647b6d148b89a7ce1ecb3206029a373cdf5075a415467f4b28d989cffe518517d11469775ed5088f34ab82ef6312babf892b5674f227f9cb7b0a692b0799ceb18f765074c35bfb489a01ddb3dfd40856e6fa7d14fe6d81aae5f4b053b2b13f7bb06e143fe148937438314b9e28369ef750ba9964face3426eacf25af301ebfc22dbd29e2a084a74c813acafa71bac015a2769deaa5dedce86f22a0c59a4ba72003e08087bc6e188a379d2bd4518b68dd0ec5654913ca8a5a014dd40b4a410d4f37e69a973343c7ee46bb1be5e856351b4decdc13d07e47b06b3c34ab3f808ab16dedd877b64bd95e2c9c414e8de0a1f3fa21f2af0657f5b3309bee876341fbcdbd36c7af97065df3efe2931ddc9e9552962759839c9ed6e25a51547019aa599c178a866bc2558f2ac83be1c01bf2174908fddd14559b871719065d101d4aeb7de3b0b4d5139037ad90e77cc349e0cfe8dfdf41d6842fd6b8ea1120c356f9fc7be1029054ef0d6ebaa69b3496473c12c0448fd471f07eacaf51fba7f7492f370ef7f2b083834f239aed640818406fcc7b0c3736716eac114369e9f30637fb1dea243c69ceffe680c17f9551c752f7c37638104dca0099d78f4b5ce6fa1737941fd5e86dc855ad18413ff071e0ff189e1d2cc571582080c6b79a1d2cff5c410c51d93b0c420f75eb174eb3193878012d32a88c1e7e31aeefd6bd531d0dfca26c2f5c28feb466b19826979d9f2003fc8b02b3d933b6c55cc964931ab719da7b5a40b7845080c3937f654a76a254108b0dd3236fda765425f1defe8681f85f4f1ca7a1cca7b3376cf209ed39cc816c6877de7b1735ac8d7720ab4b7306bdab173b054dea72a8d476917c42146bcc6cabda590845c4aaf9a8dd260c335ac4e131c2ebdf525c325c0441334d566b7043a19611174ecb4a9ad176da44c767bd721d0c711a28247bc0d239780a831e929d226e2221856e2cc95779416813fa4a5018376d0eb90d9ea6b18d74b49dbf6ffbb84cdd97006fdb2c737fbb2a9af1333e33f75dbf5d3d75bfc560dcdf33a0396448e2b02830eb12beb779c67f335450f81656ef918b31b0302ab36c351185cbeb58fc0fc407bf0f8dc52c493592c39759face76737532daccbb18740d2d7d00a59fee0c46ef14c91daf7da7a6dde41af5cb6f675593736b64c68701d2bef803aec42e7d6a85f7b9adc17b59707ea2d05907858e381c4ba61271a70be961958693dfcfd043d5b3ed8037b546180f9d1662c74b6dcdc447c4c9113a37e8088bd3e8cd21399d46430150b9b0aa8f5471f6fa5669bcbfdc7580d2e71522b03ee9d397e0bc7fd9ca72abb7ab55df725221135a04bb29222972dc5a8ae35d90b08def2b3c67b8f3b0192bdf6daed7fbd76a94410cc980cb4b2d2129ae81738323e360c81545d8e547157adada64a7499cf3f3c795d3d84a3efbfbd71d7529695c985dd66caa499824b124c6ca48f3e93cd50daaa0f578b14d45b3396328fdf0b1e3b8367244b625307bccbc7f4912c8185a46be1d5e7117fed40ef4f128033324d24e03457f01e4a32989fe06a2b88bf565a1937b32530dd93be7ddee230cae93ad5293278b74e50abd3997849ae6919077ad43338f72b0dbd1c9a47b87e854addc17ca4fbba4faa68444c6938a14f52386a47124720666eb6ad54eb18079b270c4ed3cb6c068aac39bd8fefec97abb5ebacef348dd9ed938ce1737f3e24ad1c2d6ee7e1ca152d3c215c6d3ec13cb6fa5ce849bb254fd3a48a7ab29d3aa987f8d8a66b628136dbb226901677b856d6e52145b52df4699f8c9954aa9d92a975e71a8b9bf2bdb5df577f7726f597c1c8d344ed118410afc774e87b5b424583e39b28d58eb407d1f55b294052918ed6f8d2b5726f4e5acc460e07174343329f649f50e95470d9e477882d44df5cf24afb262bcebe9859af7b666325c4e9d08db9104b31b4718d79cf92573d7afb3d967f669ccae89d6c8d4552cbdb08183f00fa6ffc8f9f2056da4bcf66cd0604d79693d878d071fec15a1575524e46cbd2ffa664cf2f89df38c59b2f1906018cdb6ad7b156644f4fd99ef9efafff57f38cc87abc89574dbd36f1607d7d3181f18dd6b3efdf633b866b9ecb9588710acfc60de6a5d204e734a7bdbebffe410fb8024f0af2a7037020ce6451c4ec78b3cea09c39dccd1df6e88c39208e5b92ac739cffdb3ccb2db497b08757a4a307a9a87e78d3a49d0ac1172d9f7f281f487f85415e7396c3266f9269aa69eefbd5018ba9b1664d014e1bc368ae34f340e100377eecef40ce75f5ad6effa8716e579c2487b4d4e31da02d9937f1dd577b021b629f9ff335b06e875988e5df3221f0168e6b133295325970cc1c3c6af6c551b4be96b1a1fbcc8897626a47a7c166765a18628807f734e928fb4a42972bdf0596ba5dc3f4b51dffd2005eaba5498d44808916d3fbb1694e3610e65b6eeaff10ed3889a08b7ad62ecdde84ecd2a3b744492e842452e75f849de5fbba6faf80e308af9bdfe40def2b24a9f3c63811b2de74703c7b7c9c5c51e743361d8627639209b98986e6f2e5b739c6c31a1286870427ec29a3e7b088f0295145d3bced9e470db2e74d5b463395aa3647e7f4623ff7a6753bebef8cf41a30f0849b9eca72a196423f8f8aadbd97ed8535107e02396ade40a221cb2fdbca6654fe9f768002e0f27e4e6cb8821a64065456e200c878f1db4d79e7860d36ae02e8a9cb08226f07ed49b44537496655cd928ca2662a506dd570b6ca73522ede562a4a1be04b906f686ff32d0ed50f1abff3b12b85a5bf00f9706845ecbde3523f0250e8b00d8cf276ac84578c31df9ff945db2a33afdedffe6845030b8eea95e78ebe8ee433264ec765a6451e83d8afef00046e0373d348518ce54d46e88669cc3bad2f10fd97a8ead3d3dc8cf80a9c1db43d92ddaa148bb06007fe1e6fb24a144c959b1ef083d3f3b4eaa2ec523a90a5521081f61a421b46074fde18f860671347c08533def30914de7bf29125b86bae9782ffe588581fcd7ad308475e709e1d0873ea0de9192ae46b2c4f5a5c26a109aa07fa5d7c5ce29183c12dbd6b5b1736f5fb25c7cd1390ab5ef017a433779a1ffc0472851e4a58963a6a5cd34614651384f3e04e49d3b2ef8d45d6dd7ca852cb3db9cf2bd3bd0f7da4643accca6f68848672de5810e53035fab6eba9be9b0f56d467a669eb1cdb7938fba77ea401a95166e8f45dcd8a23617dc42a47070d36bac5f243f3e04eb2c0b8e62d784cc5a40f45e6081de530726a724bcda48753632f303bedcca10ebcabe89ad2612ad7249275355ddc90d7420c6c76d028bc62155debf15a02b72f4cd7b114d4ceab59f93f58856ffee01ffd29d7e957ea3e4c929c33395a69f7e39f05010e93673ebfec203f97bb0f52cf28172a30d6c5010c8c655bacb40314e10da58ec3fc722651469772fd48a77b96be2b8683e56ece4c2105ba8a02366832303b0b49569cafa65510da2b0d98bb95dee0d3c19a1c339597aa1e91e559f8a6eeff43fdfad248b493cf1532669ed765044340a7c907f4bb28002323ee079eedf2b06aead5aa034de4b1834547d2b51909ba1700f2a0e367c5522a1605da5119c95edb8af56ccd8dcf6fe903ebba48ab4703bea682ef42835ce1f54f44f24e13861c2e82553f4460a8b00b4469a715d59fa4f7fb4a1b028766fcf4e48e985df8527b7735a8c98f609764f2d9b304fec6360a0a5bfda8424d48fbb25a4e0d56131879640484a77a7985bcd6475c861850397da50144eb5c0c1a9080212a99122b2ee68e337623b94f84b9056476fa4d64d549389a9467406650c09571b4d30f2e024eff9be35f006aa770d89df4ab5a5f54655673c654a02898a36bd1717a4cd06e77e01bb1fe67bb69d644b8e06b81685438d3a17c85ad29f42e4c85fbbd0f461fab0b854ddad4216a81cbaae93d64e0dc76f66b096b5fc0a89c766ec0afbb2b013b5f0c502517c9a1ae612a2f46db22fee046e0e16e317c7bf200572221f7deadc59f30595b75624ae5c54039f25e85761f2511f5695319a2fdf06832d1db76dda9b38f5ea8a3e5b493d83a1b76ef89b8c202573e71feb99b68d08860914ad47977184624c33ba6a756c92815e934a20a337c8d426949675d24b3c590aa915e7ef06bc66a8f31f0a6d0b9b20e715b275ac60dcd3f2aa3f1a09b366df2f264af6c7b5a7df46d47fe1cf4f77d391408bce000c4065f855ffc332c40feb01ade5fec84b41a7c0ae9233b4e024254592f8d8672c6072e049c5bf66b8a9640859ad96b6db46e85e9614c7562e051f36e614adea530d9fdf9e3beaf27c601c059a8d9e853cc67cc78fcd2390711fa4029d9100c992ea316bf65daf7fdc0397ea6065d3563258f7de0f8cd7a6df2da04e89aac320ae2733f5bb2671c985fa7b9d44ab18c4c7944c2208d59b15138022ab4f217b9fadaf5486f1950923dcd5628ad86be99cd0b90755e5bfbc9a612935feeb5983e58965c265304a7b45bead3bf9f16c0d919ff05a359570aa629a0b47bb925b278ebeaa87941842deb6ecb6b327c3f6878af78d5fbcc5ac94472d82dd28e5568bb6d29d3025125f222abc3e650f286e7d8043bc6f679647afeae345183a16411982749b4823382999ac97de9571c24bcad272797783d907d2dcc0211c155750bc96cdfde20a13278b3744271a1bd2facab1e23d9e1265423dd799f73729beef868ebf2a4e38c928fd83357a65880eb8caee847524cb4b54a39203588aa19525b9d73a0d5d3fb005e500d533051a5eb150308e0f4d9fde9730a7f637446f00553d0c10d129f1f37d93a022a89b3126ae882ee96d0b217d75ea445137c919d054121e6c339d3b583db38048fd0a214b24bcc5a3e5ebca07a594f21a8416a9c86fb14b2ab2df4ef99079745ea24dc4e0ecfb55f6b4f5ad817a6a1c10a586806ce5149bc1e489fca91ec34714c94b9468ff2b3de21fbdfebc1bf552666f9c26cdd502cc072b73a729e895df8c1e4b0820dab0cae57cebf340e98d778bcfcd077c434243dd0a83b17feafaeea641795eaeeb1395740fcba8b3f9b96bf54039b033e75150d8d68c1ceb24662fa210db816949d23f59291c97c30618de0d11a93a498116d1dba4e3453ad6afb7513f621439ad74f3dd2b3ead4b414c7d4edd1f305d8a02b0389c9c7dc757a32b6d6fa8794bc6144f571b151d9ce4eb18ec1939bf9cc0a687920cd0d61e9567be0045b3ff9e5914d67f286c1f09233ff1837676ccb3c319f8b47e940087bfe1aaf173dd7b04dd1ccb0b82effe2806db829052f8124ad895fecc53802f54c5d910ec970f24b38de8a6ce3f1fd9cd90628e92e59bef503117c0d0918231ba67d883fc198ce737fb57b1577112991178c8485c7a95ae5ed6bd1135d2062a2b78bf8849bd84f2cdbfaeb91e5962642b847aafe93cfdf62fe6f8b61dbac03cffabfebd564d7ff2c65ab47c8f4675aaa24c5bc41d046b767fc1a54a21ee08475b62b7bef42b069962ee4770ede4461012e7f1585cc84319a6bd89ac552946d59c2476de0cfebf8bbf433ea7cf61cf82b6e117c942eabe3572e1cd8b60b709d4f83fbce649a17164c0d7c2979002b0fedb85aa313aa97313b87116b5c03b713e8b725704288f6cc336a612e3acc9a734dedb6469dfe47ddb5434134f1cd45093ae0f3e84d2ab8a626c04f246414abb517bba1fcf18e0137047ee415f3917b061de17dd82217d53aa546853210b20cfedbb1285f4ea609e1d477084dac3c8725cd0c3a78ea482c1c87eff2c7ae445d820e2ce09cb611706eefa942b40e8d1b4289ab6a80d6ceb8ddc22c06646cca79567b974c9712ed563a2d4935a50fd51b9e149b863a3c9d1adb95ba4d4c5bd33b1907c7751db5807ecaf3b2b5a7c67783377402e4694320f18be03f45236c33d6af29321327c86cc8c0a171e831f5b61a62f39b6c3687b6db3704c1ee961e7e1199d33cc80309e5ebc4edfc737ad0ff7a2985fcbb86d2cf4efaea86e40a30b24e400868b09b867e2567f8f420d22f42a2105e81bfc5a9feef15fc09b1d16ce46b8cb3f1e2157c91f2c6224548cbf1d14b381f441824f262cb8a1c4a7f2694e59387becd0652ea11067eef0835d88e0c997202b4097f8ef958418937aab492b7ce61b8f5a463c25cff4f8e8bee3096d61a7e4d69fd7fa924e4bb6e5a3d64a9f3721ea823dba8ac81562c0111343b173cd0200eb54e1c991154ef88ea2bbaf52444600bb19c36ff3bd6fc4d50cd32c303a004745e8956d1c50abe1ec490de7baeb32a39e50f21e594e03c59779df7d0eda9cc30101b3b026327833ddda0899eeb6dd9a7e1d030d75590dece741fcb3cc7ca075b9185ab2941953a5be1d8c59384b758977b4cc87f45e434f72bcc707c6e55661a1c1a5ac7cac19da3d6c686ec5944509f87d0f33ebc3b93a7b98ff74ac1883369781dff2a03b0091913ed358a347cb9749f787b23cb215b4afb63377a36c0a42fe0c9b0b299f41984081dbe18cfe34e5fef914a9a83c9b69589d73520a28bc3838abe1c2aab06432cf2aa9af5c3f18d341c060cb51b54552af559ea3101c06c901e01ad4b4af91050b10d0a0ff8bf1754f71c291a06e51b86c1175bdc9acaef6e328d2d6269d9602db54c76876d13d6756911f4c4ecb019c5e373327786ecba91f0546d680c8b13b77cf645f5d563655c83d97b909cf49f7a43f8e7fa4f4b9af46c3ab0dd4cd8003cd3dd616c395aedabcdb1bfb43cce9f007db692d0f7b9ac6d46756d0c0a49b4c4bd2da22383df12b3d4a94d5005329e69d07e3c5713721499719c73ad78add9f1594d4381ce3872771423ebf83ced7860acde3d1254d001b11c1a0076ae28e29be12ef36c7da90317b90b50974ef9ab99fe1eacbaa92f7c5e9887df04540d0e6f00c080633c692cf2674d38a75b9defcf216119857abfcf1af0332018489f3a5108a3b376433edb62bf4db6f9a1b3029d2a677a2c200fa76ca922a8558e859fc06f04dfddf8e8f5e6dd7b5d84e55820cff8d6a7a565bcbd26ecb9508790d4015701c9fc7ef93dbf16f6835f107589c9cf059a7737bdb1dffa8519c31e73e95779e38a9da471c710de2d65be73435710d8c89dc1de96799d89e19e327e1c8561d1ef63804575a5b3766c6d81f10b65a8563db153d8267f03b003456e603bc063931d436ce828945d7e7df452523f78390360442e7c5dbec50b571e751aa79c863dd442f1c1a52900ed017405539c5e64deb7777d82d141fb95fdbd871dc6176fc0afa9bd423581c8a71613590a7368918f24e4ae51519af4dbdf1c5376091e5fe0b625053b9273d2e79034c0f451a6126a9dc72368a7b68c89cc2c8146e9cf89530363012fb337838bd400574056ab160737df2db01d8e347b70c2a546dc1427708e1ae2b79a983d8c358835d30e442da1f84d805827cea636cb0ecb75d4da9e8dc2963a527238334ce3bb3642999f61bfe63131271e00ba54aedc5caefb1cdfdf1cbb94cc6d957a3bd7bfbcbdad57cde087985bdaa3a7b14572be519afbb39e9fcd9f73704daf4257ca429403fff8f1f941d20a429aab82c039e8dfc12dccbf876e5e954029337ed9728c90b4675b0ae969143856ab734e963c24f4cd397e917d6026c6153349efbed924bd913ee5f640b0ec52e4cfa5163c9db553267993f73717c63c073681c26604e1d12912aee98a0ada677ab5b34944cc787cd994fadcc279e2fc688eeb34bfc4fda216e2e08032fb7ce1644c7275b0aeffd723c1582e8eee767564bae0c86fa1545fd10be5df337e143fc3ffa81c612bf963ade7e2c0a5c7f71d96c98f5fdbd84ab3ca57a920b220bdb0f0070145a758693a591748665190a8dc2d305fb62f8551c14920ea655509611ff55e208381032c23a824ef04d8657e4072a41a06f493552b0233059bfb98e69e0d9e6ce4b793318cab7cc89d3d8d04b560d370951c689c46e7e901eaf9af7ca3af2f3d1be39a302dc7c2ac9766be78d3cea9a9a4183074b109ec003fbc771abf8059e5b547962cea43da299457ea6d41bc2fc82e2b3a0687e81b0a65802b64bfb97c61181062cc24b8901f881987c882e34a02845ce91efd92e5cf41fc38f3530c5b4e80bc3b5ad67238c0946023810b6c87c2e378598a09dbeff9b9023c01197d947e676daa32253f6920fe6716b9bf8a777f3fcab9501c9b17f6feaee4252513a73794f8b06c0e121cc9dc4fdf3e06277180395c3832f776192d000543d46d00e40b452a1cb6c73958099310a44bb1e2e8fe119edebdd45621f64996904d3f15ef1b3dec2e1feabaf16b86f4a2f5237210a2936f2e9320ee7eec62f05dc262239a70b8f708044e5159815358bf863ed85abb54f00963d75d8ce5d7df8bb68400dc7b5a11c30376a9f7c04beca2626cf059f7973702d3add1c4e7c21b53805cc4306d0c9bcce0800e1ece0c015362b6c956f144e7eb44d0848b3dd2bfe13d7b1adbec82ef63a190d20d937c8a41c8ea9442d29bc4c1e57a2eb44590e76ea635d6128fa804ab00b033faaa64c72b8752e5b5b3d8b30728a98efc3b30a5e0701d8d3e7dd6226ff59fed2fe3fdd3e184577e0ffac4326b887b5e7d29458f3da2dc229e44f971816bd9fe317bcff919c7b1365afc9c5315557a7d946dce8f283180e8d4d72d1245dcaebb041f7454470e5f12a84ebf2563d83a2b5e9621d306f288d2fe5f218a7d5d701ae96d0ea422e1d28559b94d8affd3b2ea1467410fd45b618193823cbb717918cc9f57a2e7784e1223899bc25cffcc07a1e519409fc14f833367ac697bcf2ebb7ba13bde24363f85c08aa0b16a480161b33c802b659d5c37fc8383d487e797fb44441449a12c6e461369928ad1a595a258a936d2d2070c4c7b372725a8a554657271060ff429f5356ebc4371bf8e1b24208df6830f804fb1b5099f0b211669f80922c8adc29aeab23557402f2588709edb60181f17b2d1f22911e4bdb9d0cad209502b157254478728866b1d28507382e354f35a0af533845f7835fb69c194a15d8afa4d7a3410c2f8fe57cb12d5c74875bc390be53ee59de19df0f47a0a1345c73f9d762d65e3ca16b205b5f7281cb39c7a5d07f609249e823bd9e06c3f82765f715303ba29ba96945ae784ee8b21d57aab0372e98b5092e2dd1a017939375702eb71c075db7b86107298f62f597b2f54649a6721ff69364162d6e405e58ab30f7f0c7bb9d3197eade843409a0b1f1a5d15a10316edd0aeaa4271ed294f2e404d989332c018a03a263c96f2f84a441fefd749e8aefe0d3ef4d0e794546b96cdb04dd734f847674df6754941a72b10e941d26bc7dacd90d2b00e9a6d2db6c3c342b195b34b484cd21f78a29e98cbc14d1992761692bc29c6fd311009454b9065e55ec5925db7a740051df5a783df0361f442717544d1884ab6eaa8e150138f506198fafb1bec5fe75911a55a8cb0a3c22f30e4df999d3f4a312890c4205b4d0dc1f7d0cf71423f10cce263d021dffabd94c518287ed19a92cdda44bd5a1b9bff94b2f0555ce205819ce2e4eb9cc15d78d218b27305f2ecc49b9016403b668377ac95558461de5f0aa57a92e6382005886b89929a2977561720340fc10e002d76d80de877ff4a3caf7a5c0d5f930b773b1b55c4f5d6d16b149fc9c158f62c37484d0876ae9df841c96bd20edfa625e41415aadb54636caf4eaaaa512fbab59c94206ea37a985f382debb6dddbcd652cd5c35ac91810cf2759e1f788bf0fe94f77aa62c6218a82ee7d88ad156ca7d368f8f316cc017845c7d3f1652697e8b8691714e5dea4dba6504b194ef5f79810433a49bf63db602fb8ffefefbadf135154299a591194717a7fad2243fa35e32da4c7cb6405ad71000aced9bef12bc1ee8308ec84fecc34e17afd13bb3b00f317d52bc275888e8b80e1d7003a526078dc98dacf5c3a7687cd612d640b218388bbfa937d7fd36f7f103c60a5b04652c361009069d2a6ff0c671990163bb83ea2ae55a427e443dd7585a306b8541c163460091d9411a84e7c345b509a36f109f305e23e70f5874b334fc5d26888f52e2bb0295ebd6809ad28d8cfc012a5b3b5f412763113801abb2be8a5681e26f29349fec5b2fa281e76723d6fa35bd2fce395eac9cf58e2e85963971ad771465848ed243432ffe80cea3ae9f7a31d8eb04037e5e83613156605c12234535053fbe5244442d3d4ffc52e53f3e56cdfbb2f05a46f94269eac282613c818f7f0bbed7a03795ac689f041d35fcfb0dc5543be62c2916ddb47fd26033929429437d2d2628f4fef4d0e8a2aefb798b2296c4a997b2da736e8d078630908c3eeeb2648404429402918fda2c67003ee2fd02544ec72489a309d0b268d8b6dc153b8fa2fa1d8fa44161648fae57a883195a663025daa3dbacb7b660767151b72579bde6fa405cb8236018ad0fd5ba9f59e29773588fd9722dc43ed1be98d6f7fa33f80bc4572559f3e36436a502ee89aef69920b29d25e891d2f1a429a1ebce2ede0d7795b79c5e01385d596743447d239b2a79df92ac96c870ca9b2b9cf8de371d258aab6cfb40f5d0c11aaec9fa679753c5e63a331cc1e4f5ecea7b148627b4d9e4d1c75fda7f7763be9e5cbdf66d80b5fc7432b777d04f193fc6b4b176cf7570055159c541fc546a8501798762c0d87edf5e30a2188f63319f382fd836bd1a499843a7ac25fefba94be62facbbf819c828d32f868ab822cc27426e11c922052ba97ea5a696a6713dbccffe94a1455425c4cbf69b116f6f87536cb8fd30d6d41b9ae811a064a4af5904fc4ae72fa2ff24f48a5ae129564127e67e80226221e9d454f7206f919d735a5772d52db3bec482baf64be497cbb1c593a8e8b37a6e8d816ce999dc68397243fab6adc40cf9f2115e7d9f1e7f8de819d140971ebd8c30ea26a0712f30b1b4d6431b6e52405498d4a99fff7149a1ba16064e46bc49181e5a3866786bd6080ae651c2aa43c5ac6f5af86f1abbcd6f19dec9851015bf8abb76c2f73edbf1de5d61c7825c1d676b69addbf6d5ef6647cefc91b54220fccd1219db49d1b5d810f639d58c4b48cf61a21e72bb8bb9cf05b7cf072e82b268cc111936f2d5918016934ef596c2d71f308fbcb9c868c6b8f02fbcb1c184fcf957c32b7e4c8058313523460a13c1c51ee06d712b555d30c9ab7d77196016713bd5ca23b250121d793a3d64ad501b08b2621586823a40fac9b64aba8de60e455f2972f5d9ede6fb5dd5f938298262aa77eaaaf4f18fe875fb3b271d46d94216e63e9e0beb2a2810bbe0c43d0326b515c419c58d9c3d2f8a9da758145c8b542422a55d5d47590da372c88e98a305c3c179f13fbe9dca855517bf80dd34c481f60ee722f213bb7225b1b254052af111c472120ce12f66dac44f84bc26d729d58cea2ab4311aa07698a19b3a9fc88a8959210500d1e5b4c9562a5a5fb37205fef5d364be04b692abfae5d645c860e6c9ae32cf82912eb7f435270bea8f1461ac1e094846bc63c7aed019a85e7821dd428dd2696a88afd922024a7d93631dd7000e5e93f91b17146a540c277fa920d09aeafedab66ead05a79302e78c40ac74c9d6d8fde15f43704f7b3ce6bb60cc8ef79c4a5c3596ad28edc61271ea84194febd98da7b4f454137818b42de9c87020ff465d8fcd826d8cbf8d90b25673f92460654b81daf2b446b7a2d0db0b5c8fc4f774d14d3b6e2546d32392157dc958cf40a79c1c9a7f0bd950bf02923fb0f6f77c4184b37c0ef03e155fb033f73cc0a1da0d99e51f905abf8994dd75945fbb93b9d171cfaed7876f76ed3ec4c2b2cae5327651ed16effa9b29f58af023db29a682586e8438dbebc304a20ac51efd1a4f14966626e42a59e8d19d4b54703c4f80eabef9046e9b174aac080c291218a12fffe39a0e63a1093ef55523ebd5e49c3c246821d351b51e7b429a21b78e9c728157dbe86d5202e19f165416d4223d72f555d0399e3bf21832a6e92a92d29d68878be89762606769862980eb421250421034c4c0a023eaa5a997621eb683d6351e8cd8145b8b02afad584e99747c648b3547663caaebe009691b114d32375a54a64fc0f75c9b786f31e3e1515a1ed71dd5d20bbc807897d05b6baeec2ef98d7bee46a25f1aa639d95d1f179f74a65478e78b56e149d602d168d1213fc0257e98f43be4373c03af237dfbd75cb0dbcc6a991d59cda960824008a49f6192704486b0d429789133a46e9ab703d1d1336801eeda38bb253871fac0f9386485a93df3a8102127209d198113d4d92dca4993d9fc5d745c4611b1642b22ee1724747cf453a0a5bb083673106d54ce9ed19b010cf0207fde5fe3f9eacb5ecbe4e86b87fc5061e24fcc1f43992055289651b3c7ae94d9fd42a0156ad81509d17e2771ac5dd05f91f86054483af6284ada31b55e2ce9eebaeec7115ccdf9cd7aac15916e11010421b5ab070b8e2d1bd89296df07108f0b230165560e5708f8429496ef9086282b16b095c271022c7be2245170375a4ee1d70488ddb04ab96975375e6982c2ca45407630c57a7bc6752027d6dec003f250d467838cf04126f04dea1a58d5633b60bc12902e4f377cd051acba454a6e2290699491854ef40834f5ff8f5a08787fe1c3bd9ea35cb7673b79ce217c730b1cc07c349d5e8a13e1e8a87fb516e28790cfb892e2d957441e3bf8eedb8502a5612e650ff8468ccc1db27999a9b2e83f6fedb8ae060b7f744552b0788ae9054f7ccfa1cbd2181bf570dd186c04877284eb5350bb907d6363d6cc5e1e534ce044c0378c5df1535a0b65edefbd19acfda6eaa59552870462dc43c99a610899052e1c76e4be0bcf88b4ed2d5834b66d0e85f84d02dea7dac3425c5a7281b9b53b8decf68c077e046babea11a1fbdce73bd6454465d99394880bb20e732a3f0cc051d05d966046bc76bd831e71bb17fbfe358d0052d71c4e6025ec5dcba4f76ae5e7a099d48fee8d2545de3a3882001f8d467ac4f57c82dfc7bcb1798829fe7e5f83f0ac1caefa99e80d17792b407a14fb81b311d9df57f528b148a20284aad43b096cc61f48b50c07af3a2e1c6aca823f8aa7b16a239655832ef39d41f70e529d000a98e5aa94870d1c63a0f50ae687ac494715df461d0077f3df5dc5c29c5fbbe2a55916f7f878056e57d0a60f56d10fa775f926ff7de26fd137b1b913ea1f30c680e5c73ada1ac645934a5a91b858ca92bb3e3c19a2d81b8bccebd69f5e7d4f1ad53e651fb652bcf77e8d414950b0517cacec6272c9c76befa400dc8cd7668ed61f144f7a1046e681438b5c7ceaacef5a2d6b066736123f30421284b57afe140d74700f8a9a02a8564ef0125650a91bd82740835f42a2514892d58f57d93353c67da286628f92cc9e6a8fe4b22b24edf5a7eb9d3307a3bbe4c1bddb9e7a4058fcda097109a0faf61afe183fe89add20c8397e4274c9251013cb5724d2b81386948ca37be911ef4f995fafa89bdf2359bf5bdb875119aa85a0238644eb7f92a390a4e082b0207440d16bc2b0409b528e9c928580f16ca1508761fd2735e8cc9bec5299ca3bd2221c53f61d8a1559dd6dc71c1a78b35df13091faca89ecad846e6f973541c545bd14bfb0d57ab1906cb5be22591e9ee557ed99ad71cafdb01d46b92e7f46eb718c0a5c1a9f9d1e379576295d0c6178ba1c98742123eece8c56d336147d6c6ac1bbf1a9225bd30f6a2ae4aca91d4c22d44dc05ffdeb91796a56c459aeeb6feb1ea18c6ce4151e4ac59ff31ef0f420de1d247720ffaf2f2b3d8360b2a632500d4996a77e5e3c55b89c8192ada8d7b4fcc2e9e50421e3f169ae8515277532cac71c0d5b96632267490893f5e6300723f4bc7463772c05cbc9ad5ee43664e2271ea0d507906764f4ed166bcfefb38b27c7dab59a875b9c2217916a65cad570d3bfe5b4ed0fd0a415706bf6e8a3acc23b6ec5e26eeafbbd79aa2a6cf35d3372e57b1bc2fe0f84feeaf873162a794b3b391c76d464e28a7a3616aaaa05c540fcb2a557077d357e38695068d5dd96259a2277ab7c82586379d32a2a98fa86aabe0e7f2f46869bb3f4aa072a0ca32e23fcc1a13edbe1ea37c36281f5ee121a4299bbc3881ebca191fce9fd118726b5ad7a7190f06d03a949cae164073cfe265f44cda8641e5e13e5e7b2db7ac0bbc23b5aa5e632f170840de036c1a8b34e0de7f5298b057e457cf29ddfa5e65b0d2d6e117ae670c1a7d9d2a719187361150e7587a88cb454bf5044a83053943d8584de9d5fe123864344a9bdfbaecc97fba6209e2c349d4a5af97699ad026ae1eedcc4d3f92c4c3ff57fb7b7088610d0b874ca3745820c9b959665364e3e490bf5f21247202a10a08cca9c30f05c838fcde032014b559fa12e28966006f557ba0eff7e33d5bb95d16c0f5873a4c84249acfac5710e732b5f6aa9a91ffb04c53dba6a41e98498a71e898a288670141f3a859d25a3045664b883161416412e3f62a153797d1990d8f850f663c52ef0a2fb9cfb8e9dd1eb8380746d51c9cf66fd33e711f87c9cd6c72c59ef1801820d5d949c51b25528466189dbbf0b94f2e4076f7d22daebff7f272132da73a8f86c3baff27370cb8326dee1d053d6fe32da228fa4febdea07e45d93c13265f19a52f3d822ca832f05ce24ee6bea3f859376e8841b84df7ca65a55169a5333fd18781f53992fb028ca487d44586240f4a7bc34745539dea32d25824ff8b9d792495f5fa13be817f052ef2372481ace9dd3ebce5f30be20b83e406d23c3069a4a6fd19e969dc314078e077f1fc1e6e61755532619fadab81e1467203d4e03c9e2c917c1dbd800465b0945d65f980c47c1a74c8f1255c1461a2e41da84c59479c2f70c89e65503b71649b322fc0b3b299dbf43f4e08fbc96f5801f6de163f93f82685d34c6376de5360a6920c36ff88a832ac1827a955c6a9f79c150c3392ea42733df5131ca0ebcb4e8326163b22cb3555b3dd11e815a329042edf9beb311a7252ece5993bebab93c784974be61324b0b8345a46b8d9b30301104f22f9a33b96c24d1215aacd0775ff94b7b406a18c3aaf004fbdb1dc987a5ffc9f37e86ad0fdc0bf74d34ead84ada35b37a692dbf0aef003d9d571d20cf540e642a940f4f796055f678adbd38c675284bdae355e0b5c71aed274ae311b91a210a013fecb47b09a57b6de7a78d50cac12f55d1b1bfd702cd79f9fa6e01a8ef56f3d9522fee65af0460029078cddc22b9692e64f0304c7595d59a33a708e807ee388a9ad8e190834878e649d8b7e9533cdc1cb7f82d4522a12eb1c66ef11a62e0e1fd21079974340de6daa42ba3bfcec415b80ddf6f3c76d1dd116b31f2e187b036d3310dc202ee68637ca38aefb819980b7c254cbde14ced657c4c7322e82fcb39591b19f6b3502c84891ed8449de8045070f5d9171eb24012ffde20f1bdc6744482b72b159b059febcbddfb8eb074a4e6db6ae8bf3559bf358a13b2cbc6744b4de6b01426d923810f593355f4cb73f6d1c6f25ca8d14b04a99481bf76a5ac08b55d229ac586ed6ce86db2ceb0e77cfe8a9ee9502f5ca053452048ebec778933cf13ff272effe1811b96246e1d207b8b95d0efa3fc8e3e827c2c3f3db1a22e8b3b7e92eb7d93a9bfcba8dcd790fc8f5869c095701ae4d6aced62b2117d3b9daaea0c50c0abec97f4ba4b1609b78b6c2ce5a995f0608ca923fecb70955d4ad5c49bdab204e4fae5f83f343a3402a00e7c814e74097e0e7abb5079bc1737d4548b76e2fb51a91a354db40e6283c4c91b1bb8223ad79df0a93a6dfc130c8dfe90f8d5444f2bc65260c7d0aa363396d19791abc4b0295bb9df5b639ff6aecbdbb16b84be7a63994bccf61d1442b41a5c0fbb432a385010a3e81bed78b3ad05423cb0a7d517958dc099e09cf314917d7da8faa56feb9f272867c0dcf65c8516288cbb6ac1c2414c8ada0798f62e9c2a597208b728acef3cd6337368824925970f06f1dffdddf90c161b4c00c31827c2b0549dc19d572c5284b3a787a36ad0c09e021235209b31a0cee1414cfe112848fe76f40fb0e6eb3e4fd07d461e81c6d60fa9eb404a77e947d9a379e3bad0c91b8610a522d25c8f433ddfbbaaef704ba0c02d1e92550dcb1a158e1aaad52d971bc2d86e986d446ba072b7d88d4c30430478193ebcd11faf6f63391bdc5d6790eba81356eb275f1004de3ae6286a263d39089425041efa6554e227539ca4a6bfa95fddf66bde03c64a66207578c9f3f415982b4cc6fb44d81e4c3307db5285db79fa084fbfa96069ccf51fecabdbb22c99835872993c48dfadbd7ae4de12059011534cbfadcf3b8bada2a3aefd88eec8c3827c9aa843c815f14545501a08d2ca8596f6cee7b4ca84d00c781bd3b4568d821f61bc314fa7e1bbdd1e34721f8278b3ce9ee644e63fe2b1ed09a216036599278584671a6cf13ffecbb527906c5d2415fc6477e4d8273b0ea8ac1b7c32c4e79e7c3a857d89b55c9ebb7d1f498e30ef055bc5cb84947f4ac8f3e6735e3daae71e854450272db5a1c9101c203b9883a629ea24b612e92ee662a379c196135e95c60c20a709804139e96991d9dff3b8b1e245eae6fb9d24ebfb76c15bf8c1c6100cb632f221f58f669ac4066609c483ce10020d15b443b6759f87d20fc6c6173c274268bf03766db4e6bc30a5267055278619df9776e61a23b7fce1f55dcc8adfd5efac966eb66794bb2f12eb7198e835e806d48332834547dcadb11470f4a7ecd14bf43eb551e61cb7d499b06aeed91d5edcd445a5bc83884f82bb594be394ea590d5c4af584aa9518e843bf0a6c2d271a9550065a54cc608154d166670dbe9e58ed41b5e8ecabddccb7df5c6e3011f07123c23596edf5832a5f5a112b8a429a43e518b4ecd8925effcbd239624dda9ab0f2e64f752a15bd202bf29bd5bd5cb660dd281ab4af9c4b4c2c2225d20ebfc23ac86f095ff256302c71f3e8c1b61980cff244dd5b200b5401da206f490eefa7e6161e3ec676f045b27c2260b9231af0bb8b1d34204f04ca52297f8bbb19aa3e4fed8bffb52b79daf76bd63b0aafe084920e0826974400f8021672f8210da03c182fff624f9865fa85d3a664f3e38541825ac03dd902c26508ce36961152124b0b5f0c771efd641e047070841e091155085b0f85278496b3226633f0795b61bb8394cdf898cce7dd3f6f867a6bede031a9d41921564014ebc85d44b788895b3b333ab68a1623b7384f65320b8e7f0706f24a149f7a6efa9bd11dfaf0c171b3f258899533302838a0bbb7d50b2e056bceb1489086f43b57dabd290c0e8f1a46efbaeef254800ad2979d23c47a1557ba6d4b218650edea5e74baf8c813ce73aefcbc6a22d4d23d754d937f9ef40883d6e3fb00261d4edb5b0262b29b6f38d87ab4b5e8696a913e38ff806024c27d77a0e6c4b5a05fa04d7c5510c40f074e0340c790b998b1ab93e7792240f45b2327aac47ea2174dd208cba75afb030b336b68e1d14c60a76d7ed10c6b4cecaba1e16942d29937b8bf52edff47be37d24d1782268d99cf5886f4b2fe952064a18fcceb970d4a407559d70baddf61ba57162063e01b074bc72736ca49ab46b1a18a2add5d3adf5fdb17f7bbe3012eeea59a7e0f907fa671d092bd7daf4a33d0390e166df613c569fdf6dafa63712fc9ca835d6a7fc54125632b7c61cfc672c63730863b5ed178fc176d54e8b4e99d293b1b7cade79cc6a986f7baabdd1e7ec7c2b92ff258f9ad4a8de2c18eb5a32bf394a24482cbcbc6005f8ce75f8cfe9f813de0f29a99e5b0b5b407a884efa0b140fa4cc94da14272dd489c1ad82469afb016e7903a59dedd9d54b9f5b4f8bf6906eff82af05aa3d8d2c2153abba3d649e839b379d7482d57bde08fe10e16566f69b2e3429204bc79f178a46ebdbe331bbbf02196a95e864129d01ed2ac262b7e313466f9f4a4a75b55aeb9fcf9fe7fa5d71d6b7f912405930f0de6cd5ae91eee04f2cda611737c8bfb9ef3de50311116f207db42ca39d6d9a68d628e05380fceeac80e795076675f6b5cfbf4c6b4ef11719c1f6c951da743a0cd0abfcfb32faffbf63222fabf6aa8b88f1bdd1934f4fac3722a2a726e8e962f4a2433d2310111586fdaccf939c7b7c32196bd679eb5036a57b429f51671a1ae2f50d9a7b5b37b0f7b52870a6bef5562a4c84aace5adddd157b08572357cecd343ee203374cb200851a80ae1ffd88837952dbb7e30d0af72abaf04636a98505828fe7537751c59e3fc99b3f16333b99985fb0d9d7fef8182f8e93e36fe8bb7eb0e184f351bd3d09b775fc38b9f0b9ec4019c396c3309ef7b0fa09e2d6461d1e7c11f13a08808ea3a7c9295085755bac079c33c86fdc42a8436ae6f3597bcd838f9295cac67ae7f05eb7bcfa9dddd7a1d78034418dc7071dc5b5a9c44ce0af03eb997d33e088028f6a321cb192edda128fcce4d74e3e43943561f8ff9600ba465a844e5b92d2d57910f6d9b8cfb21c574b081daa18ca9b9d70048f6628a3a3bb8a533600f83ad030b2d8d7f41dfadc24c5dddbbd1b784d01c9ac4e3a5fc412bd53aa4672a202576bfcfd75dda848dd1cdee6c65afd704ea38b378e914af28dd5ad5882366f2ee563916f7a99c18dd61b86e1c4f9168c16a3119b1e66762c51557f27d10250641e4e91e43a0d1b9b10c2788675b59bf60634d300a32c82ff5a51ca2f6b69bcbc21ec27c36a75a0298595cc2d0fe282c9c5b8a95461b3fe95ad1ff527dd93c58c4caf0356709a5eb9e4d3874a7f33ea38c4ebd0b362f98ce867cc970eb0503f1a3a4c0891f0b95d1c0cd09de85326bbfbe490817bb8c12335165bcc3f120f3577ee9093bf55c8b1f1209e82370c5cf4d59154f0cf41b5aff8db8374ead9b99aa3bdba1d022eed6b0e26db83b4d86e73949c9684c5fafec46a461f2e606123550d8815bc79b68bcd2513f1f9c0cd3287bb0f1cb740927c9ea28178cf349fc0c629ffa5ce11dd00269576b23817f60df6a023ed895fa43296c41e556315dd5d7f9bfabb0d41842271c4ee4eb11b0b975309db443f18128ecd090238d667e33c804b2b85e05c86e28f6a48add8eedece4c2c8113d669a5bd739f0f8137efa6e58679a64a76be948fb7179f53978dab151927893c5fd74e8ea0a7b9822d96512681b71d7b455bf5cf30a54cce0cd631d4aec23af53901ce45289bb87e7d7b1a3d522067183134700cfe21a5d1e069dd313c32bdc1716b5fdf67ad72950aab5efe1e545fb30fe55dde282f74799d011257858aed3053c22c836be328bbac4f581a57d4b0739f3ed597fc69b7248223e72736c95de26d2edf167cd2c47a23ec7fc15f2ca1f22f13a3496d5a4843a091901c0bad5cd8e47d85923685c156c9c1c92724f9e8210dfd4f396ae3a318b2416c9732fd037f5502b30522cbee12cdef920232e19dfb4ea9a6f0601bf3627c40c87203a9b35d4e27066cd396611c8f149695538c06cc92b046c9deb0bcccf0d9fd3bb46ccfdfec1d1251afe4efc14ad5850ff10807fd1139398c16c24a838811c583b75d49a26a4acc10a30d89848bdad0a8c8eeea3318742ead0e3be77f39b5e79c3c20da7beccbff0942c2abcf73ae7ba21cd90c1ed91a4b8a9f96cf149b00a48e9db77f92e1f27740540f82cc87d41df5560b3c6ce6d055718b0bfdd3cce8c25b7e2441c8728d92a1f06748c8b25342bf5981785ad944184454c9e5d4ec259eb239635d95a69eff608cc85b5c6bc11cd7b7050fae3f437ba8c1c35ab473f5f488194cc80f94bd128550d1c5db6a23c4aa55bd0d80ab282652107f2ea73a8c074a5ba75dcc5a6830c28832633794637213d5eb377f5f91bee7ec5b33a26d9d0c4b625ba201d2891cab740d26e749d4174a91f6e48b53d74b273d29661045562584558bfaae16f1eb5a309b7c0ed03fdc2b7c89769ac8d55a5a094b29dea28b2d054361a5ebbeab99230b52310e381709ec75706e72c295ebf7b9a9fc5287aaf9cfb8600f2b3d5bf0b71643c44b198bf3311568718e92c51b8bac2892dc2500e6fa71b4ce2e9ac8a35ff86b91352dcfefbcc05ad8c3a36575e1269267b521c70cad6cf5cf5f046ffb4473d1ef1a512f1787105c99252099a34529da115b9a4b921fd95f61083897c42ba9b6d8a5ea8f5b2fa09be4c0f6d18d1502de70e780fe86486e0409f027fa02464f9bd64e15215815f41d151b5ad2ba636e34dc42d85db51abcd809677db12972c97b66441c8eb29cf0d334b9fb6cc905c9f136165e6c0b274b4bfd2635346a009f378d5edeefc11da2339b3cf401a0cfceba00253c34c698ac5446c88a3e06de03d6f7e62235d32c37c504e2f532c21a3c6afa259576cd2fc7aafac8fd8fc5503e860ac8fa43bd8e433ba37bf8f558658d5f75b576b3adc0120ac997c8169b754e742470f98ea0dd126f22949f77320af9a630a7d12ded02bdd105692fa697c58d65253f3db0e4b0267615c739178315ab9b86116a65e88e01666a2dfeb119a256561cc4b171746f2da0917d84c55511f81126b563a9c154bfcc7a56b6b2525bf8adf8d2f1fe36e1c763bff1cfcc38e7655b11e783af89d4666bf075e0a9615cad4f1cb6916b73133f29de12daed03daf4bc632bf1253a1220a9a8bf463b7ca84154d79865f58a954f6567110c387e82866bb37aa7b8aa3deba7eccf82cb95e777ef06af459ddd0c65b51dc20403e7fb88490d79a079fe6e802044ece4d41036e9f1c552558f470384ced53f73eb7af1a890ff28490c19b0fd2b9baafac1ef645a37c0af515603bd913de9e4339f9fe0a36b45c582d163998454f9a961560d7760e00440944563f9872afa502a70c847365a3c40fb656c631f8d454d50d76fc6caf952739f744d0e2bdb76fd2f3785ef3077e0d9e7aa5edca4dcf9551267ed63c844e7b452dfe50885600c14301ddd508486910b929b1fef7d8894999d9b5386f5c6f644bb5f8dd1ad26984c4ef743f54acb7b08bc548a7e29f669428603d901356cd9520eb47e1735cefba908642748f60d2975128352bbf68498c9d883657bcb1723ce1d187f75ad900f2ea85f65a0657b82cf4b01624805cc8cd8e552d473dcb5568e0059dca21f98374dea8fdabb1a6481602f50ea5377f6533f5f224a860ce68420870e9e7e6eea4c9928fd8193cfbba96cb176f9dae2443d64561d500a7de1e470c4b377e3a5851b9cde66ab82a4978e534f49b552bb2c506f2db0e5e65e2d3cec8e30fd80a502a451fdcafd1a669144eec7633cfd0a05d180e418768c5b9f0d61a5605487e7157c269b267cdff3419563b300e3fd78c4b6c2c94abd139d8c8b9f5ee05ed2d8d5669e70ef12d93a3d43f47878eee4437524ab9dbc1debe31e3e04b2fcd1edb01720c9a3355b636b485e462578db5ca3c9a24cc431cd2bdfbabd96f348856534d9995042ad09de57c981acb8eaa03dbd75fc1117efe1d3520e04af9baa4546ea971aa5d560efb86c99a5657182846d9e7d6fe28da532a1854a5ae58566f586849fecde3a57e65f893b640a95c94240ce5e320a68155f4af5e150b5a6b84e43d821db7206703d3bfbdd5a9d3fb3d6a5405504a3d09db643f28bde75114e1f914516a8b76b6f408f06ad35d3377c38e44da614aa56324fb5d3dca4e00623e09fd6f29cdd5d43d08106866b59e58d068987ce7d68ee0431dc6625a76f12b6e680faa60f31ef6e718207c14c18cd43b4860c5e24729377007a95371643a70e2a8ff81250aab96cc4536a0d8cd109a696a5a89031d84cdbabbfdb741dbb7adb192290122fd29493286dfc9521de694c97703f30389f96d80e6df92cda9266b1fe158ce43455da03813006f7efb015489fe5d2f6bf2468ac3693c6af96a67d4075dd9d8f806a51958be6a33da59e51bff852c049d8f92c03022681a21c7eb15c76a02080e0b26af92566e77a069379b8e75d691fec04120a28239a65044a758de0941a461645423eeb9ab16bc7d0c565530bbd00c423ff053add05068301695366f5f73ba558867320bf43e8974d4733d453ee973cd8ec5c6979aa03822e7a1a7e2e70d7107401f00bdd61c2035bfdcb74141b87834557910751289486b183fb7928dfe3ebd05914a081894c9955291e68cc813030a8694197d5d4d7bfbd5e383ec79a42c267c476e9897f8b63521c0f9b227238a3b6192f10c878ba6db36061eea48c31b15b00ef6cdfc351f9c0e1d9923cc8c9bca8598f2fb08af9846c2fafc067a718c35b6f1056939823bed5c74a948bab6480214c27a46acf120cf65d4fa94e4b1807eb78ef681e0ef40d27f02f62c1e2f134c6ea5b55155df0a31dead857c35f5e754aae410f90bfacbca54f4bf7f3f24bd69e5c0cd55fd32eb9c022b927b6ba30388e52f5709398f9d0c34ddcb42633c72b42b12fe98755e84da841a7d01ee9c3deedd2f85c8625fff3badf901326918bb45fb9c2881da48836bfb7142d2e5d87c13d413525d872ed645a838aeaf04f346811c30369e2ea607e922fdb0a3692f8c074950f14e78c5a355b3784571a9794b9a149d21eb4c80213c41d212958806388015140c38c68dd30b5b48989d00a689c53e2d3b33e63389f4b35ee9ad3a13b7944f7d7e77a3063d37b02b405d19ce44cd47bbf26a3f2c63842ec4be6874980824b46fc8486609ccff238b6a1264e1a02f2cb73346e16f07bad5c317d6928470490589ee184ff6f1be403a8c7bc27fca8f6d1188d652be09dae5cf56579f43e8c47c4d441d9a7ac97fa80036b5f96fecd260de14ea2bd4998e21b2d27a9e195d3a5d9a4ed0243b51f41932186dcf2c36e4c94d789ab4e86daa375f1b4dbffd8ac4cd40170e79ee3c45715477df534f23a93b3ddca6f6ce12f057508692989227c98b2afdf000b7f9f65158b820fde07eb2bb1d17f9a2d9e30b0450c538d46fbdaa4d8e44defbb28f13e66b2a83f8fa6b7cd298cfc68273ecfe2b5f63562c26b2ff8f53aee8185943bf3b2b55af26f3936d14119e9deb289e0173d0af575eb202553ad9faf31acee9df6111185af1735f3b9ccbba6ffd96233bdc2f049e78dad40fd90b64f3c43ce1d5eca03dee98f1d19744780022e669aae469e0269fba9d9c01bcbfa65558ccb5c2f4d4114d7bcacad8776b1f5b7d2b8cffc066878e55612e02693aa6e85c22f7b1fe79361fef07065606bacb1ee3200dafee73ee4d6da39194e20032ac29aa4c5f2016f0949f5fe0a88f3d40b7c1775df4ce8b70eda3a5ad94e9eab98d642e26fd35ff2ee0e755fa5d872c1bc629a05eec7009d9d7cb99f198ff7b18dc15bdf24b973927d8efcafb89cbaa63dd7bf58fd539d77c8bbf9b810b92ef2b36d42f988ebd497984b1e9600d703affcff3f8a3af8deee638e10eaaa0fa68787c93c19acc5fb4ac232c22d88d4e6c9422983de95d5f46cd9f5fd4952b935d90cf123bb8151b9a76f40a758fca8edbce8a57d76201b60cd9c6b824fbe6a6693a67790f4062061df084e73694a12f075c2e7c5dec2932a9681c72ce9539ea5990dc2b9ed3055e4b5a4b909ad46ac6dbd761378bc85bcb3dc6edca518bb456a4451427c455395bee311e913e3cdfebc2ba3875761cea4928412b9550dd05218d0f46f351ea7d4f1f346c728f10a462aa1e813e3eea154f189939997fe605a6f91c12c86da217261aeb01c81bbabc0e9996799b662fc687d9a0b7c22965c3460fbc26b267149a0b7bcfcb8a22013e0d80d2ef44c7f0c3e43a7cf6f64b7973354ee698d65f137c0bd49be87efbe7740a64f1c61c93b6314cc5609e58e442fc42631aac297b3ff7638e57dceadd75cda144ec59b31a1ec9588abba9bf744dfdc64ddd5f31ec6a6c4467ab25e660a672a467da611ae799f21dedb3dc9554d4c60d06ddccee6dceab4da382dd2525095b283af32e099d3a281089c306301d3b7e50b05fe859b80de8c41158dc396f414ad43bce0fcaa6d1ae1566ef5776b254583ebe11bbff5d6dd85f2fd7c60d37e38c906f21f3679f310d6f82de219ac601474d86237f5ec5579a954ebbb56d76fd206783ff779dc66d2597d759b0fc75d97569eed6388cf8d2f05163e934a1a09b385a452934d31c1047d5a8a34ec46ae1db62ec4836036a5bc56055f47f527c650c0ece3f29274dd129d943739723b129393e0380d4d3a341e61da5be4cb4a6099b5f04f448df9c7c61802ab09a49683eed546c7576620480edc6bc25afa9f495562430f19bb2c82c962548b4d6eef27df616c7a3411c7d415a8d0565016d5fcbd6a3f3ab575ecd2f39b6a0002a876050ae3803d50279a93976ce86800899d640c5cafd1a1ae93b40f9cd8dbe330f4a387db943574525a54d4c8cac0c770d1e225a94a3599997d0b511d8aa077285074b83a93ed4ed49aa8141f2107f933486d1b9976c3e96adce0c7e8d39d2ce1fc0cdca80e78d06d87eff63dc28aaab0488c4e10380bbb2c02d74d254dcac231b28e735d6adb8cc323e7ddcae27b3e8e78f64263caf4dd88c1b7bdbc1997e85ea0616d64a91efccf5117c2347dabf5c5346d9568ef5513062bdb869176a9621f9bdcf820112d72b4eef6bf49ba01fac56cf4ea0c9aa4cb01db544789c6fa5930a29ef69b68263dd8ace1c8020c22c20b39c4944a500a19c7b406ea9cf062f62e85087a3aefcc7f7c26bfc0db40d0a081eb49453ceb93725ab6b95a7a4c8879433ae07a6c9b43ace2cfbee9f83bbbbf44e9a1537bb60896583c067b8af82339fc443ef3b77ecc315dd0ef8b23ecd23528852a5fcfb6ad5dba0c5fc3e1c672d801a2db1407af1eee2b87635888663b33de51b421de44f7ca26b64fc2f8ea1663f1e9fdb7aa1e3a06944133ce5d57abbc325c31ed851d20141c0e7ed254c1879bcd302518a82c81a6b97d26b790dbf40294bb24563e1015b53db3d1ada9d92c42a2428caaeb426c050dfd86ff5576ef1a686bce5129d6d7fefe6da4b3fd549a9448331ec6978901bea31e9a9cb4a9722ea785400a012300fb61fd166296f315dc062d8de2696e781717ef0e1c1e9b8af5371e1559629c66619157b30b49eb56ec6f9aa1c794971bd967e7b7c6ff4e9530f9eb060ebda0c4cade9433cc329cf6a7146bb604551c0c24d32cc11e5ff2cc8e41d1154179289a43b629c6fd29c2f3ddc705dbb458911a3132ee9a3928d690b2fafbd3aff029ee0d28839837de9846725134975aa4053d7fb4c5e49c1899c52f6bc6ec701431e0d43e1af3ba4aeea2d8e3a4ac664b5fc7546d69ddeeabc9e54c9bf89d4d6407a6a78f81cb52b92199a00afbf72af071e8a3cb5b26364bdcfa4b96ccb4b2854d4713ce03b7d9912102c48f49db7a0818cdd4db243a2c53dbddd077289410679a67491aaf8e533655277c380399e51a61b24f141e7bc382de1b3886d93da0ef2269991edf52a42db33697193ae150b2b308b9dab799357d7968276455b4f3c3c7047e32aa94838cea89345d875462bd12c75dd415c924baee259f6c0874e5a31856d46f170d6b9117546ddd6d57d54ea8b17f5a6fcf410b40ccbcbf92a8031b763df8d13a78f6f1c9d50d42eb6f2546dcfa3d684f15bc6a8261f8a23c658227d317adeeb2008043101f3be89024bdcb6aeb2d9dc145946c8d6d171bbbc2c8c686c39d7c61a4554e91825f3f35e7ad2f3872d154de5b9f93569d558532877e3fe552a63f0ab2291e914a41736b6fcd349a4397787f396bfe92c9e3b758949742159cdc65a85f308e4f0c2a64903c1e415a18fd91e82e7eb1513d5616f495bf9fce2a525a52b431420e97c31a140c4ad70b678263aad0f88ed12dfdea638025350c0448dd3b1e0f012428d0a5b1ae8442349c30c7c10221f98d017195cb34c3a74f4d7212a5a008abadfc542338a474bb29f31298afdc89a71c303c6297426215c44412db7754445623647da60980a51e37dc61feb426cba4043e92e7de6a5a3e9cc9b837bf095ede72d170bb4f6693b65897c27c69f947ab5f00aeb8790f43b099fcc5965fcc8dc51d82d22657102d2d915b937bdcbf1f0b957788697b8405e4644a4e0bc6a523554a3c6025e7f0ec7d9d3bf191893c00667bd0060a44ea24db7267688ffba0f18546c1283bbb44f730722fcb7b9beb638125b9ed58a380f73eebbf78f707345c152ab60a8f5dfdd9ad78414f93b6f9e9fbac2b5b346edb70e78d79eea4bd8422d9db32a7f9f1f50c3aa31ce2a09763c5ff907b1814c0ff4d2f706dfa6895c4e7404d3f5b4de06e2ff7fe30fe69d3b2bca96d71d7ae44514c98c40d4881f1900005b770719f23bca1822ce61daf6a70f983803ab2a03ae0f65de8be07163039b2d732c0513423cd05069c2a8ca7ff3798d623e7b4522242025e1c90a2ea790cc39d384be6a183bf5572038260e3414cc70cd5a8bd293ffada4e0100b361fb0a424df5090f27cc5353e5d5a501cac9921f7c186866cb1c7497e976a8c681bf8bbb2cb4cee57a164ed52163def3dd03b70cf9c7e7dbcce3204627d2f2890857f319dd3cb23f91492d7223b184a31621811a3e779b3aa2fab05a07724ce523ac8aceafdfc27e00c8317baa7bd89727fdbefaef94c25b64824dc9f6cb450122c28db3807c3b0fefa4169e14093086ffbcd8c9b2e8a172f0d4083f0b73b10e1cd4866a81ebb3733e14fbe30e65a9c1e5e591f420a75f2bdb3043192e44c45fd9526f254dcaa141938262022d16bac01ae25e0c825533e72d7dbd86b3a9d1f3ec724782f0e3fda2c6ed11466b1519e1df825996d449eadf3b9126cdb33451fd2f9fcd5c106bf1da13c0d4846c390e4599eda6d8454593982e97c23bea1985bb8c5bf86831485e00833aaaa8fc97bf610bf1f5c631d9271fadfcc7b7096d7837fb7f04da672b17827c500a34a292189ee2eb210c6c6b42f4522aeac70b2535784cbe183c8e8e508e9f4f4af467a911580d226e82516a6ec105f2fe3d71af7d740353b70be4445745b43c8ff5456f7ed8092e51e87b22d77da2c88c9083a38d62e4fe6301a8d936a3c1e82760b7886078749d6636651af04a5123cb1b371d15b750c57a93516a72adafe184bd7f5524d9b538afcb85d1580c18f952bfb2723de6b432e244c1c3c917759eb88d797e2f7672d5a8eac100d1d788545259a8b33c2c510944eb79ab87218f64d7a0db04e595eb8e8f6ba7beab54fdc1aa33156fb5619202f7b9eee11b65da9753c306554f266557a1196176ca5e246e0f09c40076259d61f6b2b485d6f7ba23bed162624e786a6b5d36ea9f768299b22a5951e10e98ee09a95768c2230e0a7247c9afe449bf5cf2a52373ae119d481350fd149143434d724a7d129a9e0299dfc58b8f5cbeed07573277a449914909a5d7e5228b2775624592eb85041ef3a7136ad86a06851233ab4aa13b2d1d652d8fefbd093d0190c57c49a4fa6803689e67ff889331c0789105c1c622385545c0cc4210bffdb2bedf9f5121824d4957d878953cf1f107b50bdaf903073690df1f54f8f243d429024ad2a22c55e56ee93fbdd0345de14ba2b76a5aba7f34444d23647f339c37ddec0aa22525f9beb300296d37099a5823954e42536406b7feaddad5e7b5903c847d3ceb5f6ff6e368f8aa809c4272f721877b2135d8c2f67cd24fb7b1e0b8c0ffbdc611dad39267dce7ff642061f1d590881aef058960be5c7b3bb2b2ec40de1b4a65a51884403ec3f9b421d5afeba9014efc3af8d2eb707e34b11a8bd2aa865716e1f56c7d121548cf6660b860fa53555e6a23e4bb7fa00d1bcdf03ed2c27838922cdea99742ab47e98f874b5f89bfb5687e2dc6c85f074160f4c6a83cba2104ecb01076eef51d2864f6f90f747ee19316d454ce5ba0b8d1f67cb3936e45e874cab34061657fc978691a0eed0c120d8c1046784fb01cbb6f3bcd06f3e56afa7f53a86fe17a76dac920736e4549fb66f756917b025d4838e74ec0599083f1ee527cecbfbee993cd9407d8c744b7a0a6e918abdc1b9004bd1265f0de1b22736b6afec75a0aa0e6cc4bec91317edf00d471fc6a7c884551f549a07605a42298c3056cb32f5b3ec54b37fe1c439f98543add7731ea2d4aae6d1af34b184f24ed991952c06e149107194265ad588753daa7179aba88712042e59af67fd9dd0812352b3307f8a50b12a0c074f98155d45fad4a5fc0e56987da6fe6e321197a573a70e27bbc01a57f21e9bbec84ed32a884c137ddc61d6257256fdfd417093cf930ee841a91ac185c92a07aa3e8027c537bb3bcd4456ae44afe504a4dbd1694ef9223dcaea9e1ecfd260c47ee03943aaeb595ceecbc2a186749900f4e88a149426ac2f200cc4e7b7185cb6b118087bc07e192617afe37bdce8e67b79f24885923853d73c20b6306b339cdc964ea483500c8c2f661b7f8fb5a0c2be4efc5cded90c426916b9232bbd24d6330d218bd976b63f41ee8c445e082f3a41f69e3d0291b85ab782d5baabeec9156a5bc4deace32765f91c2304b221e1107c70fbbdcedca7f9967df96cd80030928c85d6f05a52852cb272b16d19d3f03f9465e58944c56200a3b6be853d71635f8ac7a77af9d981612792862824d63e0b29338208ac182cae9eb5dea007643d50aba610dc074402692f3372e52115eaabcf08936eb595c26132419bab762702602132e04431eae187e0976fdc5c2fc3ae4baae209b4b3fe57f794c33d48118845ceef063a2990f252b78b0f4625bd172d06973b577108611921cffe58960064e90bb9ff80d0eac618cfbf1b0440df81d6f4e28004edac40ccc2bfbcab4683b02dd88a455c50bfcd97c404d933ee0391b157d95e1148397a33b84d9f9b88048a938b16b772fd586e03ca4854cfc203c428fb2edc9872d05a3a533557b2a4bbe762bf5a734a7a9cca627505cbbf51fd56e81c46d4114891585a60c5839584c36e9ae635b87f8e9b3d349d83fa3b1fcd21f25eb6765dca8ce0c38e8811b3828d719079a4385f3159edbc6ef50f88ef739b9bb598cbd3be54bf64914b24b6920363f437db96c72a9f337e9770764fb320e8fadc67792b7999f8cf3fc635b40e3645ed4eee273aafef448956f36cff5b6a030f8fde47233b338e771d28ad02c45a80c20ef97d55129727cf3f963d22683fd08e9f2718cddf3859bc5fc544ba7bbfdc5f46241e397c441296931ee8711bcce412a7b2f40bedc150369d7c4356c75cca58312f9b6e48b45898808215d536d105527f8d2f865f7481960fcaa6b50d4e2f67bb711b2067ed2e0628bb6c28ed93c453fff4baed84a281bafec4fbc74efe01b5c3ed9822ee3ae9c5edf2be6355452963287b6d9079335d6caad178ad90fee598142ca618a1ea89362267d7cb3cc67f1ee5e049a683bd8e2ff190c7e9eca113582d31419381437b40ba9c192a40ce8210aa42620eb055e2ec2c8281b1092dfd3a50b0ab318a2ff0d9e8f783135d865831d26cd4f9601ec594e211582f8097fec5bc3833baa8badc63e95e5c5daeea8ed6ac6fbd10a48fbfe973001154f759ab2df121acad9cf0019e9ddc1163b0bb1c84cc95a3b9e948924299a0448ed8dfbaf1d1a358111f215c6a275188de20cb8c02d4f3c5b4041d6577ee7803fce75028494758a1230f201ae9dbd22399713a2f31b0d6da2adcb74d244837dd7922aeb095abfbb6671e1ae7a1095cc29386130847677a7ff684bb873f2c17079859e257f3ead280455ff038f2b4aca3e562a643597de92ffaaa11fe9b62e4c31a1f47e5c970ee03d2fff77be550f31e3e131287b9178d69f045463e49b82e27d4881fbf8bcb5e32f2b2624e9d4aa27079a5cdd72b4a4755c38478e034df09806bcdebf7bd0b70d536cd43dbf25e1c98278f25339ae2139e4806557730a192d352b15dfcfd4f3fce940cc8ec28e0caadd98a5827f3da0c364f0f7df6d996d609f517df339c66da23cf7ce88fb9a6b6005251814d2a5a16665962050481dc679f1afedefbfa16fe97bdd9b06197b80ce13083102d4e32c3fe0e41215e32466e0d757243773491e756e01d90e3eb192f7f940f562c857f968f3fe25f44e9ec78971000ec04dba4367654537c7fb090d65eace075277e3a6519d9b085f46de9929f87aa9b3b07492b4b4a9e2b58b712ec5c309d225aa6788635699ea52f3cea59ad1f2f588721c939a5e592811434bde5dc4a530f0187f7ec01aa92ea5dea6c43276258ba5f130195cd3eda74b83e77a7d31dbf379cd41d1d84a0443d9d77099b61ce5a94e66929d169dd9a7f081e64fca4805f4723192b511aff1289c11525cc078dd5b3e087b3c66f9839b843a46cc0e21b84389ea912d3990b72a10626bf566c753daba788af7927313fcd45ced02171d922b66c0443c99dd48889302aadf5a9dfcf913c64289d4dc6db9421c547dcfbc44c0c9c8d553f62fc8c917866df8a53f70fa55e74fa1b463217d1cf045bf654873761887f97327a4bef08f00777d4209386c510b39fc741393dcd22e6e1fe6ad176407af7e9d9daf21e819ca930b322b6b5b96b96691c2e85a78fb06b6bcea5c0489335227499876c875b84adca936663283e290eb6d16e9d25b83f0541760aba51f77b3616505da6bdcfe049f8da2c02db60bea65c6d2ad3ab196952b909e3baef37f5f19deeac5ad8db2e0f4d8498281f14f1c1317c5616f66285f71a679634ec47b262667c4e03ff9d78d619e1878adb0224dc703235ba50ef6c57c1c2bc8a7d77aa1acaebd1415b112ba297a540d2841089a8caa5d4d434b944c34d3db2ddd9cee689d6d0876adf517ad9c197e80682523ae0b9d1dd81fc03053e4d26b041f4d02b3438b03881ba0805cd0bbfaf23e1259ca34fd6c548d58f0ce74d64ff595cb6f1202e8a5bf529d12db40d6916f60c4de94d0e2f08b7587b5da999f71d5515d95e8ef2e8702f96c2bb5520b928021a1623179e3fbc078592991504a6a7b58f83519db84854a72608a4cb41be56afb048c156ffd84aae0016de7eef337f6eefbb24f827ea7e038a27395580c4f5ee9eca58f7476a831f15d8a6fb79e7df5e091916e1ea73a36e3e2ff9e7c41c49c1e7e1f50b3287c2e4942ef7075ec9d16b0249d9ebe8430e5a4ea38be65a6a11b31ec1aa0ae1e6758cb374b4193e6399c299b3f431e562284e15dfb2b406ab0ac962c6f0230e2200a4de6fda4bdfc5f41af2cb45bd06ed0bd6e28b47f8afdf982a970a6f59a172abb67a328e32112b0596f225d14bb4ee750d6a6cb15dc7a557d54afbf7f2536fbe2f546128c20fab243a31488f65d77c0078d5e1d3259f0e7dff5bba0b9c9c3dce60ab6be0c9306329440142adea92f6156b1eb2d0fbde1d5fe6caf002fb5b739277a18383f57f468dcf79ed1258692af520ddd32e49c044517d145da662593db6903d4304c81d728e66c612277f9c91b82a1468b65b650d26512d5e868982bd9a54fb6fd7f4f6ce1e69fe90c9720966fb303e5e3820e0201bb95c1e0cd3ffbff863d8533900e3674cc9d9e9b8a050d67ba7d08973e9d7c4afff7afa11c07bc1b83fb9702566819e51220872ac304adc403902aace55a4d740e7a1f79f01d729191ab29310a35bd8be134fb86690eb760fea2b311cb25855d9b405c5904b6cd3550a605babdde37d33343aad7d4cfb9c7b89ba3a47bb53689e595eb3b6ca157da1f8eaa04ddc96c7fb9d22c95e1bd2475b29e4f7d4720c5b47995dae19db8fda324b1c7275de7792a0cfb1e5df495414401df722228f2d7efea4f834a23360fb98a3d830678d229ac087361753a5af71dde630efa75d44a4d6f657c96ce9997ebf5f064f7e64705d2d23595c76d1663d86029acb988ba7a62bc3718323ebf8b2ec934da9f71f0fe4a79c69bda99ccd5231c6bb0f3c662d901d30865bce0758e9bbc08b56e46851255e284c6c6b0bcbb6ba5b431df97f10f4ef5015f49ab84fd446439c0087c4cd39625002a30430ae1b072121e539e42e293c6a89f810476ae6a303c7f3a0848ec1c74cced393260b336644fdc1fa1cb4dfabfd6e2f44bbf9862dee05e5dc36fdfb61fc30dae6caafdfe9c50323fec9ba856c3a754355f4fff46802a116b84a783f291ac3d9374e9bf1d4c836818aa9e773d2d74821d34a73058cb6bd5bbf9e579d83d4743200920fc0880527b8a020505461168a70ecd4d3a56d869e1b21f418dc6c3d6038b094717b76b30d05ca91c89dcad288d8593d66d1515f4f4e92e648ea88f02e26f429ea20131f0da70dde1c5954697309a1ad2c1412ada33d1c645aba6975c023d2e516f4807f77551340e7f1c4ed621f4fea61f8169f495bcd5d794e7b7a1cc449bf391f6c2cb324be4eb43bbc328b6ca3def75b76cd404ae66748d788e1cc8d97c0d9f11030e84cfd6de6709761b36e65448fb01484e45781e584f23d479e25a86c62c7f88233d5d3e9b9bc5e6044d5fe298b5c1e4e2aaf9a4daa90e11bb84d4b393d076a95f4d05fe241e05529220687fbab1d25c9c3fc7cc9d2d933ace82c127afa8cc895bc278a64c45cf07c332a4844564f84c262bfee7a58e764eef992ac7599d30ca36cd2c52732d9dd120965af58e71c5a8e2d2964249679bf36cc1f052632daa3c3b3e22c759332eb93b4cc3bf09b62164f6dc8f37a8524e96d9562fd3a02b5f83d29b466e6fa47ec97ca4696f85f4ff1f65f401aa052b17586d55055fbcee4b0a3e794fffda5fd78fb0d5eab52bb8157f97a87d97defe525e88becda274be3d62aa6876dc07162976ec781a737510a870bd83ad0bf2f9db27b82aa2c9e86d4996269ca719efb5efa5c79107fe82f4f6e6f2360080264fe2e2819238a9db9fbab89824b2e9792c792b04b6c6d2aeda67205e23e100c9d96414eba19ded5f9b9cf1cca1128301f767b8c1a2087d5beb2a3a1063776967aeb638ba7a22ecc298f85b0b70e01f0fced90e2325bcf689b68647b6a90c40c184404d045cf9e4169339e20018186df48d89bbf4eac0139a125b430fe11f7b9c917a2881a586273eb10fd381f6b3307750caae227304111efbcdad21241f607b8e9f9d7bdb3fbe7c3fe41f2f9cf9d83469cf642cdb7c3c1c2e534562728136bbd5bfe3ab3aa65f04b1b4b19ea4bc8532d14e232457d597a2819b61061020dbe8b17e2a6435a76d5662a6a3ef9e647c9ca6ddf423c898fc6816920dca7f85a580a08cc73e76c6dd31677e8be0355ecee74b67d6c50ad280b9753b7ef78c67dcf3aefccc2da98a1ebeae9b7ba2cd1434621f27809061423b3dea920d4d51838bbd72d642ee7c3aef154a0c458b1393613ee09e30a547bd0286068cc5bc9e71bfdff3e8f0fa96742d43bebf5994de2072018e142a956ca8a0ce0535db01e3d84dac0f175456863165242e3aa15a3cb6c449200f0332a62c4fa7d9781eb520805e0146ee4275e9f661f2e36a2fdb039c154464780e8fb54d8d4bd29808dd8946b98813498b18ba9205f5cac5e9e2ffb6856d8fde4379ff88aeb83d16530a1be94e74e05dde509bbd33f016dfe7b1b17d2c75cdf129b0059f4489788e6be80de1a7d53b132ca47d95e745750e8ec63d810bb41c612e5991b4062c3014c2f76173bb1c9495c46ca45fa5693011d033396680f5c35c1ec6a6dfdc2e09f75c81b619fc5ab6e05df9eceecc1b44156e3f7a07b34f363b7e37ba180d6b60b2b2ccc57bc17a74c6889238f6d106220462330fc0873286b55cb1d29ca3fe2a0b1a13bee094ac4eb2049307fb569ca458af66fbef330643d4d784a6eb20d3076421ef80ce1cd4df83c3e8a25442c96b9f62d27fd14bf8b0096909f29f97eb0a0308ae34f7086a64de71867dc345ff6c35decd2ff3fd87c29e045734f4f28e256f80be6f5d03d6930ff64bf14c528174160fd1b4545f9d56d61b719936dfa58ac3629015b1f35e94d6bdc2fd1a67c3bb87efd92c0d8fcd0eb58e9eacccfb2a87899656e6ad3c2e7715b0eee7efedd4441cd671d76f37dcc46939782ead41ce3154cce2a69eda4d8c7f327dd781274b7424dfc575d5c62995fe38936fcbbdca5d42a2f3394c24f2f6d55620272ac0da9ecbebc622e267df22616897c9bf658a625cb41b5c63ca508a3134e1052b300ff92fe7419f0a9040c6cfbe9b59bdfb1274df1251e64d7237cc247ac44564a18428e65479ae20f3af06b365d19a223b0e2403a17ac29ecbaf879bfe67db9279e29770a870a9278021c788c5069e89908e7d6edc0d5c214f9b808043dbae25a295576ab65ef7a3c79b7b3bdda087f3fcfd2105c4ed9ab2a9baf91fb123a3bb700ad867137de7137e469e6daebd19c7ccd5dfc5a70aa275439b57b07ad30b507f39fe69d66b6840c8c1c6756605d6a27772e117392ffc634675d37cfc3f1d267e2ca4b592229d1becb2e91041da95a17f9a97be9d48ae4b157351290e14f4027e3de916e7bef2c1d288fd07010691aa74f9088c90e60e29433bbf53e3722d7ada5c1d7728bccaba0dee2b9bd2c711ef1983237d10cc6aa766b60b7280c950cfeb04298637b7f2727377baccf457798d35008a6e97d430ca7d99e8343304e148ba7796b94c2c47877806ec1733b27b3f6f30456bab841d7e5e1e8906d9e3dd3b6d8c45e8f62a60c57b6487bc3b972ff35f822e521964b8488f60cc0df1d8e762e21605e104efa4601fa79ab555f35217195bbdd3606893e050ce93cb8bdafcbf4aab52e453ee83e03cc8cd6188c654d7a73ae565d76d1bf7c8dbb2c9412e00d21e52f8fc5391c92c6dc346802d96bc8b946d3fa5b4520df8afac0065ff00474bfd733d58e0d169087e235b96d6a45057c5bf472255c34a3558038d56dcccbb5fbec2e9900d9b88c97b488f12c1bb1d8a0eb0b5eaf74438f25764cb90be2cf509c497f133df7bddecfa3f1ca43e2da1b367eb2d0e21b2f985f1659dd38a9db4b59538d499f129f9af59e666cddb9d997c88beacbf77dbed60ccd7ee9460542d68147264f14be5f0e73e81f850cc043e83fff40b8c8ad88b2f73b012bd6cf776a16f533f96d8a16c1ab33a39e8369d87f340592e2944a63c5bc74b78e028f16efaff63e3076ca46919468e1a512d99b75e53150aed05c0be9474c60662c16920370dde7ba8c7cb3b7c2a9e60faccaa28432eab6cbd8de4279f405509be9a6d3cb34022e1b7c73e6e53eabd7232f767b3d721c787bb8c1fb8b9d61b9998f2541e00d0791202973a5ef5ace80850c7021635f24ef719c82ba9f6cde77f6151aa7cd310a40ef480a1d3731f942d4a3f70de93fd643db2e523bb17ac2a8cd0eb356771aaa95f053fd17916f84d835b3521f4a1132f5a573eaea9478998e1e866c87604552c5c1bd4ae05e52c790613d3f882bf3fd46f48b81aa742c69170359b87736406f80b2f70399d4485c113f92a1c639c75405da9ac3e072c3e785039d5ee2d18234c88638fbeec09be140279625e9a33c66061860ad892f7b59106dbae7827e170b7986aee7f8d39706f55a884f1f0ebca61e97cc79a22db39b1f171ef6879a465b2c48cff415632ecb89cde8cb142f0bafec220b717c6e2eb496ef64266713a1fcdb8218e05e3b2146bdbb48d24c9e72685606c6b4383eff22a15a19a13aad864b3634455c2f289adfc9c2fbcde5ded196c884df0a4979a141cac768cfea2d279119fe349e753e9690007b89b82b7a5143e353aed6545fecb1e9a00305f3f1dedc153506ce915f335fcbfbf38390c006ac97891f036f4ca37098f2c0872c369f68f71a1d45bfde0f8ec90aaa0e8517820292b35e493c169c5369e2ad75d5d957623f0e95456accbcb5f356ef7440526d05b1c367a454b99009c88fa3abf2bf49792429b02564e87e5c1bb4b704f03c7b6ecef8fa178b2d2d485a68aacbdd856c2d2e12aadf5ddec7ee672b58d18996bfca0487a38641320d365c86b220ee37d5ea93e69b0cca34cb4cd4e494ce44d2820be34d376d3f268ac1bfe8c7e6bf0eb9d19ea7f5161365050c44925b7d8ef702cff07f40921a4349fe617c88e3410373d600a0a1f1bb2dba778d6f4dd0a9045ebe9a7df59e079013f09ff7713e5981af0ab46ff4050b135a0863469be6f2d34c4439df5bbf195467d9bb74859f8f5e51b6f098c4ba6e328e12931846afcf74b25eb3429642b6d0081d9caeae66796aa5c8d4fa965524b416d839032ae02c5d38de15564249212c05f21ab2ec222296b58c0b2a68f2d28ec7399d55b200decb6bece4a0ca44d6ecf1980c9ac53811a8a09e176791e47637bbe6bb6b90edf47568cfff148ebe878dae554fb9dfed53f55b26106e1fe1286d35ae148d127be2e8379d13ee68685001ed85e42ea61680f707f8e6b0dc85bbcfb02388d5d1f00e20ead55ebdbddf5da7aa30b4a60626f5be64cd53ba35d25713670c89be0c7a4d44b4fd89a06330b4d86836e7ab6d12d8b21d3e4e557c4dc9d250cc286734b3773a092fdcfad5c5a49e615e0b51716d4a8fb39974e5e56198402931a78c0a8205569d5553c56a6f61ad6d65f97d532b4634cb024a2bb15b3f4ad08d43302c333b845c871e44c5c462256ba253681a6cb69fe577708ad6d92ce9da22de45196787029b44e3269dbaabd3b51157e447dc436d0312c0f64de2e9b6a9d23a66e7d82054159edf80a8591e18bc48e34f3c0e2762ae4bfda060416a28f14f205e74dffd8f71b1fc1d88ec4cec580b271006712f3e3b45f35c224f0b768848e97db390f485320d323093978dca8fca81e750d2e8839545ec2b304abfb176e2f5b0e8702f5452d2d59a2966156c230c73c7d21c5827135a3c0e2bf31d752bc25d0f7951cc5fdbd1f6aa9dddb885f89e8e129a9c09b122392e3635d9774efb7eb46b61f731411fd9130abf82b0a7c6ab77204f4f91bd5e6cb0ee3811e1a8b717606b6ab63fd29076d1987c9ef082a2103d009303e54253f5100f07e87787ca0c7ac4f76ea2f636d8b1dee8a150a0bcf228ba703e79187d19ab2d608d73903c1f7eacead6399de9e7250356756781d50b426672ecdbe558e4e46c749080e86cb92f0345fbac2ef287bdd3538e1cd498ff7a0e03dea46c730d60496210f7a3063eed64a4f71c8c715da8af59f916790580d4cf2acd92252a187c905cf4372fd886bf8aa9ff30afd37a955bb77532fd32ea9b95670b08d06afdb30aeed5e32d4170c9f806d8029813c87da6a93c0d93078ed212b8dfa824e23d0a8df253bae0117a8b3224f4118a68e0267a0474813e4eb75f7c400716a01f983d3079c50d66b59f2154ee8b72ba690c89e89793de9cde3271420099ef22862795f0434b48aac25cd679fda430f1ed676398ae134c1b5408f25641a593b0d25465c6fb49daff868ec017f9e69192e3f07730c48928e7dae97be3b3bb4da54d2f2136bb53a9d4f96ced4ba95353c007fe2e40257fbdd772d28916c231cd0e8b6ef1b9997add97d410fc9428c70c1b62e7f1c899cd70dadc49b9680cceb2d497fb2f63d5075aea81c6859e049950c6f82318659e6ea46c06fa1410fb73031a767d87296dfd2e6105c80ff8b1ba53b019525f4040e7624646014421c33e21351fc37ce671d2ec668207aac5a7959f4b91c3ae36c95eec9ba325c370f76f1f3db67754ff79656e3380c508d7737d8ee5b70fb56f5ac2089834d169c6695f73b1896ea2d946ceeb4fb2c0a2545f09355b6724fbc56fdbfce3e5735c041c36ac8b848d541f49d6a4b1f0d7bf730cd3309a2800f26946f87f678645de8d0248d63840d098fb81b819b67614d0184de681832850757739232c9bdb8e1a27f83ce1d011cf33ad989c201d53b593c0d8cbc7fed94d374a7c44ce16c2168df5d7f86573f4a31a4bd4556a796c3f734916c6c3607818f613c7f2d12e54b7a56895a0df600f66eb59acadcfb6f7824dcd4846aeea7f259559b27c9e5450a022dbcf14bd6784305d25ea1d05c7c76a400e7f12e7081c6b9db6ef40acb04784a1775499c6a16d9239ac00b742e3e03da78f7b32138c260d20f5db9b4788a4088c32e6ec4505ddd0aeb3783a34a27b05e71e4ab89c969d27737990543fb635190888a6bdfc6655204a879cdf82c4a2d15a8b739b9b76417c2bac4cce5b5a05b2f37aed70f960e7b84d6a2edfeb22225266b3079bf49891fe90764e85db4683ec76dab68790ecf2011f3baf504b10ba1149f92ea075cfba730d08f032e9cb3dd1f22aa732b54849b1f42315ffe69b01f5cd017e0dd2c74509650ccee7dc48fd35bfc48edc05166ab34c18673711a5d05c4c448070d66d7a53d6ea9ed80a13a4f6666130c876bb96a542e89c3bc11ce9bdd60f6cf10eac4b0d47f93c926201acc55bb8d46e65673e27d347ff0329a383ce7fe27369d85477e950f8f13ea753ad64d64ce89c89ab8e5553ccf70c318ea7da01f73acb54fba617f0dc40a7fad61f62d7e2f224c01a875be5fb35f804c6dc267acda29c5ea5bbfe37ce3a03e9be64e7ccfe21ad2887865ee79aca91daf4e81b284cdb0a0b2a8a6b831b24dbbd9222e8e31ee82aeb25d82d1b64260179be431a2a1097d788e8a3fb3ca98aa76322b8095b7a6223c35077d0d8d2459063f915f1130c7938e0b17ef5edfb8cb931a93d6d31ac3a0127b975f3167664d65fceab2efb439a727846cfe7cbf584b421ae0d2fdf15d03817eaa05da48ac70d28e1505b9ebd195ca0c60c3cb4b14f04f04b8d335b54919a60937eb10ffbbc265d7dd79f5fa75017f9ab84abe56858cdacf82e0271da09ebe7bb8a4fe49fd166050f746852aa2ec5f0e98b18d7f46b0de108d9afeed8982bef4390624bf5ab11fd49eefd442800fb458ca7afec5da9cac842b59d27a06a2fbbef1c977e4dfd4c39fbf62c9b4fd78f818327e3b2b8c2085e290a4832ff69cd8d657e88ad0075c999581372fb235dff13f9bbab814d122a738e0ec795159ceba6883826cd6c53d7204b665768ab6281cce65d9efd0b7597d5b4f7ae76c1dd7da143a89dc1eb507748260dd24d6ce499b07efcc5d7b5c88247db351e3b5314cfe65d4a15272f452a26e19f5640f8b96b4d6441677a164d65895548e9765e07e2b7277103e110c587545bae0b7beb620712db54b7b8f54bdaeba6e8a32fdd5917bf52c4431657f3a5e985bc284f782f6095475d7bf5ee5fe7924714cf1f7bfa97cd652cecd1bb655339b995bbdb2595a91733d6eddf482281088e17bfb53bc29ed95ec1e3ef66fe33749b2cc89973b2355ed4c788935641e06e3f402bd5ca9744d97f93d504cd8fd12bc341812055fb619fbb7541f3ee550beb6aaeb76e7ca043e7c46feb71f458c027f347eba91659fb2331d9d159da643fd787e43c507c3449dc4c4a0dc4af81605f577804c43709cac0fcbff48212546c20953da395a3281e0d3e35f0368d9ea14a3c4e37ac12ea87abbe5d218c6bc88085f0ed96ccdfc79c20ec179d8a509052b8da4e4a9af9411404e03cf8a4b68a1d55e089c6407802c7346072ff7a1403897c2ab300902771a1901f7da64a275800fb2ea7cd95fa301683381671765afe8553d2411549d10cf81f05a98e00a3b8f44fe2eeeca25d58aedc9ad60ddec5ac8b31c31856ce116147b54cce14290e6a999fa15d74a51965cc19e0afe56f98da6756db334b5d76e1a5d089b4ccc10ad30851be7a6cc1794ac327ddf3cee4e1cdd08d179158cf0908b532abdbf67275d594ca6c3d0f24a810506c8397efb76ee55e9bac6d342cb03a8393aa03f77dc353c97dc8c2a1994d090275ccf1016548c842b62f280c565ac5d98fb328901951abb12d51a04abf70208d97c7d58d006b878b628865f3d574fdee95a8103ac945b59b1f2180512e1ea045375894a926a765a620ab4fe7273df6c0c537d0e51b83760b401a2fd81a091e999d23b79f30b7cfa6f893612259afafa970ba04cee3fb5659d4b9b1965a6513e5927c9c82d051a0a262b0d4c43c83ad60de257f6ccfa83e796bfba36e4aa6117c6a1ba6aee9f417921246f8685a966cd0886945241d8f6c165e079dd44ad83b33fe2ff74bdcf89e63fbe99b018e7fa863eda254264cc31ea168448d43d4c0213d671a7bfd122029acf90db6b4661986e46d191bf2e353fa1016e8f9fe5cbc0d69bc9739f584729457da7118474c08455394f1dda0361c7da9aadd792ea45698972f5c0497e11ac8f45a19eec237a2c7347728eb908f9f81010f53bfede199dd5d3674b46b252577425a1d410b40b644966286b32c813f806ced3396b909b26b50adc6ac0463b2c643dfa4a965dae2927f3a7a5bd112c89aac2ceeb7d03c57b3ae5e90baca16f53ddd6410d2e13b7375bfb46ccee7bf522013ed69e5b9ccf17c4c05ebfcf9d60a160de6706927b4fc532a4eb34e77373d743cef21939ca77f75c8b067a24ba0b5f76f200941f5cdff400e996d121c681225c50c8074ac050c3a3c512018bfd84351009d60dc04f2742b97e45ad4da75a88e1eab5bfbaa9dc0d96f410123ec716155f2afffb4a82333c23538c21826155414c5592eb584d69a536f71ebaf325759e1dd4441c1abb25028225b1a816db9d44630e2656a39e373a441c1e9abba09aa68e130e04435ba222edd8c3250e030031a33f8c707224d703907b5ebfbb1929c1394b49490ab877a6a4fc8b8f1b6589216005a66fb1025cfa0d92e8241ce71669b72cee1ed52dbfcd7060027c48fa26d4f66da22df6dd566b5871d1e7c8d5dc25a4391f124c6cef9adf317aa213255d083310f1bbacc2c693a8f515d4c90532beac517e13e861d8fab3aa40a8aeff2af1dae8e6655ca53e76b252fce6a58d592336f6b3f205f038185360e702f35b731d730d59a7f8b8f1e0551985efe17c2b803a2fbc3eb5a59784a0c6ade1ef642edaf96a6a92f73ffd6470dc1c4e5dc186ac706e61d363c29e20efbbd2d005224fc2b69ea933b1fa6b0ff786863812ed0f36d999b04c4650257271419763ff472991c1ff69926a109e53ddcba6fba78a5f2c99341fabc0607d36e9b3fb24d007c902579e1b75b854aa210af305764cee586aea556857c3d8557d05ffcebb34461a6735b36fe31b129d58eac3d9c337da90aa1b6eb28ad48bf7a06fed82c463a428aaebb59e0167576695124415da6d3097ec9a7a4cfa5f178b258b3e05497101c05ffd37f79d8e7cf8ba59d9a7d260744d3e1bfd230033ace45ca46b7983f03df5dba4ba4bea773ed36e457542f6275ce4257230efb1b8845f03795327c292858d25e1b283345fed73228353e539b56876fb32027e43fb99234c4ddcc0665920998d0ff670198db5aa0c87ea846f978fe11359664bdd1f2e10b8e3ff683fdd1f53b61509ea91457ba6054ad8e336aa619ade1797afcdcacd500719f3e7d456b3ca2ae51bf678c15ef9e62e4e4352d6778c2d7db076c8bb356271448dd0ae2e87c630b7a97d3886bb4d4fe4c2dc4580753d70ccd4577b68ad829609e4d38553cdd042e9757c2a4f6bcf3c38c487defe1bed173a3ea1919e52cee5a5f652d83d9be87dece170a1c2985b60a21ed54936e524ea216c369687eeef394cbbe480a80f80d8d0ef2afd0d3555a070f2963b0f36787e20e5c3c12d2d9334b7300cee8177093c3c6c49671048c9faf65163fd21ae4c3563f11eda273d05080194f6c681ad97a2c3d3ebe7307e7e2d6dda48befde8aba5dc82435600cd93a5ba40752ade03d329ad4d2681ed74d72196aa9b0a1ed3894f84f1edc9d9fd5a535be954923e2ce15957f9635fd9432ef6ad49ff0a26815e68b9fe17e5eb77ea44ce3698228807e6580dd38dfae6bd7af4bed83669cd884e5c4d0c0da6e7dbe077b0c9e0b5655280b8bb06d35114c8ef7911917f803dd28ee5295c94e1628d19dbff5a55aaf1f0a41d144decf1e0895cd919033eb274391798a7782341f6337595dbd65fd7395e1c7fb7407080381542076c625d48618dfe9c11dcc702bdee033c1d56d05b78e167a4cef1890cf0d80f48c046fef3ea8d6872a5db0ca3f33fdebdc767aff41ca4207f8a59b7f6c4a8c5d2447ea19fbe4a25d67b2f63b4286140612c667536f15254b0192c05b7fa2d9a56dee24d338934bd7ee8e527a62f9f66aa174dcec5557e2622dbbf6d6beb4b81ac02e9c6464d769faed3a70665b72701dc92e6226e11fc6a9edcfa22d524655f37f1bf6382af5d90533736a3cc83d957ae1794e8b902fc0c18a07b8e814bd34955c9230b640112e967269121e4f236e720afef0be4fe2bf01f22573809a08487ac7d61fda3fb92fa79e730540ce5ac3fbf833ffe5527d77a20232674d7f2e7bea700fe2bccbdc51f0b44f2aa5b46020c3e3d0298b54c0b670773a5190a8db696de831fbeb8a3acbceb9e0bcc23cf4d4d398cf9f36821cad2670c28fa2a5ee229d1dc391f2d85fa2fd5542057cb187562dc2388b4e337e1d0a954297e9cd907f294443e6ac5c49ce9058928510dff66b3a1f46868f8598aaca83b4c6b50b4444b165be396ef7500d0273c6a2846b853fdf9f60b59ceaa866bc012a853e67a3223319514193f7c29b80de3241961b3d9e41c2ca2c6081a8098ff1b3debc9b26943ccbfb2807370fad5841d67201052c4f7d047dd521b557b269d505a6f79d7522beb190607c9d16c59f1d897c4701a819e5a14bce97428c070a9ee5354045566424d70b12982689cdbe7a053f207bb7227c1e4d7e3952f0a502ca7b4fbbdaa59c5a5da2547b145c0e198ab992a29831bfa3c7f348a87283ca1916d1904cce30261503fed0819f93f78c3306a9f27025769cf7acd3f8ef3a898010d6ed3e6de0eb85983f16d5bad08826806b0dbb838aab56f66c33754bf00063c79a54dd5bdda48d3bd3fb33335b64ad6dde9d983c80896ed35771c8ef284f5688858909b86a97e4fbe515d267b61cc5c65bde8186ac15516240c20e879b840d63c6843a239ebdc1de4702bb27691446c58e29f96ab746f00755ef4db98e00f64913112611fd6494f2c0b0570560cf77a1cc53388bd6015bce517bac3d6933254d2b038bf576edb77bbd2808d0326479ac953d51b644246b0ca65eceb1358c48c779db81670c1b02da01818495919b1639f2c0e3e97aa287ec77a3ae92288718b2d1cbf2b454d83dc420e0496c4c61e41be2ef2913cd26825e2b6a0280fd6bcb0e2edfc54ca195cd2f87bf6d2f44ff5422756bde7b143d4eacd1b690e8c645aef64151e1356d202ca7242dd07fb32c029a6b84548d69b05272710d1eadb7f97ac33782c1ec8062614f010e6a8eae0ae825b89f52d17cd4575339cac1730fb35dcb318ba49f0c93a53157f3e17b649581212360536c7d47ee58173c11f8fcc4fcd016a0326f91b491e122a8ce29371b756ad9864a00950daf01ca40358da1961cc1464e00aa86f70c5474e870850cec0b62cef10e7a0a6310d05f6bc80b17cb99d956bb3b6f81dcbabb0b82fff040da773125f97d5665be7ada3e3bf11e8d2c533741c991345cddf6f643f5c8e1a15f1254efbe76cf9c699bec9a966d1247f131ef6baa6276b006a54337ae39e8ebb0cb803fb4b63d645c506df4ebcf6c7b6aea5038827dc81f0af2904d9af9cb39987f914be15ad7f3461ee97c98572da97ef15868e9f4d1a963c72083d94ecaad7b3b097dd1bc1f41350c51cf490eaebf65049384f4616b7e5e76c9008ad1dfccb9127af347b8f488ddbd672eef19580af86c33db239a2130d27c1af406475cbfd8812d8946578b7c70d4e099731bfc1825f62035dc63418673ca8c256b72070d626622641c12a3ab72c836de71305050248c880d8fbdbcc6a5d437b5bf9026717f26678c844bd5463018cc18cfc4c2530b50654346190228811986791086499b7a424677c232c42add76b96d82672f5db2dbe745c08c1bffa4a590c08f88a4ef3613070ffcf4e03bdd78a865eb2281a08c945c096ceb70154e09b2b2dfee4a9c3e77636c938f71ed3853951c4bc720efd8caaa29f7347aa11e7eda57aa18b84906468511ee543f388f787b90a6c09c17961160b3641b649a60a13b08554e154d4f2acae367bac8fc9a4e1e5fde8b210f295d23914bb4e858c85b0e8cfced2ada78dfa6390446e1513d25b172e414f847f4d46d924e25b21e380da50da6f4dce88b1b1004b696cae574247546a8c9b0c98c83b3e134f67162b260fb5a34e56dcde27683e8d3f80ea650440f865cef209b76e7dd9ea46edd6f3e22cb7d107b46a2a4dcbc08101a34060e7adb369bab140486f9af7a8394a5e456a0d8f1c8c8f0c814261c02bc84eb3dbe0db131ef0fe242edfe522ba9ed33bf40c1dd4e712b95ea5e2862575059e17e711f18c5530b06c03ebc2c1f76acb02dcbd521f4ce34d4a2edc7241c387ddca846ebd910a6ebc2378f0f7fe3d6b5a231f933f118993b9f8f978718d9cde2989fc00360e95b624a53335e08a30c97cd9b5ade211e1da1f05c45094fc3db3c5ebd8ba026522c77b094f7a8e8786f18ec4e523e2a7548bea1bf5db001a913cb102ecc781657a45a2dce701ae01c7f520e1f8c9a86f90743167b18c9eb23bf2f8d2fe398484f38e765beeb43bd930e402b345751b0d990fb959e53a734ff0aeb54566e671ccb89380eb5d1f67d04b4b1fd005c7d5e5f6643b4747ede7a8dc93e1584adb660a3d90fdc9244df90de200c96cf1f82e56b25fa37abb4e9a155a158688714b553e1c7f9a279c7a1d2f13f517f0992a8dc7fc3c4a17c5ffd856a72919edf1b2123fbcec1240cd8390febbc244e11a7a891d1b249ad6a9185d8039ba83dc2a0a8aea504f76b93b3565172dfb9d07e90ff19d3d003294bde8de4c305811b52a35da22fccae4c9c41d94aee3884eeeb65e49a143f9593bc0472acb2f3cc61e6d6af6a662637ec9010cc747a54e125de50f5330485d7e6a1ea6fe2e131e730ada6f7ee2e30b9337fd98b1869f16ddbede31cef3d85fbbf668f488e20bb587bc05a2b4cdcb569329ad16f1f01a8c630bb0dfff069de11381abf9517b34611a74dc7a9b4ab4c6440ecad20bafc58f702bbfecb641b1f32c34492eaa6715608a27b7c3104a7f89d64bac71f71913d863f013b762efffb7962657c7ff2d72d8e5657bbad3e82b709992b89c54123eb857a5b319b2a4ea9aaf3ac23b179aea79d33a4fbcf46f392ee73cbfbad48f1cb4d36a834b97c9ec2f0d7b69009da11c3c4109594e4567e9217cc9c959abeae5214a83960b7eec9ceb1169aa15ab5de48341eb4470fcd94c77b0651aebfaf7e4dee272e90a010d45d7c921c3bd8f1ac4c0c4caa1273a4466cb43e8f16f22534eca9faa4eb6679fd1733743e4f3213c5b28dd3e2c6d5ce0b9fcab3a4dd435be9e543c9aa451dcce04ee89f4c8e035e5930ab7c9839f10e9ad501f1bfae6daae7ce899291898548eca38a6ca2a8cfcac5aa04dda500e47d6fa9fbf0e3fdf35537b16cd67e0d724a69a8642ea51dde49c1f1a6158c8ddc62e67a8ab6ade94414ee80c05e420a0cafceb364cbbe9b6d2acc4cfd4f5f6f30026410212304fbfca17e9c4b49c84808c11ca4b1994fe71420b47d0a41ba99df4d3758b837c82bf12768b36311c6aed075feac6038133891df535386dfff420dcc383c617f347dfb667f2217bc9269758ba20e7c8572ba9519c00c5fd2a11096a87dd170aeb2072c8874954d5efec6385775a21c65ab1c39d3585e64d8fc8006c943795abe6c29a395c4584dc971054d6957acd325e8f492e51ee77b5a0ec5b6bf13900a73c10a61b90d3fc546e02e83607c2672a002c19647347c72be9238a91173a24edc520047fda0084335bf7a327bd9cb5e488a6ebd4a203791bc38fe7688d8af4dd570d518990b7ae2496f3b79b9908aeace902efc948167bcb9d25f31585094fc523acba7661ca25788584ec993688b891fc05e5e246265a08590772a597625f96529a71fbf20112934b1ed32d3dcc6de68abae66311e7c862510f888c0b99293dc2df2988db5e7db88b1ef0f88e84c2a9d2b01614c36f6fc1b21783a369a5144e139916b4da93ceede904f7e4c4614b992640b149b7ce6cb9755f79c751fa0782d029059da055eb967bb0012b093b98df6d32c2928bf3fcbe93b238a41f94edce6b2d5ea932bde4e18558374dc8881cdf5d241f59266fedf2be8912912885f7ac9b72603c37bedb538cad66dbf685a35b583e685588676424b35dfa6eed6ae0cf8aac94f2a22850b6e91ac3c6e81091151dfecd7a5bd3b5bdb5927f6a53fcc51452575defbe91b7124e7626cc8c2462cb6589805daf2411b3504b34d95d946d8b578d499855fe8297aec492e0119ff812ba22aa4e7c644dae0af060d7e9c97d5a31ce2b6aa0144c0c545f70ca0c805871331dc8a5ce83769f662b7f6233d568635d8d9d274315275bac80a86457462aac1720f3ed5e50453feb949b101cae747ded149a01439d8a11cf24fedfe87a938da6863b12fea5925decc1a29229be4f46937e97023275720c54112bff3e4421f5bccaaf8f6c940bb7fa26fccd690055ebfc4331141db927d9d18148ba8c1e8c5aea8c5ddea9de71c5fc1e9e1d21a073d76dab1d27da716010c9b1a1779940a6df1de78fe6ca1c33b500d598be22b923fe2455ddd2038ec9443ed501a29d8aed2ac99f9d399259b3aedffb9eab51990167b992a21c090917cb20cd7c45d85dcd2129bd825242849771014f7d8d5679a5a8f679312d0bf70f6627601c38bddbc8b7dda3fa996339b9de2289169b59b33a20f05b5f448b34df30ffeb34862c7376df6d8983fe9c0631bb11af32f95463e591d13d89c637552082b49485c4ef88628ddbfcac7328beac3b13f2cb834acb1f9a7f15926d6d2d0639a0f6f62ea2bc449147af7f523b4778b640c3c58140596d6b539cfa201a969c68e5972221a14dc70b765f510b4c65549b2287cfb9fcdd7652062980defdedad4e913800041f8f6de46b1faa5b6aa6493e0b9440a9fc39836c4682aadecf0998b4bb32d930db60b2677560cd6f31b43ce94e2c432eb96a9d2c842ddd6e8a6c46db0a4f6f2d80379f6c7a8511fe8ea712fb7e66374e3a4b1c0618dc935895ab12fe9937240bc7499e39e5def32b36dd9da57da1b66156c50318ffbad8f8947542cc0016e845597de6a134b545e94acfd93fcc05546a08f6591a96cfa35fe2853f0d666f0e7e41569810ea59274a340919863721ec30bfbcc5614254fa22a312667c961e7b914bea98796e6c0a48cff4e41e3342ec8f7590f34634c11b7279ad5dfffa4aa66081e5e5206e812c9e1cc7a9a0dd46ded9b720c9ff0abcae34953040323a4b9c4bc64bf6a34fcb3e80e699e750e6377beeab5eca84513d84b5e81694c403c2f93ea4a90bb7118226165538c9966efe764499a0b137cf1f583c23dc66b9bab1f020afe6d283e4a259d1f99663e8fdf4ac7855238a4543305d0658cd882e772f3934ee8e91cf821a8ad60496b1e9a69d48e36396f7b7e54a7c416a893a0834730f16b6868c6208f95eefade1323f35b30f4772589c0a</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">å¯†ç æ˜¯pysandbox13çš„flag</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Writeup</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>CTF</tag>
        <tag>Writeup</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸manimä¹‹é—´çš„å¾€äº‹</title>
    <url>/p/6222a56.html</url>
    <content><![CDATA[<p>æœ€è¿‘åˆšåˆ°å¤§å­¦æŠ¥åˆ°å®Œï¼Œæ°å·§æœ‰äº›é—²æš‡æ—¶é—´<br>é—²æ¥æ— äº‹ï¼Œæ¥è®°å½•ä¸€ä¸‹è‡ªå·±ä¸ä¸€æ­¥ä¸€æ­¥æ¨åŠ¨æˆ‘èµ°åˆ°ç°åœ¨çš„manimä¹‹é—´çš„æ•…äº‹ï¼ˆ<del>æŒ‡æµæ°´è´¦</del><br>è¿™ç¯‡è™½ç„¶å«ã€Œä¸manimä¹‹é—´çš„å¾€äº‹ã€ï¼Œä½†æ˜¯é‡Œé¢å¾ˆå¤šéƒ½å’Œmanimæ— å…³ï¼ˆé€ƒ</p>
<h2 id="ä¸€åˆ‡çš„èµ·ç‚¹"><a href="#ä¸€åˆ‡çš„èµ·ç‚¹" class="headerlink" title="ä¸€åˆ‡çš„èµ·ç‚¹"></a>ä¸€åˆ‡çš„èµ·ç‚¹</h2><span id="more"></span>

<p>ç°åœ¨çš„ä¸€åˆ‡è¿˜è¦ä»åˆä¸­å¼€å§‹è¯´èµ·ï¼ˆå› ä¸ºå°å­¦æ—¶æœŸå°±æ˜¯ä¸€ç›´åœ¨ç©ï¼Œå¾ˆå°‘è€ƒè™‘å­¦ä¹ çš„äº‹æƒ…ï¼‰<br>ä¸Šäº†åˆä¸­ï¼Œå…³æ³¨äº†å¾ˆå¤šæ²¡è¥å…»çš„å…¬ä¼—å· â€”â€” åˆä¸­æ•°å­¦ã€åˆä¸­è‹±è¯­ã€åˆä¸­ç‰©ç† ç­‰ç­‰ä¸€æ•´ä¸ªç³»åˆ—<br>å…¶ä¸­æœ‰ä¸€ä¸ªå¾ˆç‰¹åˆ«çš„å…¬ä¼—å·å°±æ˜¯åˆä¸­åŒ–å­¦ï¼Œæ€»æ˜¯ä¼šè½¬è½½ä¸€äº›å¾ˆæœ‰è¶£çš„å®éªŒè§†é¢‘<br>æœ‰ä¸€æ¬¡å®ƒå°±è½¬è½½äº† <a href="https://space.bilibili.com/865267">@çœŸÂ·å‡¤èˆä¹å¤©</a> çš„<strong>ç–¯ç‹‚åŒ–å­¦</strong>ä¸¤æœŸè§†é¢‘<br>å½“æ—¶çœ‹å¾—æˆ‘å¤§å—éœ‡æ’¼ï¼Œäºæ˜¯å°±é¡ºç€é“¾æ¥çˆ¬åˆ°äº†è´´å§</p>
<p>æ­£å¥½èŒå‡¤å¼€å§‹åˆ¶ä½œDECï¼ˆå®éªŒå®¤çš„é­”æ³•æ—¥å¸¸ï¼‰äº†ï¼Œç„¶åå°±åœ¨è´´å§ä¸Šæ¯ä¸€æœŸéƒ½æ‰¾åˆ°æ¥çœ‹<br>é€æ¸æˆ‘å‘ç°è¿™äº›è§†é¢‘å‘å¸ƒçš„å¹³å°éƒ½æ˜¯ä¸€ä¸ªç²‰è‰²å°ç½‘ç«™<br>â€œé‚£æˆ‘æ—¢ç„¶æ¯æœŸéƒ½ä»è´´å§ç¿»åˆ°å“”å“©å“”å“©æ¥çœ‹è¿™äº›è§†é¢‘ï¼Œé‚£æˆ‘ä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨è¿™ä¸ªç½‘ç«™ä¸Šç­‰å¾…æ›´æ–°å‘¢ï¼Ÿâ€<br>å‡­ç€è¿™ä¸ªæƒ³æ³•ï¼Œæˆ‘æ³¨å†Œäº†Bç«™</p>
<h2 id="åˆå…¥Bç«™"><a href="#åˆå…¥Bç«™" class="headerlink" title="åˆå…¥Bç«™"></a>åˆå…¥Bç«™</h2><p>æ‰€ä»¥çœŸæ­£å¸¦æˆ‘æ¥Bç«™çš„ï¼Œæ˜¯å¤§èŒå‡¤ï¼ˆ<br>å½“æ—¶çš„å…¥ç«™è€ƒè¯•è¿˜å¾ˆä¸¥æ ¼ï¼Œé—®é¢˜ä¹Ÿéƒ½å¾ˆæœ‰è¶£ï¼Œæå¤§åœ°å¸å¼•äº†æˆ‘çš„å…´è¶£<br>èµ·æ˜µç§°çš„æ—¶å€™çªç„¶æƒ³åˆ° <strong>å‡¤èˆ</strong> å’Œæˆ‘åå­—é‡Œçš„ <strong>é¹¤ç¿”</strong> è¿˜æŒºæ­é…çš„ï¼Œæ‰€ä»¥å°±é¡ºåŠ¿è¡¥å…¨èµ·äº†ä¸ªæ˜µç§°â€œ<strong>é¹¤ç¿”ä¸‡é‡Œ</strong>â€</p>
<p>åˆšå…¥Bç«™ä¹Ÿåªæ˜¯æ¯å‘¨çœ‹çœ‹æ›´æ–°çš„DEC<br>ç„¶åé€æ¸é€›ç€é€›ç€å°±å‘ç°äº†è¿™é‡Œæ·±è—ç€çš„ä¸€å †ä¸€å †å®è—ï¼Œä¸€ç‚¹ä¸€ç‚¹å…³æ³¨äº†å¾ˆå¤šupä¸»</p>
<p>å…¶ä¸­ï¼Œåœ¨æŸä¸ªè¯„è®ºåŒºï¼Œçœ‹åˆ°äº†æœ‰äººæ¨èupä¸» <a href="https://space.bilibili.com/88461692">@3Blue1Brown</a>ï¼Œå°±å»çœ‹äº†ä¸€çœ‹<br>ç»“æœä¹Ÿæ˜¯å¤§å—éœ‡æ’¼ï¼Œä»–å¯ä»¥å°†ä¸€ä¸ªçŸ¥è¯†è®²å¾—ç›´ç™½æ˜“æ‡‚ã€åˆä¸ç¼ºä¹ä¸¥è°¨æ€§ï¼Œæ›´é‡è¦çš„æ˜¯<strong>åŠ¨ç”»</strong>ä¹Ÿé¡ºæ»‘èˆ’é€‚å¥½çœ‹</p>
<h2 id="åˆè¯†manim"><a href="#åˆè¯†manim" class="headerlink" title="åˆè¯†manim"></a>åˆè¯†manim</h2><p>åœ¨çœ‹äº†3b1bçš„è§†é¢‘åï¼Œå°±ä¸€ç›´éå¸¸å¥½å¥‡è¿™æ ·çš„è§†é¢‘æ˜¯æ€ä¹ˆåšçš„<br>åœ¨ç–‘é—®äº†å¾ˆä¹…ä¹‹åï¼ˆå·²ç»åˆ°äº†åˆä¸‰ï¼‰ï¼Œæˆ‘ç»ˆäºçœ‹è§†é¢‘ç®€ä»‹äº†ï¼ˆx<br>å‘ç°è¿™æ˜¯ä½¿ç”¨ä¸€ä¸ªå«åšmanimçš„ä¸œè¥¿åˆ¶ä½œçš„<br>ç™¾åº¦ä¸€æœç´¢ï¼Œç»“æœæœåˆ°äº† <a href="https://space.bilibili.com/3557916">@Solara570</a> çš„<a href="https://www.bilibili.com/read/cv17444">ä¸“æ </a></p>
<p>ä¸€çœ‹å‘ç°ï¼Œç«Ÿç„¶æ˜¯ç¼–å†™ä»£ç åˆ¶ä½œçš„ï¼Œæ„Ÿè§‰å¾ˆç¥å¥‡<br>è€Œä¸”é‡Œé¢çš„ä»£ç çœ‹èµ·æ¥ä¹Ÿå¥½å¥½çœ‹ï¼ˆå…¶å®å°±æ˜¯Consolasç­‰å®½+æ™®é€šé«˜äº®<br>æ‰€ä»¥ä¹Ÿå°±å¾ˆæƒ³å­¦ç€åšä¸€åš</p>
<p>æ‰€ä»¥å°±æ‰“ç®—å…ˆè·Ÿç€æ•™ç¨‹è¯•ç€å®‰è£…ä¸€éï¼Œç»“æœæœç„¶<br><strong>å¤„ å¤„ ç¢° å£</strong></p>
<p>å®‰è£…ä»€ä¹ˆéƒ½ä¼šå¡ä½ä¸€ä¸‹ï¼Œç‰¹åˆ«æ˜¯LaTeXï¼Œæ€»æ˜¯å‡ºé—®é¢˜ï¼Œè€Œä¸”å¾ˆéš¾è§£å†³<br>å½“æ—¶æ­£æ˜¯åˆä¸‰ä¸­è€ƒå¤ä¹ ï¼Œè€Œä¸”å®¶é‡Œä¹Ÿé™åˆ¶ç”¨ç”µè„‘ï¼Œæ‰€ä»¥å°±åªå¥½å…ˆæ”¾ä¸‹äº†<br>ä½†å½“æ—¶å°±ç¡®ç«‹äº†æˆ‘çš„ä¸€ä¸ªç›®æ ‡ï¼š</p>
<p>â€œ<strong>æˆ‘è¦å­¦ä¼šä½¿ç”¨manim</strong>â€</p>
<h2 id="è¸ä¸Šç¼–ç¨‹çš„ä¸å½’è·¯"><a href="#è¸ä¸Šç¼–ç¨‹çš„ä¸å½’è·¯" class="headerlink" title="è¸ä¸Šç¼–ç¨‹çš„ä¸å½’è·¯"></a>è¸ä¸Šç¼–ç¨‹çš„ä¸å½’è·¯</h2><p>å½“æ—¶åœ¨æ•™ç¨‹ä¸­äº†è§£åˆ°ï¼Œè¿™é‡Œé¢çš„ä»£ç æ˜¯pythonè¯­è¨€ï¼Œæ‰€ä»¥å°±å†³å®šè¦å…ˆæ”¾ä¸‹manimå¥½å¥½å­¦ä¸€å­¦pythonï¼ˆ<del>æ³¨å…¥æ€¨å¿µï¼šè¿™æ°æ°æ˜¯ä¸å°‘äººåšä¸åˆ°çš„ï¼Œå¾ˆå¤šé›¶åŸºç¡€çš„äººç›²ç›®åªæ˜¯è¦ç”¨manimï¼Œç„¶åå³ä½¿æ²¡æœ‰pythonåŸºç¡€ä¹Ÿè¦ç¡¬ç€å¤´çš®å®‰è£…ï¼Œç»“æœå‡ºç°äº†å„ç§é—®é¢˜ï¼Œè€Œä¸”è¿˜åˆ°å¤„é—®</del>ï¼‰</p>
<p>åœ¨ä¸­è€ƒå®Œçš„æš‘å‡ä¸­ï¼Œæˆ‘ä¹°äº†ä¸€æœ¬ã€ŠPythonç¼–ç¨‹ï¼šä»å…¥é—¨åˆ°å®è·µã€‹ï¼Œåœ¨æçŸ­çš„å‡æœŸï¼ˆå› ä¸ºé«˜ä¸­åˆ›æ–°ç­å¼€å­¦æ—©ï¼‰ä¸­ä¸æƒœæ¨æ‰éƒ¨åˆ†è¡”æ¥è¯¾ç¨‹å®Œæ•´åœ°åˆ·äº†ä¸€éä¹¦ï¼Œç”šè‡³è¿˜åšäº†ä¸€å°æœ¬ç¬”è®°<br>ä¹Ÿå‡­å€Ÿç€éƒ¨åˆ†ç½‘ç»œèµ„æºï¼Œæˆ‘å­¦ä¼šäº†ç®€å•çš„pythonè¯­æ³•ä»¥åŠæœ‰å…³è®¡ç®—æœºçš„å¾ˆå¤šçŸ¥è¯†ï¼Œä¹Ÿè§‰å¾—è¿™äº›ä¸œè¥¿ç¡®å®æŒºæœ‰æ„æ€çš„<br>è¿™æ—¶æˆ‘åˆå°è¯•å®‰è£…äº†ä¸€émanimï¼Œä¸­é€”çš„é”™è¯¯å°‘äº†å¾ˆå¤šï¼Œä½†è¿˜æ˜¯å¡åœ¨äº†å®‰è£…LaTeXä¸Š<br>é«˜ä¸­å·²ç»å¼€å­¦ï¼Œæ‰€ä»¥æˆ‘åˆä¸å¾—ä¸æ”¾ä¸‹äº†manim</p>
<p>ä¸Šäº†é«˜ä¸­ï¼Œå› ä¸ºæ˜¯åˆ›æ–°ç­ï¼Œæ‰€ä»¥ä¼šæ¨èé€‰æ‹©ä¸€ä¸¤é—¨ç«èµ›æ¥å­¦ä¹ ï¼Œä¸ºäº†å­¦åˆ°æ›´å¤šçš„è®¡ç®—æœºçŸ¥è¯†ï¼ŒæŠ¥åäº†<strong>ä¿¡æ¯ç«èµ›</strong><br>å‘åˆ°äº†æ•™æä¹‹åæˆ‘å°±å¼€å§‹ç–¯ç‹‚çœ‹ï¼Œç”šè‡³è‡ªä¹ æ™šè‡ªä¹ ï¼Œåªè¦æ˜¯æœ‰ç©ºé—²æ—¶é—´äº†å°±æ‹¿å‡ºæ¥çœ‹ï¼Œè¿™æ ·ä¸€ä¸ªå¤šæœˆå­¦äº†C++çš„åŸºç¡€è¯­æ³•<br>ï¼ˆ<del>å½“æ—¶ç­ä¸»ä»»å‘ç°äº†è¿˜æ¯”è¾ƒä¸é«˜å…´ï¼Œè¦æ±‚æˆ‘ä¸€ç›´ä¿æŒå¹´çº§å‰äºŒåï¼Œä½†æ˜¯å¾ˆæ˜¾ç„¶è¿™æ˜¯ä¿æŒä¸ä½çš„</del>ï¼‰</p>
<p>åœ¨é«˜ä¸€çš„NOIp2018åï¼Œæˆ‘å‘ç°å­¦é•¿ä»¬éƒ½ä¸å¤ªä¼šä½¿ç”¨Linuxä»¥åŠbashï¼Œè€Œè€ƒè¯•çš„ç³»ç»Ÿè¿˜æ˜¯NOI Linux<br>æ‰€ä»¥å°±å†³å®šå¹²è„†åšå‡ ä¸ªè§†é¢‘æ”¾åœ¨Bç«™ä¸Šä¾›å¤§å®¶å‚è€ƒï¼ˆéƒ½æ˜¯é»‘å†å²ï¼‰<br>å°±è¿™æ ·ï¼Œæˆ‘æˆä¸ºäº†ä¸€åupä¸»</p>
<p>åœ¨è¶…å‰å­¦äº†ä¿¡æ¯ç«èµ›è¯¾çš„å†…å®¹ä¹‹åï¼Œæˆ‘å¼€å§‹ç”¨é‚£ä¸ªæ—¶é—´æ¥ç ”ç©¶å®‰è£…manim<br>ä¸ºäº†è§£å†³LaTeXçš„æŠ¥é”™é—®é¢˜ï¼Œæˆ‘è¯•è¿‡å¾ˆå¤šæ–¹æ³•ï¼Œæœ€åä½¿ç”¨dockeræˆåŠŸå®‰è£…äº†ç¯å¢ƒï¼ˆä¸ºæ­¤è¿˜èŠ±äº†ä¸€æ®µæ—¶é—´äº†è§£dockerï¼‰<br>åœ¨åšå‡ºäº†ç¬¬ä¸€ä¸ªå¸¦æœ‰æ–‡å­—çš„åŠ¨ç”»ä¹‹åå¾ˆæ˜¯æ¿€åŠ¨</p>
<p>è¿™æ ·åœ¨2019å¹´å¯’å‡çš„æ—¶å€™æˆ‘æŠ½äº†ç‚¹æ—¶é—´æ¥ç»ƒä¹ ç»ƒä¹ manimï¼Œåˆ¶ä½œäº†æˆ‘çš„ç¬¬ä¸€ä¸ªmanimè§†é¢‘<a href="https://www.bilibili.com/video/BV1Eb411r7dJ">ã€ŒåŠ¨æ€è§„åˆ’-01èƒŒåŒ…é—®é¢˜ã€</a><br>æ…¢æ…¢çš„ï¼Œåœ¨æ¯å¤©è‡ªä¹ çš„ä¿¡æ¯ç«èµ›è¯¾ä¸Šæˆ‘åˆå­¦äº†ä¸å°‘è®¡ç®—æœºæ–¹é¢çš„çŸ¥è¯†<br>å½“æ—¶æƒ³è¦åšä¸€ä¸ªè‡ªå·±çš„åšå®¢ï¼Œåœ¨å­¦markdownæ—¶å‘ç°æ•°å­¦å…¬å¼ä¹Ÿæ˜¯ç”¨LaTeXå†™çš„<br>è€Œä¸”äº†è§£åˆ°è¿™ä¸ªä¸œè¥¿å¯ä»¥æ’å‡ºå¾ˆå¥½çœ‹çš„æ–‡æ¡£ï¼Œæ‰€ä»¥å°±å¹²è„†åˆä»é›¶å­¦äº†LaTeX<br>å­¦äº†LaTeXä¹‹åmanimå®‰è£…å°±ä¸å†å‡ºç°æ— æ³•è§£å†³çš„é—®é¢˜äº†ï¼Œä¹Ÿå°±å¯ä»¥é¡ºåˆ©å®‰è£…äº†</p>
<p>åœ¨é«˜ä¸€ä¸‹é«˜äºŒä¸Šï¼Œæˆ‘ä¹Ÿæ˜¯å‡­ç€å…´è¶£åšäº†å‡ ä¸ªè§†é¢‘ï¼Œä»ä¸­ä¹Ÿé€æ¸åœ°å‘æ˜äº†manimçš„ä¸€äº›ç®€å•ç”¨æ³•ï¼Œä¹Ÿå°è¯•çœ‹äº†ä¸€äº›manimæºç <br>å½“æ—¶è¿˜è§‰å¾—é‚£äº›æºç éƒ½è¿˜æ˜¯å¾ˆè¿œçš„ä¸œè¥¿ï¼Œè§‰å¾—è‡ªå·±èƒ½çœ‹æ‡‚ä¸€éƒ¨åˆ†å°±å¾ˆå¥½äº†</p>
<p>åœ¨2019å¹´å¹´æœ«ï¼Œæˆ‘å‘ç°äº†åŒæ˜¯ä½¿ç”¨manimçš„upä¸» <a href="https://space.bilibili.com/66806831/">@cigar666</a><br>ä¸€æ®µæ—¶é—´åï¼Œä»–å»ºç«‹äº†manimçš„äº¤æµç¾¤ï¼Œè¿™ä¸ªç¾¤ä¹Ÿé€æ¸åœ°å‘å±•å£®å¤§<br>åœ¨è¿™ä¸ªç¾¤é‡Œæˆ‘ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šçŸ¥è¯†ï¼Œæ•™äº†å¾ˆå¤šäººå…¥å‘manimï¼Œä¹Ÿè®¤è¯†äº†å¥½å¤šå¥½å¤šå…¨å›½å„åœ°çš„æœ‹å‹</p>
<p>é«˜äºŒçš„å¯’å‡ï¼Œæˆ‘è®¡åˆ’åšäº†FFTç®—æ³•é‚£æœŸè§†é¢‘ï¼Œåœ¨é‚£æœŸé—´ï¼Œæˆ‘éå¸¸æ´»è·ƒåœ°åœ¨ç¾¤é‡Œå›ç­”å„ç§é—®é¢˜<br>æœ‰ä¸€æ¬¡æˆ‘ç»™å‡ºäº†ä¸€ä¸ªå¾ˆå¤æ‚çš„è§£å†³åŠæ³•ï¼Œè€Œmanimæºç ä¸­å…¶å®æ˜¯æœ‰è½®å­çš„<br>è¿™æ—¶S570è¯´äº†ä¸€å¥â€œè¿˜æ˜¯æºç çœ‹çš„ä¸å¤Ÿâ€ï¼Œæˆ‘ä¹Ÿå°±ä»æ­¤æé«˜äº†ç›®æ ‡ï¼š</p>
<p>â€œ<strong>æˆ‘è¦çœ‹æ‡‚manimæºç </strong>â€</p>
<h2 id="æˆç«‹MK"><a href="#æˆç«‹MK" class="headerlink" title="æˆç«‹MK"></a>æˆç«‹MK</h2><p>é«˜äºŒçš„å¯’å‡ï¼Œç–«æƒ…çªå¦‚å…¶æ¥ï¼Œå‡æœŸä¹Ÿéšä¹‹å»¶é•¿<br>è€Œå½“æ—¶å¤§éƒ¨åˆ†äººä¹Ÿéƒ½åœ¨å‡æœŸä¸­ï¼Œä¸ºäº†æ›´å¥½åœ°äº¤æµä»£ç ï¼Œæˆ‘åœ¨GitHubä¸Šå»ºç«‹äº†ç»„ç»‡ï¼Œå¹¶ä¸”æŠ•ç¥¨é€‰ä¸¾å‡ºäº†åç§°manim-kindergarten<br>ä¹‹ååœ¨ç¾¤å‹çš„åˆä½œä¹‹ä¸‹åˆè¿›è¡Œäº†å¾ˆå¤šèµ„æ–™çš„å®Œå–„<br>ä¸ºäº†æ–¹ä¾¿å›å¤ä¸€äº›å¸¸è§çš„é—®é¢˜ï¼Œæˆ‘ä¹Ÿç¼–å†™äº†ã€Šmanimå¸¸è§é—®é¢˜ã€‹è¿™ä¸ªæ–‡æ¡£ï¼Œåœ¨ä¸€å¹´å¤šçš„å®Œå–„åï¼Œå®ƒå·²ç»è¿­ä»£åˆ°äº†3.1ç‰ˆæœ¬</p>
<p>åŒæ—¶æˆ‘ä¹Ÿé¡ºåŠ¿åšäº†å¾ˆå¤šæ¯”è¾ƒçŸ­çš„è§†é¢‘ï¼Œå‚åŠ äº†ä¸€äº›æ´»åŠ¨ï¼Œä¹Ÿè¢«å¦ˆå’ªå”è½¬å‘äº†ï¼Œè·å¾—äº†ä¸å°‘ç²‰ä¸ï¼Œä¹Ÿæ‹¿åˆ°äº†çŸ¥è¯†é¢†åŸŸä¼˜è´¨upä¸»çš„è®¤è¯<br>è€Œä¸”MKå†…éƒ¨ä¹Ÿç»„ç»‡äº†å‡ æ¬¡è”åˆæŠ•ç¨¿ï¼Œå…±åŒå®Œæˆäº†ä¸€äº›è§†é¢‘<br>å…¶ä¸­æˆ‘ä»¬çªå‘å¥‡æƒ³ï¼Œå°è¯•äº†ä½¿ç”¨manimæ¥åˆ¶ä½œmanimæ•™ç¨‹ï¼Œç»“æœè¿˜è›®ä¸é”™<br>æ‰€ä»¥æˆ‘ä¹Ÿå°±å•ç‹¬åœ¨è¿™ä¸ªç³»åˆ—ä¸‹å®Œæˆäº†å‡ ä¸ªè§†é¢‘</p>
<p>åœ¨åˆ¶ä½œè¿™ä¸ªè§†é¢‘æ—¶ï¼Œæˆ‘ä¹Ÿåœ¨é€æ¸æ·±å…¥åœ°é˜…è¯»æºç ï¼Œæ„Ÿè§‰æ²¡æœ‰é‚£ä¹ˆæ™¦æ¶©éš¾æ‡‚ï¼Œä»£ç æ€è·¯è¿˜æ˜¯å¾ˆæ¸…æ™°<br>æ­£å¥½æœ‰MKæˆå‘˜å¼€äº†ä¸€ä¸ªæ–‡æ¡£çš„repoæ¥æ±‡æ€»ä¸€äº›ç½‘ä¸Šçš„æ–‡æ¡£ï¼Œæˆ‘ä¹Ÿå°±æ­£å¥½æŠŠé‡Œé¢çš„å†…å®¹å½’çº³å½’çº³ï¼Œä¿ç•™äº†ä¸€äº›æœ‰ä»·å€¼çš„å†…å®¹ï¼Œä¹Ÿè¡¥å……äº†éƒ¨åˆ†ä¸­æ–‡çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼Œå°±è¿™æ ·å®Œæˆäº†ä¸€å¤§åŠ<a href="https://docs.manim.org.cn/">ä¸­æ–‡æ–‡æ¡£</a></p>
<p>ç–«æƒ…æœŸé—´ï¼Œæˆ‘ä¹ŸåŠ å…¥äº†manimçš„discordé¢‘é“ï¼Œåœ¨é‡Œé¢ä¹Ÿå¸®åŠ©äº†å¾ˆå¤šäººè§£å†³äº†manimä¸Šçš„é—®é¢˜<br>æˆ‘å‘ç°discordä¸Šmanim channelçš„ç®¡ç†å‘˜æ˜¯eulertourï¼Œè€Œä¸”ä»–åœ¨GitHubä¸Šä¹Ÿæ˜¯manimçš„collaboratorï¼ŒåŒæ—¶è¿˜åšäº†å¾ˆå¤šé¡¹ç›®<br>å½“æ—¶å°±åœ¨mkçš„QQç¾¤é‡Œè¡¨è¾¾äº†ä¸€ä¸‹å¯¹ä»–çš„ä»°æ…•ï¼Œç„¶åå°±æœ‰ä¸€ä¸ªç¾¤å‹è¯´äº†å¥ï¼š</p>
<p>â€œå…¶å®ä½ ä¹Ÿå¯ä»¥â€</p>
<h2 id="æˆä¸ºåˆä½œè€…"><a href="#æˆä¸ºåˆä½œè€…" class="headerlink" title="æˆä¸ºåˆä½œè€…"></a>æˆä¸ºåˆä½œè€…</h2><p>ç–«æƒ…æœŸé—´åœ¨å­¦æ ¡æœºæˆ¿è„±äº§çš„æ—¶å€™ä¹Ÿç»å¸¸ä¼šè¯»ä¸€è¯»manimï¼Œè¿˜é¡ºä¾¿æŠŠä¸€ç›´å®¹æ˜“å‡ºç°çš„Texté—®é¢˜ä¿®å¤äº†ä¸€ä¸‹<br>å½“æ—¶Grantæ­£åœ¨å¼€å‘åŸºäºOpenGLçš„manimï¼Œæ‰€ä»¥è¿™äº›pull requestä¸€ç›´æ˜¯eulertouræ¥mergeçš„ï¼Œä½†æ˜¯åœ¨ä»–åŠ å…¥äº†ManimCommunityä¹‹åå°±å·²ç»æ‰“ç®—å°†3b1b/manimè’åºŸæ‰ï¼Œå¾ˆå°‘æ¥ç®¡issueå’Œprï¼Œç”šè‡³æœ‰ç”¨çš„prä¹Ÿåªä¼šè®©äº¤åˆ°ManimCommunityé‡Œ<br>ä½†æ˜¯æˆ‘è§‰å¾—è¿™æ¯”è¾ƒä¸å¥½ï¼Œæ¯•ç«Ÿè¿˜æœ‰å¾ˆå¤šäººæ­£åœ¨ä½¿ç”¨3b1b/manimï¼Œæ‰€ä»¥æˆ‘å°±åœ¨æš‘å‡çš„æ—¶å€™æŠ±ç€è¯•ä¸€è¯•çš„å¿ƒæ€ç»™Grantå†™äº†ä¸€å°ä¿¡æ¥ç”³è¯·3b1b/manimå­˜å‚¨åº“ä¸Šçš„æƒé™</p>
<p>ç»“æœå‡ å¤©åGrantçœŸçš„å›å¤äº†ï¼Œä»–åŒæ„ç»™æˆ‘manimä¸Šçš„writeæƒé™ï¼Œä½†æ˜¯è¦å…ˆå’Œeulertouræ²Ÿé€šä¸€ä¸‹<br>å‡ ä¸ªæœˆåçš„åä¸€å‡æœŸï¼Œæˆ‘æ”¶åˆ°äº†Grantå‘æ¥çš„æˆä¸ºcollaboratorçš„é‚€è¯·ï¼ˆ<del>å…¶å®ä¸­é—´ä¸€ç›´æ²¡æœ‰å›å¤æ˜¯å› ä¸ºæˆ‘çš„é‚®ä»¶è·‘åˆ°äº†Grantçš„åƒåœ¾ä¿¡ç®±é‡Œ</del>ï¼‰</p>
<p>åœ¨æˆä¸ºcollaboratoråï¼Œæˆ‘mergeäº†ä¸€äº›æœ‰ç”¨çš„pull requestï¼Œå…³æ‰äº†ä¸€äº›æ²¡ç”¨çš„/å·²è§£å†³çš„/è€æ—§çš„issue<br>åŒæ—¶æˆ‘ä¹Ÿå¤§è‡´äº†è§£äº†æ–°ManimGLçš„å¤§è‡´é€»è¾‘ï¼Œä¹Ÿå‘Grantæäº†å¥½å‡ é¡¹æ”¹è¿›çš„å»ºè®®ï¼Œä»–ä¹Ÿé‡‡çº³äº†å¾ˆå¤šéƒ¨åˆ†</p>
<p>åœ¨å¼€å­¦äº†ä¹‹åï¼Œä¸ºäº†å¤ä¹ é«˜è€ƒï¼Œä¹ŸåŸºæœ¬æ”¾ä¸‹äº†manimä¸Šçš„æ´»åŠ¨ï¼ˆè¿˜æ”¶åˆ°äº†æ¥è‡ªGrantçš„ç¥ç¦ï¼‰<br>åœ¨2021å¹´å¯’å‡ï¼Œåˆå› ä¸ºç–«æƒ…ä¸Šäº†ä¸€æ®µæ—¶é—´ç½‘è¯¾ï¼Œæˆ‘ä¹ŸåˆæŠ½æ—¶é—´æ¥ç©ä¸€ç©manimäº†<br>é‚£æ—¶ManimGLå·²ç»åŸºæœ¬å®Œå·¥ï¼Œåœ¨ä¸€äº›å‡†å¤‡ä¹‹åï¼Œshadersåˆ†æ”¯è¢«åˆå¹¶åˆ°äº†masteråˆ†æ”¯æˆä¸ºäº†æ­£å¼ç‰ˆæœ¬<br>æˆ‘ä¹Ÿä¸ºä¹‹å†™äº†å…¨æ–°çš„ä¸­è‹±æ–‡æ–‡æ¡£ï¼ˆè™½ç„¶è¿˜æ˜¯å¾ˆä¸å®Œå–„ï¼‰<br>åœ¨é‚£ä¹‹åæˆ‘ä¹Ÿå¯¹manimåšäº†ä¸€äº›æ”¹å–„ï¼Œå…³é—­äº†ä¸€äº›è¿‡æ—¶çš„pull requestï¼Œæ‰“å¼€äº†disscussionï¼Œå‘å¸ƒæ–°çš„pythonåŒ…ç­‰ç­‰</p>
<p>å—¯ï¼Œç„¶åå°±æ˜¯å¼€å­¦-&gt;å¤ä¹ -&gt;é«˜è€ƒ</p>
<p>é«˜è€ƒå‘æŒ¥çš„è¿˜ç®—æ¯”è¾ƒå¥½ï¼ŒæˆåŠŸè¿›å…¥äº†ZJU-Turing<br>ä¸ºäº†æ›´å¥½åœ°æ±‡æ€»ä¿¡æ¯ï¼Œåœ¨å‡æœŸé‡Œæˆ‘åˆä¸ºmkå†™äº†å®˜æ–¹ç½‘ç«™ï¼š<a href="https://manim.org.cn/">manim.org.cn</a><br>ç„¶åå°±æ˜¯å¼€å­¦åˆ°ç°åœ¨äº†</p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>æ˜¯manimåœ¨ä¸€æ­¥ä¸€æ­¥æ¨åŠ¨ç€æˆ‘å‰è¿›<br>ä»æƒ³è¦ç”¨manimåˆ°æƒ³è¦çœ‹æ‡‚æºç åˆ°æƒ³è¦ä¸ºå®ƒåšå‡ºç‚¹è´¡çŒ®<br>ä»ä¸€ä¸ªä»€ä¹ˆéƒ½ä¸ä¼šçš„åˆä¸­ç”Ÿå˜æˆäº†manimçš„collaborator<br>è¿™ä»…ä»…æ˜¯ä¸‰å¹´å•Šï¼ˆ</p>
<p>æ‰€ä»¥ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ç»§ç»­åŠªåŠ›å§</p>
<p><del>å†™çš„å¤ªæ°´äº†ï¼Œåæ­£å°±éšä¾¿å†™å†™ï¼Œæƒ³åˆ°å“ªå†™åˆ°å“ªäº†ï¼Œæ²¡æƒ³åˆ°ä½ è¿˜çœŸçš„çœ‹åˆ°è¿™äº†_(:Ğ·ã€âˆ )_</del></p>
]]></content>
      <categories>
        <category>ç”Ÿæ´»</category>
      </categories>
      <tags>
        <tag>éšç¬”</tag>
        <tag>ç”Ÿæ´»</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLearn LambdaCalculusã€#0</title>
    <url>/p/92a6fc79.html</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‰æ®µæ—¶é—´ï¼ŒGZTimeä¹Ÿè·Ÿæˆ‘èŠè¿‡ä¸€äº›å…³äºlambdaæ¼”ç®—çš„ä¸œè¥¿<br>å­¦Haskellçš„æ—¶å€™ä¹Ÿæ€»æ˜¯èƒ½å¬è¯´è¿™ä¸ªä¸œè¥¿<br>çœ‹èµ·æ¥æŒºæœ‰æ„æ€ï¼Œæ¥å­¦å­¦_(:Ğ·ã€âˆ )_</p>
<span id="more"></span>

<p>é‚£æˆ‘ä¹Ÿå¼•ç”¨GZTimeå¼•ç”¨çš„çŸ¥ä¹åŒå­¦çš„ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>åœ¨ä»‹ç»Î»æ¼”ç®—ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ”¾ç©ºä¸€ä¸‹æˆ‘ä»¬çš„å¤§è„‘ï¼Œå¿˜æ‰Cè¯­è¨€ï¼Œå¿˜æ‰å†¯Â·è¯ºä¼Šæ›¼æœºï¼Œå¿˜æ‰å›¾çµæœºï¼Œç”šè‡³è¦å¿˜æ‰0å’Œ1ï¼ŒåŠ å’Œå‡ã€‚æˆ‘ä»¬æ¥åˆ°ä¸€ä¸ªåªæœ‰ç¬¦å·çš„ä¸–ç•Œã€‚åœ¨è¿™ä¸ªæ–°çš„ä¸–ç•Œé‡Œï¼Œåªéœ€è¦å‡ æ¡ç®€å•çš„å®šä¹‰å’Œè§„åˆ™ï¼Œä¾¿å¯ä»¥æ„é€ å‡ºä¸å›¾çµæœºå®Œå…¨ç­‰ä»·çš„è®¡ç®—æ¨¡å‹ï¼Œå³å®ƒæ˜¯å›¾çµå®Œå…¨ï¼ˆTuring Completeï¼‰çš„ã€‚å’Œå›¾çµæœºä¸€æ ·ï¼Œè¿™ä¸ªè®¡ç®—æ¨¡å‹å¯ä»¥è§£å†³ä»»ä½•ä¸€ä¸ªå¯ä»¥æœºæ¢°è®¡ç®—çš„é—®é¢˜ï¼›ä¸å›¾çµæœºå€¾å‘äºç¡¬ä»¶å®ç°ä¸åŒï¼Œå®ƒæ›´å€¾å‘äºé€»è¾‘çš„æ¨ç†ã€‚å®ƒå°±æ˜¯Î»æ¼”ç®—ï¼ˆLambdaæ¼”ç®—ï¼‰ã€‚</p>
</blockquote>
<h2 id="lambda-term"><a href="#lambda-term" class="headerlink" title="lambda term"></a>lambda term</h2><p>ä¸€ä¸ªåˆæ³•çš„lambdaè¡¨è¾¾å¼åˆè¢«ç§°ä¸ºlambdaé¡¹ï¼ˆlambda termï¼‰ï¼Œä»¥ä¸‹ä¸‰ä¸ªè§„å¾‹å½’çº³æ€§åœ°å®šä¹‰äº†ä¸€ä¸ªåˆæ³•çš„lambdaé¡¹ï¼š</p>
<ul>
<li><strong>Variable</strong>ï¼šä¸€ä¸ªå˜é‡ x æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåˆæ³•çš„lambdaé¡¹</li>
<li><strong>Abstraction</strong>ï¼šå¦‚æœ M æ˜¯ä¸€ä¸ªåˆæ³•çš„lambdaé¡¹ï¼Œx æ˜¯ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆ (Î»x.M) ä¹Ÿæ˜¯ä¸€ä¸ªåˆæ³•çš„lambdaé¡¹ï¼ˆè¿™ç›¸å½“äºå®šä¹‰äº†ä¸€ä¸ª x -&gt; M çš„å‡½æ•°ï¼‰</li>
<li><strong>Application</strong>ï¼šå¦‚æœ M å’Œ N éƒ½æ˜¯åˆæ³•lambdaé¡¹ï¼Œé‚£ä¹ˆ (M N) ä¹Ÿæ˜¯ä¸€ä¸ªåˆæ³•lambdaé¡¹</li>
</ul>
<p>lambdaè¡¨è¾¾å¼çš„ç»„æˆæœ‰å˜é‡ã€æŠ½è±¡ç¬¦å·Î»å’Œä¸€ä¸ªç‚¹.ã€æ‹¬å·</p>
<p>æ‰€æœ‰lambdaé¡¹æ„æˆ$\Lambda$ç©ºé—´ï¼Œé€šè¿‡ä¸Šè¿°åˆæ³•lambdaé¡¹çš„å®šä¹‰ï¼Œ$\Lambda$ç©ºé—´çš„æ­£å¼å®šä¹‰æ˜¯ï¼š</p>
<ul>
<li>å¦‚æœ$x$æ˜¯ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆ$x\in\Lambda$</li>
<li>å¦‚æœ$x$æ˜¯ä¸€ä¸ªå˜é‡ä¸”$M\in\Lambda$ï¼Œé‚£ä¹ˆ$(\lambda x.M)\in\Lambda$</li>
<li>å¦‚æœ$M, N\in\Lambda$ï¼Œé‚£ä¹ˆ$(M\ N)\in\Lambda$</li>
</ul>
<h3 id="notation"><a href="#notation" class="headerlink" title="notation"></a>notation</h3><p>ä¸ºäº†ä½¿lambdaè¡¨è¾¾å¼çš„è®°æ³•æ›´æ¸…æ™°ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹ç®€åŒ–ï¼š</p>
<ul>
<li>ä¸€ä¸ªlambdaé¡¹æœ€å¤–ä¾§çš„æ‹¬å·å¯ä»¥çœç•¥ã€‚æ¯”å¦‚ (M N) å¯ä»¥å†™æˆ M N </li>
<li>åº”ç”¨æ˜¯å·¦ç»“åˆçš„ã€‚æ¯”å¦‚ M N P è¡¨ç¤ºçš„å®é™…æ˜¯ ((M N) P)<br>  è¿™å’ŒHaskellä¸­å‡½æ•°å·¦ç»“åˆæ˜¯ä¸€æ ·çš„</li>
<li>æŠ½è±¡æ˜¯å°½å¯èƒ½å‘å³å»¶ä¼¸çš„ã€‚æ¯”å¦‚ Î»x.M N å®é™…ä¸Šè¡¨ç¤ºçš„æ˜¯ Î»x.(M N) è€Œä¸æ˜¯ (Î». M) N<br>  è¿™å’ŒHaskellä¸­lambdaè¡¨è¾¾å¼å‘å³ä¸€ç›´å»¶ä¼¸æ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤ä¸€èˆ¬è¦ä¸ºlambdaè¡¨è¾¾å¼åŠ ä¸Šæ‹¬å·</li>
<li>åµŒå¥—çš„å¤šä¸ªlambdaè¡¨è¾¾å¼å¯ä»¥ç¼©å†™æˆç±»ä¼¼å¤šå…ƒå‡½æ•°çš„æ ·å­ã€‚æ¯”å¦‚ Î»x.Î»y.Î»z.M å°±å¯ä»¥ç¼©å†™æˆ Î»xyz.M</li>
</ul>
<h3 id="Free-amp-bound-variables"><a href="#Free-amp-bound-variables" class="headerlink" title="Free &amp; bound variables"></a>Free &amp; bound variables</h3><p>åœ¨ä¸€ä¸ªlambdaè¡¨è¾¾å¼ä¸­ï¼Œä¹Ÿæœ‰è‡ªç”±å˜é‡ï¼ˆfree variablesï¼‰å’Œçº¦æŸå˜é‡ï¼ˆbound variablesï¼‰çš„æ¦‚å¿µã€‚</p>
<p>åœ¨lambdaé¡¹ Î»x.M ä¸­ï¼ŒÎ»xè¢«ç§°ä¸ºbinderï¼Œå®ƒå°†è¾“å…¥çš„xä¸Mä¸­çš„å˜é‡xç»‘å®šåœ¨ä¸€èµ·ï¼Œè¿™æ—¶xå°±æ˜¯çº¦æŸå˜é‡ï¼Œè€Œå…¶å®ƒçš„æ‰€æœ‰å˜é‡éƒ½æ˜¯è‡ªç”±å˜é‡ã€‚</p>
<p>&emsp;æ¯”å¦‚åœ¨è¡¨è¾¾å¼ Î»x.x+y ä¸­ï¼Œxå°±æ˜¯çº¦æŸå˜é‡ï¼Œyæ˜¯è‡ªç”±å˜é‡ã€‚</p>
<p>å¯¹äºä¸€ä¸ªlambdaé¡¹Mçš„è‡ªç”±å˜é‡æ„æˆçš„é›†åˆFV(M)ï¼Œä¹Ÿæœ‰ä¸€äº›è§„å¾‹éœ€è¦æ»¡è¶³ï¼š</p>
<ul>
<li>å¦‚æœ x æ˜¯ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆ FV(x) = {x} </li>
<li>FV(Î»x.M) = FV(M) \ {x} ï¼ˆMä¸­é™¤å»xä¹‹å¤–çš„å˜é‡éƒ½æ˜¯è‡ªç”±å˜é‡ï¼‰</li>
<li>FV(M N) = FV(M) âˆª FV(N) ï¼ˆMåº”ç”¨åœ¨Nä¸Šå¾—åˆ°çš„lambdaé¡¹çš„è‡ªç”±å˜é‡æ˜¯MNä¸¤ä¸ªlambdaé¡¹çš„è‡ªç”±å˜é‡çš„å¹¶é›†ï¼‰</li>
</ul>
<h3 id="Substitution"><a href="#Substitution" class="headerlink" title="Substitution"></a>Substitution</h3><p>lambdaé¡¹ä¹Ÿæœ‰ä¸€ç§è®°æ³•å«åšæ›¿æ¢ï¼ˆsubstitutionï¼‰ï¼Œè®°æ³• t[x:=r] è¡¨ç¤ºå°†lambdaé¡¹tä¸­çš„è‡ªç”±å˜é‡xéƒ½æ›¿æ¢æˆrã€‚å®ƒæ»¡è¶³ä»¥ä¸‹è§„å¾‹ï¼š</p>
<ul>
<li>x[x:=r]=r ï¼ˆä¸€ä¸ªå˜é‡å°±æ˜¯è‡ªç”±å˜é‡ï¼Œå°†å…¶æ›¿æ¢æˆrå°±å˜ä¸ºrï¼‰</li>
<li>y[x:=r]=y if x!=y ï¼ˆå¦‚æœxå’Œyä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆï¼‰</li>
</ul>
]]></content>
      <tags>
        <tag>Haskell</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLearn Rustã€#0 æ€»ç« </title>
    <url>/p/db45bee5.html</url>
    <content><![CDATA[<p style="text-align: center;">å­¦ä¹ ä¸€é—¨æ–°è¯­è¨€ä¹‹Haskell</p>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Haskellå­¦çš„å·®ä¸å¤šäº†ï¼Œä¹Ÿæ²¡å•¥äº‹æƒ³å¹²äº†<br>GZTimeä¹‹å‰ä¹Ÿè·Ÿæˆ‘æ¨èè¿‡RustæŒºå¥½ç©çš„<br>è¿™å‡ å¤©çœ‹ä¸€çœ‹<br>ä¸€æ ·ï¼Œæ²¡æœ‰æ•™ç¨‹ï¼Œåªæ˜¯æˆ‘çš„ç¬”è®°è€Œå·²</p>
<span id="more"></span>

<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Macä¸Šå®‰è£…åªéœ€è¦å®‰è£…rustupå³å¯ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ curl --proto <span class="string">&#x27;=https&#x27;</span> --tlsv1.2 https://sh.rustup.rs -sSf | sh</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ›´æ–°ã€å¸è½½ã€æ£€æŸ¥ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ rustup update</span><br><span class="line">$ rustup self uninstall</span><br><span class="line">$ rustc --version</span><br></pre></td></tr></table></figure>

<p>Rustä»£ç çš„åç¼€åæ˜¯<code>.rs</code>ï¼Œé€šè¿‡<code>rustc code.rs</code>æ¥ç¼–è¯‘å‡ºäºŒè¿›åˆ¶æ–‡ä»¶<code>code</code>å†è¿è¡Œ</p>
<h2 id="Cargo"><a href="#Cargo" class="headerlink" title="Cargo"></a>Cargo</h2><p>é€šè¿‡rustupå®‰è£…åè‡ªå¸¦cargoï¼Œå¯ä»¥é€šè¿‡<code>cargo --version</code>æ£€æŸ¥</p>
<p>é€šè¿‡<code>cargo new project_name</code>æ¥æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œè¿™æ—¶ä¼šåœ¨å½“å‰ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆä¸‹é¢çš„ç›®å½•ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">project_name</span><br><span class="line">    â”œâ”€â”€ .git/</span><br><span class="line">    â”œâ”€â”€ .gitignore</span><br><span class="line">    â”œâ”€â”€ Cargo.toml</span><br><span class="line">    â””â”€â”€ src</span><br><span class="line">        â””â”€â”€ main.rs</span><br></pre></td></tr></table></figure>
<p>cargoä¼šæ ¹æ®è¾“å…¥çš„é¡¹ç›®åç§°æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”é»˜è®¤ä½¿ç”¨gitè¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼ˆå¯ä»¥ä½¿ç”¨<code>cargo new ... --vcs none</code>å–æ¶ˆç‰ˆæœ¬æ§åˆ¶ï¼‰</p>
<p>å…¶ä¸­main.rsæ–‡ä»¶ä¸­å°±æ˜¯ä¸€ä¸ªHell Worldç¨‹åºã€‚Cargo.tomlæ˜¯è¿™ä¸ªé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="section">[package]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;project_name&quot;</span></span><br><span class="line"><span class="attr">version</span> = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line"><span class="attr">edition</span> = <span class="string">&quot;2018&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html</span></span><br><span class="line"></span><br><span class="line"><span class="section">[dependencies]</span></span><br></pre></td></tr></table></figure>

<h3 id="æ„å»ºã€è¿è¡Œã€å‘å¸ƒ"><a href="#æ„å»ºã€è¿è¡Œã€å‘å¸ƒ" class="headerlink" title="æ„å»ºã€è¿è¡Œã€å‘å¸ƒ"></a>æ„å»ºã€è¿è¡Œã€å‘å¸ƒ</h3><ul>
<li>ä½¿ç”¨<code>cargo build</code>ä¼šæ„å»ºè¿™ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”å°†å¯æ‰§è¡Œæ–‡ä»¶åˆ›å»ºåœ¨<code>target/debug/</code>æ–‡ä»¶å¤¹ä¸­</li>
<li>ä½¿ç”¨<code>cargo run</code>ç›´æ¥æ„å»ºå¹¶è¿è¡Œè¿™ä¸ªé¡¹ç›®</li>
<li>ä½¿ç”¨<code>cargo check</code>æ£€æŸ¥é¡¹ç›®ï¼Œä½†ä¸ç”Ÿäº§å¯æ‰§è¡Œæ–‡ä»¶ã€ä¹Ÿä¸è¾“å‡ºç»“æœ</li>
<li>ä½¿ç”¨<code>cargo build --release</code>æ¥å‘å¸ƒï¼Œäº§ç”Ÿä½†å¯æ‰§è¡Œæ–‡ä»¶åœ¨<code>target/release/</code>æ–‡ä»¶å¤¹ä¸­ï¼Œä¸ç”¨äºç›´æ¥buildï¼Œå®ƒä¼šè¿›è¡Œä¸€äº›ä¼˜åŒ–æ¥ä½¿ç¨‹åºè¿è¡Œåœ°æ›´å¿«</li>
</ul>
<h2 id="å¸¸è§ç¼–ç¨‹æ¦‚å¿µ"><a href="#å¸¸è§ç¼–ç¨‹æ¦‚å¿µ" class="headerlink" title="å¸¸è§ç¼–ç¨‹æ¦‚å¿µ"></a>å¸¸è§ç¼–ç¨‹æ¦‚å¿µ</h2><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p><code>let</code>è¯­å¥ä¼šåˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯é»˜è®¤éƒ½æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ã€‚å³ä¸€æ—¦ä½¿ç”¨letåˆ›å»ºä¸€ä¸ªå˜é‡å¹¶ä¸ºå…¶èµ‹å€¼ï¼Œé‚£è¿™ä¸ªå˜é‡å°†ä¸å…è®¸è¢«æ”¹åŠ¨ï¼Œå¦‚æœåœ¨ä»£ç ä¸­æ”¹åŠ¨äº†è¿™ä¸ªå˜é‡ï¼Œé‚£ä¹ˆå°†ä¸ä¼šé€šè¿‡ç¼–è¯‘</p>
<p>ä½†æ˜¯å¯ä»¥å†ä½¿ç”¨letè¯­å¥æ¥åˆ›å»ºä¸€ä¸ªåŒåå˜é‡ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> x = x + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼ŒåŸæ¥çš„xå°±è¢«éšè—ï¼ˆshadowingï¼‰äº†ï¼ˆè¿™ç§æ–¹å¼çš„å‰åä¸¤ä¸ªxæœ¬è´¨ä¸Šè¿˜æ˜¯ä¸¤ä¸ªå˜é‡ï¼Œå®ƒä»¬å…è®¸æœ‰ç€ä¸åŒçš„æ•°æ®ç±»å‹ï¼‰</p>
<p>åœ¨letåé¢åŠ ä¸Šmutä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªå¯å˜çš„å˜é‡ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> x = <span class="number">1</span>;</span><br><span class="line">x = x + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>ä½†è¿™æ—¶xä¸èƒ½æ›´æ”¹æ•°æ®ç±»å‹</p>
<h3 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h3><p>å¸¸é‡ä¸åŒäºå˜é‡ï¼Œå®ƒä¸€å®šæ˜¯ä¸å¯å˜çš„ã€‚å¸¸é‡é€šè¿‡<code>const</code>å…³é”®å­—åˆ›å»ºï¼Œè€Œä¸”éœ€è¦æ˜ç¡®æŒ‡å®šæ•°æ®ç±»å‹ï¼ˆRustå¸¸é‡å‘½åè§„èŒƒæ˜¯ç”¨å…¨å¤§å†™ï¼‰ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> MAX_POINT: <span class="built_in">u32</span> = <span class="number">100_000</span>;</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><p>Rustæ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œç¼–è¯‘å™¨éœ€è¦åœ¨ç¼–è¯‘æ—¶å¾—åˆ°æ‰€æœ‰å˜é‡çš„ç±»å‹ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥è‡ªåŠ¨æ¨æµ‹ç±»å‹ã€‚</p>
<p>Rustä¸­çš„ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼Œæ ‡é‡ï¼ˆscalarï¼‰å’Œå¤åˆï¼ˆcompoundï¼‰</p>
<h4 id="scalar"><a href="#scalar" class="headerlink" title="scalar"></a>scalar</h4><p><strong>æ•´å‹</strong>ï¼š</p>
<table>
<thead>
<tr>
<th align="center">é•¿åº¦</th>
<th align="center">æœ‰ç¬¦å·</th>
<th align="center">æ— ç¬¦å·</th>
</tr>
</thead>
<tbody><tr>
<td align="center">8-bit</td>
<td align="center">i8</td>
<td align="center">u8</td>
</tr>
<tr>
<td align="center">16-bit</td>
<td align="center">i16</td>
<td align="center">u16</td>
</tr>
<tr>
<td align="center">32-bit</td>
<td align="center">i32</td>
<td align="center">u32</td>
</tr>
<tr>
<td align="center">64-bit</td>
<td align="center">i64</td>
<td align="center">u64</td>
</tr>
<tr>
<td align="center">128-bit</td>
<td align="center">i128</td>
<td align="center">u128</td>
</tr>
<tr>
<td align="center">arch</td>
<td align="center">isize</td>
<td align="center">usize</td>
</tr>
</tbody></table>
<p><code>isize</code>å’Œ<code>usize</code>æ˜¯æ ¹æ®ç³»ç»Ÿè€Œå®šï¼ˆ32/64ï¼‰</p>
<p>åŒæ—¶æ•´å‹çš„å€¼ä¹Ÿå¯ä»¥ç”¨ä¸åŒè¿›åˆ¶è¡¨ç¤ºï¼ˆåå…­è¿›åˆ¶<code>0x</code>å¼€å¤´ï¼Œå…«è¿›åˆ¶<code>0o</code>å¼€å¤´ï¼ŒäºŒè¿›åˆ¶<code>0b</code>å¼€å¤´ï¼Œå•å­—èŠ‚å­—ç¬¦<code>b</code>å¼€å¤´ï¼ˆbâ€™Aâ€™ï¼‰ï¼‰ï¼Œåœ¨æ•°å€¼ä¸­é—´ä¹Ÿå¯ä»¥å¢åŠ <code>_</code>æ¥å¢å¼ºå¯è¯»æ€§ï¼Œåœ¨æ•°å€¼ç»“å°¾ä¹Ÿå¯ä»¥åŠ ä¸Šç±»å‹åç¼€æ¥æ˜ç¡®ç±»å‹</p>
<p><strong>æµ®ç‚¹å‹</strong>ï¼š<br>å•ç²¾åº¦æµ®ç‚¹<code>f32</code>ï¼ŒåŒç²¾åº¦æµ®ç‚¹<code>f64</code></p>
<p><strong>å¸ƒå°”å‹</strong>ï¼š<br><code>bool</code>ï¼Œå€¼æ˜¯å°å†™<code>true/false</code></p>
<p><strong>å­—ç¬¦å‹</strong>ï¼š<br><code>char</code>ï¼Œå››å­—èŠ‚ï¼ˆä½¿ç”¨unicodeï¼‰ã€‚å­—ç¬¦æ˜¯å•å¼•å·è€Œå­—ç¬¦ä¸²æ˜¯åŒå¼•å·</p>
<h4 id="compound"><a href="#compound" class="headerlink" title="compound"></a>compound</h4><p><strong>å…ƒç»„</strong>ï¼š<br>å…ƒç´ ç±»å‹å¯ä»¥ä¸åŒï¼Œä½†æ˜¯æ•´ä¸ªå…ƒç»„çš„ç±»å‹å’Œå„ä¸ªå…ƒç´ çš„ç±»å‹éƒ½æœ‰å…³ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> tup: (<span class="built_in">i32</span>, <span class="built_in">f64</span>, <span class="built_in">u8</span>) = (<span class="number">500</span>, <span class="number">6.4</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥é€šè¿‡<code>.</code>åŠ ç´¢å¼•æ¥è®¿é—®å…ƒç´ ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = tup.<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>åˆ—è¡¨</strong>ï¼š<br>ä¸åŒäºPython/Haskellï¼ŒRustä¸­çš„åˆ—è¡¨çš„é•¿åº¦ä¹Ÿæ˜¯ä¸å¯å˜çš„ï¼Œè€Œä¸”åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ çš„ç±»å‹ä¹Ÿå¿…é¡»ä¸€è‡´ã€‚å«æœ‰äº”ä¸ªi32ç±»å‹çš„å…ƒç´ çš„åˆ—è¡¨çš„ç±»å‹å°±å¯ä»¥å†™æˆ<code>[i32; 5]</code></p>
<p>åŒæ—¶<code>[3; 5]</code>è¿™ç§å†™æ³•ä¹Ÿç­‰ä»·äº<code>[3, 3, 3, 3, 3]</code></p>
<p>å¯ä»¥é€šè¿‡<code>[index]</code>æ¥è®¿é—®å…ƒç´ ï¼Œå¦‚<code>lst[1]</code>ã€‚ä½†å¦‚æœç´¢å¼•è¶…å‡ºåˆ—è¡¨å…ƒç´ ä¸ªæ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å°†ä¸ä¼šæŠ¥é”™ï¼Œä½†è¿è¡Œæ—¶ä¼šæŠ¥é”™</p>
<h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><p>é€šè¿‡<code>fn</code>å…³é”®å­—æ¥å®šä¹‰å‡½æ•°ï¼Œå‚æ•°çš„ç±»å‹å¿…é¡»æŒ‡å®šï¼Œå¦‚æœæœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼çš„ç±»å‹ä¹Ÿè¦åœ¨()åé¢ç”¨-&gt; typeæŒ‡å®šã€‚è¿”å›å€¼å¯ä»¥åœ¨å‡½æ•°ä¸­é€”ç›´æ¥returnè¿”å›ï¼Œä¹Ÿå¯ä»¥åœ¨å‡½æ•°ç»“å°¾ç›´æ¥å†™å‡ºè¦è¿”å›çš„å€¼ï¼ˆä¸åŠ åˆ†å·ï¼Œæ­¤æ—¶æ˜¯è¡¨è¾¾å¼è€Œä¸æ˜¯è¯­å¥ï¼‰ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">plus_one</span></span>(x: <span class="built_in">i32</span>) -&gt; <span class="built_in">i32</span> &#123;</span><br><span class="line">    x + <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒæ ·ï¼Œç”¨{}æ‹¬ä¸Šçš„ä»£ç å—ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒä¹Ÿå¯ä»¥æœ‰è¿”å›å€¼ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> y = &#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">3</span>;</span><br><span class="line">    x + <span class="number">1</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æ§åˆ¶æµ"><a href="#æ§åˆ¶æµ" class="headerlink" title="æ§åˆ¶æµ"></a>æ§åˆ¶æµ</h3><h4 id="æ¡ä»¶"><a href="#æ¡ä»¶" class="headerlink" title="æ¡ä»¶"></a>æ¡ä»¶</h4><p>å¸¸è§„çš„ifè¯­å¥ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> a == <span class="number">1</span> &#123;</span><br><span class="line">    ...;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> a == <span class="number">2</span> &#123;</span><br><span class="line">    ...;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸åŒäºHaskellï¼Œå®ƒå¯ä»¥æ²¡æœ‰elseåªæœ‰if</p>
<p>ifè¯­å¥ä¹Ÿå¯ä»¥ç”¨åœ¨letä¸Šï¼Œè¿™æ—¶{}ä¸­è¦æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼è€Œä¸æ˜¯è¯­å¥ï¼Œå³ä¸å¸¦åˆ†å·ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="keyword">if</span> condition &#123;</span><br><span class="line">    <span class="number">5</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="number">6</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h4><p><strong>loop</strong>ï¼š<br>ä½¿ç”¨loopä¼šå°†å—ä¸€ç›´å¾ªç¯ç›´åˆ°é‡åˆ°breakï¼Œä¹Ÿå¯ä»¥ä»loopå¾ªç¯è¿”å›å€¼ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> counter = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="keyword">loop</span> &#123;</span><br><span class="line">    counter += <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> counter == <span class="number">10</span> &#123;</span><br><span class="line">        <span class="keyword">break</span> counter * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>while</strong>ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> condition &#123;</span><br><span class="line">    ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>for</strong>ï¼š</p>
<figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> lst.iter() &#123;</span><br><span class="line">    ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ‰€æœ‰æƒ"><a href="#æ‰€æœ‰æƒ" class="headerlink" title="æ‰€æœ‰æƒ"></a>æ‰€æœ‰æƒ</h2><p>é¸½äº†ï¼Œæ˜å¤©å†å†™</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://kaisery.github.io/trpl-zh-cn">Rustç¨‹åºè®¾è®¡è¯­è¨€ ç®€ä½“ä¸­æ–‡ç‰ˆ</a></li>
</ul>
]]></content>
      <tags>
        <tag>ç¬”è®°</tag>
        <tag>Rust</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLearn Haskellã€#7 ä¸€äº›å…¶å®ƒç±»å‹ç±»</title>
    <url>/p/68ef8146.html</url>
    <content><![CDATA[<div style="display: flex; justify-content: space-between;">

<p><a href="/p/d4bb2633.html">&lt; #6</a></p>
<p><a href="/p/96c32eae.html">#A &gt;</a></p>
</div>

<h2 id="Foldable"><a href="#Foldable" class="headerlink" title="Foldable"></a>Foldable</h2><p>Foldableæ˜¯è¡¨ç¤ºå¯ä»¥æŠ˜å ï¼ˆfoldï¼‰çš„ç±»å‹ç±»ï¼Œåœ¨<code>Data.Foldable</code>ä¸­å®šä¹‰ï¼Œè¿™ä½¿å¾—å’Œfoldç›¸å…³çš„å‡½æ•°å¯ä»¥ç”¨åœ¨ä»»æ„Foldableçš„å®ä¾‹ç±»å‹ä¸Šã€‚å®ƒçš„å®šä¹‰æ˜¯ï¼š</p>
<span id="more"></span>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Foldable</span> t <span class="keyword">where</span></span></span><br><span class="line">    fold     :: <span class="type">Monoid</span> m =&gt; t m -&gt; m</span><br><span class="line">    foldMap  :: <span class="type">Monoid</span> m =&gt; (a -&gt; m) -&gt; t a -&gt; m</span><br><span class="line">    foldMap&#x27; :: <span class="type">Monoid</span> m =&gt; (a -&gt; m) -&gt; t a -&gt; m</span><br><span class="line">    foldr    :: (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b</span><br><span class="line">    foldr&#x27;   :: (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b</span><br><span class="line">    foldl    :: (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b</span><br><span class="line">    foldl&#x27;   :: (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b</span><br><span class="line">    foldr1   :: (a -&gt; a -&gt; a) -&gt; t a -&gt; a</span><br><span class="line">    foldl1   :: (a -&gt; a -&gt; a) -&gt; t a -&gt; a</span><br><span class="line">    toList   :: t a -&gt; [a]</span><br><span class="line">    null     :: t a -&gt; <span class="type">Bool</span></span><br><span class="line">    length   :: t a -&gt; <span class="type">Int</span></span><br><span class="line">    elem     :: <span class="type">Eq</span> a =&gt; a -&gt; t a -&gt; <span class="type">Bool</span></span><br><span class="line">    maximum  :: <span class="type">Ord</span> a =&gt; t a -&gt; a</span><br><span class="line">    minimum  :: <span class="type">Ord</span> a =&gt; t a -&gt; a</span><br><span class="line">    sum      :: <span class="type">Num</span> a =&gt; t a -&gt; a</span><br><span class="line">    product  :: <span class="type">Num</span> a =&gt; t a -&gt; a</span><br><span class="line">    <span class="meta">&#123;-# MINIMAL foldMap | foldr #-&#125;</span></span><br></pre></td></tr></table></figure>
<p>æœ€å°‘åªè¦å®ç°<code>foldr</code>å’Œ<code>foldMap</code>å…¶ä¸­ä¹‹ä¸€å°±å¯ä»¥ä½¿ä¸€ä¸ªç±»å‹æˆä¸ºFoldableçš„å®ä¾‹ï¼Œå…¶å®ƒçš„å‡½æ•°éƒ½æœ‰ç”±è¿™ä¸¤ä¸ªå‡½æ•°æä¾›çš„é»˜è®¤å®ç°ï¼Œè€Œä¸”è¿™ä¸¤ä¸ªå‡½æ•°ä¹‹é—´ä¹Ÿæœ‰ç›¸äº’å®ç°ã€‚å› æ­¤åªè¦å®ç°foldræˆ–foldMapä¸€ä¸ªå‡½æ•°å°±å¯ä»¥ä½¿ç”¨æ‰€æœ‰å…¶å®ƒFoldableä¸­çš„å‡½æ•°ã€‚foldrå‡½æ•°åœ¨å‰é¢å·²ç»æœ‰å­¦è¿‡ï¼ŒfoldMapçš„ä¾‹å­æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; foldMap <span class="type">Sum</span> [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line"><span class="type">Sum</span> &#123;getSum = <span class="number">9</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; foldMap <span class="type">Product</span> [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line"><span class="type">Product</span> &#123;getProduct = <span class="number">15</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; foldMap (replicate <span class="number">3</span>) [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<h3 id="Foldableå®ä¾‹"><a href="#Foldableå®ä¾‹" class="headerlink" title="Foldableå®ä¾‹"></a>Foldableå®ä¾‹</h3><p>[]ã€Maybeã€Either aã€(,) aéƒ½æ˜¯Foldableçš„å®ä¾‹ï¼Œæ ‡å‡†å®¹å™¨åº“ä¸­çš„Mapã€Setç­‰ä¹Ÿéƒ½æ˜¯Foldableçš„å®ä¾‹ã€‚ä¹Ÿå¯ä»¥è‡ªå®šä¹‰äºŒå‰æ ‘ç±»å‹ï¼Œå¹¶ä½¿å…¶æˆä¸ºFoldableçš„å®ä¾‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Tree</span> a = <span class="type">Empty</span> | <span class="type">Leaf</span> a | <span class="type">Node</span> (<span class="type">Tree</span> <span class="title">a</span>) a (<span class="type">Tree</span> <span class="title">a</span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Foldable</span> <span class="type">Tree</span> <span class="keyword">where</span></span> </span><br><span class="line">    foldMap :: <span class="type">Monoid</span> m =&gt; (a -&gt; m) -&gt; <span class="type">Tree</span> a -&gt; m</span><br><span class="line">    foldMap f <span class="type">Empty</span>        = mempty</span><br><span class="line">    foldMap f (<span class="type">Leaf</span> x)     = f x</span><br><span class="line">    foldMap f (<span class="type">Node</span> l k r) = foldMap f l `mappend` f k `mappend` foldMap f r</span><br></pre></td></tr></table></figure>

<h3 id="å¸¸ç”¨å‡½æ•°"><a href="#å¸¸ç”¨å‡½æ•°" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h3><ul>
<li><code>asum</code> :: (Alternative f, Foldable t) =&gt; t (f a) -&gt; f aï¼Œç”¨&lt;|&gt;é€ä¸ªè¿æ¥æ‰€æœ‰å…ƒç´ </li>
<li><code>sequenceA_</code> :: (Applicative f, Foldable t) =&gt; t (f a) -&gt; f ()ï¼Œç”±äºä¸¢å¼ƒç»“æœï¼Œæ‰€ä»¥Foldable tå°±å¯ä»¥æ»¡è¶³ï¼›å› æ­¤ä¸åŒäºsequenceAéœ€è¦Traversable</li>
<li><code>traverse_</code> :: (Applicative f, Foldable t) =&gt; (a -&gt; f b) -&gt; t a -&gt; f ()</li>
<li><code>for_</code> :: (Applicative f, Foldable t) =&gt; t a -&gt; (a -&gt; f b) -&gt; f ()</li>
</ul>
<h2 id="Traversable"><a href="#Traversable" class="headerlink" title="Traversable"></a>Traversable</h2><p>Traversableæ˜¯è¡¨ç¤ºå¯éå†çš„ç±»å‹ç±»ï¼Œåœ¨<code>Data.Traversable</code>æ¨¡å—ä¸­å®šä¹‰ï¼Œå®ƒæ˜¯Foldableçš„å‡çº§ç‰ˆï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªFunctorï¼Œå®ƒçš„å®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> (<span class="type">Functor</span> <span class="title">t</span>, <span class="type">Foldable</span> <span class="title">t</span>) =&gt; <span class="type">Traversable</span> t <span class="keyword">where</span></span> </span><br><span class="line">    traverse  :: <span class="type">Applicative</span> f =&gt; (a -&gt; f b) -&gt; t a -&gt; f (t b)</span><br><span class="line">    sequenceA :: <span class="type">Applicative</span> f =&gt; t (f a) -&gt; f (t a)</span><br><span class="line">    mapM      ::       <span class="type">Monad</span> m =&gt; (a -&gt; m b) -&gt; t a -&gt; m (t b)</span><br><span class="line">    sequence  ::       <span class="type">Monad</span> m =&gt; t (m a) -&gt; m (t a)</span><br><span class="line">    <span class="meta">&#123;-# MINIMAL traverse | sequenceA #-&#125;</span></span><br></pre></td></tr></table></figure>
<p>æœ€å°‘åªéœ€è¦å®ç°traverseå‡½æ•°æˆ–è€…sequenceAå‡½æ•°ã€‚å…¶ä¸­å„ä¸ªå‡½æ•°çš„åŠŸèƒ½é€šè¿‡ç±»å‹ç­¾åä¹Ÿéƒ½èƒ½æ¨æµ‹å‡ºæ¥ã€‚ä½†æ˜¯å…¶ä¸­mapMå°±æ˜¯traverseï¼Œsequenceå°±æ˜¯sequenceAï¼Œå®ƒä»¬å­˜åœ¨åªæ˜¯å†å²é—ç•™ï¼ˆ</p>
<h3 id="Traversableå®ä¾‹"><a href="#Traversableå®ä¾‹" class="headerlink" title="Traversableå®ä¾‹"></a>Traversableå®ä¾‹</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Traversable</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    traverse _ <span class="type">Nothing</span> = pure <span class="type">Nothing</span></span><br><span class="line">    traverse f (<span class="type">Just</span> x) = <span class="type">Just</span> &lt;$&gt; f x</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Traversable</span> [] <span class="keyword">where</span></span></span><br><span class="line">    <span class="meta">&#123;-# INLINE traverse #-&#125;</span></span><br><span class="line">    traverse f = foldr cons_f (pure [])</span><br><span class="line">      <span class="keyword">where</span> cons_f x ys = liftA2 (:) (f x) ys</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Traversable</span> (<span class="type">Either</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    traverse _ (<span class="type">Left</span> x) = pure (<span class="type">Left</span> x)</span><br><span class="line">    traverse f (<span class="type">Right</span> y) = <span class="type">Right</span> &lt;$&gt; f y</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Traversable</span> ((,) a) <span class="keyword">where</span></span></span><br><span class="line">    traverse f (x, y) = (,) x &lt;$&gt; f y</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„Treeä¹Ÿå¯ä»¥æˆä¸ºTraversableçš„å®ä¾‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> <span class="type">Tree</span> <span class="keyword">where</span></span></span><br><span class="line">    fmap :: (a -&gt; b) -&gt; <span class="type">Tree</span> a -&gt; <span class="type">Tree</span> b</span><br><span class="line">    fmap     g <span class="type">Empty</span>        = <span class="type">Empty</span></span><br><span class="line">    fmap     g (<span class="type">Leaf</span> x)     = <span class="type">Leaf</span> $ g x</span><br><span class="line">    fmap     g (<span class="type">Node</span> l x r) = <span class="type">Node</span> (fmap g l)</span><br><span class="line">                                   (g x)</span><br><span class="line">                                   (fmap g r)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Traversable</span> <span class="type">Tree</span> <span class="keyword">where</span></span></span><br><span class="line">    traverse :: <span class="type">Applicative</span> f =&gt; (a -&gt; f b) -&gt; <span class="type">Tree</span> a -&gt; f (<span class="type">Tree</span> b) </span><br><span class="line">    traverse g <span class="type">Empty</span>        = pure <span class="type">Empty</span></span><br><span class="line">    traverse g (<span class="type">Leaf</span> x)     = <span class="type">Leaf</span> &lt;$&gt; g x</span><br><span class="line">    traverse g (<span class="type">Node</span> l x r) = <span class="type">Node</span> &lt;$&gt; traverse g l</span><br><span class="line">                                   &lt;*&gt; g x</span><br><span class="line">                                   &lt;*&gt; traverse g r</span><br></pre></td></tr></table></figure>

<h3 id="Traversable-Laws"><a href="#Traversable-Laws" class="headerlink" title="Traversable Laws"></a>Traversable Laws</h3><p>Traversableä¹Ÿæœ‰ä¸¤æ¡å®šå¾‹ï¼š</p>
<ol>
<li>traverse Identity <code>=</code> Identity</li>
<li>traverse (Compose . fmap g . f) <code>=</code> Compose . fmap (traverse g) . traverse f </li>
</ol>
<p>å…¶ä¸­Identityå’ŒComposeåˆ†åˆ«å®šä¹‰åœ¨<code>Data.Functor.Identity</code>å’Œ<code>Data.Functor.Compose</code>ä¸¤ä¸ªæ¨¡å—ä¸­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Identity</span> a = <span class="type">Identity</span> &#123; <span class="title">runIdentity</span> :: <span class="title">a</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Compose</span> f g a = <span class="type">Compose</span> &#123; <span class="title">getCompose</span> :: <span class="title">f</span> (<span class="title">g</span> <span class="title">a</span>) &#125; <span class="keyword">deriving</span> (...)</span></span><br></pre></td></tr></table></figure>

<h2 id="Bifunctor"><a href="#Bifunctor" class="headerlink" title="Bifunctor"></a>Bifunctor</h2><p>Functorçš„å®ä¾‹çš„kindéƒ½æ˜¯* -&gt; *ï¼Œå› æ­¤fmapåªèƒ½å°†ä¸€ä¸ªå‡½æ•°æ˜ å°„åˆ°ä¸€ä¸ªå€¼ä¸Šã€‚è€ŒBifunctorï¼ˆåœ¨<code>Data.Bifunctor</code>æ¨¡å—ä¸­å®šä¹‰ï¼‰çš„å®ä¾‹çš„kindæ˜¯* -&gt; * -&gt; *ï¼Œè€Œä¸”å®ƒçš„bimapå¯ä»¥åŒæ—¶å°†ä¸¤ä¸ªå‡½æ•°æ˜ å°„åˆ°ä¸¤ä¸ªå€¼ä¸Šï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Bifunctor</span> p <span class="keyword">where</span></span> </span><br><span class="line">    bimap  :: (a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d </span><br><span class="line">    first  :: (a -&gt; b) -&gt; p a c -&gt; p b c </span><br><span class="line">    second :: (b -&gt; c) -&gt; p a b -&gt; p a c </span><br><span class="line">    <span class="meta">&#123;-# MINIMAL bimap | first, second #-&#125;</span></span><br></pre></td></tr></table></figure>
<p>åŒæ—¶bimapå’Œfirst,secondä¹‹é—´ä¹Ÿå¯ä»¥ç›¸äº’è½¬æ¢ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">bimap</span> f g = first f . second g</span><br><span class="line"></span><br><span class="line"><span class="title">first</span>  f = bimap f id</span><br><span class="line"><span class="title">second</span> g = bimap id g</span><br></pre></td></tr></table></figure>
<p>å¯¹äºFunctorï¼Œ((,) e)å’ŒEither eæ‰æ˜¯Functorçš„å®ä¾‹ï¼Œå› ä¸ºä»–ä»¬æ˜¯* -&gt; *ã€‚ä½†æ˜¯å¯¹äºBifunctorï¼Œ(,)å’ŒEitherå°±æ˜¯Bifunctorçš„å®ä¾‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; bimap (+<span class="number">1</span>) length (<span class="number">4</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">(<span class="number">5</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Bifunctor-Laws"><a href="#Bifunctor-Laws" class="headerlink" title="Bifunctor Laws"></a>Bifunctor Laws</h3><ol>
<li>bimap id id <code>=</code> id<br> first id <code>=</code> id<br> second id <code>=</code> id</li>
<li>bimap (f . g) (h . i) <code>=</code> bimap f h . bimap g i<br> first  (f . g) <code>=</code> first f  . first g<br> second (f . g) <code>=</code> second f . second g</li>
</ol>
<h2 id="Category"><a href="#Category" class="headerlink" title="Category"></a>Category</h2><p>Haskellä¸­çš„Categoryå°†ä¸€èˆ¬çš„å‡½æ•°æ¨å¹¿åˆ°äº†æ™®éçš„æ€å°„ä¸Šï¼Œå®ƒåœ¨<code>Control.Category</code>æ¨¡å—ä¸­ï¼Œå®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Category</span> cat <span class="keyword">where</span></span> </span><br><span class="line">    id  :: cat a a </span><br><span class="line">    (.) :: cat b c -&gt; cat a b -&gt; cat a c</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„å®ä¾‹æœ‰<code>(-&gt;)</code>å’Œ<code>Kleisli m</code>ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Category</span> (-&gt;) <span class="keyword">where</span></span></span><br><span class="line">    id = <span class="type">GHC</span>.<span class="type">Base</span>.id</span><br><span class="line">    (.) = (<span class="type">GHC</span>.<span class="type">Base</span>..)</span><br></pre></td></tr></table></figure>
<p>Kleisliæ˜¯ä¸€ä¸ªèŒƒç•´ï¼Œç”¨æ¥è¡¨ç¤ºå‡½æ•°a -&gt; m bï¼ŒHaskellä¸­ï¼Œå®ƒåœ¨<code>Control.Arrow</code>æ¨¡å—ä¸­å®šä¹‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Kleisli</span> m a b = <span class="type">Kleisli</span> &#123; <span class="title">runKleisli</span> :: <span class="title">a</span> -&gt; <span class="title">m</span> <span class="title">b</span> &#125;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> m =&gt; <span class="type">Category</span> (<span class="type">Kleisli</span> <span class="title">m</span>) <span class="keyword">where</span></span></span><br><span class="line">    id :: <span class="type">Kleisli</span> m a a</span><br><span class="line">    id = <span class="type">Kleisli</span> return</span><br><span class="line"></span><br><span class="line">    (.) :: <span class="type">Kleisli</span> m b c -&gt; <span class="type">Kleisli</span> m a b -&gt; <span class="type">Kleisli</span> m a c</span><br><span class="line">    <span class="type">Kleisli</span> g . <span class="type">Kleisli</span> h = <span class="type">Kleisli</span> (h &gt;=&gt; g)</span><br></pre></td></tr></table></figure>
<p>Categoryè¦æ»¡è¶³çš„å®šå¾‹åªæœ‰idæ˜¯(.)æ“ä½œçš„å•ä½å…ƒï¼Œä»¥åŠ(.)æ“ä½œæ˜¯å¯ç»“åˆçš„</p>
<p>åŒæ—¶Categoryè¿˜æä¾›äº†ä¸¤ä¸ªå‡½æ•°<code>&lt;&lt;&lt;</code>å’Œ<code>&gt;&gt;&gt;</code>ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">(&lt;&lt;&lt;) :: <span class="type">Category</span> cat =&gt; cat b c -&gt; cat a b -&gt; cat a c</span><br><span class="line">(&lt;&lt;&lt;) = (.)</span><br><span class="line"></span><br><span class="line">(&gt;&gt;&gt;) :: <span class="type">Category</span> cat =&gt; cat a b -&gt; cat b c -&gt; cat a c </span><br><span class="line"><span class="title">f</span> &gt;&gt;&gt; g = g . f </span><br></pre></td></tr></table></figure>

<h2 id="Arrow"><a href="#Arrow" class="headerlink" title="Arrow"></a>Arrow</h2><p>Arrowå°†å‡½æ•°è¿›ä¸€æ­¥æŠ½è±¡åŒ–ï¼Œå®ƒå®šä¹‰åœ¨<code>Control.Arrow</code>æ¨¡å—ä¸­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Category</span> a =&gt; <span class="type">Arrow</span> a <span class="keyword">where</span></span> </span><br><span class="line">    arr    :: (b -&gt; c) -&gt; a b c </span><br><span class="line">    first  :: a b c -&gt; a (b, d) (c, d)</span><br><span class="line">    second :: a b c -&gt; a (d, b) (d, c)</span><br><span class="line">    (***)  :: a b c -&gt; a b&#x27; c&#x27; -&gt; a (b, b&#x27;) (c, c&#x27;)</span><br><span class="line">    (&amp;&amp;&amp;)  :: a b c -&gt; a b c&#x27; -&gt; a b (c, c&#x27;)</span><br><span class="line">    <span class="meta">&#123;-# MINIMAL arr, (first | (***)) #-&#125;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><code>arr</code>å‡½æ•°å°†ä¸€ä¸ªå‡½æ•°å˜æˆä¸€ä¸ªArrow</li>
<li><code>first</code>å‡½æ•°å°†ä¸€ä¸ªArrowå˜æˆä¸€ä¸ªäºŒå…ƒç»„é—´çš„Arrowï¼Œä¸”åªä¼šå¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¿æŒä¸å˜</li>
<li><code>second</code>å‡½æ•°ä¸firstç›¸åï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¿æŒä¸å˜</li>
<li><code>***</code>å‡½æ•°æ˜¯Arrowä¹‹é—´çš„parallel compositionï¼Œå¯¹äºå‡½æ•°: (g *** h) (x, y) = (g x, h y)</li>
<li><code>&amp;&amp;&amp;</code>å‡½æ•°æ˜¯Arrowä¹‹é—´çš„fanout compositionï¼Œå¯¹äºå‡½æ•°: (g &amp;&amp;&amp; h) x = (g x, h x)</li>
</ul>
<p>å®ƒçš„å®ä¾‹ä¹Ÿæœ‰(-&gt;)å’ŒKleisliï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Arrow</span> (-&gt;) <span class="keyword">where</span></span></span><br><span class="line">  arr :: (b -&gt; c) -&gt; (b -&gt; c)</span><br><span class="line">  arr g = g</span><br><span class="line"></span><br><span class="line">  first :: (b -&gt; c) -&gt; ((b,d) -&gt; (c,d))</span><br><span class="line">  first g (x,y) = (g x, y)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> m =&gt; <span class="type">Arrow</span> (<span class="type">Kleisli</span> <span class="title">m</span>) <span class="keyword">where</span></span></span><br><span class="line">  arr :: (b -&gt; c) -&gt; <span class="type">Kleisli</span> m b c</span><br><span class="line">  arr f = <span class="type">Kleisli</span> (return . f)</span><br><span class="line"></span><br><span class="line">  first :: <span class="type">Kleisli</span> m b c -&gt; <span class="type">Kleisli</span> m (b,d) (c,d)</span><br><span class="line">  first (<span class="type">Kleisli</span> f) = <span class="type">Kleisli</span> (\ ~(b,d) -&gt; <span class="keyword">do</span> c &lt;- f b</span><br><span class="line">                                              return (c,d) )</span><br></pre></td></tr></table></figure>
<p>å¸¸ç”¨å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">returnA</span> :: <span class="type">Arrow</span> a =&gt; a b b</span><br><span class="line"><span class="title">returnA</span> = arr id</span><br><span class="line"></span><br><span class="line">(^&gt;&gt;) :: <span class="type">Arrow</span> a =&gt; (b -&gt; c) -&gt; a c d -&gt; a b d</span><br><span class="line"><span class="title">f</span> ^&gt;&gt; a = arr f &gt;&gt;&gt; a</span><br><span class="line"></span><br><span class="line">(&gt;&gt;^) :: <span class="type">Arrow</span> a =&gt; a b c -&gt; (c -&gt; d) -&gt; a b d</span><br><span class="line"><span class="title">a</span> &gt;&gt;^ f = a &gt;&gt;&gt; arr f</span><br><span class="line"></span><br><span class="line">(&lt;&lt;^) :: <span class="type">Arrow</span> a =&gt; a c d -&gt; (b -&gt; c) -&gt; a b d</span><br><span class="line"><span class="title">a</span> &lt;&lt;^ f = a &lt;&lt;&lt; arr f</span><br><span class="line"></span><br><span class="line">(^&lt;&lt;) :: <span class="type">Arrow</span> a =&gt; (c -&gt; d) -&gt; a b c -&gt; a b d</span><br><span class="line"><span class="title">f</span> ^&lt;&lt; a = arr f &lt;&lt;&lt; a</span><br></pre></td></tr></table></figure>

<h3 id="Arrow-notation"><a href="#Arrow-notation" class="headerlink" title="Arrow notation"></a>Arrow notation</h3><p>ç±»ä¼¼do-notationï¼ŒArrowä¹Ÿæä¾›äº†ä¸€å¥—æ–¹ä¾¿çš„è¯­å¥ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">proc</span> x -&gt; <span class="keyword">do</span> </span><br><span class="line">    y &lt;- action1 -&lt; ... </span><br><span class="line">    z &lt;- action2 -&lt; ...</span><br><span class="line">    returnA -&lt; ...</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­procä»£æ›¿äº†lambdaè¡¨è¾¾å¼ä¸­çš„æ–œæ \ï¼Œ-&lt;å³è¾¹çš„ä¸ºè¾“å…¥ï¼Œå·¦è¾¹çš„ä¸ºæ¥æ”¶è¾“å…¥çš„å‡½æ•°ã€‚æ¯”å¦‚ï¼Œä¸‹é¢ä¸‰ç§å†™æ³•è¾¾æˆçš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">f</span> :: <span class="type">Int</span> -&gt; (<span class="type">Int</span>, <span class="type">Int</span>)</span><br><span class="line"><span class="title">f</span> = \x -&gt;</span><br><span class="line">    <span class="keyword">let</span> y  = <span class="number">2</span> * x</span><br><span class="line">        z1 = y + <span class="number">3</span></span><br><span class="line">        z2 = y - <span class="number">5</span></span><br><span class="line">    <span class="keyword">in</span> (z1, z2) </span><br><span class="line"><span class="comment">-- ghci&gt; f 10 </span></span><br><span class="line"><span class="comment">-- (23,15)</span></span><br><span class="line"></span><br><span class="line"><span class="title">fM</span> :: <span class="type">Int</span> -&gt; <span class="type">Identity</span> (<span class="type">Int</span>, <span class="type">Int</span>)</span><br><span class="line"><span class="title">fM</span> = \x -&gt; <span class="keyword">do</span></span><br><span class="line">    y  &lt;- return (<span class="number">2</span> * x)</span><br><span class="line">    z1 &lt;- return (y + <span class="number">3</span>)</span><br><span class="line">    z2 &lt;- return (y - <span class="number">5</span>)</span><br><span class="line">    return (z1, z2)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ghci&gt; runIdentity (fM 10)</span></span><br><span class="line"><span class="comment">-- (23,15)</span></span><br><span class="line"></span><br><span class="line"><span class="title">fA</span> :: <span class="type">Int</span> -&gt; (<span class="type">Int</span>, <span class="type">Int</span>)</span><br><span class="line"><span class="title">fA</span> = <span class="keyword">proc</span> x -&gt; <span class="keyword">do</span></span><br><span class="line">    y  &lt;- (<span class="number">2</span> *) -&lt; x</span><br><span class="line">    z1 &lt;- (+ <span class="number">3</span>) -&lt; y</span><br><span class="line">    z2 &lt;- (subtract <span class="number">5</span>) -&lt; y</span><br><span class="line">    returnA -&lt; (z1, z2)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ghci&gt; fA 10</span></span><br><span class="line"><span class="comment">-- (23,15)</span></span><br></pre></td></tr></table></figure>

<h3 id="ArrowChoice"><a href="#ArrowChoice" class="headerlink" title="ArrowChoice"></a>ArrowChoice</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Arrow</span> a =&gt; <span class="type">ArrowChoice</span> a <span class="keyword">where</span></span></span><br><span class="line">    left :: a b c -&gt; a (<span class="type">Either</span> b d) (<span class="type">Either</span> c d)</span><br><span class="line">    left = (+++ id)</span><br><span class="line"></span><br><span class="line">    right :: a b c -&gt; a (<span class="type">Either</span> d b) (<span class="type">Either</span> d c)</span><br><span class="line">    right = (id +++)</span><br><span class="line"></span><br><span class="line">    (+++) :: a b c -&gt; a b&#x27; c&#x27; -&gt; a (<span class="type">Either</span> b b&#x27;) (<span class="type">Either</span> c c&#x27;)</span><br><span class="line">    f +++ g = left f &gt;&gt;&gt; arr mirror &gt;&gt;&gt; left g &gt;&gt;&gt; arr mirror</span><br><span class="line">      <span class="keyword">where</span></span><br><span class="line">        mirror :: <span class="type">Either</span> x y -&gt; <span class="type">Either</span> y x</span><br><span class="line">        mirror (<span class="type">Left</span> x) = <span class="type">Right</span> x</span><br><span class="line">        mirror (<span class="type">Right</span> y) = <span class="type">Left</span> y</span><br><span class="line"></span><br><span class="line">    (|||) :: a b d -&gt; a c d -&gt; a (<span class="type">Either</span> b c) d</span><br><span class="line">    f ||| g = f +++ g &gt;&gt;&gt; arr untag</span><br><span class="line">      <span class="keyword">where</span></span><br><span class="line">        untag (<span class="type">Left</span> x) = x</span><br><span class="line">        untag (<span class="type">Right</span> y) = y</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">ArrowChoice</span> (-&gt;) <span class="keyword">where</span></span></span><br><span class="line">    left f = f +++ id</span><br><span class="line">    right f = id +++ f</span><br><span class="line">    f +++ g = (<span class="type">Left</span> . f) ||| (<span class="type">Right</span> . g)</span><br><span class="line">    (|||) = either</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> m =&gt; <span class="type">ArrowChoice</span> (<span class="type">Kleisli</span> <span class="title">m</span>) <span class="keyword">where</span></span></span><br><span class="line">    left f = f +++ arr id</span><br><span class="line">    right f = arr id +++ f</span><br><span class="line">    f +++ g = (f &gt;&gt;&gt; arr <span class="type">Left</span>) ||| (g &gt;&gt;&gt; arr <span class="type">Right</span>)</span><br><span class="line">    <span class="type">Kleisli</span> f ||| <span class="type">Kleisli</span> g = <span class="type">Kleisli</span> (either f g)</span><br></pre></td></tr></table></figure>

<h3 id="ArrowZero-amp-ArrowPlus"><a href="#ArrowZero-amp-ArrowPlus" class="headerlink" title="ArrowZero &amp; ArrowPlus"></a>ArrowZero &amp; ArrowPlus</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Arrow</span> a =&gt; <span class="type">ArrowZero</span> a <span class="keyword">where</span></span></span><br><span class="line">    zeroArrow :: a b c</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">ArrowZero</span> a =&gt; <span class="type">ArrowPlus</span> a <span class="keyword">where</span></span></span><br><span class="line">    (&lt;+&gt;) :: a b c -&gt; a b c -&gt; a b c</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">MonadPlus</span> m =&gt; <span class="type">ArrowZero</span> (<span class="type">Kleisli</span> <span class="title">m</span>) <span class="keyword">where</span></span></span><br><span class="line">    zeroArrow = <span class="type">Kleisli</span> (\_ -&gt; mzero)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">MonadPlus</span> m =&gt; <span class="type">ArrowPlus</span> (<span class="type">Kleisli</span> <span class="title">m</span>) <span class="keyword">where</span></span></span><br><span class="line">    <span class="type">Kleisli</span> f &lt;+&gt; <span class="type">Kleisli</span> g = <span class="type">Kleisli</span> (\x -&gt; f x `mplus` g x)</span><br></pre></td></tr></table></figure>

<h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; runKleisli ((<span class="type">Kleisli</span> (\x -&gt; [x * <span class="number">2</span>])) &lt;+&gt; (<span class="type">Kleisli</span> (\x -&gt; [x, -x]))) <span class="number">2</span></span><br><span class="line">[<span class="number">4</span>,<span class="number">2</span>,<span class="number">-2</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; either (+<span class="number">2</span>) (*<span class="number">3</span>) (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; either (+<span class="number">2</span>) (*<span class="number">3</span>) (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">2</span>) ||| (*<span class="number">3</span>) $ (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">2</span>) +++ (*<span class="number">3</span>) $ (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Left</span> <span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">2</span>) ||| (*<span class="number">3</span>) $ (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">2</span>) +++ (*<span class="number">3</span>) $ (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Right</span> <span class="number">9</span></span><br><span class="line"><span class="title">ghci</span>&gt; left (+<span class="number">2</span>) (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Left</span> <span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; right (*<span class="number">3</span>) (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Right</span> <span class="number">9</span></span><br><span class="line"><span class="title">ghci</span>&gt; left (+<span class="number">2</span>) (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Right</span> <span class="number">3</span></span><br><span class="line"><span class="title">ghci</span>&gt; right (*<span class="number">3</span>) (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line"><span class="type">Left</span> <span class="number">3</span></span><br><span class="line"><span class="title">ghci</span>&gt; runKleisli ((<span class="type">Kleisli</span> (\x -&gt; [x * <span class="number">2</span>])) ||| (<span class="type">Kleisli</span> (\x -&gt; [x, -x]))) (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line">[<span class="number">6</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; runKleisli ((<span class="type">Kleisli</span> (\x -&gt; [x * <span class="number">2</span>])) ||| (<span class="type">Kleisli</span> (\x -&gt; [x, -x]))) (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line">[<span class="number">3</span>,<span class="number">-3</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; runKleisli ((<span class="type">Kleisli</span> (\x -&gt; [x * <span class="number">2</span>])) +++ (<span class="type">Kleisli</span> (\x -&gt; [x, -x]))) (<span class="type">Left</span> <span class="number">3</span>)</span><br><span class="line">[<span class="type">Left</span> <span class="number">6</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; runKleisli ((<span class="type">Kleisli</span> (\x -&gt; [x * <span class="number">2</span>])) +++ (<span class="type">Kleisli</span> (\x -&gt; [x, -x]))) (<span class="type">Right</span> <span class="number">3</span>)</span><br><span class="line">[<span class="type">Right</span> <span class="number">3</span>,<span class="type">Right</span> (<span class="number">-3</span>)]</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://wiki.haskell.org/Typeclassopedia">Typeclassopedia - Haskell wiki</a></li>
<li><a href="https://blog.csdn.net/zwvista/article/details/78679542">Haskellè¯­è¨€å­¦ä¹ ç¬”è®°ï¼ˆ40ï¼‰Arrowï¼ˆ1ï¼‰ - zwvista</a></li>
<li><a href="https://ocharles.org.uk/blog/guest-posts/2014-12-21-arrows.html">24 Days of GHC Extensions: Arrows - Tom Ellis</a></li>
<li><a href="https://blog.csdn.net/zwvista/article/details/78690485">Haskellè¯­è¨€å­¦ä¹ ç¬”è®°ï¼ˆ47ï¼‰Arrowï¼ˆ2ï¼‰ - zwvista</a></li>
</ul>
<hr>
<div style="text-align: center;">

<p style="font-size: 1.3rem; font-weight: bold;">ç›®å½•</p>

<p>#0&nbsp;|&nbsp;<a href="/p/b3ca5c18.html">æ€»ç« </a>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<br>#1&nbsp;|&nbsp;<a href="/p/d63b5b5f.html">åŸºç¡€è¯­æ³•ä¸å‡½æ•°</a>&emsp;&emsp;&emsp;<br>#2&nbsp;|&nbsp;<a href="/p/53e482b7.html">é«˜é˜¶å‡½æ•°ä¸æ¨¡å—</a>&emsp;&emsp;&emsp;<br>#3&nbsp;|&nbsp;<a href="/p/369b7e08.html">ç±»å‹ä¸ç±»å‹ç±»</a>&emsp;&emsp;&emsp;&emsp;<br>#4&nbsp;|&nbsp;<a href="/p/a5bbe48a.html">è¾“å…¥è¾“å‡ºä¸æ–‡ä»¶</a>&emsp;&emsp;&emsp;<br>#5&nbsp;|&nbsp;<a href="/p/290ecb74.html">å‡½å­ã€åº”ç”¨å‡½å­ä¸å•å­</a><br>#6&nbsp;|&nbsp;<a href="/p/d4bb2633.html">åŠç¾¤ä¸å¹ºåŠç¾¤</a>&emsp;&emsp;&emsp;&emsp;<br>#7&nbsp;|&nbsp;<a href="/p/68ef8146.html">ä¸€äº›å…¶å®ƒç±»å‹ç±»</a>&emsp;&emsp;&emsp;<br>#A&nbsp;|&nbsp;<a href="/p/96c32eae.html">Haskellä¸èŒƒç•´è®º</a>&emsp;&nbsp;&thinsp;</p>
</div>]]></content>
      <tags>
        <tag>Haskell</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLearn Haskellã€#A Haskellä¸èŒƒç•´è®º</title>
    <url>/p/96c32eae.html</url>
    <content><![CDATA[<p>Haskellä¸­çš„å‡½å­å•å­ç­‰éƒ½ä¸èŒƒç•´è®ºï¼ˆcategory theoryï¼‰æœ‰å¾ˆå¤šè”ç³»ï¼Œæ‰€ä»¥æ‰“ç®—ç®€å•äº†è§£ä¸€ä¸‹èŒƒç•´è®ºçš„ç›¸å…³å†…å®¹ã€‚</p>
<blockquote>
<p><strong>èŒƒç•´è®º</strong>æ˜¯æ•°å­¦çš„ä¸€é—¨å­¦ç§‘ï¼Œä»¥æŠ½è±¡çš„æ–¹æ³•å¤„ç†æ•°å­¦æ¦‚å¿µï¼Œå°†è¿™äº›æ¦‚å¿µå½¢å¼åŒ–æˆä¸€ç»„ç»„çš„â€œç‰©ä»¶â€åŠâ€œæ€å°„â€ã€‚æ•°å­¦ä¸­è®¸å¤šé‡è¦çš„é¢†åŸŸå¯ä»¥å½¢å¼åŒ–ä¸ºèŒƒç•´ã€‚ä½¿ç”¨èŒƒç•´è®ºå¯ä»¥ä»¤è¿™äº›é¢†åŸŸä¸­è®¸å¤šéš¾ç†è§£ã€éš¾æ‰æ‘¸çš„æ•°å­¦ç»“è®ºæ›´å®¹æ˜“å™è¿°è¯æ˜ã€‚</p>
<div style="text-align: right">â€”â€”â€”â€” ç»´åŸºç™¾ç§‘</div>
</blockquote>
<h2 id="èŒƒç•´ï¼ˆCategoryï¼‰"><a href="#èŒƒç•´ï¼ˆCategoryï¼‰" class="headerlink" title="èŒƒç•´ï¼ˆCategoryï¼‰"></a>èŒƒç•´ï¼ˆCategoryï¼‰</h2><p>èŒƒç•´æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç®€å•çš„é›†åˆï¼Œä¸€ä¸ªèŒƒç•´$\mathbf{C}$åŒ…å«ä¸‰ä¸ªç»„æˆæˆåˆ†ï¼š</p>
<span id="more"></span>
<ul>
<li>ä¸€ä¸ªç±»$\mathrm{ob}(\mathbf{C})$ï¼šå…¶ä¸­å…ƒç´ ç§°ä¸º<strong>å¯¹è±¡ï¼ˆobjectsï¼‰</strong></li>
<li>ä¸€ä¸ªç±»$\mathrm{hom}(\mathbf{C})$ï¼šå…¶ä¸­å…ƒç´ ç§°ä¸º<strong>æ€å°„ï¼ˆmorphismsï¼‰</strong>ï¼ˆæˆ–<strong>ç®­å·ï¼ˆarrowsï¼‰</strong>ï¼‰ï¼šæ¯ä¸ªæ€å°„è¿æ¥äº†ä¸¤ä¸ªå¯¹è±¡ï¼šæºå¯¹è±¡ï¼ˆsource objectï¼‰ã€ç›®æ ‡å¯¹è±¡ï¼ˆtarget objectï¼‰ã€‚å¦‚æœ$f$æ˜¯ä»æºå¯¹è±¡$A$åˆ°ç›®æ ‡å¯¹è±¡$B$ï¼ˆ$A, B\in \mathrm{ob}(\mathbf{C})$ï¼‰çš„æ€å°„ï¼Œé‚£ä¹ˆè®°ä¸º$f : A\to B$</li>
<li>ä¸€ä¸ªäºŒå…ƒè¿ç®—ï¼Œç§°ä¸ºæ€å°„<strong>å¤åˆï¼ˆcompositionï¼‰</strong>ï¼šä¸¤ä¸ªæ€å°„$g : A\to B$ã€$f : B\to C$çš„å¤åˆè®°ä¸º$f\circ g : A\to C$<br>åœ¨Haskellå’Œå¤§éƒ¨åˆ†æ•°å­¦ç†è®ºä¸­éƒ½æ˜¯ä»å³å‘å·¦è®¡ç®—ï¼Œå³$f\circ g$ä¸­æ˜¯å…ˆè®¡ç®—$g : A\to B$å†è®¡ç®—$f : B\to C$</li>
</ul>
<p>è®¸å¤šä¸œè¥¿éƒ½å¯ä»¥ç»„æˆèŒƒç•´ã€‚æ¯”å¦‚:</p>
<p>&emsp;$\mathbf{Set}$æ˜¯ä¸€ä¸ªèŒƒç•´ï¼Œå¯¹è±¡ä¸ºæ‰€æœ‰é›†åˆï¼Œæ€å°„ä¸ºé›†åˆä¹‹é—´çš„å‡½æ•°ï¼Œå¤åˆå³å‡½æ•°ä¹‹é—´çš„å¤åˆ</p>
<p>&emsp;$\mathbf{Grp}$æ˜¯ä¸€ä¸ªèŒƒç•´ï¼Œå¯¹è±¡ä¸ºæ‰€æœ‰ç¾¤ï¼Œæ€å°„ä¸ºç¾¤åŒæ€ï¼ˆgroup homomorphismsï¼‰ï¼Œä¾‹å¦‚å¯¹äºç¾¤$(G,*)$å’Œ$(H,\cdot )$ï¼Œæœ‰ç¾¤åŒæ€$h : (G,*)\to (H,\cdot )$ï¼Œåˆ™éœ€è¦å¯¹äº$G$ä¸­çš„ä»»æ„å…ƒç´ $u,v$æ»¡è¶³<br>$$h(u*v)=h(u)\cdot h(v)$$</p>
<p><strong>æ³¨æ„</strong>ï¼šæ€å°„ä¸å¿…é¡»ä¸ºå‡½æ•°ï¼›è€Œä¸”å¯ä»¥å­˜åœ¨æºå¯¹è±¡å’Œç›®æ ‡å¯¹è±¡éƒ½ç›¸åŒçš„ä¸åŒæ€å°„</p>
<h3 id="èŒƒç•´å…¬ç†"><a href="#èŒƒç•´å…¬ç†" class="headerlink" title="èŒƒç•´å…¬ç†"></a>èŒƒç•´å…¬ç†</h3><p>æ¯ä¸ªèŒƒç•´éƒ½éœ€è¦æ»¡è¶³ä¸‰æ¡å®šå¾‹ï¼š</p>
<ol>
<li>æ€å°„å¤åˆéœ€è¦æ»¡è¶³<strong>ç»“åˆå¾‹ï¼ˆassociativityï¼‰</strong>ï¼š<br>$$f\circ (g\circ h) = (f\circ g)\circ h$$</li>
<li>èŒƒç•´åœ¨å¤åˆæ“ä½œä¸‹æ˜¯<strong>é—­åˆçš„ï¼ˆclosedï¼‰</strong>ï¼š<br>&emsp;&emsp;&emsp;å¦‚æœèŒƒç•´$\mathbf{C}$ä¸­å­˜åœ¨æ€å°„$f : B\to C$ã€$g : A\to B$ï¼Œé‚£ä¹ˆèŒƒç•´$\mathbf{C}$ä¸­ä¹Ÿä¸€å®šå­˜åœ¨æ€å°„$h : A\to C$ï¼Œä¸”$h=f\circ g$</li>
<li>æ¯ä¸ªå¯¹è±¡éƒ½éœ€è¦æœ‰<strong>å•ä½æ€å°„ï¼ˆidentity morphismsï¼‰</strong>ï¼š<br>&emsp;&emsp;&emsp;å¯¹äºèŒƒç•´$\mathbf{C}$ä¸­çš„å¯¹è±¡$A$ï¼Œä¸€å®šå­˜åœ¨å•ä½æ€å°„$\mathrm{id}_A : A\to A$ï¼Œä¸”å¯¹äºæ¯ä¸ªæ€å°„$g : A\to B$ï¼Œä¸€å®šæœ‰ï¼š<br>$$g\circ\mathrm{id}_A = \mathrm{id}_B\circ g = g$$</li>
</ol>
<h3 id="mathbf-Hask-èŒƒç•´"><a href="#mathbf-Hask-èŒƒç•´" class="headerlink" title="$\mathbf{Hask}$èŒƒç•´"></a>$\mathbf{Hask}$èŒƒç•´</h3><p>èŒƒç•´$\mathbf{Hask}$çš„å¯¹è±¡ä¸ºHaskellä¸­çš„ç±»å‹ï¼ˆtypesï¼‰ï¼Œæ€å°„æ˜¯Haskellä¸­çš„å‡½æ•°ï¼Œå¤åˆè¿ç®—æ˜¯<code>(.)</code>ã€‚å³ä»ç±»å‹Aåˆ°ç±»å‹Bçš„å‡½æ•° f :: A -&gt; B å°±æ˜¯$\mathbf{Hask}$èŒƒç•´ä¸­çš„ä¸€ä¸ªæ€å°„ã€‚è€Œå‡½æ•° f :: B -&gt; C ã€g :: A -&gt; B çš„ç»„åˆ f . g å°±æ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•° h :: A -&gt; Cã€‚</p>
<p>å¯¹äºä¸‰æ¡å®šå¾‹ï¼š</p>
<ol>
<li>ç¬¬ä¸€æ¡æ˜¾ç„¶æ»¡è¶³ï¼šf . (g . h) = (f . g) . h</li>
<li>ç¬¬äºŒæ¡ä¹Ÿæ˜¾ç„¶æ»¡è¶³ï¼Œå¦‚æœæœ‰å‡½æ•° f :: B -&gt; C ã€g :: A -&gt; Bï¼Œä¸€å®šæœ‰å‡½æ•° h = (f . g) :: A -&gt; C </li>
<li>å¯¹äºç¬¬ä¸‰æ¡å®šå¾‹ï¼ŒHaskellä¸­å­˜åœ¨å•ä½å‡½æ•° id ï¼Œä½†idæ˜¯å¤šæ€ï¼ˆpolymorphicï¼‰çš„ï¼Œè¦ä¸ºå…¶æŒ‡å®šç±»å‹ä½¿å…¶å˜æˆå•æ€ï¼ˆmonomorphicï¼‰çš„ã€‚æ¯”å¦‚æ€å°„$\mathrm{id}_A$åœ¨Haskellä¸­å°±å¯ä»¥è¡¨ç¤ºä¸º id :: A -&gt; Aã€‚å¹¶ä¸”æ˜¾ç„¶æ»¡è¶³ç¬¬ä¸‰æ¡å®šå¾‹ï¼ˆå…¶ä¸­ f :: A -&gt; Bï¼‰ï¼š<p style="text-align: center;">(id :: B -> B) . f = f . (id :: A -> A) = f</p></li>
</ol>
<h2 id="å‡½å­ï¼ˆFunctorsï¼‰"><a href="#å‡½å­ï¼ˆFunctorsï¼‰" class="headerlink" title="å‡½å­ï¼ˆFunctorsï¼‰"></a>å‡½å­ï¼ˆFunctorsï¼‰</h2><p>ä¸€ä¸ªèŒƒç•´ä¸­çš„æ€å°„å°†ä¸¤ä¸ªå¯¹è±¡è”ç³»èµ·æ¥ï¼Œè€Œå‡½å­åˆ™ä¼šå°†ä¸¤ä¸ªèŒƒç•´è”ç³»èµ·æ¥ã€‚æ¢å¥è¯è¯´ï¼Œå‡½å­å°±æ˜¯ä»ä¸€ä¸ªèŒƒç•´åˆ°å¦ä¸€ä¸ªèŒƒç•´çš„å˜æ¢ã€‚æ¯”å¦‚å¯¹äºèŒƒç•´$\mathbf{C}$ã€$\mathbf{D}$ï¼Œå®šä¹‰å‡½å­$F : \mathbf{C}\to\mathbf{D}$æ»¡è¶³ï¼š</p>
<ul>
<li>å¯¹äº$\mathbf{C}$ä¸­çš„ä»»æ„å¯¹è±¡$A$ï¼Œåœ¨$\mathbf{D}$ä¸­éƒ½æœ‰å¯¹è±¡$F(A)$</li>
<li>å¯¹äº$\mathbf{C}$ä¸­çš„ä»»æ„æ€å°„$f : A\to B$ï¼Œåœ¨$\mathbf{D}$ä¸­éƒ½æœ‰æ€å°„$F(f) : F(A)\to F(B)$</li>
</ul>
<p>æ¯”å¦‚ï¼š</p>
<p>&emsp;é—å¿˜å‡½å­ï¼ˆforgetful functorï¼‰$U : \mathbf{Grp}\to\mathbf{Set}$ï¼Œå°†ä¸€ä¸ªç¾¤æ˜ å°„åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼Œå°†ç¾¤åŒæ€æ˜ å°„åˆ°é›†åˆé—´çš„å‡½æ•°</p>
<p>&emsp;å¹‚é›†å‡½å­ï¼ˆpower set functorï¼‰$P : \mathbf{Set}\to\mathbf{Set}$ï¼Œå°†ä¸€ä¸ªé›†åˆæ˜ å°„åˆ°å®ƒçš„å¹‚é›†ï¼Œå°†åŸé›†åˆä¸­çš„å‡½æ•°$f : A\to B$æ˜ å°„åˆ°å‡½æ•°$P(f) : \mathcal{P}(A)\to\mathcal{P}(B)$ï¼Œå³ä»$U\subseteq A$åˆ°å€¼åŸŸ$f(U)\subseteq B$çš„æ˜ å°„</p>
<p>&emsp;è‡ªå‡½å­ï¼ˆendofunctorï¼‰$1_{\mathbf{C}} : \mathbf{C}\to\mathbf{C}$ï¼Œå°†ä¸€ä¸ªèŒƒç•´æ˜ å°„åˆ°å®ƒæœ¬èº«</p>
<h3 id="å‡½å­å…¬ç†"><a href="#å‡½å­å…¬ç†" class="headerlink" title="å‡½å­å…¬ç†"></a>å‡½å­å…¬ç†</h3><p>å‡½å­$F : \mathbf{C}\to\mathbf{D}$ä¹Ÿéœ€è¦æ»¡è¶³ä¸¤ä¸ªå…¬ç†ï¼š</p>
<ol>
<li>å¯¹äºä»»æ„å¯¹è±¡$X\in\mathbf{C}$ï¼Œæ’æœ‰$F(\mathrm{id}_X)=\mathrm{id}_{F(X)}$</li>
<li>å¯¹äºæ€å°„$f : Y\to Z$ã€$g : X\to Y$ï¼Œæ’æœ‰$F(f\circ g) = F(f)\circ F(g)$</li>
</ol>
<h3 id="mathbf-Hask-èŒƒç•´ä¸Šçš„å‡½å­"><a href="#mathbf-Hask-èŒƒç•´ä¸Šçš„å‡½å­" class="headerlink" title="$\mathbf{Hask}$èŒƒç•´ä¸Šçš„å‡½å­"></a>$\mathbf{Hask}$èŒƒç•´ä¸Šçš„å‡½å­</h3><p>Haskellä¸­çš„Functorå®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Functor</span> (<span class="title">f</span> :: * -&gt; *) <span class="keyword">where</span></span> </span><br><span class="line">    fmap :: (a -&gt; b) -&gt; f a -&gt; f b</span><br></pre></td></tr></table></figure>
<p>å¯¹äºHaskellä¸­çš„Functorï¼Œå®ƒå®é™…ä¸Šæ˜¯ä»$\mathbf{Hask}$èŒƒç•´ï¼ˆtypesï¼‰åˆ°å®ƒå­èŒƒç•´çš„å˜æ¢ã€‚æ¯”å¦‚åˆ—è¡¨å‡½å­$\mathtt{[]} : \mathbf{Hask}\to\mathbf{Lst}$ï¼ˆå…¶ä¸­$\mathbf{Lst}$æ˜¯æ‰€æœ‰Haskellä¸­åˆ—è¡¨ç±»å‹æ„æˆçš„èŒƒç•´ï¼‰</p>
<p>å®ƒä¹Ÿè¾¾æˆäº†èŒƒç•´è®ºä¸­å¯¹äºå‡½å­çš„è¦æ±‚ã€‚å‡½å­éœ€è¦è¿›è¡Œä¸¤ä¸ªæ“ä½œï¼šå°†ä¸€ä¸ªèŒƒç•´ä¸­çš„å¯¹è±¡æ˜ å°„åˆ°å¦ä¸€ä¸ªèŒƒç•´ä¸­ã€å°†ä¸€ä¸ªèŒƒç•´ä¸­çš„æ€å°„æ˜ å°„åˆ°å¦ä¸€ä¸ªèŒƒç•´ä¸­ã€‚ä»¥Maybeä¸ºä¾‹ï¼Œå®ƒå®ç°äº†å‡½å­çš„è¦æ±‚ï¼š</p>
<ol>
<li>Maybeæ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œä»–å¯ä»¥å°†ä»»æ„ç±»å‹ T å˜æˆæ–°ç±»å‹ Maybe Tï¼Œç›¸å½“äºä»$\mathbf{Hask}$èŒƒç•´çš„å¯¹è±¡å˜æˆäº†$\mathbf{Maybe}$èŒƒç•´çš„å¯¹è±¡ </li>
<li>fmapå‡½æ•°æ¥æ”¶ä¸€ä¸ª a -&gt; b ç±»å‹çš„å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª Maybe a -&gt; Maybe b ç±»å‹çš„å‡½æ•°ï¼Œç›¸å½“äºå°†$\mathbf{Hask}$èŒƒç•´ä¸­çš„æ€å°„$f : A\to B$æ˜ å°„æˆäº†$\mathbf{Maybe}$èŒƒç•´ä¸­çš„æ€å°„$\mathbf{Maybe}(f) : \mathbf{Maybe}(A)\to\mathbf{Maybe}(B)$</li>
</ol>
<p><strong>æ³¨æ„</strong>ï¼šæ—¶åˆ»è®°ä½è¿™é‡Œç ”ç©¶çš„æ˜¯$\mathbf{Hask}$èŒƒç•´å’Œå®ƒçš„å­èŒƒç•´ï¼Œå¯¹è±¡æ˜¯ç±»å‹è€Œä¸æ˜¯å€¼ï¼Œæ€å°„æ˜¯å‡½æ•°ä¹ŸæŒ‡çš„æ˜¯ä»ç±»å‹åˆ°ç±»å‹</p>
<p>åŒæ—¶ï¼ŒHaskellä¸­çš„Functorä¹Ÿæ»¡è¶³å‡½å­å…¬ç†ï¼š</p>
<ol>
<li>fmap id = id å³ fmap (id :: A -&gt; A) = (id :: f A -&gt; f A)</li>
<li>fmap (f . g) = fmap f . fmap g</li>
</ol>
<h2 id="å•å­ï¼ˆMonadsï¼‰"><a href="#å•å­ï¼ˆMonadsï¼‰" class="headerlink" title="å•å­ï¼ˆMonadsï¼‰"></a>å•å­ï¼ˆMonadsï¼‰</h2><blockquote>
<p>ä¸€ä¸ªå•å­è¯´ç™½äº†ä¸è¿‡å°±æ˜¯è‡ªå‡½å­èŒƒç•´ä¸Šçš„ä¸€ä¸ªå¹ºåŠç¾¤è€Œå·² _(:Ğ·ã€âˆ )_</p>
</blockquote>
<p>è‡ªå‡½å­åœ¨å‰é¢è¯´åˆ°è¿‡æ˜¯ä»ä¸€ä¸ªèŒƒç•´åˆ°è‡ªèº«çš„ä¸€ä¸ªå‡½å­ï¼Œå¦‚èŒƒç•´$\mathbf{C}$ä¸Šçš„è‡ªå‡½å­æ˜¯$F : \mathbf{C}\to\mathbf{C}$ã€‚è‡ªå‡½å­èŒƒç•´å°±æ˜¯å¯¹è±¡éƒ½æ˜¯è‡ªå‡½å­çš„èŒƒç•´ã€‚å¹ºåŠç¾¤å’ŒHaskellä¸­å­¦åˆ°çš„Monoidç±»å‹ç±»ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªæœ‰å¯ç»“åˆäºŒå…ƒè¿ç®—å’Œå•ä½å…ƒçš„ä»£æ•°ç»“æ„ã€‚å› æ­¤å•å­å°±æ˜¯ä¸€ä¸ªè‡ªå‡½å­ï¼Œè€Œä¸”å®ƒæœ‰å¯ç»“åˆäºŒå…ƒè¿ç®—ï¼ˆHaskellä¸­<code>&gt;=&gt;</code>ï¼‰å’Œå•ä½å…ƒï¼ˆHaskellä¸­<code>return</code>ï¼‰ã€‚</p>
<p>ä¸€ä¸ªå•å­$M : \mathbf{C}\to\mathbf{C}$è¿˜åŒ…å«ä¸¤ä¸ªæ€å°„ï¼ˆå¯¹äºèŒƒç•´$\mathbf{C}$ä¸­çš„æ‰€æœ‰å¯¹è±¡$X$ï¼‰ï¼š</p>
<ol>
<li>$\mathrm{unit}_X^M : X\to M(X)$</li>
<li>$\mathrm{join}_X^M : M(M(X))\to M(X)$</li>
</ol>
<p>ï¼ˆå½“å¼å­ä¸­çš„å•å­æ˜æ˜¾æ˜¯$M$æ—¶ï¼Œå¯ä»¥çœç•¥ä¸Šæ ‡${}^M$ï¼‰</p>
<p>Haskellä¸­Monadçš„å®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Functor</span> m =&gt; <span class="type">Monad</span> m <span class="keyword">where</span></span> </span><br><span class="line">    return :: a -&gt; m a </span><br><span class="line">    (&gt;&gt;=)  :: m a -&gt; (a -&gt; m b) -&gt; m b</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­å¾ˆæ˜¾ç„¶å¤šæ€å‡½æ•°<code>return</code>å¯¹åº”äº†å®šä¹‰ä¸­çš„$\mathrm{unit}$ï¼Œä½†æ˜¯<code>&gt;&gt;=</code>å’Œ$mathrm{join}$çš„å¯¹åº”å…³ç³»å¹¶ä¸æ˜æ˜¾ã€‚å› æ­¤Haskellä¸­æœ‰ä¸€ä¸ªå·¥å…·å‡½æ•°<code>join</code>ï¼Œå®ƒçš„æ•ˆæœå°±æ˜¯å®šä¹‰ä¸­çš„$\mathrm{join}$ï¼Œè€Œä¸”å®ƒå¯ä»¥å’Œ<code>&gt;&gt;=</code>äº’ç›¸å®šä¹‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">join</span> :: <span class="type">Monad</span> m =&gt; m (m a) -&gt; m a</span><br><span class="line"><span class="title">join</span> x = x &gt;&gt;= id</span><br><span class="line"></span><br><span class="line">(&gt;&gt;=) :: m a -&gt; (a -&gt; m b) -&gt; m b </span><br><span class="line"><span class="title">x</span> &gt;&gt;= f = join $ fmap f x</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥Haskellä¸­ä¸ºMonadè¦æ±‚å®šä¹‰<code>&gt;&gt;=</code>å°±ç›¸å½“äºå®šä¹‰äº†$\mathrm{join}$</p>
<p>ä¾‹å¦‚ï¼Œå¹‚é›†å‡½å­$P : \mathbf{Set}\to\mathbf{Set}$ä¹Ÿæ˜¯ä¸€ä¸ªå•å­ï¼Œå¯ä»¥ä¸ºå®ƒå®šä¹‰$\mathrm{unit}$å’Œ$\mathrm{join}$ä¸¤ä¸ªæ€å°„ã€‚Haskellä¸­çš„åˆ—è¡¨ä¹Ÿå¯ä»¥è¿‘ä¼¼çœ‹ä½œå¹‚é›†å‡½å­ã€‚</p>
<p>&emsp;æ€å°„/å‡½æ•°çš„ç±»å‹ï¼š</p>
<table>
<thead>
<tr>
<th align="center">å¹‚é›†å‡½å­</th>
<th align="center">Haskellä¸­åˆ—è¡¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ä¸€ä¸ªé›†åˆ$S$å’Œä¸€ä¸ªæ€å°„$f : A\to B$</td>
<td align="center">ä¸€ä¸ªç±»å‹ T å’Œä¸€ä¸ªå‡½æ•° f :: A -&gt; B</td>
</tr>
<tr>
<td align="center">$P(f) : \mathcal{P}(A)\to\mathcal{P}(B)$</td>
<td align="center">fmap f :: [A] -&gt; [B]</td>
</tr>
<tr>
<td align="center">$\mathrm{unit}_S : S\to\mathcal{P}(S)$</td>
<td align="center">return :: T -&gt; [T]</td>
</tr>
<tr>
<td align="center">$\mathrm{join}_S : \mathcal{P}(\mathcal{P}(S))\to\mathcal{P}(S)$</td>
<td align="center">join :: [[T]] -&gt; [T]</td>
</tr>
</tbody></table>
<p>&emsp;æ€å°„/å‡½æ•°çš„å®šä¹‰ï¼š</p>
<table>
<thead>
<tr>
<th align="center">å¹‚é›†å‡½å­</th>
<th align="center">Haskellä¸­åˆ—è¡¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$(\mathcal{P}(f))(S) = \{f(a):a\in S\}$</td>
<td align="center">fmap f xs = [ f a | a &lt;- xs ]</td>
</tr>
<tr>
<td align="center">$\mathrm{unit}_S(x) = \{x\}$</td>
<td align="center">return x = [x]</td>
</tr>
<tr>
<td align="center">$\mathrm{join}_S(L) = \bigcup L$</td>
<td align="center">join xs = concat xs</td>
</tr>
</tbody></table>
<h3 id="å•å­å…¬ç†"><a href="#å•å­å…¬ç†" class="headerlink" title="å•å­å…¬ç†"></a>å•å­å…¬ç†</h3><p>ç»™å®šä¸€ä¸ªå•å­$M : \mathbf{C}\to\mathbf{C}$ï¼Œå’Œä¸€ä¸ªæ€å°„$f : A\to B$ï¼ˆå…¶ä¸­$A,B\in \mathbf{C}$ï¼‰ï¼Œé‚£ä¹ˆæ»¡è¶³ä¸‹é¢å››æ¡å®šå¾‹ï¼š</p>
<ol>
<li>$\mathrm{join}\circ M(\mathrm{join})=\mathrm{join}\circ\mathrm{join}$</li>
<li>$\mathrm{join}\circ M(\mathrm{unit})=\mathrm{join}\circ\mathrm{unit}=\mathrm{id}$</li>
<li>$\mathrm{unit}\circ f = M(f)\circ\mathrm{unit}$</li>
<li>$\mathrm{join}\circ M(M(f)) = M(f)\circ\mathrm{join}$</li>
</ol>
<p>ä¹Ÿå¯ä»¥å¾ˆè‡ªç„¶åœ°å°†å…¶è½¬åŒ–ä¸ºHaskellä¸­çš„è¡¨è¿°ï¼š</p>
<ol>
<li>join . fmap join <code>=</code> join . join </li>
<li>join . fmap return <code>=</code> join . return <code>=</code> id </li>
<li>return . f <code>=</code> fmap f . return </li>
<li>join . fmap (fmap f) <code>=</code> fmap f . join</li>
</ol>
<p>åœ¨Haskellä¸­ï¼Œä½¿ç”¨<code>&gt;&gt;=</code>ä¹Ÿæœ‰ä¸‰ä¸ªå®šå¾‹å’Œè¿™å››ä¸ªå®šå¾‹æ˜¯ç­‰ä»·çš„ï¼š</p>
<ol>
<li>return x &gt;&gt;= f <code>=</code> f x <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  return x &gt;&gt;= f </span><br><span class="line">= join (fmap f (return x)) = join (fmap f . return $ x)</span><br><span class="line">= join (return (f x)) = join (return . f $ x)</span><br><span class="line">= join . return $ (f x)</span><br><span class="line">= id (f x)</span><br><span class="line">= f x</span><br></pre></td></tr></table></figure></li>
<li>m &gt;&gt;= return <code>=</code> m<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  m &gt;&gt;= return </span><br><span class="line">= join (fmap return m) = join . fmap return $ m </span><br><span class="line">= id m</span><br><span class="line">= m </span><br></pre></td></tr></table></figure></li>
<li>(m &gt;&gt;= f) &gt;&gt;= g <code>=</code> m &gt;&gt;= (\x -&gt; f x &gt;&gt;= g)<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  (m &gt;&gt;= f) &gt;&gt;= g </span><br><span class="line">= (join (fmap f m)) &gt;&gt;= g = join (fmap g (join (fmap f m)))</span><br><span class="line">= join . fmap g . join $ fmap f m </span><br><span class="line">= join . join . fmap (fmap g) $ fmap f m </span><br><span class="line">= join . join . fmap (fmap g) . fmap f $ m </span><br><span class="line">= join . join . fmap (fmap g . f) $ m </span><br><span class="line">= join . fmap join . fmap (fmap g . f) $ m </span><br><span class="line">= join . fmap (join . (fmap g . f)) $ m </span><br><span class="line">= join . fmap (\x -&gt; join (fmap g (f x))) $ m </span><br><span class="line">= join . fmap (\x -&gt; f x &gt;&gt;= g) $ m </span><br><span class="line">= join (fmap (\x -&gt; f x &gt;&gt;= g) m)</span><br><span class="line">= m &gt;&gt;= (\x -&gt; f x &gt;&gt;= g)</span><br></pre></td></tr></table></figure></li>
</ol>
<p>ï¼ˆèŒƒç•´è®ºå°±å…ˆç®€å•çœ‹è¿™äº›ï¼Œåªæ˜¯ä¸ºäº†æ›´å¥½ç†è§£Haskellä¸­æ¦‚å¿µè€Œå·²ï¼‰</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://en.wikibooks.org/wiki/Haskell/Category_theory">Haskell/Category theory - wikibooks</a></li>
<li><a href="https://en.wikipedia.org/wiki/Category_theory">Category theory - wikipedia</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E8%8C%83%E7%95%B4%E8%AE%BA">èŒƒç•´è®º - ç»´åŸºç™¾ç§‘</a></li>
<li><a href="https://en.wikipedia.org/wiki/Monad_(category_theory)">Monad (category theory) - wikipedia</a></li>
<li><a href="https://en.wikipedia.org/wiki/Functor">Functor - wikipedia</a></li>
</ul>
<hr>
<div style="text-align: center;">

<p style="font-size: 1.3rem; font-weight: bold;">ç›®å½•</p>

<p>#0&nbsp;|&nbsp;<a href="/p/b3ca5c18.html">æ€»ç« </a>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<br>#1&nbsp;|&nbsp;<a href="/p/d63b5b5f.html">åŸºç¡€è¯­æ³•ä¸å‡½æ•°</a>&emsp;&emsp;&emsp;<br>#2&nbsp;|&nbsp;<a href="/p/53e482b7.html">é«˜é˜¶å‡½æ•°ä¸æ¨¡å—</a>&emsp;&emsp;&emsp;<br>#3&nbsp;|&nbsp;<a href="/p/369b7e08.html">ç±»å‹ä¸ç±»å‹ç±»</a>&emsp;&emsp;&emsp;&emsp;<br>#4&nbsp;|&nbsp;<a href="/p/a5bbe48a.html">è¾“å…¥è¾“å‡ºä¸æ–‡ä»¶</a>&emsp;&emsp;&emsp;<br>#5&nbsp;|&nbsp;<a href="/p/290ecb74.html">å‡½å­ã€åº”ç”¨å‡½å­ä¸å•å­</a><br>#6&nbsp;|&nbsp;<a href="/p/d4bb2633.html">åŠç¾¤ä¸å¹ºåŠç¾¤</a>&emsp;&emsp;&emsp;&emsp;<br>#7&nbsp;|&nbsp;<a href="/p/68ef8146.html">ä¸€äº›å…¶å®ƒç±»å‹ç±»</a>&emsp;&emsp;&emsp;<br>#A&nbsp;|&nbsp;<a href="/p/96c32eae.html">Haskellä¸èŒƒç•´è®º</a>&emsp;&nbsp;&thinsp;</p>
</div>

]]></content>
      <tags>
        <tag>Haskell</tag>
        <tag>ç¬”è®°</tag>
        <tag>èŒƒç•´è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLearn Haskellã€#6 åŠç¾¤ä¸å¹ºåŠç¾¤</title>
    <url>/p/d4bb2633.html</url>
    <content><![CDATA[<div style="display: flex; justify-content: space-between;">

<p><a href="/p/290ecb74.html">&lt; #5</a></p>
<p><a href="/p/68ef8146.html">#7 &gt;</a></p>
</div>


<h2 id="Semigroup"><a href="#Semigroup" class="headerlink" title="Semigroup"></a>Semigroup</h2><p>åŠç¾¤ï¼ˆsemigroupï¼‰æ˜¯ä¸€ä¸ªé›†åˆ$S$ï¼Œå®ƒéœ€è¦æŒ‡å®šä¸€ä¸ªäºŒå…ƒè¿ç®—ç¬¦$\oplus$ï¼Œå¹¶ä¸”æ»¡è¶³</p>
<p>$$<br>a\oplus b \in S\quad a, b\in S<br>$$</p>
<p>ä»¥åŠç»“åˆï¼ˆassociativeï¼‰å¾‹ï¼š</p>
<p>$$<br>(a\oplus b)\oplus c = a\oplus (b\oplus c)<br>$$</p>
<p>è¿™ä¸ªäºŒå…ƒè¿ç®—ç¬¦åœ¨Haskellçš„Semigroupä¸­è¢«å®šä¹‰ä¸º<code>&lt;&gt;</code>å‡½æ•°ï¼š</p>
<span id="more"></span>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Semigroup</span> a <span class="keyword">where</span></span></span><br><span class="line">    (&lt;&gt;) :: a -&gt; a -&gt; a </span><br><span class="line"></span><br><span class="line">    sconcat :: <span class="type">NonEmpty</span> a -&gt; a </span><br><span class="line">    sconcat (a :| <span class="keyword">as</span>) = go a <span class="keyword">as</span> <span class="keyword">where</span> </span><br><span class="line">        go b (c:cs) = b &lt;&gt; go c cs </span><br><span class="line">        go b []     = b</span><br><span class="line">    </span><br><span class="line">    stimes :: <span class="type">Integarl</span> b =&gt; b -&gt; a -&gt; a </span><br><span class="line">    stimes = ...</span><br></pre></td></tr></table></figure>
<p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰<code>sconcat</code>å’Œ<code>stimes</code>å‡½æ•°ï¼Œéƒ½ç»™å‡ºäº†é»˜è®¤å®ç°ã€‚å¯¹äºåˆ—è¡¨ï¼Œ&lt;&gt;ç›¸å½“äº(++)ï¼Œstimesç›¸å½“äºconcat . replicateï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>] &lt;&gt; [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; sconcat $ fromList [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; stimes <span class="number">3</span> [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br></pre></td></tr></table></figure>

<h3 id="Semigroup-Law"><a href="#Semigroup-Law" class="headerlink" title="Semigroup Law"></a>Semigroup Law</h3><ul>
<li>(x &lt;&gt; y) &lt;&gt; z <code>=</code> x &lt;&gt; (y &lt;&gt; z)</li>
</ul>
<h3 id="è¡¥ï¼šNonEmpty"><a href="#è¡¥ï¼šNonEmpty" class="headerlink" title="è¡¥ï¼šNonEmpty"></a>è¡¥ï¼šNonEmpty</h3><p>NonEmptyè¡¨ç¤ºéç©ºåˆ—è¡¨ï¼Œå®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">NonEmpty</span> a = a :| [a] <span class="keyword">deriving</span> (<span class="type">Eq</span>, <span class="type">Ord</span>)</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ä¸€ä¸ªå…ƒç´ å’Œä¸€ä¸ªåˆ—è¡¨ç”¨<code>:|</code>è¿æ¥å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªNonEmptyç±»å‹çš„åˆ—è¡¨</p>
<p><code>Data.List.NonEmpty</code>æ¨¡å—ä¸­å®ç°äº†å¾ˆå¤šæ™®é€šåˆ—è¡¨æœ‰çš„å‡½æ•°ï¼Œéœ€è¦qualified importåè°ƒç”¨ï¼Œä½¿ç”¨fromListã€toListå‡½æ•°å¯ä»¥åœ¨æ™®é€šåˆ—è¡¨å’Œéç©ºåˆ—è¡¨ä¹‹é—´è½¬æ¢</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="keyword">import</span> <span class="keyword">qualified</span> Data.List.NonEmpty <span class="keyword">as</span> NE</span><br><span class="line"><span class="title">ghci</span>&gt; arr = <span class="type">NE</span>.fromList [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; arr</span><br><span class="line"><span class="number">1</span> :| [<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">NE</span>.head arr </span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">NE</span>.tail arr </span><br><span class="line">[<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<h2 id="Monoid"><a href="#Monoid" class="headerlink" title="Monoid"></a>Monoid</h2><p>å¹ºåŠç¾¤ï¼ˆMonoidï¼‰æ˜¯ä¸€ä¸ªæœ‰å•ä½å…ƒç´ $e$çš„åŠç¾¤ï¼Œå³$e$æ»¡è¶³ï¼š</p>
<p>$$<br>e\oplus x = x\oplus e = x<br>$$</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Semigroup</span> a =&gt; <span class="type">Monoid</span> a <span class="keyword">where</span></span> </span><br><span class="line">    mempty  :: a </span><br><span class="line">    </span><br><span class="line">    mappend :: a -&gt; a -&gt; a </span><br><span class="line">    mappend = (&lt;&gt;)</span><br><span class="line"></span><br><span class="line">    mconcat :: [a] -&gt; a </span><br><span class="line">    mconcat = foldr mappend mempty </span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºMonoidè¦æ±‚äº†ä¸‰ä¸ªå‡½æ•°ï¼Œå…¶ä¸­æœ€å°‘åªéœ€è¦<code>mempty</code>ï¼Œå®ƒç›´æ¥è¿”å›ä¸€ä¸ªå€¼ï¼Œè¡¨ç¤ºå•ä½å…ƒç´ ã€‚<code>mappend</code>å³Semigroupä¸­çš„&lt;&gt;è¿ç®—ç¬¦ï¼Œ<code>mconcat</code>ä¹Ÿæä¾›äº†é»˜è®¤å®ç°</p>
<h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><h4 id="a"><a href="#a" class="headerlink" title="[a]"></a>[a]</h4><p>å› ä¸ºMonoidçš„å®ä¾‹æ˜¯ä¸€ä¸ªå…·ä½“ç±»å‹ï¼Œè€Œä¸æ˜¯åƒFunctorç­‰ä¸€æ ·ç­‰ç±»å‹æ„é€ å™¨ï¼Œæ‰€ä»¥[]å¹¶ä¸æ˜¯Monoidçš„å®ä¾‹ï¼Œä½†æ˜¯å…·ä½“ç±»å‹[a]æ˜¯ä¸€ä¸ªå¹ºåŠç¾¤ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> [a] <span class="keyword">where</span></span> </span><br><span class="line">    (&lt;&gt;) = (++)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> [a] <span class="keyword">where</span></span> </span><br><span class="line">    mempty = [] </span><br><span class="line">    mconcat xss = [x | xs &lt;- xss, x &lt;- xs]</span><br></pre></td></tr></table></figure>
<p>åˆ—è¡¨çš„å•ä½å…ƒç´ (mempty)å°±æ˜¯ç©ºåˆ—è¡¨[]ï¼Œè¿ç®—ç¬¦å°±æ˜¯åˆå¹¶åˆ—è¡¨(++)ï¼Œmconcatä¹Ÿç”¨åˆ—è¡¨æ¨å¯¼é‡æ–°å®ç°æé«˜æ•ˆç‡</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; mempty :: [<span class="type">Int</span>] </span><br><span class="line">[]</span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>] &lt;&gt; [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>] `mappend` [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; mconcat [[<span class="number">1</span>,<span class="number">2</span>], [<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br></pre></td></tr></table></figure>

<h4 id="Ordering"><a href="#Ordering" class="headerlink" title="Ordering"></a>Ordering</h4><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> <span class="type">Ordering</span> <span class="keyword">where</span></span></span><br><span class="line">    <span class="type">LT</span> &lt;&gt; _ = <span class="type">LT</span></span><br><span class="line">    <span class="type">EQ</span> &lt;&gt; y = y</span><br><span class="line">    <span class="type">GT</span> &lt;&gt; _ = <span class="type">GT</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> <span class="type">Ordering</span> <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">EQ</span></span><br></pre></td></tr></table></figure>
<p>ä¸»è¦å¯ä»¥ç”¨äºæ¯”è¾ƒå­—å…¸åºï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; mconcat (zipWith compare <span class="string">&quot;abcd&quot;</span> <span class="string">&quot;acbd&quot;</span>)</span><br><span class="line"><span class="type">LT</span></span><br></pre></td></tr></table></figure>

<h4 id="Sum-amp-Product"><a href="#Sum-amp-Product" class="headerlink" title="Sum &amp; Product"></a>Sum &amp; Product</h4><p>å¯¹äºæ•°å­—ï¼ŒåŠ æ³•å’Œä¹˜æ³•éƒ½æ»¡è¶³ç»“åˆå¾‹ï¼Œæ‰€ä»¥å¯¹äºNumï¼Œæœ‰ä¸¤ç§å®ç°Monoidçš„æ–¹å¼ï¼Œä½†æ˜¯ä¸èƒ½ä¸ºåŒä¸€ç±»å‹è®¾ç½®ä¸¤ç§å®ä¾‹æ–¹å¼ï¼Œæ‰€ä»¥<code>Data.Monoid</code>ä¸­æä¾›äº†ä¸¤ä¸ªåŒ…è£…å™¨â€”â€”â€”â€”Sumå’ŒProductï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Sum</span> a = <span class="type">Sum</span> &#123;<span class="title">getSum</span> :: <span class="title">a</span>&#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Product</span> a = <span class="type">Product</span> &#123;<span class="title">getProduct</span> :: <span class="title">a</span>&#125; <span class="keyword">deriving</span> (...)</span></span><br></pre></td></tr></table></figure>
<p>å®ƒä»¬ä½¿ç”¨Sumæˆ–Productæ¥åŒ…è£…èµ·ä¸€ä¸ªæ•°å­—ï¼Œå¯ä»¥é€šè¿‡getSumæˆ–getProductæ¥è·å–å…¶ä¸­çš„å€¼</p>
<p>å¯¹äºåŠ æ³•ï¼ŒäºŒå…ƒæ“ä½œä¸º(+)ï¼Œå•ä½å…ƒç´ ä¸º0ï¼›å¯¹äºä¹˜æ³•ï¼ŒäºŒå…ƒæ“ä½œä¸º(*)ï¼Œå•ä½å…ƒç´ ä¸º1:</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Num</span> a =&gt; <span class="type">Semigroup</span> (<span class="type">Sum</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    (&lt;&gt;) = coerce ((+) :: a -&gt; a -&gt; a)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Num</span> a =&gt; <span class="type">Monoid</span> (<span class="type">Sum</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">Sum</span> <span class="number">0</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Num</span> a =&gt; <span class="type">Semigroup</span> (<span class="type">Product</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    (&lt;&gt;) = coerce ((*) :: a -&gt; a -&gt; a)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Num</span> a =&gt; <span class="type">Monoid</span> (<span class="type">Product</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">Product</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Sum</span> <span class="number">5</span> &lt;&gt; <span class="type">Sum</span> <span class="number">6</span> &lt;&gt; <span class="type">Sum</span> <span class="number">10</span></span><br><span class="line"><span class="type">Sum</span> &#123;getSum = <span class="number">21</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; getSum . mconcat . fmap <span class="type">Sum</span> $ [<span class="number">5</span>, <span class="number">6</span>, <span class="number">10</span>]</span><br><span class="line"><span class="number">21</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Product</span> <span class="number">5</span> &lt;&gt; <span class="type">Product</span> <span class="number">6</span> &lt;&gt; <span class="type">Product</span> <span class="number">10</span></span><br><span class="line"><span class="type">Product</span> &#123;getProduct = <span class="number">300</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; getProduct . mconcat . fmap <span class="type">Product</span> $ [<span class="number">5</span>, <span class="number">6</span>, <span class="number">10</span>]</span><br><span class="line"><span class="number">300</span></span><br></pre></td></tr></table></figure>

<h4 id="All-amp-Any"><a href="#All-amp-Any" class="headerlink" title="All &amp; Any"></a>All &amp; Any</h4><p>å’Œæ•°å­—ä¸€æ ·ï¼Œå¸ƒå°”å€¼ä¹Ÿæœ‰ä¸¤ç§å®ç°Monoidçš„æ–¹å¼ï¼Œå› æ­¤<code>Data.Monoid</code>æ¨¡å—ä¸­ä¹Ÿæä¾›äº†ä¸¤ä¸ªåŒ…è£…å™¨ï¼Œåˆ†åˆ«å®ç°äº†è¿™ä¸¤ç§Monoidï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">All</span> = <span class="type">All</span> &#123; <span class="title">getAll</span> :: <span class="type">Bool</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> <span class="type">All</span> <span class="keyword">where</span></span></span><br><span class="line">        (&lt;&gt;) = coerce (&amp;&amp;)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> <span class="type">All</span> <span class="keyword">where</span></span></span><br><span class="line">        mempty = <span class="type">All</span> <span class="type">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Any</span> = <span class="type">Any</span> &#123; <span class="title">getAny</span> :: <span class="type">Bool</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> <span class="type">Any</span> <span class="keyword">where</span></span></span><br><span class="line">        (&lt;&gt;) = coerce (||)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> <span class="type">Any</span> <span class="keyword">where</span></span></span><br><span class="line">        mempty = <span class="type">Any</span> <span class="type">False</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; getAll (<span class="type">All</span> <span class="type">True</span> &lt;&gt; mempty &lt;&gt; <span class="type">All</span> <span class="type">False</span>)</span><br><span class="line"><span class="type">False</span></span><br><span class="line"><span class="title">ghci</span>&gt; getAll (mconcat (map (\x -&gt; <span class="type">All</span> (even x)) [<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]))</span><br><span class="line"><span class="type">False</span></span><br><span class="line"><span class="title">ghci</span>&gt; getAny (<span class="type">Any</span> <span class="type">True</span> &lt;&gt; mempty &lt;&gt; <span class="type">Any</span> <span class="type">False</span>)</span><br><span class="line"><span class="type">True</span></span><br><span class="line"><span class="title">ghci</span>&gt; getAny (mconcat (map (\x -&gt; <span class="type">Any</span> (even x)) [<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]))</span><br><span class="line"><span class="type">True</span></span><br></pre></td></tr></table></figure>

<h4 id="Monoid-a-gt-Maybe-a"><a href="#Monoid-a-gt-Maybe-a" class="headerlink" title="Monoid a =&gt; Maybe a"></a>Monoid a =&gt; Maybe a</h4><p>å¦‚æœaæ˜¯ä¸€ä¸ª(å¹º)åŠç¾¤ï¼Œé‚£ä¹ˆMaybe aä¹Ÿæ˜¯ä¸€ä¸ªå¹ºåŠç¾¤ï¼Œå•ä½å…ƒå°±æ˜¯Nothingï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> a =&gt; <span class="type">Semigroup</span> (<span class="type">Maybe</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    <span class="type">Nothing</span> &lt;&gt; b       = b</span><br><span class="line">    a       &lt;&gt; <span class="type">Nothing</span> = a</span><br><span class="line">    <span class="type">Just</span> a  &lt;&gt; <span class="type">Just</span> b  = <span class="type">Just</span> (a &lt;&gt; b)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> a =&gt; <span class="type">Monoid</span> (<span class="type">Maybe</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> &lt;&gt; <span class="type">Just</span> <span class="string">&quot;andy&quot;</span></span><br><span class="line"><span class="type">Just</span> <span class="string">&quot;andy&quot;</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="type">LT</span> &lt;&gt; <span class="type">Nothing</span></span><br><span class="line"><span class="type">Just</span> <span class="type">LT</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> (<span class="type">Sum</span> <span class="number">3</span>) &lt;&gt; <span class="type">Just</span> (<span class="type">Sum</span> <span class="number">4</span>) </span><br><span class="line"><span class="type">Just</span> (<span class="type">Sum</span> &#123;getSum = <span class="number">7</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="First-amp-Last"><a href="#First-amp-Last" class="headerlink" title="First &amp; Last"></a>First &amp; Last</h4><p>å¯¹äºMaybeä¹Ÿæœ‰ä¸¤ç§å®ç°Monoidçš„æ–¹æ³•ï¼Œå³&lt;&gt;æ“ä½œæ¯æ¬¡æ’å–å·¦è¾¹å’Œæ¯æ¬¡æ’å–å³è¾¹ï¼ˆåœ¨æ²¡æœ‰Nothingçš„æƒ…å†µä¸‹ï¼‰ï¼Œæ‰€ä»¥<code>Data.Monoid</code>æ¨¡å—ä¸­ä¹Ÿæä¾›äº†ä¸¤ä¸ªæ–°çš„åŒ…è£…å™¨ï¼šFirstå’ŒLastï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">First</span> a = <span class="type">First</span> &#123; <span class="title">getFirst</span> :: <span class="type">Maybe</span> <span class="title">a</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> (<span class="type">First</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    <span class="type">First</span> <span class="type">Nothing</span> &lt;&gt; b = b</span><br><span class="line">    a             &lt;&gt; _ = a</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> (<span class="type">First</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">First</span> <span class="type">Nothing</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Last</span> a = <span class="type">Last</span> &#123; <span class="title">getLast</span> :: <span class="type">Maybe</span> <span class="title">a</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Semigroup</span> (<span class="type">Last</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    a &lt;&gt; <span class="type">Last</span> <span class="type">Nothing</span> = a</span><br><span class="line">    _ &lt;&gt; b            = b</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monoid</span> (<span class="type">Last</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = <span class="type">Last</span> <span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; getFirst (<span class="type">First</span> (<span class="type">Just</span> <span class="string">&quot;hello&quot;</span>) &lt;&gt; <span class="type">First</span> <span class="type">Nothing</span> &lt;&gt; <span class="type">First</span> (<span class="type">Just</span> <span class="string">&quot;world&quot;</span>))</span><br><span class="line"><span class="type">Just</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="title">ghci</span>&gt; getLast (<span class="type">Last</span> (<span class="type">Just</span> <span class="string">&quot;hello&quot;</span>) &lt;&gt; <span class="type">Last</span> <span class="type">Nothing</span> &lt;&gt; <span class="type">Last</span> (<span class="type">Just</span> <span class="string">&quot;world&quot;</span>))</span><br><span class="line"><span class="type">Just</span> <span class="string">&quot;world&quot;</span></span><br><span class="line"><span class="title">ghci</span>&gt; getFirst . mconcat . map <span class="type">First</span> $ [<span class="type">Nothing</span>, <span class="type">Just</span> <span class="number">9</span>, <span class="type">Just</span> <span class="number">10</span>]  </span><br><span class="line"><span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="title">ghci</span>&gt; getLast . mconcat . map <span class="type">Last</span> $ [<span class="type">Nothing</span>, <span class="type">Just</span> <span class="number">9</span>, <span class="type">Just</span> <span class="number">10</span>]  </span><br><span class="line"><span class="type">Just</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>

<h4 id="Min-amp-Max"><a href="#Min-amp-Max" class="headerlink" title="Min &amp; Max"></a>Min &amp; Max</h4><p>å¯¹äºæœ‰ç•Œçš„ç±»å‹ï¼Œä¹Ÿæœ‰ä¸¤ç§å®ç°Monoidçš„æ–¹å¼ï¼Œæ¯æ¬¡äºŒå…ƒæ“ä½œéƒ½å–æœ€å°æˆ–æœ€å¤§ã€‚<code>Data.Semigroup</code>æ¨¡å—ä¸­æä¾›äº†ä¸¤ä¸ªåŒ…è£…å…¶å™¨ï¼šMinå’ŒMaxï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Min</span> a = <span class="type">Min</span> &#123; <span class="title">getMin</span> :: <span class="title">a</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Ord</span> a =&gt; <span class="type">Semigroup</span> (<span class="type">Min</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    (&lt;&gt;) = coerce (min :: a -&gt; a -&gt; a)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> (<span class="type">Ord</span> <span class="title">a</span>, <span class="type">Bounded</span> <span class="title">a</span>) =&gt; <span class="type">Monoid</span> (<span class="type">Min</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = maxBound</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">Max</span> a = <span class="type">Max</span> &#123; <span class="title">getMax</span> :: <span class="title">a</span> &#125; <span class="keyword">deriving</span> (...)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Ord</span> a =&gt; <span class="type">Semigroup</span> (<span class="type">Max</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    (&lt;&gt;) = coerce (max :: a -&gt; a -&gt; a)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> (<span class="type">Ord</span> <span class="title">a</span>, <span class="type">Bounded</span> <span class="title">a</span>) =&gt; <span class="type">Monoid</span> (<span class="type">Max</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    mempty = minBound</span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Min</span> <span class="number">3</span> &lt;&gt; <span class="type">Min</span> <span class="number">5</span></span><br><span class="line"><span class="type">Min</span> &#123;getMin = <span class="number">3</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Max</span> <span class="number">3</span> &lt;&gt; <span class="type">Max</span> <span class="number">5</span></span><br><span class="line"><span class="type">Max</span> &#123;getMax = <span class="number">5</span>&#125;</span><br><span class="line"><span class="title">ghci</span>&gt; getMin . mconcat . map <span class="type">Min</span> $ [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] :: <span class="type">Int</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="title">ghci</span>&gt; getMax . mconcat . map <span class="type">Max</span> $ [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] :: <span class="type">Int</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<h4 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h4><p>å½“å…ƒç»„å†…çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å¹ºåŠç¾¤æ—¶ï¼Œæ•´ä¸ªå…ƒç»„ä¹Ÿæ˜¯ä¸€ä¸ªå¹ºåŠç¾¤ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> (<span class="type">Semigroup</span> <span class="title">a</span>, <span class="type">Semigroup</span> <span class="title">b</span>) =&gt; <span class="type">Semigroup</span> (<span class="title">a</span>, <span class="title">b</span>) <span class="keyword">where</span></span></span><br><span class="line">        (a,b) &lt;&gt; (a&#x27;,b&#x27;) = (a&lt;&gt;a&#x27;,b&lt;&gt;b&#x27;)</span><br><span class="line">        stimes n (a,b) = (stimes n a, stimes n b)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> (<span class="type">Monoid</span> <span class="title">a</span>, <span class="type">Monoid</span> <span class="title">b</span>) =&gt; <span class="type">Monoid</span> (<span class="title">a</span>,<span class="title">b</span>) <span class="keyword">where</span></span></span><br><span class="line">        mempty = (mempty, mempty)</span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; mconcat $ map (\x -&gt; (<span class="type">Min</span> x, <span class="type">Max</span> x)) [<span class="number">1.</span><span class="number">.10</span>] :: (<span class="type">Min</span> <span class="type">Int</span>, <span class="type">Max</span> <span class="type">Int</span>)</span><br><span class="line">(<span class="type">Min</span> &#123;getMin = <span class="number">1</span>&#125;,<span class="type">Max</span> &#123;getMax = <span class="number">10</span>&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="Monoid-Laws"><a href="#Monoid-Laws" class="headerlink" title="Monoid Laws"></a>Monoid Laws</h3><ul>
<li>mempty &lt;&gt; x <code>=</code> x</li>
<li>x &lt;&gt; mempty <code>=</code> x</li>
<li>(x &lt;&gt; y) &lt;&gt; z <code>=</code> x &lt;&gt; (y &lt;&gt; z)</li>
</ul>
<h2 id="Monoidal-classes"><a href="#Monoidal-classes" class="headerlink" title="Monoidal classes"></a>Monoidal classes</h2><p>Applicativeã€Monadã€Arrowéƒ½æœ‰æœ‰å¹ºåŠç¾¤æ€§è´¨çš„å­ç±»å‹ç±»ï¼Œåˆ†åˆ«æ˜¯Alternativeã€MonadPlusã€ArrowPlus</p>
<h3 id="Alternative"><a href="#Alternative" class="headerlink" title="Alternative"></a>Alternative</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Applicative</span> f =&gt; <span class="type">Alternative</span> f <span class="keyword">where</span></span></span><br><span class="line">    <span class="comment">-- | The identity of &#x27;&lt;|&gt;&#x27;</span></span><br><span class="line">    empty :: f a</span><br><span class="line">    <span class="comment">-- | An associative binary operation</span></span><br><span class="line">    (&lt;|&gt;) :: f a -&gt; f a -&gt; f a</span><br><span class="line"></span><br><span class="line">    some :: f a -&gt; f [a]</span><br><span class="line">    some v = (:) &lt;$&gt; v &lt;*&gt; many v</span><br><span class="line">    many :: f a -&gt; f [a]</span><br><span class="line">    many v = some v &lt;|&gt; pure []</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­emptyæ˜¯å¹ºåŠç¾¤ä¸­çš„å•ä½å…ƒç´ ï¼Œ&lt;|&gt;æ˜¯å¹ºåŠç¾¤ä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚someå’Œmanyæ˜¯ä¸¤ä¸ªå‡½æ•°ï¼ˆ<del>æ„ä¹‰è¿˜ä¸æ‡‚</del>ï¼‰</p>
<h4 id="Alternativeå®ä¾‹"><a href="#Alternativeå®ä¾‹" class="headerlink" title="Alternativeå®ä¾‹"></a>Alternativeå®ä¾‹</h4><h5 id><a href="#" class="headerlink" title="[]"></a>[]</h5><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Alternative</span> [] <span class="keyword">where</span></span></span><br><span class="line">    empty = []</span><br><span class="line">    (&lt;|&gt;) = (++)</span><br></pre></td></tr></table></figure>
<p>å’ŒMonoidä¸€æ ·ï¼Œå•ä½å…ƒç´ æ˜¯ç©ºåˆ—è¡¨ï¼ŒäºŒå…ƒè¿ç®—æ˜¯åˆ—è¡¨åˆå¹¶</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] &lt;|&gt; empty &lt;|&gt; [<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; some []</span><br><span class="line">[]</span><br><span class="line"><span class="title">ghci</span>&gt; many []</span><br><span class="line">[[]]</span><br></pre></td></tr></table></figure>
<h5 id="Maybe"><a href="#Maybe" class="headerlink" title="Maybe"></a>Maybe</h5><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Alternative</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    empty = <span class="type">Nothing</span></span><br><span class="line">    <span class="type">Nothing</span> &lt;|&gt; r = r</span><br><span class="line">    l       &lt;|&gt; _ = l</span><br></pre></td></tr></table></figure>
<p>Maybeä½œä¸ºAlternativeçš„å•ä½å…ƒç´ æ˜¯Nothingï¼ŒäºŒå…ƒè¿ç®—æ˜¯å§‹ç»ˆå–å·¦è¾¹ï¼ˆå½“å·¦è¾¹ä¸ä¸ºNothingæ—¶ï¼‰</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> &lt;|&gt; <span class="type">Just</span> <span class="number">1</span> &lt;|&gt; <span class="type">Just</span> <span class="number">2</span> </span><br><span class="line"><span class="type">Just</span> <span class="number">1</span> </span><br><span class="line"><span class="title">ghci</span>&gt; some <span class="type">Nothing</span></span><br><span class="line"><span class="type">Nothing</span> </span><br><span class="line"><span class="title">ghci</span>&gt; many <span class="type">Nothing</span> </span><br><span class="line"><span class="type">Just</span> []</span><br></pre></td></tr></table></figure>
<h5 id="ZipList"><a href="#ZipList" class="headerlink" title="ZipList"></a>ZipList</h5><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Alternative</span> <span class="type">ZipList</span> <span class="keyword">where</span></span></span><br><span class="line">   empty = <span class="type">ZipList</span> []</span><br><span class="line">   <span class="type">ZipList</span> xs &lt;|&gt; <span class="type">ZipList</span> ys = <span class="type">ZipList</span> (xs ++ drop (length xs) ys)</span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">&lt;&gt;getZipList $ <span class="type">ZipList</span> [<span class="number">1</span>,<span class="number">2</span>] &lt;|&gt; <span class="type">ZipList</span> [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">&lt;&gt;getZipList $ <span class="type">ZipList</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>] &lt;|&gt; <span class="type">ZipList</span> [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br></pre></td></tr></table></figure>

<h4 id="Alternative-Laws"><a href="#Alternative-Laws" class="headerlink" title="Alternative Laws"></a>Alternative Laws</h4><ul>
<li><code>Monoid laws</code>:  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">empty</span> &lt;|&gt; x = x </span><br><span class="line"><span class="title">x</span> &lt;|&gt; empty = x </span><br><span class="line">(x &lt;|&gt; y) &lt;|&gt; z = x &lt;|&gt; (y &lt;|&gt; z)</span><br></pre></td></tr></table></figure></li>
<li><code>Left zero law</code>ï¼šempty &lt;*&gt; f <code>=</code> empty<br>ä»¥ä¸Šçš„å®šå¾‹æ˜¯éƒ½æ»¡è¶³éƒ½ï¼Œä¸‹é¢çš„å®šå¾‹åªæœ‰éƒ¨åˆ†æ»¡è¶³ï¼š</li>
<li><code>Right zero law</code>ï¼šf &lt;*&gt; empty <code>=</code> empty ï¼ˆå¤§éƒ¨åˆ†åŒ…æ‹¬Maybeã€[]æ»¡è¶³ï¼ŒIOä¸æ»¡è¶³ï¼‰</li>
<li><code>Left distribution</code>ï¼š(a &lt;|&gt; b) &lt;*&gt; c <code>=</code> (a &lt;*&gt; c) &lt;|&gt; (b &lt;*&gt; c) ï¼ˆMaybeã€[]æ»¡è¶³ï¼ŒIOåŠå¤§éƒ¨åˆ†parsersä¸æ»¡è¶³ï¼‰</li>
<li><code>Right distribution</code>ï¼ša &lt;*&gt; (b &lt;|&gt; c) <code>=</code> (a &lt;*&gt; b) &lt;|&gt; (a &lt;*&gt; c) ï¼ˆå¤§éƒ¨åˆ†ä¸æ»¡è¶³ï¼Œä½†Maybeæ»¡è¶³ï¼‰</li>
<li><code>Left catch</code>ï¼š(pure a) &lt;|&gt; x = pure a ï¼ˆMaybeã€IOã€parsersæ»¡è¶³ï¼Œä½†[]ä¸æ»¡è¶³ï¼‰</li>
</ul>
<h4 id="å¸¸ç”¨å‡½æ•°"><a href="#å¸¸ç”¨å‡½æ•°" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h4><ul>
<li><code>asum</code> :: (Foldable t, Alternative f) =&gt; t (f a) -&gt; f aï¼Œç›¸å½“äºfoldr (&lt;|&gt;) emptyï¼š  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; asum [<span class="type">Nothing</span>, <span class="type">Just</span> <span class="number">5</span>, <span class="type">Just</span> <span class="number">3</span>]</span><br><span class="line"><span class="type">Just</span> <span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; asum [[<span class="number">2</span>],[<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>]]</span><br><span class="line">[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br></pre></td></tr></table></figure></li>
<li><code>guard</code> :: (Alternative f) =&gt; Bool -&gt; f ()ï¼š  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">guard</span> <span class="type">True</span>  = pure ()</span><br><span class="line"><span class="title">guard</span> <span class="type">False</span> = empty </span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="MonadPlus"><a href="#MonadPlus" class="headerlink" title="MonadPlus"></a>MonadPlus</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> (<span class="type">Alternative</span> <span class="title">m</span>, <span class="type">Monad</span> <span class="title">m</span>) =&gt; <span class="type">MonadPlus</span> m <span class="keyword">where</span></span></span><br><span class="line">   mzero :: m a</span><br><span class="line">   mzero = empty</span><br><span class="line"></span><br><span class="line">   mplus :: m a -&gt; m a -&gt; m a</span><br><span class="line">   mplus = (&lt;|&gt;)</span><br></pre></td></tr></table></figure>

<h4 id="MonadPluså®ä¾‹"><a href="#MonadPluså®ä¾‹" class="headerlink" title="MonadPluså®ä¾‹"></a>MonadPluså®ä¾‹</h4><p>[]ã€Maybeéƒ½æ˜¯MonadPlusçš„å®ä¾‹ï¼Œmzeroå’Œmpluséƒ½ç”±Alternativeå®ç°</p>
<h4 id="MonadPlus-Laws"><a href="#MonadPlus-Laws" class="headerlink" title="MonadPlus Laws"></a>MonadPlus Laws</h4><ul>
<li><code>Monoid laws</code></li>
<li><code>Left zero</code>ï¼šmzero &gt;&gt;= f <code>=</code> mzero</li>
<li><code>Right zero</code>ï¼šm &gt;&gt; mzero <code>=</code> mzero </li>
</ul>
<h4 id="å¸¸ç”¨å‡½æ•°-1"><a href="#å¸¸ç”¨å‡½æ•°-1" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h4><ul>
<li><code>msum</code> = asum </li>
<li><code>mfilter</code>ï¼š  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">mfilter</span> p ma = <span class="keyword">do</span></span><br><span class="line">    a &lt;- ma</span><br><span class="line">    <span class="keyword">if</span> p a <span class="keyword">then</span> return a <span class="keyword">else</span> mzero</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="ArrowPlus"><a href="#ArrowPlus" class="headerlink" title="ArrowPlus"></a>ArrowPlus</h3><p>ArrowZeroå’ŒArrowPlusåˆ†åˆ«ä¸ºArrowè®¾ç½®äº†Monoidä¸­çš„å•ä½å…ƒç´ å’ŒäºŒå…ƒè¿ç®—ç¬¦ï¼Œä½¿ä¹‹æˆä¸ºäº†ä¸€ä¸ªå¹ºåŠç¾¤ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Arrow</span> arr =&gt; <span class="type">ArrowZero</span> arr <span class="keyword">where</span></span></span><br><span class="line">    zeroArrow :: b `arr` c</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">ArrowZero</span> arr =&gt; <span class="type">ArrowPlus</span> arr <span class="keyword">where</span></span></span><br><span class="line">    (&lt;+&gt;) :: (b `arr` c) -&gt; (b `arr` c) -&gt; (b `arr` c)</span><br></pre></td></tr></table></figure>


<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://wiki.haskell.org/Typeclassopedia">Typeclassopedia - Haskell wiki</a></li>
<li><a href="https://blog.csdn.net/zwvista/article/details/54863519">Haskellè¯­è¨€å­¦ä¹ ç¬”è®°ï¼ˆ8ï¼‰Monoid - zwvista</a></li>
<li><a href="https://blog.csdn.net/zwvista/article/details/62238541">Haskellè¯­è¨€å­¦ä¹ ç¬”è®°ï¼ˆ16ï¼‰Alternative - zwvista</a></li>
</ul>
<hr>
<div style="text-align: center;">

<p style="font-size: 1.3rem; font-weight: bold;">ç›®å½•</p>

<p>#0&nbsp;|&nbsp;<a href="/p/b3ca5c18.html">æ€»ç« </a>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<br>#1&nbsp;|&nbsp;<a href="/p/d63b5b5f.html">åŸºç¡€è¯­æ³•ä¸å‡½æ•°</a>&emsp;&emsp;&emsp;<br>#2&nbsp;|&nbsp;<a href="/p/53e482b7.html">é«˜é˜¶å‡½æ•°ä¸æ¨¡å—</a>&emsp;&emsp;&emsp;<br>#3&nbsp;|&nbsp;<a href="/p/369b7e08.html">ç±»å‹ä¸ç±»å‹ç±»</a>&emsp;&emsp;&emsp;&emsp;<br>#4&nbsp;|&nbsp;<a href="/p/a5bbe48a.html">è¾“å…¥è¾“å‡ºä¸æ–‡ä»¶</a>&emsp;&emsp;&emsp;<br>#5&nbsp;|&nbsp;<a href="/p/290ecb74.html">å‡½å­ã€åº”ç”¨å‡½å­ä¸å•å­</a><br>#6&nbsp;|&nbsp;<a href="/p/d4bb2633.html">åŠç¾¤ä¸å¹ºåŠç¾¤</a>&emsp;&emsp;&emsp;&emsp;<br>#7&nbsp;|&nbsp;<a href="/p/68ef8146.html">ä¸€äº›å…¶å®ƒç±»å‹ç±»</a>&emsp;&emsp;&emsp;<br>#A&nbsp;|&nbsp;<a href="/p/96c32eae.html">Haskellä¸èŒƒç•´è®º</a>&emsp;&nbsp;&thinsp;</p>
</div>]]></content>
      <tags>
        <tag>Haskell</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLearn Haskellã€#5 å‡½å­ã€åº”ç”¨å‡½å­ä¸å•å­</title>
    <url>/p/290ecb74.html</url>
    <content><![CDATA[<div style="display: flex; justify-content: space-between;">

<p><a href="/p/a5bbe48a.html">&lt; #4</a></p>
<p><a href="/p/d4bb2633.html">#6 &gt;</a></p>
</div>

<h2 id="Functors"><a href="#Functors" class="headerlink" title="Functors"></a>Functors</h2><p>å‡½å­ï¼ˆFunctorï¼‰æ˜¯ä¸€ä¸ªç±»å‹ç±»ï¼ˆtypeclassï¼‰ï¼Œå’Œå…¶ä»–ç±»å‹ç±»ä¸€æ ·ï¼Œå®ƒè§„å®šäº†å…¶å®ä¾‹ç±»å¿…é¡»å®ç°çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚Eqç±»å‹ç±»è§„å®šäº†å®ƒçš„å®ä¾‹å¿…é¡»æ˜¯å¯ä»¥æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰çš„ï¼‰ï¼ŒFunctorè§„å®šç±»å®ƒçš„å®ä¾‹å¿…é¡»æ˜¯å¯ä»¥è¿›è¡Œæ˜ å°„çš„ã€‚Functorè¦æ±‚ä½¿ç”¨<code>fmap</code> :: (a -&gt; b) -&gt; f a -&gt; f b å‡½æ•°æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªa -&gt; bç±»å‹çš„å‡½æ•°ã€ä¸€ä¸ªå†…éƒ¨å…ƒç´ ä¸ºaç±»å‹çš„å‡½å­ï¼Œè¿”å›ä¸€ä¸ªå†…éƒ¨å…ƒç´ ä¸ºbç±»å‹çš„å‡½å­</p>
<span id="more"></span>

<p>Functorå¯ä»¥æ¯”ä½œç›’å­ï¼Œé‚£fmapå‡½æ•°å°±ç›¸å½“äºç»™å®šä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªç›’å­ï¼Œå°†ç›’å­ä¸­çš„å…¨éƒ¨å…ƒç´ éƒ½åº”ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå†è¿”å›åº”ç”¨å‡½æ•°åçš„ç›’å­</p>
<p>å‡½å­çš„å®ä¾‹å¿…é¡»æ˜¯ä¸€ä¸ªKindä¸º* -&gt; *çš„ç±»å‹æ„é€ å™¨ï¼Œå› ä¸ºå®ƒè¦æ±‚å…¶æ˜¯ä¸€ä¸ªç›’å­ï¼Œç›’å­åœ¨æ¥æ”¶å†…å®¹åæ‰ä¼šæˆä¸ºä¸€ä¸ªå…·ä½“çš„ç±»å‹ã€‚fmapä¸­çš„<code>f a</code>å’Œ<code>f b</code>ä¹Ÿæ˜¯å› ä¸º<code>f</code>æ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œåœ¨æ¥æ”¶ç±»å‹a/båæ‰ä¼šå˜æˆä¸€ä¸ªå…·ä½“ç±»å‹ï¼ˆf aå’Œf bï¼‰å‡ºç°åœ¨å‡½æ•°ç±»å‹å£°æ˜ä¸­</p>
<p>Functorçš„å®šä¹‰æ˜¯:</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Functor</span> f <span class="keyword">where</span></span></span><br><span class="line">    fmap :: (a -&gt; b) -&gt; f a -&gt; f b</span><br><span class="line">    (&lt;$) :: a -&gt; f a -&gt; f b</span><br><span class="line">    (&lt;$) = fmap . const</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°Functorä¸ä»…éœ€è¦fmapå‡½æ•°ï¼Œè¿˜éœ€è¦ä¸€ä¸ª&lt;$å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªaç±»å‹çš„å˜é‡å’Œä¸€ä¸ªå†…å®¹ä¸ºbç±»å‹çš„å‡½å­ï¼Œè¿”å›ä¸€ä¸ªå†…å®¹ä¸ºaç±»å‹çš„å‡½å­ï¼›ä½œç”¨å°±æ˜¯å°†ä¼ å…¥çš„å‡½å­ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ›¿æ¢ä¸ºä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; &#x27;a&#x27; &lt;$ [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="string">&quot;aaa&quot;</span></span><br></pre></td></tr></table></figure>
<p>ä½†å®ƒä¸æ˜¯å£°æ˜ä¸€ä¸ªå‡½å­å®ä¾‹å¿…é¡»çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥ä½¿ç”¨fmapå’Œconstå‡½æ•°å¤åˆæ¥å®ç°ï¼Œå…¶ä¸­constçš„ç±»å‹ç­¾åï¼š</p>
<p style="text-align: center;">const :: a -> b -> a</p>

<p>å³æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä½†å§‹ç»ˆåªè¿”å›ç¬¬ä¸€ä¸ªå‚æ•°</p>
<h3 id="Functorå®ä¾‹"><a href="#Functorå®ä¾‹" class="headerlink" title="Functorå®ä¾‹"></a>Functorå®ä¾‹</h3><h4 id><a href="#" class="headerlink" title="[]"></a>[]</h4><p>åˆ—è¡¨[]æ˜¯ä¸€ä¸ªå‡½å­ï¼Œå®ƒé€šè¿‡mapå‡½æ•°æ¥å®ç°fmapçš„åŠŸèƒ½ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> [] <span class="keyword">where</span></span></span><br><span class="line">    fmap = map</span><br></pre></td></tr></table></figure>
<p style="text-align: center;">map :: (a -> b) -> [a] -> [b]</p>

<p>mapå’Œfmapè¦æ±‚çš„ç›¸åŒï¼Œè¾¾æˆçš„ç›®çš„ä¹Ÿä¸€è‡´ã€‚mapæ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªåˆ—è¡¨ï¼Œå®ƒä¼šå°†åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½åº”ç”¨è¿™ä¸ªå‡½æ•°åå†è¿”å›è¿™ä¸ªåˆ—è¡¨</p>
<h4 id="Maybe"><a href="#Maybe" class="headerlink" title="Maybe"></a>Maybe</h4><p>Maybeä¹Ÿå…·æœ‰kind * -&gt; *ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå‡½å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    fmap f <span class="type">Nothing</span> = <span class="type">Nothing</span></span><br><span class="line">    fmap f (<span class="type">Just</span> x) = <span class="type">Just</span> (f x)</span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">2</span>) <span class="type">Nothing</span></span><br><span class="line"><span class="type">Nothing</span></span><br><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">2</span>) (<span class="type">Just</span> <span class="number">2</span>)</span><br><span class="line"><span class="type">Just</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>

<h4 id="Either-a"><a href="#Either-a" class="headerlink" title="Either a"></a>Either a</h4><p>Eitherçš„kindæ˜¯* -&gt; * -&gt; *ï¼Œæ˜¾ç„¶å®ƒä¸æ˜¯å‡½å­ï¼Œä½†æ˜¯å›ºå®šäº†ä¸€ä¸ªä¼ å…¥ç±»å‹çš„Either açš„kindæ˜¯* -&gt; *ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå‡½å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> (<span class="type">Either</span> <span class="title">a</span>) <span class="keyword">where</span></span></span><br><span class="line">    fmap f (<span class="type">Left</span> x) = <span class="type">Left</span> x</span><br><span class="line">    fmap f (<span class="type">Right</span> x) = <span class="type">Right</span> (f x)</span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">2</span>) (<span class="type">Left</span> <span class="number">4</span>)</span><br><span class="line"><span class="type">Left</span> <span class="number">4</span></span><br><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">2</span>) (<span class="type">Right</span> <span class="number">4</span>)</span><br><span class="line"><span class="type">Right</span> <span class="number">8</span></span><br></pre></td></tr></table></figure>
<p>å› ä¸ºä½¿ç”¨Eitheræ—¶ä¸€èˆ¬ç”¨å³å€¼è¡¨ç¤ºæ­£å¸¸ç»“æœï¼Œå·¦å€¼è¡¨ç¤ºå¼‚å¸¸ä¿¡æ¯ï¼Œæ‰€ä»¥ä½¿ç”¨fmapæ—¶åªå¯¹å³å€¼è¿›è¡Œæ“ä½œï¼Œå¦‚æœæ—¶å·¦å€¼åˆ™ä¿æŒä¸å˜ï¼ˆè€Œä¸”å·¦å€¼æ­¤æ—¶ä¹Ÿä½œä¸ºç¡®å®šç±»å‹ç¡®å®šå€¼å­˜åœ¨ï¼‰</p>
<h4 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h4><p>IOä¹Ÿæ˜¯ä¸€ä¸ªå‡½å­ï¼Œä½¿ç”¨fmapå¯¹IOä¸­å†…å®¹åº”ç”¨å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> <span class="type">IO</span> <span class="keyword">where</span></span></span><br><span class="line">    fmap f action = <span class="keyword">do</span></span><br><span class="line">        result &lt;- action</span><br><span class="line">        return (f result)</span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; fmap (<span class="string">&quot;input: &quot;</span>++) getLine</span><br><span class="line"><span class="title">test</span></span><br><span class="line"><span class="string">&quot;input: test&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="a"><a href="#a" class="headerlink" title="(,) a"></a>(,) a</h4><p>(,)è¡¨ç¤ºä¸€ä¸ªäºŒå…ƒç»„çš„ç±»å‹æ„é€ å™¨ï¼Œ(,) :: * -&gt; * -&gt; *ï¼Œè€Œç¡®å®šäº†ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç±»å‹åå°±å˜æˆäº†(,) aï¼Œå®ƒçš„kindæ˜¯* -&gt; *ã€‚ä¹Ÿæ˜¯ä¸€ä¸ªå‡½å­ï¼Œè¿›è¡Œfmapå‡½æ•°æ—¶åªå¯¹ç¬¬äºŒä¸ªå…ƒç´ åº”ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((,) a) <span class="keyword">where</span></span></span><br><span class="line">    fmap f (x, y) = (x, f y)</span><br></pre></td></tr></table></figure>
<p>åªå‰©ä¸€ä¸ªå…ƒç´ çš„ä¸‰å…ƒç»„å’Œå››å…ƒç»„ä¹Ÿéƒ½æ˜¯å‡½å­ï¼Œfmapä¹Ÿåªå¯¹æœ€åä¸€ä¸ªå…ƒç´ åº”ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((,,) a b) <span class="keyword">where</span></span></span><br><span class="line">    fmap f (a, b, c) = (a, b, f c)</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((,,,) a b c) <span class="keyword">where</span></span></span><br><span class="line">    fmap f (a, b, c, d) = (a, b, c, f d)</span><br></pre></td></tr></table></figure>

<h4 id="gt-r"><a href="#gt-r" class="headerlink" title="(-&gt;) r"></a>(-&gt;) r</h4><p>-&gt;ä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œå®ƒçš„kindï¼š</p>
<p style="text-align: center;">(->) :: * -> * -> *</p>

<p>ä¸€ä¸ªæ˜ å°„ï¼ˆä¸€å…ƒå‡½æ•°ï¼‰çš„ç±»å‹a -&gt; bä¹Ÿå¯ä»¥å†™æˆ(-&gt;) a bï¼Œå®ƒæ˜¯ç”±ç±»å‹aå’Œç±»å‹bè¾“å…¥åˆ°ç±»å‹æ„é€ å™¨-&gt;ä¸­åå½¢æˆçš„ä¸€ä¸ªå…·ä½“ç±»å‹ã€‚æ‰€ä»¥ç¡®å®šäº†è¾“å…¥ç±»å‹åçš„ä¸€å…ƒå‡½æ•°çš„ç±»å‹å°±æ˜¯(-&gt;) rï¼ˆå…¶ä¸­<code>r</code>æ˜¯è¾“å…¥çš„ç±»å‹ï¼‰</p>
<p>è§„å®šçš„fmapçš„ç±»å‹ç­¾åæ˜¯ï¼š</p>
<p style="text-align: center;">fmap :: (a -> b) -> f a -> f b</p>

<p>å…¶ä¸­çš„fæ˜¯å‡½å­ï¼Œè€Œåœ¨è¿™ä¸ªå®ä¾‹ä¸­(-&gt;) rå°±æ˜¯å‡½å­ï¼Œå°†å…¶å¸¦å…¥få¯ä»¥å¾—åˆ°ï¼š</p>
<p style="text-align: center;">fmap :: (a -> b) -> ((-> r) a) -> ((-> r) b)</p>

<p>æŠŠå…¶ä¸­çš„(-&gt;)æ¢æˆä¸­ç¼€å¯ä»¥å¾—åˆ°ï¼š</p>
<p style="text-align: center;">fmap :: (a -> b) -> (r -> a) -> (r -> b)</p>

<p>ä¼ å…¥ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªç±»å‹ä¸ºa -&gt; bï¼Œä¸€ä¸ªç±»å‹ä¸ºr -&gt; aï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç±»å‹ä¸ºr -&gt; bã€‚<br>ä¸éš¾æ¨æµ‹è¿™ä¸ªfmapæ˜¯å°†è¿™ä¸¤ä¸ªå‡½æ•°å¤åˆäº†ï¼Œå…ˆå¯¹è¾“å…¥å¯¹råº”ç”¨ç¬¬äºŒä¸ªå‡½æ•°äº§ç”Ÿç±»å‹açš„ç»“æœï¼Œç„¶ååœ¨åº”ç”¨ç¬¬ä¸€ä¸ªå‡½æ•°äº§ç”Ÿç±»å‹bçš„ç»“æœï¼Œæ‰€ä»¥(-&gt;) rå®šä¹‰çš„fmapæ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((-&gt;) r) <span class="keyword">where</span></span></span><br><span class="line">    fmap f g = (\x -&gt; f (g x))</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥(-&gt;) rçš„fmapå…¶å®å°±æ˜¯å‡½æ•°å¤åˆ(.)ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Functor</span> ((-&gt;) r) <span class="keyword">where</span></span></span><br><span class="line">    fmap = (.)</span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; :t fmap (*<span class="number">3</span>) (+<span class="number">100</span>)  </span><br><span class="line"><span class="title">fmap</span> (*<span class="number">3</span>) (+<span class="number">100</span>) :: (<span class="type">Num</span> a) =&gt; a -&gt; a  </span><br><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">3</span>) (+<span class="number">100</span>) <span class="number">1</span>  </span><br><span class="line"><span class="number">303</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; (*<span class="number">3</span>) `fmap` (+<span class="number">100</span>) $ <span class="number">1</span>  </span><br><span class="line"><span class="number">303</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; (*<span class="number">3</span>) . (+<span class="number">100</span>) $ <span class="number">1</span>  </span><br><span class="line"><span class="number">303</span></span><br></pre></td></tr></table></figure>

<h3 id="Functor-Laws"><a href="#Functor-Laws" class="headerlink" title="Functor Laws"></a>Functor Laws</h3><p>æ‰€æœ‰çš„å‡½å­éƒ½åº”è¯¥æ»¡è¶³ä¸¤ä¸ªå®šå¾‹ã€‚è¿™ä¸¤ä¸ªå®šå¾‹ä¸æ˜¯Haskellå¼ºåˆ¶è¦æ±‚çš„ï¼Œä½†åº”è¯¥ç¡®ä¿ä¸€ä¸ªå‡½å­æ»¡è¶³è¿™ä¸¤ä¸ªå®šå¾‹ï¼š</p>
<ol>
<li><code>fmap id = id</code>ï¼ˆå…¶ä¸­idä¸ºå‡½æ•°<code>(\x -&gt; x)</code>ï¼‰ï¼šå³å¯¹ä¸€ä¸ªå‡½å­fmap idï¼Œé‚£å®ƒåº”è¯¥è¿”å›æœ¬èº«ï¼ˆfmap id a = id a = aï¼Œaä¸ºä¸€ä¸ªå‡½å­ï¼‰ï¼Œæ¯”å¦‚ï¼š <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; fmap id [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; fmap id (<span class="type">Just</span> <span class="number">2</span>)</span><br><span class="line"><span class="type">Just</span> <span class="number">2</span></span><br></pre></td></tr></table></figure></li>
<li><code>fmap (f . g) = fmap f . fmap g</code>ï¼šå³å‡½å­çš„fmapæ”¯æŒç»“åˆå¾‹<br> fmap (f . g) a = fmap f . fmap g $ a = fmap f (fmap g a)ï¼Œå…¶ä¸­<code>a</code>ä¸ºä¸€ä¸ªå‡½å­<br> fmap (f . g) (Just x) = fmap f (fmap g (Just x)) = fmap f (Just (g x)) = Just (f (g x)) <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; fmap ((*<span class="number">3</span>) . (+<span class="number">100</span>)) (<span class="type">Just</span> <span class="number">1</span>)</span><br><span class="line"><span class="type">Just</span> <span class="number">303</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>æ»¡è¶³ç¬¬ä¸€ä¸ªå®šå¾‹çš„å‡½å­ä¸€å®šæ»¡è¶³ç¬¬äºŒä¸ªå®šå¾‹ï¼Œæ‰€ä»¥åªè¦æ£€æŸ¥å‡½å­æ˜¯å¦æ»¡è¶³ç¬¬ä¸€ä¸ªå®šå¾‹å³å¯</p>
<h3 id="Intuition"><a href="#Intuition" class="headerlink" title="Intuition"></a>Intuition</h3><p>å¯¹äºå‡½å­å’Œfmapï¼Œæœ‰ä¸¤ç§ç†è§£æ–¹æ³•</p>
<ol>
<li>å‡½å­æ˜¯ä¸€ç§å®¹å™¨ï¼ˆcontainerï¼‰ï¼›fmapæ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªå®¹å™¨ï¼Œåœ¨å®¹å™¨å†…éƒ¨åº”ç”¨è¿™ä¸ªå‡½æ•°ï¼Œè¿”å›åº”ç”¨åçš„æ–°å®¹å™¨</li>
<li>å‡½å­æ˜¯ä¸€ç§è®¡ç®—ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰ï¼›fmapæ˜¯æŸ¯é‡ŒåŒ–çš„ï¼ŒæŠŠå…¶ç±»å‹ç­¾åçœ‹ä½œ<p style="text-align: center;">fmap :: (a -> b) -> (f a -> f b)</p>
æ¥æ”¶ä¸€ä¸ªå‡½æ•°è¿”å›å¦ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥å‡½æ•°g :: a -> bï¼Œfmapå°†å…¶è½¬æ¢ä¸ºæ–°çš„å‡½æ•°
<p style="text-align: center;">fmap g :: f a -> f b</p>
ä½¿æ™®é€šçš„å‡½æ•°gå¯ä»¥åœ¨è®¡ç®—ä¸Šä¸‹æ–‡<code>f</code>ä¸­ä½¿ç”¨ï¼Œè¿™ç§è½¬æ¢ä¹Ÿè¢«ç§°ä¸ºæå‡ï¼ˆliftï¼‰</li>
</ol>
<h3 id="å¸¸ç”¨å‡½æ•°"><a href="#å¸¸ç”¨å‡½æ•°" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h3><h4 id="lt-gt"><a href="#lt-gt" class="headerlink" title="&lt;$&gt;"></a>&lt;$&gt;</h4><p><code>&lt;$&gt;</code>å‡½æ•°æ˜¯<code>fmap</code>çš„ä¸­ç¼€å½¢å¼ï¼ˆå®ƒçœ‹ç€ç±»ä¼¼<code>$</code>ï¼Œ<code>f $ 3</code>å°†fåº”ç”¨åœ¨å•ä¸ªå€¼3ä¸Šï¼Œè€Œ<code>f &lt;$&gt; [1, 2, 3]</code>å°†fåº”ç”¨åœ¨ä¸€ä¸ªå‡½å­ä¸Šï¼Œä¹Ÿå°±æ˜¯åº”ç”¨åœ¨ä¸€ä¸ªå‡½å­å†…éƒ¨çš„æ‰€æœ‰å€¼ä¸Šï¼‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; fmap (*<span class="number">2</span>) (<span class="type">Just</span> <span class="number">2</span>)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="title">ghci</span>&gt; (*<span class="number">2</span>) &lt;$&gt; <span class="type">Just</span> <span class="number">2</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<h4 id="gt"><a href="#gt" class="headerlink" title="$&gt;"></a>$&gt;</h4><p><code>$&gt;</code>å‡½æ•°åŒ…å«åœ¨<code>Data.Functor</code>æ¨¡å—ä¸­</p>
<p style="text-align: center;">($>) :: Functor f => f a -> b -> f b</p> 

<p>Functorå®šä¹‰æ—¶è¦æ±‚äº†<code>&lt;$</code>å‡½æ•°ï¼Œå°†å‡½å­å†…éƒ¨çš„å…ƒç´ å…¨éƒ¨æ›¿æ¢ä¸ºæŒ‡å®šçš„æŸä¸ªå€¼ï¼Œè€Œ<code>$&gt;</code>æ­£å¥½å°†<code>&lt;$</code>å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åäº†è¿‡æ¥ï¼Œç›¸å½“äº<code>flip (&lt;$)</code>ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; &#x27;a&#x27; &lt;$ [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="string">&quot;aaa&quot;</span></span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] $&gt; &#x27;a&#x27;</span><br><span class="line"><span class="string">&quot;aaa&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="void"><a href="#void" class="headerlink" title="void"></a>void</h4><p><code>void</code>å‡½æ•°ä¹ŸåŒ…å«åœ¨<code>Data.Functor</code>æ¨¡å—ä¸­</p>
<p style="text-align: center;">void :: Functor f => f a -> f ()</p>

<p>voidå‡½æ•°æŠŠä¸€ä¸ªå‡½å­å†…éƒ¨çš„å…¨éƒ¨å…ƒç´ éƒ½å˜æˆç©ºï¼ˆ<code>()</code>ï¼‰ï¼Œ<code>void x</code>ç›¸å½“äº<code>() &lt;$ x</code>ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; void [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[(), (), ()]</span><br><span class="line"><span class="title">ghci</span>&gt; void (<span class="type">Just</span> <span class="number">2</span>)</span><br><span class="line"><span class="type">Just</span> ()</span><br></pre></td></tr></table></figure>

<h2 id="Applicative-Functor"><a href="#Applicative-Functor" class="headerlink" title="Applicative Functor"></a>Applicative Functor</h2><p>åº”ç”¨å‡½å­ï¼ˆApplicative Functorï¼‰æ˜¯å‡½å­çš„å‡çº§ç‰ˆï¼Œå®ƒåŒ…å«åœ¨<code>Control.Applicative</code>æ¨¡å—ä¸­ã€‚</p>
<p>fmapè¿›è¡Œçš„æ“ä½œæ˜¯å°†ä¸€ä¸ªæ™®é€šä¸€å…ƒå‡½æ•°åº”ç”¨åœ¨ä¸€ä¸ªå‡½å­å†…éƒ¨ã€‚è€Œå¦‚æœè¦å°†ä¸€ä¸ªåŒ…å«å‡½æ•°çš„å‡½å­åº”ç”¨åœ¨å¦ä¸€ä¸ªå‡½å­ä¸Šï¼Œfmapå°±å¤„ç†ä¸äº†äº†ï¼Œä½†æ˜¯åº”ç”¨å‡½å­çš„æ–¹æ³•å¯ä»¥å¤„ç†ã€‚åº”ç”¨å‡½å­çš„å®šä¹‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Functor</span> f =&gt; <span class="type">Applicative</span> f <span class="keyword">where</span></span></span><br><span class="line">    pure :: a -&gt; f a</span><br><span class="line">    (&lt;*&gt;) :: f (a -&gt; b) -&gt; f a -&gt; f b</span><br></pre></td></tr></table></figure>
<p>åº”ç”¨å‡½å­è¦æ±‚å®ç°ä¸¤ä¸ªå‡½æ•°ï¼š</p>
<ul>
<li><code>pure</code> :: a -&gt; f aï¼Œä¸éš¾ç†è§£ï¼Œpureæ¥æ”¶ä¸€ä¸ªå€¼ï¼Œå¹¶å°†å…¶æ”¾åœ¨é»˜è®¤çš„ä¸Šä¸‹æ–‡/å®¹å™¨ä¸­ã€‚å¯¹äºåˆ—è¡¨ï¼Œpure = []ï¼›å¯¹äºMaybeï¼Œpure = Just</li>
<li><code>&lt;*&gt;</code> :: f (a -&gt; b) -&gt; f a -&gt; f bï¼Œç±»ä¼¼äºfmap :: (a -&gt; b) -&gt; f a -&gt; f bï¼Œä½†ä¸åŒçš„æ˜¯&lt;*&gt;çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹æ˜¯f (a -&gt; b)ä¸æ˜¯a -&gt; bã€‚æ‰€ä»¥&lt;*&gt;çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚æ¢å¥è¯è¯´ï¼Œ&lt;*&gt;æ¥æ”¶ä¸€ä¸ªè£…æœ‰å‡½æ•°çš„å‡½å­å’Œå¦ä¸€ä¸ªå‡½å­ï¼Œåº”ç”¨å‡½æ•°åè¿”å›æ–°çš„å‡½å­ã€‚</li>
</ul>
<h3 id="Applicative-Functorå®ä¾‹"><a href="#Applicative-Functorå®ä¾‹" class="headerlink" title="Applicative Functorå®ä¾‹"></a>Applicative Functorå®ä¾‹</h3><h4 id="Maybe-1"><a href="#Maybe-1" class="headerlink" title="Maybe"></a>Maybe</h4><p>Maybeæ˜¯ä¸€ä¸ªåº”ç”¨å‡½å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    pure = <span class="type">Just</span></span><br><span class="line">    <span class="type">Nothing</span> &lt;*&gt; _ = <span class="type">Nothing</span></span><br><span class="line">    (<span class="type">Just</span> f) &lt;*&gt; something = fmap f something</span><br></pre></td></tr></table></figure>
<ul>
<li><code>pure</code>å‡½æ•°ï¼šå°†ä¸€ä¸ªå€¼æ”¾åœ¨é»˜è®¤çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè€Œå¯¹äºMaybeï¼Œé»˜è®¤çš„ä¸Šä¸‹æ–‡å°±æ˜¯Justï¼Œæ‰€ä»¥pure x = Just x</li>
<li><code>&lt;*&gt;</code>å‡½æ•°ï¼šå°†è£…æœ‰å‡½æ•°çš„å‡½å­ä¸­çš„å‡½æ•°åº”ç”¨å¦ä¸€ä¸ªå‡½å­ä¸­<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Nothingï¼Œå³ç¬¬ä¸€ä¸ªå‡½å­ä¸åŒ…å«å‡½æ•°ï¼Œé‚£è¿”å›çš„ç»“æœå°±ä¹Ÿä¼šæ˜¯Nothing</li>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è£…æœ‰å‡½æ•°fçš„å‡½å­Just fï¼Œå°†å…¶ä¸­çš„å‡½æ•°fåº”ç”¨åœ¨å‡½å­somethingä¸­ï¼Œåªéœ€è¦å°†fæå–å‡ºæ¥ä½¿ç”¨fmapåº”ç”¨åœ¨å‡½å­somethingä¸­å³å¯</li>
</ul>
</li>
</ul>
<p>å®é™…åº”ç”¨çš„ä¾‹å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> (+<span class="number">3</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="type">Just</span> <span class="number">12</span></span><br><span class="line"><span class="title">ghci</span>&gt; pure (+<span class="number">3</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="type">Just</span> <span class="number">12</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">3</span>) &lt;$&gt; <span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="type">Just</span> <span class="number">12</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> &lt;*&gt; <span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªä¾‹å­ï¼ŒJust (+3)æ˜¯ä¸€ä¸ªåŒ…å«å‡½æ•°(+3)çš„å‡½å­ï¼Œå°†å…¶åº”ç”¨åœ¨å‡½å­Just 9ä¸­ï¼Œå°†Just (+3)ä¸­çš„å‡½æ•°(+3)æå–å‡ºæ¥ï¼Œåº”ç”¨åœ¨Just 9ä¸­ï¼Œå¾—åˆ°äº†Just 12</p>
<p>ç¬¬äºŒä¸ªä¾‹å­ï¼Œå¯ä»¥å‘ç°ï¼Œåœ¨è¿™é‡Œpure (+3)å’ŒJust (+3)ç­‰æ•ˆï¼Œå› ä¸ºpureå°†å‡½æ•°(+3)æ”¾åœ¨é»˜è®¤ä¸Šä¸‹æ–‡ä¸­ï¼Œä¹Ÿå°±æ˜¯Justä¸­äº†</p>
<p>è€Œ&lt;*&gt;èƒ½åšçš„ä¸æ­¢è¿™äº›ï¼Œä»–å¯ä»¥è¿ç»­ä¼ å…¥æ›´å¤šå‡½å­ä½œä¸ºå‚æ•°ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; pure (+) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> <span class="number">9</span></span><br><span class="line"><span class="type">Just</span> <span class="number">12</span></span><br><span class="line"><span class="title">ghci</span>&gt; pure (\x y z -&gt; x + y + z) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> <span class="number">4</span> &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line"><span class="type">Just</span> <span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>&lt;*&gt;å‡½æ•°ä¸€æ ·æ˜¯é»˜è®¤å·¦ç»“åˆçš„ï¼Œpure (+) &lt;*&gt; Just 3 &lt;*&gt; Just 9ç›¸å½“äº(pure (+) &lt;*&gt; Just 3) &lt;*&gt; Just 9ï¼Œè€Œpure (+) &lt;*&gt; Just 3å°†(+)åº”ç”¨åœ¨Just 3ä¸Šï¼Œå¾—åˆ°çš„å°±æ˜¯Just (+3)ä¸€ä¸ªåŒ…å«å‡½æ•°çš„å‡½å­ï¼Œåˆå°†å…¶é€šè¿‡&lt;*&gt;åº”ç”¨åœ¨äº†Just 9ä¸Šï¼Œå¾—åˆ°äº†Just 12:</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  pure (\x y z -&gt; x + y + z) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> <span class="number">4</span> &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line">= (pure (\x y z -&gt; x + y + z) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">4</span> &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line">= (<span class="type">Just</span> (\y z -&gt; <span class="number">3</span> + y + z) &lt;*&gt; <span class="type">Just</span> <span class="number">4</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line">= <span class="type">Just</span> (\z -&gt; <span class="number">3</span> + <span class="number">4</span> + z) &lt;*&gt; <span class="type">Just</span> <span class="number">5</span> = <span class="type">Just</span> (+<span class="number">7</span>) &lt;*&gt; <span class="type">Just</span> <span class="number">5</span></span><br><span class="line">= <span class="type">Just</span> <span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥å¯ä»¥ä½¿ç”¨ç±»ä¼¼pure f &lt;*&gt; x &lt;*&gt; y &lt;*&gt; â€¦æ¥å°†ä¸€ä¸ªæ™®é€šå¤šå…ƒå‡½æ•°fåº”ç”¨åœ¨å¤šä¸ªå‡½å­ä¸Šã€‚</p>
<p>è€Œä¸”pure f &lt;*&gt; xå®é™…ä¸Šå…ˆå°†æ™®é€šå‡½æ•°fæ”¾åœ¨ä¸Šä¸‹æ–‡ä¸­ï¼Œç„¶åæ‰§è¡Œ&lt;*&gt;æ—¶å†å°†å…¶æå–å‡ºæ¥æ‰§è¡Œfmapï¼Œæ‰€ä»¥å®ƒå°±ç›¸å½“äºå°†æ™®é€šå‡½æ•°åº”ç”¨åœ¨å‡½å­xä¸Šï¼Œå³fmap f xï¼Œä¹Ÿå¯ä»¥å†™æˆf &lt;$&gt; xã€‚æ‰€ä»¥å¸¸ç”¨çš„å†™æ³•å°±æ˜¯ï¼š</p>
<p style="text-align: center;">f <$> x <*> y <*> ...</*></*></$></p>

<h4 id="-1"><a href="#-1" class="headerlink" title="[]"></a>[]</h4><p>åˆ—è¡¨ä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨å‡½å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> [] <span class="keyword">where</span></span></span><br><span class="line">    pure x = [x]</span><br><span class="line">    fs &lt;*&gt; xs = [f x | f &lt;- fs, x &lt;- xs]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>pure</code>å‡½æ•°ï¼šå¯¹äºåˆ—è¡¨è€Œè¨€ï¼Œä¸€ä¸ªå€¼çš„æœ€å°ä¸Šä¸‹æ–‡å°±æ˜¯åªåŒ…å«è¿™ä¸ªå€¼çš„åˆ—è¡¨[x]</li>
<li><code>&lt;*&gt;</code>å‡½æ•°ï¼šåˆ—è¡¨çš„&lt;*&gt;å‡½æ•°æ˜¯é€šè¿‡åˆ—è¡¨æ¨å¯¼æ¥å®ç°çš„ã€‚å› ä¸ºä¸åŒäºMaybeçš„JuståªåŒ…å«ä¸€ä¸ªå€¼ï¼Œåˆ—è¡¨å¯ä»¥åŒ…å«å¾ˆå¤šå€¼ï¼Œç¬¬ä¸€ä¸ªä¼ å…¥çš„åˆ—è¡¨ä¸­å¯èƒ½ä¼šåŒ…å«å¾ˆå¤šå‡½æ•°ï¼Œç¬¬äºŒä¸ªä¼ å…¥çš„åˆ—è¡¨ä¹Ÿä¼šåŒ…å«å¾ˆå¤šå€¼ï¼Œæ‰€ä»¥å°±éœ€è¦å…ˆä»ç¬¬ä¸€ä¸ªåˆ—è¡¨ä¸­å–å‡ºä¸€ä¸ªå‡½æ•°ç„¶åä¾æ¬¡åº”ç”¨åœ¨ç¬¬äºŒä¸ªåˆ—è¡¨çš„æ¯ä¸ªå€¼ä¸­ï¼Œå†å–å‡ºç¬¬ä¸€ä¸ªåˆ—è¡¨ä¸­çš„ç¬¬äºŒä¸ªå‡½æ•°åº”ç”¨åœ¨ç¬¬äºŒä¸ªåˆ—è¡¨çš„æ¯ä¸ªå€¼ä¸­â€¦â€¦æœ€ç»ˆè¿”å›å¾—åˆ°çš„æ‰€æœ‰ç»“æœçš„åˆ—è¡¨</li>
</ul>
<p>ä½¿ç”¨ä¾‹å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [(+<span class="number">3</span>), (*<span class="number">2</span>)] &lt;*&gt; [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">[<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [(+), (*)]  &lt;*&gt;  [<span class="number">1</span>, <span class="number">2</span>]  &lt;*&gt;  [<span class="number">3</span>, <span class="number">4</span>]  </span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure>

<h4 id="IO-1"><a href="#IO-1" class="headerlink" title="IO"></a>IO</h4><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> <span class="type">IO</span> <span class="keyword">where</span></span></span><br><span class="line">    pure = return</span><br><span class="line">    a &lt;*&gt; b = <span class="keyword">do</span></span><br><span class="line">        f &lt;- a</span><br><span class="line">        x &lt;- b</span><br><span class="line">        return (f x)</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿä¸éš¾ç†è§£ï¼Œpureå‡½æ•°ç›´æ¥å°†ä¼ å…¥çš„å€¼returnï¼Œç›¸å½“äºæ”¾åœ¨äº†IOçš„ä¸Šä¸‹æ–‡ä¸­ã€‚è€Œ&lt;*&gt;å‡½æ•°å…ˆå°†ä¸¤ä¸ªIOä¸­å†…å®¹æå–å‡ºæ¥ï¼Œç„¶ååº”ç”¨å‡½æ•°åreturnï¼Œå½¢æˆæ–°çš„IOå‡½å­</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; (++) &lt;$&gt; getLine &lt;*&gt; getLine</span><br><span class="line"><span class="type">Line1</span></span><br><span class="line"><span class="type">Line2</span></span><br><span class="line"><span class="string">&quot;Line1Line2&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="gt-r-1"><a href="#gt-r-1" class="headerlink" title="(-&gt;) r"></a>(-&gt;) r</h4><p>(-&gt;) råŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨å‡½å­ï¼Œå’Œå‡½å­çš„åˆ†æä¸€æ ·ï¼Œå…ˆæ¥åˆ†æå®ƒçš„&lt;*&gt;å‡½æ•°çš„ç±»å‹ç­¾åï¼š</p>
<p style="text-align: center;"><*> :: f (a -> b) -> f a -> f b</*></p>

<p>å…¶ä¸­fä¸º(-&gt;) rï¼Œå°†å…¶ä»£å…¥å¹¶æ›¿æ¢ä¸ºä¸­ç¼€ï¼š</p>
<p style="text-align: center;"><*> :: (r -> a -> b) -> (r -> a) -> (r -> b)</*></p>

<p>å¯ä»¥çœ‹å‡ºå®ƒæ¥æ”¶ä¸¤ä¸ªå‡½æ•°f :: r -&gt; a -&gt; bã€g :: r -&gt; aï¼Œè¿”å›å¦ä¸€ä¸ªå‡½æ•°h :: (r -&gt; b)</p>
<p>é‚£ä¹ˆè¿”å›çš„å‡½æ•°çš„è¾“å…¥ä¸ºrï¼Œè¾“å‡ºä¸ºbï¼Œæ‰€ä»¥å…ˆå¯¹è¾“å…¥åº”ç”¨å‡½æ•°gå¾—åˆ°aï¼Œç„¶ååœ¨å¯¹rå’Œaåº”ç”¨få¾—åˆ°bï¼Œæ‰€ä»¥æ¨æµ‹&lt;*&gt;å‡½æ•°çš„æ“ä½œå°±æ˜¯ï¼š</p>
<p style="text-align: center;">\x -> f x (g x)</p>

<p>äºæ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> ((-&gt;) r) <span class="keyword">where</span></span></span><br><span class="line">    pure x = (\_ -&gt; x)</span><br><span class="line">    f &lt;*&gt; g = \x -&gt; f x (g x)</span><br></pre></td></tr></table></figure>
<p>å°†ä¸€ä¸ªå€¼æ”¾åœ¨å‡½æ•°çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæœ€å°ä¸Šä¸‹æ–‡å°±åº”è¯¥è¿”å›è¿™ä¸ªå€¼æœ¬èº«ï¼Œæ‰€ä»¥pureå‡½æ•°å®šä¹‰ä¸º(_ -&gt; x)ï¼Œå³æ— è®ºè¾“å…¥ä»€ä¹ˆï¼Œéƒ½è¿”å›x</p>
<p>åº”ç”¨å‡½å­çš„&lt;*&gt;å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‡½å­ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½å­ã€‚å¯¹äº(-&gt;) rï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚å…·ä½“ä¾‹å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; (+) &lt;$&gt; (+<span class="number">3</span>) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line"><span class="number">508</span></span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œè¿™å¥æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  (+) &lt;$&gt; (+<span class="number">3</span>) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line">= ((+) &lt;$&gt; (+<span class="number">3</span>)) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line">= ((+) . (+<span class="number">3</span>)) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span> = (\a -&gt; (+) ((+<span class="number">3</span>) a)) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line">= (\a b -&gt; (a + <span class="number">3</span> + b)) &lt;*&gt; (*<span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line">= (\x -&gt; x + <span class="number">3</span> + ((*<span class="number">100</span>) x)) $ <span class="number">5</span></span><br><span class="line">= (\x -&gt; x + <span class="number">3</span> + x * <span class="number">100</span>) $ <span class="number">5</span></span><br><span class="line">= <span class="number">5</span> + <span class="number">3</span> + <span class="number">5</span> * <span class="number">100</span> = <span class="number">508</span></span><br><span class="line">= (<span class="number">5</span> + <span class="number">3</span>) + (<span class="number">5</span> * <span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥å°±ç›¸å½“äºå…ˆå¯¹è¾“å…¥åˆ†åˆ«æ‰§è¡Œ(+3)å’Œ(*100)ï¼Œç„¶åå°†ä¸¤ä¸ªç»“æœæ‰§è¡Œäº†(+)</p>
<p>åŒæ ·ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; (\x y z -&gt; [x,y,z]) &lt;$&gt; (+<span class="number">3</span>) &lt;*&gt; (*<span class="number">2</span>) &lt;*&gt; (/<span class="number">2</span>) $ <span class="number">5</span>  </span><br><span class="line">[<span class="number">8.0</span>,<span class="number">10.0</span>,<span class="number">2.5</span>]  </span><br></pre></td></tr></table></figure>
<p>å…ˆå¯¹5åˆ†åˆ«æ‰§è¡Œ(+3)ã€(*2)ã€(/2)ï¼Œç„¶åå°†å¾—åˆ°çš„ä¸‰ä¸ªç»“æœä¼ å…¥(\x y z -&gt; [x,y,z])å¾—åˆ°äº†æœ€ç»ˆçš„ç»“æœ</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  f &lt;$&gt; g &lt;*&gt; h &lt;*&gt; i</span><br><span class="line">= (\x -&gt; f (g x) (h x) (i x))</span><br></pre></td></tr></table></figure>

<h4 id="ZipList"><a href="#ZipList" class="headerlink" title="ZipList"></a>ZipList</h4><p>æ™®é€šåˆ—è¡¨å®ç°çš„&lt;*&gt;å‡½æ•°æ˜¯å°†æ¯ä¸ªå‡½æ•°åº”ç”¨åœ¨æ‰€æœ‰å€¼ä¸Šï¼Œä½†è¿˜æœ‰ä¸€ç§å®ç°æ–¹æ³•æ˜¯å°†æ¯ä¸ªå‡½æ•°åº”ç”¨åœ¨å¯¹åº”å€¼ä¸Šï¼Œå› ä¸ºåŒä¸€ä¸ªç±»å‹ä¸èƒ½å­˜åœ¨åŒä¸€å‡½æ•°çš„ä¸¤ç§å®ç°å½¢å¼ï¼Œæ‰€ä»¥å¼•å…¥äº†ä¸€ä¸ªæ–°çš„åˆ—è¡¨ZipListï¼ŒåŒ…å«åœ¨<code>Control.Applicative</code>æ¨¡å—ä¸­</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Applicative</span> <span class="type">ZipList</span> <span class="keyword">where</span></span></span><br><span class="line">    pure x = <span class="type">ZipList</span> (repeat x)</span><br><span class="line">    <span class="type">ZipList</span> fs &lt;*&gt; <span class="type">ZipList</span> xs = <span class="type">ZipList</span> (zipWith ($) fs xs)</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ZipListå¹¶ä¸æ˜¯Showçš„å®ä¾‹ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œè¦ä½¿ç”¨<code>getZipList</code>æ¥è·å–å®ƒå†…éƒ¨çš„åˆ—è¡¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; getZipList $ (+) &lt;$&gt; <span class="type">ZipList</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] &lt;*&gt; <span class="type">ZipList</span> [<span class="number">100</span>,<span class="number">100.</span>.]  </span><br><span class="line">[<span class="number">101</span>,<span class="number">102</span>,<span class="number">103</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; getZipList $ (,,) &lt;$&gt; <span class="type">ZipList</span> <span class="string">&quot;dog&quot;</span> &lt;*&gt; <span class="type">ZipList</span> <span class="string">&quot;cat&quot;</span> &lt;*&gt; <span class="type">ZipList</span> <span class="string">&quot;rat&quot;</span>  </span><br><span class="line">[(&#x27;d&#x27;,&#x27;c&#x27;,&#x27;r&#x27;),(&#x27;o&#x27;,&#x27;a&#x27;,&#x27;a&#x27;),(&#x27;g&#x27;,&#x27;t&#x27;,&#x27;t&#x27;)]  </span><br></pre></td></tr></table></figure>

<h3 id="Applicative-Functor-Laws"><a href="#Applicative-Functor-Laws" class="headerlink" title="Applicative Functor Laws"></a>Applicative Functor Laws</h3><p>åº”ç”¨å‡½å­ä¸€èˆ¬æœ‰å››ä¸ªå®šå¾‹ï¼Œéƒ½æ˜¯ä¿è¯pureçš„æ­£ç¡®æ€§çš„ï¼š</p>
<ol>
<li><code>Identity law</code>ï¼špure id &lt;*&gt; v = v</li>
<li><code>Homomorphism</code>ï¼špure f &lt;*&gt; pure x = pure (f x)</li>
<li><code>Interchange</code>ï¼šu &lt;*&gt; pure v = pure ($ v) &lt;*&gt; u</li>
<li><code>Composition</code>ï¼šu &lt;*&gt; (v &lt;*&gt; w) = pure (.) &lt;*&gt; u &lt;*&gt; v &lt;*&gt; w</li>
</ol>
<h3 id="Intuition-1"><a href="#Intuition-1" class="headerlink" title="Intuition"></a>Intuition</h3><p>ç†è§£åº”ç”¨å‡½å­çš„æ–¹å¼ä¹Ÿæ˜¯å°†å…¶çœ‹ä½œæ˜¯è®¡ç®—ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰ï¼Œæ¯”å¦‚è¦è®¡ç®—ï¼š<br>$$<br>[[\ \ g\ x_1\ x_2\ \cdots\ x_n\ \ ]]<br>$$</p>
<p>å…¶ä¸­$x_i$çš„ç±»å‹æ˜¯$f\ t_i$ï¼Œ$f$æ˜¯åº”ç”¨å‡½å­ï¼ˆçœ‹ä½œä¸Šä¸‹æ–‡ï¼‰ã€‚è€Œå‡½æ•°$g$çš„ç±»å‹æ˜¯ï¼š</p>
<p>$$<br>t_1\to t_2\to\cdots\to t_n\to t<br>$$</p>
<p>æ‰€ä»¥åŒæ‹¬å·ï¼ˆidiom bracketsï¼‰çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ™®é€šå‡½æ•°åº”ç”¨åœ¨åŒ…å«åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å‚æ•°ä¸Šã€‚$g\ x_1$å¯ä»¥é€šè¿‡fmapæ¥æ‰§è¡Œï¼Œå°†$g$æå‡ï¼ˆliftï¼‰åˆ°$x_1$çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œç„¶ååº”ç”¨åœ¨$x_1$ä¸Šã€‚ä½†æ˜¯fmapè¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªå‡½å­ï¼Œæ¢å¥è¯è¯´ï¼Œ$g\ x_1$ç»“æœçš„ç±»å‹æ˜¯ï¼š</p>
<p>$$<br>f\ \ (t_2\to t_3\to\cdots\to t_n\to t)<br>$$</p>
<p>ä½†æ˜¯fmapå¹¶ä¸èƒ½å°†ä¸Šä¸‹æ–‡ä¸­çš„å‡½æ•°åº”ç”¨åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å‚æ•°ä¸Šï¼Œäºæ˜¯åº”ç”¨å‡½å­çš„&lt;*&gt;å‡½æ•°æä¾›äº†è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥è®¡ç®—$[[\ g\ x_1\ x_2\ \cdots\ x_n\ ]]$ï¼Œåªéœ€è¦ï¼š</p>
<p style="text-align: center;">g <$> x1 <*> x2 <*> ... <*> xn</*></*></*></$></p>

<p>è€Œpureå‡½æ•°çš„ä½œç”¨å°±æ˜¯å°†ä¸€ä¸ªä¸åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å€¼ï¼ˆå‡½æ•°æˆ–å‚æ•°ï¼‰æå‡åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œä½†ä¸è¿›è¡Œå…¶ä»–æ“ä½œã€‚æ¯”å¦‚å‚æ•°$x_2$å¦‚æœä¸åœ¨ä¸Šä¸‹æ–‡ä¸­ï¼Œéœ€è¦ç”¨pureæå‡åˆ°ä¸Šä¸‹æ–‡ä¸­æ‰èƒ½æŒ‰ä¸Šé¢è®¡ç®—ï¼š</p>
<p style="text-align: center;">g <$> x1 <*> pure x2 <*> ... <*> xn</*></*></*></$></p>

<h3 id="å¸¸ç”¨å‡½æ•°-1"><a href="#å¸¸ç”¨å‡½æ•°-1" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h3><h4 id="liftA-amp-liftA2-amp-liftA3"><a href="#liftA-amp-liftA2-amp-liftA3" class="headerlink" title="liftA &amp; liftA2 &amp; liftA3"></a>liftA &amp; liftA2 &amp; liftA3</h4><p style="text-align: center;">liftA :: Applicative f => (a -> b) -> f a -> f b</p>
<p style="text-align: center;">liftA2 :: Applicative f => (a -> b -> c) -> f a -> f b -> f c</p>
<p style="text-align: center;">liftA3 :: Applicative f => (a -> b -> c -> d) -> f a -> f b -> f c -> f d</p>

<p>ä¸éš¾æ¨æµ‹liftAå°±æ˜¯fmapï¼Œ<code>liftA2 f x1 x2</code>ç›¸å½“äº<code>f &lt;$&gt; x1 &lt;*&gt; x2</code>ï¼Œ<code>liftA3 f x1 x2 x3</code>ç›¸å½“äº<code>f &lt;$&gt; x1 &lt;*&gt; x2 &lt;*&gt; x3</code></p>
<h4 id="lt-amp-gt"><a href="#lt-amp-gt" class="headerlink" title="&lt;* &amp; *&gt;"></a>&lt;* &amp; *&gt;</h4><p>ç±»å‹ç±»ä¼¼å‡½å­çš„<code>&lt;$</code>å’Œ<code>$&gt;</code>ï¼š</p>
<p style="text-align: center;">(&lt;*) :: Applicative f => f a -> f b -> f a</p>
<p style="text-align: center;">(*>) :: Applicative f => f a -> f b -> f b</p>

<p>&lt;*æ¥æ”¶ä¸¤ä¸ªå‡½å­ï¼Œå¦‚æœä¸¤ä¸ªå‡½å­ä¸­åˆä¸€ä¸ªä¸ºç©ºï¼Œå°±è¿”å›ç©ºï¼Œå¦åˆ™è¿”å›çš„ç±»å‹ä¸ç¬¬ä¸€ä¸ªå‡½å­ç›¸åŒã€‚*&gt;åè¿‡æ¥</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="number">3</span> &lt;* <span class="type">Just</span> <span class="number">4</span></span><br><span class="line"><span class="type">Just</span> <span class="number">3</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="number">3</span> *&gt; <span class="type">Just</span> <span class="number">4</span></span><br><span class="line"><span class="type">Just</span> <span class="number">4</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> &lt;* <span class="type">Just</span> <span class="number">3</span></span><br><span class="line"><span class="type">Nothing</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> *&gt; <span class="type">Just</span> <span class="number">3</span></span><br><span class="line"><span class="type">Nothing</span></span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] &lt;* [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] *&gt; [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">[<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [] &lt;* [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[]</span><br><span class="line"><span class="title">ghci</span>&gt; [] *&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>

<h4 id="lt-gt-1"><a href="#lt-gt-1" class="headerlink" title="&lt;**&gt;"></a>&lt;**&gt;</h4><p style="text-align: center;">(**) :: Applicative f => f a -> f (a -> b) -> f b</p>

<p>æ¥æ”¶çš„å‚æ•°æ˜¯&lt;*&gt;åè½¬è¿‡æ¥çš„ï¼Œå³å…ˆæ¥æ”¶ä¸€ä¸ªå‚æ•°å‡½å­ï¼Œç„¶åæ¥æ”¶ä¸€ä¸ªå‡½æ•°å‡½å­ï¼Œåœ¨å°†å…¶åº”ç”¨è¿”å›ã€‚ä½†æ˜¯å’Œflip(&lt;*&gt;)ä¸åŒï¼Œå®ƒå…ˆå–å‚æ•°å‡½å­çš„æ¯ä¸ªå‚æ•°ï¼Œç„¶åå†å–å‡½æ•°å‡½å­ä¸­çš„å‡½æ•°é€ä¸ªåº”ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [(+<span class="number">1</span>), (+<span class="number">2</span>), (+<span class="number">3</span>)] &lt;*&gt; [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">[<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>, <span class="number">2</span>] &lt;**&gt; [(+<span class="number">1</span>), (+<span class="number">2</span>), (+<span class="number">3</span>)]</span><br><span class="line">[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; flip(&lt;*&gt;) [<span class="number">1</span>, <span class="number">2</span>] [(+<span class="number">1</span>), (+<span class="number">2</span>), (+<span class="number">3</span>)]</span><br><span class="line">[<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<h4 id="when-amp-unless"><a href="#when-amp-unless" class="headerlink" title="when &amp; unless"></a>when &amp; unless</h4><p style="text-align: center;">when :: Applicative f => Bool -> f () -> f ()</p>

<p>ä¼ å…¥çš„ç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ªç»“æœä¸ºBoolç±»å‹çš„æµ‹è¯•ï¼Œå¦‚æœæµ‹è¯•ä¸ºTrueï¼Œåˆ™è°ƒç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™è¿”å›pure ()ã€‚ï¼ˆwhenå‡½æ•°åœ¨ä¸Šæ–‡IOæ“ä½œä¸­ä½¿ç”¨è¿‡ï¼‰</p>
<p>unlessåˆ™ä¸whenç›¸åï¼Œæµ‹è¯•ä¸ºTrueè¿”å›pure ()</p>
<h4 id="sequenceA"><a href="#sequenceA" class="headerlink" title="sequenceA"></a>sequenceA</h4><p style="text-align: center;">sequenceA :: (Traversable t, Applicative f) => t (f a) -> f (t a)</p>

<p>åº”ç”¨åœ¨åˆ—è¡¨ä¸Šæ—¶ï¼Œå®ƒçš„ç±»å‹ç›¸å½“äºï¼š</p>
<p style="text-align: center;">[f a] -> f [a]</p>

<p>æ‰€ä»¥åœ¨åˆ—è¡¨ä¸Šå®ƒçš„ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; sequenceA [<span class="type">Just</span> <span class="number">3</span>, <span class="type">Just</span> <span class="number">2</span>, <span class="type">Just</span> <span class="number">1</span>]  </span><br><span class="line"><span class="type">Just</span> [<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; sequenceA [<span class="type">Just</span> <span class="number">3</span>, <span class="type">Nothing</span>, <span class="type">Just</span> <span class="number">1</span>]  </span><br><span class="line"><span class="type">Nothing</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; sequenceA [(+<span class="number">3</span>),(+<span class="number">2</span>),(+<span class="number">1</span>)] <span class="number">3</span>  </span><br><span class="line">[<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; sequenceA [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]  </span><br><span class="line">[[<span class="number">1</span>,<span class="number">4</span>],[<span class="number">1</span>,<span class="number">5</span>],[<span class="number">1</span>,<span class="number">6</span>],[<span class="number">2</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">5</span>],[<span class="number">2</span>,<span class="number">6</span>],[<span class="number">3</span>,<span class="number">4</span>],[<span class="number">3</span>,<span class="number">5</span>],[<span class="number">3</span>,<span class="number">6</span>]]  </span><br><span class="line"><span class="title">ghci</span>&gt; sequenceA [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>],[]]  </span><br><span class="line">[]  </span><br></pre></td></tr></table></figure>
<p>å®ƒåœ¨å¯¹åŒä¸€ä¸ªå‚æ•°åº”ç”¨ä¸åŒå‡½æ•°æ—¶å¾ˆæœ‰ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; map (\f -&gt; f <span class="number">7</span>) [(&gt;<span class="number">4</span>), (&lt;<span class="number">10</span>), odd]  </span><br><span class="line">[<span class="type">True</span>,<span class="type">True</span>,<span class="type">True</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; sequenceA [(&gt;<span class="number">4</span>), (&lt;<span class="number">10</span>), odd] <span class="number">7</span>  </span><br><span class="line">[<span class="type">True</span>,<span class="type">True</span>,<span class="type">True</span>]  </span><br></pre></td></tr></table></figure>

<h2 id="Monad"><a href="#Monad" class="headerlink" title="Monad"></a>Monad</h2><p>å•å­ï¼ˆMonadï¼‰æ˜¯å¯¹Applicative Functorçš„æ‰©å±•ï¼ˆä½†æ˜¯è¯ç”Ÿæ¯”Applicativeæ—©ï¼‰ï¼ŒFunctorçš„<code>&lt;$&gt;</code>å‡½æ•°å®ç°äº†å°†æ™®é€šå‡½æ•°åº”ç”¨åœ¨ä¸Šä¸‹æ–‡å€¼ä¸Šï¼ŒApplicativeçš„<code>&lt;*&gt;</code>å‡½æ•°å°†ä¸Šä¸‹æ–‡ä¸­å‡½æ•°åº”ç”¨åœ¨ä¸Šä¸‹æ–‡å€¼ä¸Šã€‚è€ŒMonadæä¾›äº†ä¸€ä¸ªå‡½æ•°<code>&gt;&gt;=</code>ï¼ˆbindï¼‰ï¼Œå°†ä¸€ä¸ªæ¥æ”¶æ™®é€šå€¼è¿”å›ä¸Šä¸‹æ–‡å€¼çš„å‡½æ•°åº”ç”¨åœ¨ä¸Šä¸‹æ–‡å€¼ä¸Šï¼š</p>
<!--more-->
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Applicative</span> m =&gt; <span class="type">Monad</span> m <span class="keyword">where</span></span></span><br><span class="line">    (&gt;&gt;=) :: m a -&gt; (a -&gt; m b) -&gt; m b</span><br><span class="line">    (&gt;&gt;) :: m a -&gt; m b -&gt; m b</span><br><span class="line">    return :: a -&gt; m a</span><br><span class="line">    m &gt;&gt; n = m &gt;&gt;= \_ -&gt; n</span><br><span class="line">    return = pure</span><br></pre></td></tr></table></figure>
<ul>
<li><code>return</code>å‡½æ•°ï¼šå’Œ<code>pure</code>ä¸€æ ·ï¼Œåªæ˜¯æœ‰å¦ä¸€ä¸ªåå­—</li>
<li><code>&gt;&gt;</code>å‡½æ•°ï¼šæä¾›äº†é»˜è®¤çš„å®ç°æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨å’ŒApplicativeçš„*&gt;å‡½æ•°ä¸€æ ·</li>
<li><code>&gt;&gt;=</code>å‡½æ•°ï¼ˆbindï¼‰ï¼šæ¯”Applicativeå‡çº§çš„å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå•å­ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ¥æ”¶å€¼è¿”å›å•å­çš„å‡½æ•°ï¼Œå°†è¿™ä¸ªå‡½æ•°åº”ç”¨åœ¨ç¬¬ä¸€ä¸ªå‚æ•°å•å­ä¸­çš„å€¼ä¸Šï¼Œå¹¶è¿”å›å¾—åˆ°çš„æ–°å•å­</li>
</ul>
<h3 id="Monadå®ä¾‹"><a href="#Monadå®ä¾‹" class="headerlink" title="Monadå®ä¾‹"></a>Monadå®ä¾‹</h3><h4 id="Maybe-2"><a href="#Maybe-2" class="headerlink" title="Maybe"></a>Maybe</h4><p>Maybeæ˜¯ä¸€ä¸ªå•å­å®ä¾‹ï¼ŒApplicativeå·²ç»ä¸ºå®ƒå®ç°äº†returnï¼Œå› æ­¤åªéœ€è¦&gt;&gt;=å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    (<span class="type">Just</span> x) &gt;&gt;= f = f x </span><br><span class="line">    <span class="type">Nothing</span>  &gt;&gt;= _ = <span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<p>æ ¹æ®å®šä¹‰å°±å¾ˆå®¹æ˜“å®ç°Maybeçš„&gt;&gt;=å‡½æ•°äº†ï¼Œè€Œä¸”ä¹Ÿå¾ˆå¥½ç†è§£</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="number">1</span> &gt;&gt;= \x -&gt; <span class="type">Just</span> (x + <span class="number">1</span>)</span><br><span class="line"><span class="type">Just</span> <span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="number">1</span> &gt;&gt;= \x -&gt; return (x + <span class="number">1</span>)</span><br><span class="line"><span class="type">Just</span> <span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Nothing</span> &gt;&gt;= \x -&gt; <span class="type">Just</span> (x + <span class="number">1</span>)</span><br><span class="line"><span class="type">Nothing</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Just</span> <span class="number">1</span> &gt;&gt;= \x -&gt; <span class="type">Just</span> (x + <span class="number">1</span>) &gt;&gt; <span class="type">Nothing</span> &gt;&gt;= \y -&gt; <span class="type">Just</span> (y + <span class="number">1</span>)</span><br><span class="line"><span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<p>æœ€åä¸€ä¸ªä¾‹å­ä¸­å‡ºç°äº†&gt;&gt; Nothingï¼Œè¿™æ—¶Nothingå‰çš„éƒ¨åˆ†å…¨éƒ½ç›¸å½“äºæ²¡ç”¨ï¼Œå› ä¸º&gt;&gt;æ“ä½œç¬¦çš„å·¦å³ä¸¤è¾¹åªè¦æœ‰ä¸€ä¸ªå‡ºç°Nothingï¼Œé‚£æ•´ä½“å°±ä¼šæ˜¯Nothingã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥ç”¨äºåœ¨ä¸­é€”éšæ—¶åˆ¤æ–­å¤±è¯¯ï¼Œåªè¦æœ‰ä¸€å¤„å¤±è¯¯ï¼Œç»“æœå°±ä¼šæ˜¯Nothing</p>
<h4 id="-2"><a href="#-2" class="headerlink" title="[]"></a>[]</h4><p>åˆ—è¡¨ä¹Ÿæ˜¯ä¸€ä¸ªå•å­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> [] <span class="keyword">where</span></span></span><br><span class="line">    xs &gt;&gt;= f = concat (map f xs)</span><br></pre></td></tr></table></figure>
<p>å°†è¿™ä¸ªå‡½æ•°åº”ç”¨åœ¨xsçš„æ¯ä¸ªå€¼ä¸Šï¼Œå°†è¿”å›çš„æ‰€æœ‰åˆ—è¡¨å¹³é“ºæˆä¸€ä¸ªåˆ—è¡¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>] &gt;&gt;= \x -&gt; [x,-x]  </span><br><span class="line">[<span class="number">3</span>,<span class="number">-3</span>,<span class="number">4</span>,<span class="number">-4</span>,<span class="number">5</span>,<span class="number">-5</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span>,<span class="number">2</span>] &gt;&gt;= \n -&gt; [&#x27;a&#x27;,&#x27;b&#x27;] &gt;&gt;= \ch -&gt; return (n,ch)  </span><br><span class="line">[(<span class="number">1</span>,&#x27;a&#x27;),(<span class="number">1</span>,&#x27;b&#x27;),(<span class="number">2</span>,&#x27;a&#x27;),(<span class="number">2</span>,&#x27;b&#x27;)]  </span><br></pre></td></tr></table></figure>

<h4 id="IO-2"><a href="#IO-2" class="headerlink" title="IO"></a>IO</h4><p>IOä¹Ÿæ˜¯ä¸€ä¸ªå•å­ï¼Œä½†æ˜¯å®ç°æ–¹æ³•æ¯”è¾ƒæ·±å¥¥ï¼ˆé€ƒ</p>
<h4 id="gt-r-2"><a href="#gt-r-2" class="headerlink" title="(-&gt;) r"></a>(-&gt;) r</h4><p>(-&gt;) rä¹Ÿæ˜¯ä¸€ä¸ªå•å­ï¼Œå’ŒFunctorã€Applicativeä¸€æ ·ï¼Œå…ˆåˆ†æå®ƒçš„&gt;&gt;=ç±»å‹ç­¾åï¼š</p>
<p style="text-align: center;">(>>=) :: (-> r) a -> (a -> (-> r) b) -> (-> r) b</p>
<p style="text-align: center;">(>>=) :: (r -> a) -> (a -> r -> b) -> (r -> b)</p>

<p>ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‡½æ•°f :: r -&gt; aã€g :: a -&gt; r -&gt; bï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°h :: r -&gt; b</p>
<p>é‚£ä¹ˆå‡½æ•°hæ¥æ”¶ä¸€ä¸ªç±»å‹ä¸ºrçš„å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç±»å‹ä¸ºbçš„å€¼ã€‚æ‰€ä»¥å…ˆå¯¹è¾“å…¥åº”ç”¨få¾—åˆ°ç±»å‹ä¸ºaçš„ä¸­é—´å€¼ï¼Œç„¶åå†å°†è¿™ä¸ªå€¼å’Œè¾“å…¥å‚æ•°ä¸€èµ·ä¼ å…¥å‡½æ•°gå¾—åˆ°ç»“æœã€‚æ‰€ä»¥å‡½æ•°hçš„å®šä¹‰åº”è¯¥æ˜¯ï¼š</p>
<p style="text-align: center;">\x -> g (f x) x</p>

<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Monad</span> ((-&gt;) r) <span class="keyword">where</span></span></span><br><span class="line">    f &gt;&gt;= g = \x -&gt; g (f x) x</span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; (+<span class="number">3</span>) &gt;&gt;= (+) $ <span class="number">1</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+) &lt;$&gt; (+<span class="number">3</span>) &lt;*&gt; id $ <span class="number">1</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<h3 id="do-notation"><a href="#do-notation" class="headerlink" title="do-notation"></a>do-notation</h3><p>Haskellçš„doè¯­å¥ä¸ºé“¾å¼çš„&gt;&gt;=åº”ç”¨æä¾›äº†ç±»ä¼¼å‘½ä»¤å¼ï¼ˆimperative styleï¼‰çš„è¯­æ³•ç³–ã€‚æ¯”å¦‚<code>a &gt;&gt;= \x -&gt; b &gt;&gt; c &gt;&gt;= \y -&gt; d</code>ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">a</span> &gt;&gt;= \x -&gt;</span><br><span class="line"><span class="title">b</span> &gt;&gt;</span><br><span class="line"><span class="title">c</span> &gt;&gt;= \y -&gt;</span><br><span class="line"><span class="title">d</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æœ‰abcdå››ä¸ªå€¼ï¼Œå¯ä»¥çœ‹å‡ºaä¸­å†…å®¹ç»‘å®šåˆ°äº†xä¸Šï¼Œcä¸­å†…å®¹ç»‘å®šåˆ°äº†yä¸Šã€‚ä½¿ç”¨doè¯­å¥æ¥è¡¨ç¤ºè¿™ä¸ªæ“ä½œå¯ä»¥å†™æˆï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">do</span> &#123; x &lt;- a </span><br><span class="line">   ;      b </span><br><span class="line">   ; y &lt;- c </span><br><span class="line">   ;      d </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„å¤§æ‹¬å·å’Œåˆ†å·å¯ä»¥çœç•¥ä¸å†™ï¼ˆæŒ¤åœ¨ä¸€è¡Œæ—¶ä¸èƒ½çœç•¥ï¼‰ã€‚doè¯­å¥ä¹Ÿåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒå¯ä»¥é€’å½’åœ°è½¬æ¢æˆæ™®é€šçš„Monadæ“ä½œè¯­å¥ï¼š</p>
<ul>
<li><code>do e</code>ï¼še</li>
<li><code>do &#123; e; ... &#125;</code>ï¼še &gt;&gt; do { â€¦ }</li>
<li><code>do &#123; v &lt;- e; ... &#125;</code>ï¼še &gt;&gt;= \v -&gt; do { â€¦ }</li>
<li><code>do &#123; let ...; ... &#125;</code>ï¼šlet â€¦ in do { â€¦ }</li>
</ul>
<h4 id="ApplicativeDo"><a href="#ApplicativeDo" class="headerlink" title="ApplicativeDo"></a>ApplicativeDo</h4><p>æ¯”å¦‚å¦‚ä¸‹ä¸€ä¸ªdoè¯­å¥ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">do</span> x &lt;- a </span><br><span class="line">   y &lt;- b </span><br><span class="line">   z &lt;- c </span><br><span class="line">   return (f x y z)</span><br></pre></td></tr></table></figure>
<p>å®ƒå¯ä»¥è½¬åŒ–æˆï¼š</p>
<p style="text-align: center;">a >>= \x -> b >>= \y -> c >>= \z -> return (f x y z)</p>

<p>ä½†æ˜¯ç»è¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œæ•´ä¸ªè¯­å¥å®é™…ä¸Šå°†å‡½æ•°fåº”ç”¨åœ¨äº†ä¸‰ä¸ªä¸Šä¸‹æ–‡ä¸­çš„å€¼ä¸Šï¼Œæ‰€ä»¥ä»…ç”¨Applicativeçš„&lt;$&gt;å’Œ&lt;*&gt;å®Œå…¨å¯ä»¥å®ç°ï¼š</p>
<p style="text-align: center;">f <$> a <*> b <*> c</*></*></$></p>

<p>è€Œä¸”åœ¨è¿è¡Œçš„æ—¶å€™Applicativeçš„æ•ˆç‡ä¼šæ¯”Monadé«˜ï¼Œæ‰€ä»¥Haskellä¼šå°†doè¯­å¥å°½å¯èƒ½ä¼˜å…ˆè½¬æ¢ä¸ºApplicativeçš„è¡¨ç¤ºæ–¹æ³•ç„¶åå†è®¡ç®—</p>
<h3 id="Monad-Laws"><a href="#Monad-Laws" class="headerlink" title="Monad Laws"></a>Monad Laws</h3><ol>
<li><code>Left identity</code>ï¼š return a &gt;&gt;= k      <code>=</code> k a</li>
<li><code>Right identity</code>ï¼šm        &gt;&gt;= return <code>=</code> m</li>
<li><code>Associativity</code>ï¼š(m &gt;&gt;= g) &gt;&gt;= h      <code>=</code> m &gt;&gt;= (\x -&gt; g x &gt;&gt;= h)</li>
</ol>
<p>å‰ä¸¤ä¸ªå®šå¾‹å¾ˆå¥½ç†è§£ï¼š</p>
<ul>
<li>å°†aæ³¨å…¥ä¸Šä¸‹æ–‡ä¹‹åç»‘å®šï¼ˆbindï¼‰ç»™å‡½æ•°k(:: a -&gt; m a)ï¼Œç›¸å½“äºç›´æ¥å°†aç›´æ¥ä¼ å…¥å‡½æ•°k</li>
<li>å°†å·²ç»åŒ…å«åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å€¼ç»‘å®šç»™returnå‡½æ•°ï¼Œç›¸å½“äºä¿æŒä¸å˜</li>
</ul>
<p>ç¬¬ä¸‰ä¸ªå®šå¾‹æ˜¯ç»“åˆå¾‹ï¼ŒæŠŠå®ƒå†™æˆæ›´åƒç»“åˆå¾‹çš„è¡¨ç¤ºæ–¹æ³•æ˜¯ï¼š</p>
<p style="text-align: center;">(m >>= (\x -> g x)) >>= h <code>=</code> m >>= (\x -> g x >>= h)</p>

<h4 id="ç»„åˆè¿ç®—ç¬¦ï¼ˆ-gt-gt-ï¼‰å½¢å¼"><a href="#ç»„åˆè¿ç®—ç¬¦ï¼ˆ-gt-gt-ï¼‰å½¢å¼" class="headerlink" title="ç»„åˆè¿ç®—ç¬¦ï¼ˆ&gt;=&gt;ï¼‰å½¢å¼"></a>ç»„åˆè¿ç®—ç¬¦ï¼ˆ&gt;=&gt;ï¼‰å½¢å¼</h4><p><code>Control.Monad</code>æ¨¡å—ä¸­è¿˜å®šä¹‰äº†å‡½æ•°<code>&gt;=&gt;</code>ï¼ˆKleisli-composition operatorï¼‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">infixr</span> <span class="number">1</span> &gt;=&gt;</span><br><span class="line">(&gt;=&gt;) :: <span class="type">Monad</span> m =&gt; (a -&gt; m b) -&gt; (b -&gt; m c) -&gt; (a -&gt; m c)</span><br><span class="line"><span class="title">f</span> &gt;=&gt; g = \x -&gt; f x &gt;&gt;= g</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨&gt;=&gt;è¿ç®—ç¬¦å¯ä»¥å°†ä¸¤ä¸ªç”¨äºç»‘å®šçš„å‡½æ•°ç»“åˆåœ¨ä¸€èµ·ã€‚ç”¨å®ƒè¡¨ç¤ºçš„Monadå®šå¾‹æ›´åŠ æ¸…æ™°ç›´è§‚ï¼š</p>
<ol>
<li><code>Left identity</code>ï¼šreturn &gt;=&gt; f <code>=</code> f</li>
<li><code>Right identity</code>ï¼šf &gt;=&gt; return <code>=</code> f</li>
<li><code>Associativity</code>ï¼š(f &gt;=&gt; g) &gt;=&gt; h <code>=</code> f &gt;=&gt; (g &gt;=&gt; h)</li>
</ol>
<h4 id="do-notationå½¢å¼"><a href="#do-notationå½¢å¼" class="headerlink" title="do-notationå½¢å¼"></a>do-notationå½¢å¼</h4><p>Monadçš„è¿™ä¸‰ä¸ªå®šå¾‹è¿˜å¯ä»¥ä½¿ç”¨doè¯­å¥æ¥æè¿°ï¼š</p>
<ol>
<li><code>Left identity</code>ï¼š <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">do</span> &#123; x&#x27; &lt;- return x;</span><br><span class="line">     f x&#x27;             =   <span class="keyword">do</span> &#123; f x &#125; </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
<li><code>Right identity</code>ï¼š <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">do</span> &#123; x &lt;- m; </span><br><span class="line">     return x         =   <span class="keyword">do</span> &#123; m &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
<li><code>Associativity</code>ï¼š <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">do</span> &#123; y &lt;- <span class="keyword">do</span> &#123; x &lt;- m;       <span class="keyword">do</span> &#123; x &lt;- m;              <span class="keyword">do</span> &#123; x &lt;- m;</span><br><span class="line">               f x                <span class="keyword">do</span> &#123; y &lt;- f x;            y &lt;- f x;</span><br><span class="line">             &#125;           =             g y         =        g y</span><br><span class="line">     g y                             &#125;                    &#125;</span><br><span class="line">   &#125;                            &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="Intuition-2"><a href="#Intuition-2" class="headerlink" title="Intuition"></a>Intuition</h3><p>Monadä¹Ÿå¯ä»¥å¾ˆè‡ªç„¶åœ°çœ‹æˆApplicativeçš„å‡çº§ç‰ˆï¼Œæ¯”å¦‚Applicativeçš„æ“ä½œå…¨éƒ¨æ˜¯å›ºå®šçš„ï¼Œè€ŒMonadçš„æ“ä½œå¯ä»¥åœ¨ä¸­é€”çªç„¶æ”¹å˜</p>
<p>åŒæ—¶Monadä¹Ÿå®Œæˆäº†Functorå’ŒApplicativeæ— æ³•å®Œæˆçš„æ“ä½œã€‚æ¯”å¦‚è¦ç”¨fmapå’Œå®ç°&gt;&gt;=å‡½æ•°ï¼ˆå³è¾¾æˆæ“ä½œ m a -&gt; (a -&gt; m b) -&gt; m bï¼‰ï¼Œå…ˆå‡è®¾ f :: a -&gt; m bï¼Œé‚£ä¹ˆfmap fçš„ç±»å‹å°±ä¼šæ˜¯ m a -&gt; m (m b)ï¼Œå°†m aåº”ç”¨åœ¨fmap fä¸Šä¼šå¾—åˆ°ç»“æœm (m b)ï¼Œè€Œä¸æ˜¯m bã€‚ä½†æ˜¯ç›®å‰åªå¯ä»¥ä½¿ç”¨pureå°†ä¸€ä¸ªå€¼è£…å…¥ä¸Šä¸‹æ–‡ä¸­ï¼ˆa -&gt; m aï¼‰ï¼Œè€Œæ²¡æœ‰ä¸€ä¸ªå‡½æ•°å¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æå–å€¼ï¼ˆm a -&gt; aï¼‰ã€‚é‚£ä¹ˆå°±éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„å‡½æ•°æ¥å®ç°è¿™ä¸ªæ“ä½œçš„æ•ˆæœï¼ˆm (m b) -&gt; m bï¼‰ã€‚å› æ­¤Monadçš„å¦ä¸€ä¸ªç­‰æ•ˆçš„å®šä¹‰æ–¹æ³•æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Applicative</span> m =&gt; <span class="type">Monad&#x27;</span> m <span class="keyword">where</span></span></span><br><span class="line">    join :: m (m a) -&gt; m a </span><br><span class="line">    </span><br><span class="line">    (&gt;&gt;=) :: m a -&gt; (a -&gt; m b) -&gt; m b </span><br><span class="line">    x &gt;&gt;= f = join $ fmap f x</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å®šä¹‰&gt;&gt;=å‡½æ•°ä¼šæ›´ä¸ºç›´è§‚æ–¹ä¾¿ï¼Œæ‰€ä»¥Haskellé‡‡ç”¨äº†ç”¨&gt;&gt;=å‡½æ•°å®šä¹‰Monadçš„æ–¹æ³•</p>
<p>åŒæ—¶Haskellè¿˜æä¾›äº†joinå‡½æ•°çš„å®šä¹‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">join</span> :: <span class="type">Monad</span> m =&gt; m (m a) -&gt; m a </span><br><span class="line"><span class="title">join</span> x = x &gt;&gt;= id</span><br></pre></td></tr></table></figure>

<h3 id="å¸¸ç”¨å‡½æ•°-2"><a href="#å¸¸ç”¨å‡½æ•°-2" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h3><h4 id="liftM-amp-ap"><a href="#liftM-amp-ap" class="headerlink" title="liftM &amp; ap"></a>liftM &amp; ap</h4><p style="text-align: center;">liftM :: Monad m => (a -> b) -> m a -> m b</p>
<p style="text-align: center;">ap :: Monad m => m (a -> b) -> m a -> m b</p>

<p>æ‰€ä»¥liftMå…¶å®å°±æ˜¯fmapã€apå°±æ˜¯&lt;*&gt;ï¼Œä½†æ˜¯è€ç‰ˆæœ¬çš„GHCå®šä¹‰Monadå¹¶æ²¡æœ‰Functorã€Applicativeçš„çº¦æŸï¼Œæ‰€ä»¥å®ç°äº†liftMã€apï¼Œå¹¶ä¸”ä¿ç•™äº†è¿™ä¸ªåå­—</p>
<p>å› æ­¤ä¸€ä¸ªå•å­ä¹Ÿå¯ä»¥é€šè¿‡<code>pure = return</code>ã€<code>(&lt;*&gt;) = ap</code>ç›´æ¥æˆä¸ºåº”ç”¨å‡½å­çš„å®ä¾‹</p>
<h4 id="sequence"><a href="#sequence" class="headerlink" title="sequence"></a>sequence</h4><p style="text-align: center;">sequence :: Monad m => [m a] -> m [a]</p>

<p>sequenceçš„ä½œç”¨æ˜¾è€Œæ˜“è§ï¼Œè€Œä¸”åœ¨IOéƒ¨åˆ†ä¹Ÿä½¿ç”¨åˆ°äº†ã€‚ä½†æ˜¯è¿™ä¸ªç‰ˆæœ¬æ˜¯åœ¨<code>GHC.Base</code>æ¨¡å—ä¸­å®šä¹‰çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´å¹¿æ³›çš„ä½¿ç”¨Traversableçš„å®šä¹‰åœ¨<code>Data.Traversable</code>æ¨¡å—ä¸­ </p>
<h4 id="replicateM"><a href="#replicateM" class="headerlink" title="replicateM"></a>replicateM</h4><p style="text-align: center;">replicateM :: Applicative m => Int -> m a -> m [a]</p>

<h4 id="mapM-amp-forM"><a href="#mapM-amp-forM" class="headerlink" title="mapM &amp; forM"></a>mapM &amp; forM</h4><p style="text-align: center;">mapM :: Monad m => (a -> m b) -> [a] -> m [b]</p>
<p style="text-align: center;">forM :: Monad m => [a] -> (a -> m b) -> m [b]</p>

<p>forMçš„ç”¨æ³•åœ¨IOéƒ¨åˆ†å·²ç»è¯´è¿‡ï¼ŒmapMå’ŒforMéƒ½åœ¨<code>Data.Traversable</code>æ¨¡å—ä¸­æœ‰å¹¿æ³›ç‰ˆæœ¬</p>
<p>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å‡½æ•°ï¼šfilterMã€zipWithMã€foldMã€foreverï¼Œé€šè¿‡åå­—å°±å¯ä»¥çœ‹å‡ºç”¨æ³•ï¼Œæ˜¯å°†åŸæ¥ä»…ä½¿ç”¨ä¸åˆ—è¡¨çš„å‡½æ•°æå‡è‡³å¯ä»¥é€‚ç”¨äºæ‰€æœ‰å•å­</p>
<p>å¹¶ä¸”åœ¨å‡½æ•°åååŠ ä¸‹åˆ’çº¿ï¼Œæ¯”å¦‚sequence_ã€mapM_ï¼Œä¼šå¿½ç•¥è¿”å›å€¼ï¼ˆæœ€ç»ˆç»“æœä¸º<code>m ()</code>ï¼‰</p>
<h4 id="lt-lt-amp-gt-gt-amp-lt-lt"><a href="#lt-lt-amp-gt-gt-amp-lt-lt" class="headerlink" title="=&lt;&lt; &amp; &gt;=&gt; &amp; &lt;=&lt;"></a>=&lt;&lt; &amp; &gt;=&gt; &amp; &lt;=&lt;</h4><p>ï¼ˆ<code>&gt;=&gt;</code>æ“ä½œç¬¦åœ¨ä¸Šé¢<a href="#%E7%BB%84%E5%90%88%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%88-gt-gt-%EF%BC%89%E5%BD%A2%E5%BC%8F">Monad Laws</a>éƒ¨åˆ†å·²ç»ç»™å‡ºäº†å®šä¹‰ï¼‰</p>
<ul>
<li>x &gt;&gt;= f <code>=</code> f =&lt;&lt; x </li>
<li>f &gt;=&gt; g <code>=</code> g &lt;=&lt; f </li>
</ul>
<h2 id="MonadFail"><a href="#MonadFail" class="headerlink" title="MonadFail"></a>MonadFail</h2><p>MonadFailå®šä¹‰åœ¨<code>Control.Monad.Fail</code>æ¨¡å—ä¸­ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Monad</span> m =&gt; <span class="type">MonadFail</span> m <span class="keyword">where</span></span></span><br><span class="line">    fail :: <span class="type">String</span> -&gt; m a </span><br></pre></td></tr></table></figure>
<p>å®ƒåªè¦æ±‚åœ¨Monadçš„åŸºç¡€ä¸Šå®ç°failå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›ä¸€ä¸ªå•å­ã€‚è¿™ä¼šä½¿åœ¨doè¯­å¥ä¸­äº§ç”Ÿé”™è¯¯æ—¶ç›´æ¥å˜ä¸ºé”™è¯¯å€¼ï¼ˆç©ºå€¼ï¼‰ä½¿æœ€ç»ˆçš„è¿”å›å€¼ä¸ºé”™è¯¯å€¼</p>
<h3 id="MonadFailå®ä¾‹"><a href="#MonadFailå®ä¾‹" class="headerlink" title="MonadFailå®ä¾‹"></a>MonadFailå®ä¾‹</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">MonadFail</span> <span class="type">Maybe</span> <span class="keyword">where</span></span></span><br><span class="line">    fail _ = <span class="type">Nothing</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">MonadFail</span> [] <span class="keyword">where</span></span></span><br><span class="line">    fail _ = []</span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">MonadFail</span> <span class="type">IO</span> <span class="keyword">where</span></span></span><br><span class="line">    fail = failIO</span><br></pre></td></tr></table></figure>
<p>Maybeå’Œ[]çš„failå‡½æ•°éƒ½ä¸ç¬¬ä¸€ä¸ªå‚æ•°æ— å…³ï¼Œç›´æ¥è¿”å›ç©ºå€¼ï¼ˆNothingã€[]ï¼‰ï¼›è€ŒIOçš„failå‡½æ•°ç›´æ¥ä½¿ç”¨failIOï¼Œå®ç°æ–¹æ³•ä¹Ÿæ˜¯æ·±å¥¥ï¼ˆæ¥ç€é€ƒ</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">exampleFail</span> :: <span class="type">Maybe</span> <span class="type">Char</span> </span><br><span class="line"><span class="title">exampleFail</span> = <span class="keyword">do</span></span><br><span class="line">    (x:xs) &lt;- <span class="type">Just</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    return x </span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; exampleFail</span><br><span class="line"><span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­çš„doè¯­å¥ä¸­ï¼Œåœ¨æå–Just â€œâ€ä¸­çš„å€¼æ—¶ç”¨äº†æ¨¡å¼åŒ¹é…ï¼Œä½†æ˜¯å› ä¸ºå…¶å†…å®¹ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œx:xsåŒ¹é…ä¼šå‡ºç°é”™è¯¯ï¼Œè¿™æ—¶å°±ä¼šè§¦å‘failå‡½æ•°ç›´æ¥è¿”å›Nothing</p>
<h3 id="MonadFail-Law"><a href="#MonadFail-Law" class="headerlink" title="MonadFail Law"></a>MonadFail Law</h3><ul>
<li>fail s &gt;&gt;= m <code>=</code> fail s </li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://learnyouahaskell.com/chapters">Learn You a Haskell</a></li>
<li><a href="https://wiki.haskell.org/Typeclassopedia">Typeclassopedia - Haskell wiki</a></li>
<li><a href="https://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html">Functors, Applicatives, And Monads In Pictures</a></li>
<li><a href="http://02s949.coding-pages.com/2018/08/15/haskellc/">Haskellå­¦ä¹  - functor</a></li>
</ul>
<hr>
<div style="text-align: center;">

<p style="font-size: 1.3rem; font-weight: bold;">ç›®å½•</p>

<p>#0&nbsp;|&nbsp;<a href="/p/b3ca5c18.html">æ€»ç« </a>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<br>#1&nbsp;|&nbsp;<a href="/p/d63b5b5f.html">åŸºç¡€è¯­æ³•ä¸å‡½æ•°</a>&emsp;&emsp;&emsp;<br>#2&nbsp;|&nbsp;<a href="/p/53e482b7.html">é«˜é˜¶å‡½æ•°ä¸æ¨¡å—</a>&emsp;&emsp;&emsp;<br>#3&nbsp;|&nbsp;<a href="/p/369b7e08.html">ç±»å‹ä¸ç±»å‹ç±»</a>&emsp;&emsp;&emsp;&emsp;<br>#4&nbsp;|&nbsp;<a href="/p/a5bbe48a.html">è¾“å…¥è¾“å‡ºä¸æ–‡ä»¶</a>&emsp;&emsp;&emsp;<br>#5&nbsp;|&nbsp;<a href="/p/290ecb74.html">å‡½å­ã€åº”ç”¨å‡½å­ä¸å•å­</a><br>#6&nbsp;|&nbsp;<a href="/p/d4bb2633.html">åŠç¾¤ä¸å¹ºåŠç¾¤</a>&emsp;&emsp;&emsp;&emsp;<br>#7&nbsp;|&nbsp;<a href="/p/68ef8146.html">ä¸€äº›å…¶å®ƒç±»å‹ç±»</a>&emsp;&emsp;&emsp;<br>#A&nbsp;|&nbsp;<a href="/p/96c32eae.html">Haskellä¸èŒƒç•´è®º</a>&emsp;&nbsp;&thinsp;</p>
</div>]]></content>
      <tags>
        <tag>Haskell</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLearn Haskellã€#4 è¾“å…¥è¾“å‡ºä¸æ–‡ä»¶</title>
    <url>/p/a5bbe48a.html</url>
    <content><![CDATA[<div style="display: flex; justify-content: space-between;">

<p><a href="/p/369b7e08.html">&lt; #3</a></p>
<p><a href="/p/290ecb74.html">#5 &gt;</a></p>
</div>

<h2 id="Input-Output"><a href="#Input-Output" class="headerlink" title="Input/Output"></a>Input/Output</h2><h3 id="è¿è¡ŒHaskellç¨‹åº"><a href="#è¿è¡ŒHaskellç¨‹åº" class="headerlink" title="è¿è¡ŒHaskellç¨‹åº"></a>è¿è¡ŒHaskellç¨‹åº</h3><p>ä¸åœ¨GHCiä¸­è¿è¡Œä¸€ä¸ªHaskellç¨‹åºæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<span id="more"></span>
<ol>
<li>ç¼–è¯‘è¿è¡Œï¼š <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ ghc --make code</span><br><span class="line">$ ./code</span><br></pre></td></tr></table></figure></li>
<li>é€šè¿‡<code>runhaskell</code>å‘½ä»¤ç›´æ¥è¿è¡Œï¼š <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ runhaskell code.hs</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="è¾“å‡ºæ–‡æœ¬"><a href="#è¾“å‡ºæ–‡æœ¬" class="headerlink" title="è¾“å‡ºæ–‡æœ¬"></a>è¾“å‡ºæ–‡æœ¬</h3><p>åœ¨ä¸€ä¸ªHaskellç¨‹åºä¸­è¾“å‡ºæ–‡å­—éœ€è¦å®šä¹‰ä¸€ä¸ªmainå‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = putStrLn <span class="string">&quot;Hello World&quot;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­putStrLnçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">putStrLn :: String -> IO ()</p>

<p>putStrLnæ¥æ”¶ä¸€ä¸ªStringç±»å‹ï¼Œå¹¶è¿”å›ä¸€ä¸ªç»“æœä¸º()ç±»å‹çš„IOåŠ¨ä½œï¼ˆI/O actionï¼‰ã€‚æ‰€ä»¥mainå‡½æ•°çš„ç±»å‹ä¸ºIO ()ã€‚ï¼ˆIOçš„Kindæ˜¯* -&gt; *ï¼‰</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–é»˜è®¤æä¾›çš„è¾“å‡ºæ–‡æœ¬çš„å‡½æ•°ï¼š</p>
<ul>
<li><code>putStr</code>ï¼šè¾“å‡ºæ–‡æœ¬ï¼Œç»“å°¾ä¸æ¢è¡Œ</li>
<li><code>putChar</code>ï¼šè¾“å‡ºå•ä¸ªå­—ç¬¦ï¼Œç»“å°¾ä¸æ¢è¡Œã€‚æ¥æ”¶çš„å‚æ•°ä¸ºå•ä¸ªCharï¼Œä¸æ˜¯Stringï¼ˆç”¨å•å¼•å·ä¸æ˜¯åŒå¼•å·ï¼‰</li>
<li><code>print</code>ï¼šå¯ä»¥æ¥æ”¶ä»»ä½•Showçš„æˆå‘˜ï¼Œå…ˆç”¨showè½¬åŒ–ä¸ºå­—ç¬¦ä¸²ç„¶åè¾“å‡ºã€‚ç­‰åŒäºputStrLn . show</li>
</ul>
<h4 id="do-block"><a href="#do-block" class="headerlink" title="do block"></a>do block</h4><p>åœ¨mainå‡½æ•°ä¸­ä½¿ç”¨å¤šä¸ªputStrLnéœ€è¦ä½¿ç”¨doè¯­å¥ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    putStrLn <span class="string">&quot;Line1&quot;</span></span><br><span class="line">    putStrLn <span class="string">&quot;Line2&quot;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æœ€åä¸€è¡Œä¸€å®šè¦è¿”å›IO ()ç±»å‹çš„å€¼</p>
<h3 id="è¾“å…¥æ–‡æœ¬"><a href="#è¾“å…¥æ–‡æœ¬" class="headerlink" title="è¾“å…¥æ–‡æœ¬"></a>è¾“å…¥æ–‡æœ¬</h3><p>è¾“å…¥æ–‡å­—éœ€è¦åœ¨doå—ä¸­ä½¿ç”¨getLineï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    line &lt;- getLine</span><br><span class="line">    putStrLn line</span><br></pre></td></tr></table></figure>
<p>getLineçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">getLine :: IO String</p>

<p>è€Œ&lt;-æ“ä½œç¬¦å°†getLineä¸­çš„Stringæå–äº†å‡ºæ¥ç»™åˆ°äº†lineï¼Œä½¿lineå˜æˆäº†Stringç±»å‹çš„ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>è€Œä¸”ä½¿ç”¨è¾“å…¥çš„å­—ç¬¦ä¸²å¿…é¡»è¦ç»è¿‡ä¸€æ¬¡&lt;-ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨getLineä½œä¸ºå­—ç¬¦ä¸²ï¼Œå› ä¸ºgetLineä¸æ˜¯Stringç±»å‹ï¼Œè€Œæ˜¯IO Stringç±»å‹ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨getCharæ¥è·å–å•ä¸ªå­—ç¬¦ï¼Œä½†ä»ç„¶éœ€è¦ä½¿ç”¨&lt;-æ“ä½œç¬¦æ¥æå–Char</p>
<h3 id="å…¶ä»–IOç›¸å…³å‡½æ•°ç”¨æ³•"><a href="#å…¶ä»–IOç›¸å…³å‡½æ•°ç”¨æ³•" class="headerlink" title="å…¶ä»–IOç›¸å…³å‡½æ•°ç”¨æ³•"></a>å…¶ä»–IOç›¸å…³å‡½æ•°ç”¨æ³•</h3><h4 id="return"><a href="#return" class="headerlink" title="return"></a>return</h4><p>Haskellä¸­çš„returnå’Œå…¶ä»–å‘½ä»¤å¼è¯­è¨€ä¸­çš„returnå®Œå…¨ä¸åŒï¼Œå®ƒä¸ä¼šä½¿å‡½æ•°ç›´æ¥ç»“æŸå¹¶è¿”å›ä¸€ä¸ªå€¼ã€‚</p>
<p>mainå‡½æ•°å¿…é¡»å®šä¹‰ä¸ºç±»å‹ä¸ºIO ()çš„å‡½æ•°ï¼Œæ‰€ä»¥åœ¨mainå‡½æ•°ä¸­ä½¿ç”¨ifè¯­å¥ï¼Œå¦‚æœä¸è¾“å‡ºçš„è¯ä¹Ÿä¸å¯ä»¥ç›´æ¥æ”¾ä¸‹ä»€ä¹ˆéƒ½ä¸å¹²ï¼Œå› ä¸ºè¿™æ—¶å€™mainå‡½æ•°çš„ç±»å‹ä¸æ˜¯IO ()ã€‚æ‰€ä»¥è¿™æ—¶éœ€è¦ä½¿ç”¨return ()æ¥ä¸ºmainå‡½æ•°æŒ‡å®šä¸ºIO ()ç±»å‹ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = <span class="keyword">do</span> </span><br><span class="line">    line &lt;- getLine</span><br><span class="line">    <span class="keyword">if</span> null line</span><br><span class="line">        <span class="keyword">then</span> return () <span class="comment">-- &lt;-è¿™é‡Œ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">do</span></span><br><span class="line">            ...</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨&lt;-æ“ä½œç¬¦ä¹Ÿå¯ä»¥ç›´æ¥å°†returnè¯­å¥ä¸­çš„å†…å®¹æå–å‡ºæ¥ï¼Œæ¯”å¦‚a &lt;- return â€˜Aâ€™ï¼Œæ‰§è¡Œåaå°±æ˜¯â€™Aâ€™ã€‚</p>
<h4 id="when"><a href="#when" class="headerlink" title="when"></a>when</h4><p>whenåŒ…å«åœ¨<code>Control.Monad</code>æ¨¡å—ä¸­ï¼Œå®ƒè¡¨ç¤ºåœ¨æ»¡è¶³ç¬¬ä¸€ä¸ªå‚æ•°çš„æ¡ä»¶ä¸‹ä¼šæ‰§è¡Œç¬¬äºŒä¸ªå‡½æ•°ï¼Œå¦åˆ™ä¼šreturn ()ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Control.Monad   </span><br><span class="line">  </span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span>  </span><br><span class="line">    c &lt;- getChar  </span><br><span class="line">    when (c /= &#x27; &#x27;) $ <span class="keyword">do</span>  </span><br><span class="line">        putChar c  </span><br><span class="line">        main  </span><br></pre></td></tr></table></figure>
<p>ç­‰åŒäºï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = <span class="keyword">do</span>     </span><br><span class="line">    c &lt;- getChar  </span><br><span class="line">    <span class="keyword">if</span> c /= &#x27; &#x27;  </span><br><span class="line">        <span class="keyword">then</span> <span class="keyword">do</span>  </span><br><span class="line">            putChar c  </span><br><span class="line">            main  </span><br><span class="line">        <span class="keyword">else</span> return () </span><br></pre></td></tr></table></figure>

<h4 id="sequence"><a href="#sequence" class="headerlink" title="sequence"></a>sequence</h4><p>sequenceåœ¨IOä¸­ä½¿ç”¨æ—¶å¯ä»¥è¾¾æˆ[IO a] -&gt; IO [a]çš„æ•ˆæœï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä½œï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">[a, b, c] &lt;- sequence [getLine, getLine, getLine]</span><br></pre></td></tr></table></figure>

<h4 id="mapM-amp-mapM"><a href="#mapM-amp-mapM" class="headerlink" title="mapM &amp; mapM_"></a>mapM &amp; mapM_</h4><p>åœ¨IOç›¸å…³çš„åœ°æ–¹ä½¿ç”¨mapï¼Œå¯ä»¥ä½¿ç”¨mapMå’ŒmapM_ï¼Œå…¶ä¸­mapMæœ‰è¿”å›å€¼è€ŒmapM_ç›´æ¥æ‰”æ‰äº†è¿”å›å€¼ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; mapM print [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]  </span><br><span class="line"><span class="number">1</span>  </span><br><span class="line"><span class="number">2</span>  </span><br><span class="line"><span class="number">3</span>  </span><br><span class="line">[(),(),()]  </span><br><span class="line"><span class="title">ghci</span>&gt; mapM_ print [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]  </span><br><span class="line"><span class="number">1</span>  </span><br><span class="line"><span class="number">2</span>  </span><br><span class="line"><span class="number">3</span>  </span><br></pre></td></tr></table></figure>

<h4 id="forever"><a href="#forever" class="headerlink" title="forever"></a>forever</h4><p>foreverå‡½æ•°åŒ…å«åœ¨<code>Control.Monad</code>æ¨¡å—ä¸­ã€‚åœ¨mainå‡½æ•°å¼€å¤´åŠ ä¸Šforeverå‡½æ•°å¯ä»¥ä½¿åé¢çš„doå—ä¸€ç›´é‡å¤æ‰§è¡Œç›´åˆ°ç¨‹åºè¢«è¿«ç»ˆæ­¢ï¼Œå¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Control.Monad</span><br><span class="line">  </span><br><span class="line"><span class="title">main</span> = forever $ <span class="keyword">do</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<h4 id="forM"><a href="#forM" class="headerlink" title="forM"></a>forM</h4><p>forMå‡½æ•°åŒ…å«åœ¨<code>Control.Monad</code>æ¨¡å—ä¸­ï¼Œå®ƒçš„åŠŸèƒ½å’ŒmapMç±»ä¼¼ï¼Œä»ç¬¬ä¸€ä¸ªå‚æ•°ä¸­é€ä¸ªå–å‡ºå…ƒç´ ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼ˆä¸€ä¸ªæ¥æ”¶ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼‰ä¸­ï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥è¿”å›IO aç±»å‹ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Control.Monad</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span> </span><br><span class="line">    colors &lt;- forM [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>] (\a -&gt; <span class="keyword">do</span></span><br><span class="line">        putStrLn $ <span class="string">&quot;Which color do you associate with the number &quot;</span> ++ show a ++ <span class="string">&quot;?&quot;</span>  </span><br><span class="line">        color &lt;- getLine  </span><br><span class="line">        return color)</span><br><span class="line">    putStrLn <span class="string">&quot;The colors that you associate with 1, 2, 3 and 4 are: &quot;</span>  </span><br><span class="line">    mapM putStrLn colors</span><br></pre></td></tr></table></figure>

<h4 id="getContents"><a href="#getContents" class="headerlink" title="getContents"></a>getContents</h4><p>getLineè·å–ä¸€æ•´è¡Œï¼Œè€ŒgetContentsä»æ ‡å‡†è¾“å…¥ä¸­è·å–å…¨éƒ¨å†…å®¹ç›´åˆ°é‡åˆ°EOFï¼Œå¹¶ä¸”å®ƒæ˜¯lazyçš„ï¼Œåœ¨æ‰§è¡Œäº†foo &lt;- getContentsåï¼Œå®ƒå¹¶ä¸ä¼šè¯»å–æ ‡å‡†è¾“å…¥å¹¶ä¸”èµ‹å€¼åˆ°fooï¼Œè€Œæ˜¯ç­‰åˆ°éœ€è¦ä½¿ç”¨fooçš„æ—¶å€™å†ä»æ ‡å‡†è¾“å…¥è¯»å–ã€‚</p>
<p>getContentsåœ¨ä½¿ç”¨ç®¡é“ä¼ å…¥æ–‡å­—æ—¶å¾ˆå¸¸ç”¨ï¼Œå¯ä»¥ä»£æ›¿forever+getLineä½¿ç”¨ï¼Œæ¯”å¦‚ä¸€ä¸ªHaskellç¨‹åºæ–‡ä»¶code.hsï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Data.Char  </span><br><span class="line">  </span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span>  </span><br><span class="line">    contents &lt;- getContents  </span><br><span class="line">    putStr (map toUpper contents)  </span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ghc â€“make codeç¼–è¯‘åï¼Œé€šè¿‡ç®¡é“ä¼ å…¥æ–‡å­—ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">cat text.txt | ./code</span><br></pre></td></tr></table></figure>
<p>ä¼šå°†text.txtä¸­çš„æ‰€æœ‰å­—æ¯è½¬ä¸ºå¤§å†™å¹¶è¾“å‡º</p>
<h4 id="interact"><a href="#interact" class="headerlink" title="interact"></a>interact</h4><p>ä¸Šè¿°åŠŸèƒ½è¿˜å¯ä»¥è½¬åŒ–ä¸ºä¸€ä¸ªString -&gt; Stringçš„å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">upperStrings</span> = unlines . map (map toUpper) . lines</span><br></pre></td></tr></table></figure>
<p>è€Œåœ¨mainä¸­ä½¿ç”¨è¿™ä¸ªå‡½æ•°å°±éœ€è¦ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    contents &lt;- getContents</span><br><span class="line">    putStr (upperStrings contents)</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯String -&gt; Stringç±»å‹çš„å‡½æ•°åœ¨è¾“å…¥è¾“å‡ºä¸­çš„ä½¿ç”¨å¤ªå¸¸è§äº†ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨interactå‡½æ•°æ¥ç®€åŒ–ã€‚interactçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">interact :: (String -> String) -> IO ()</p>

<p>å¯ä»¥çœ‹å‡ºå®ƒæ¥æ”¶ä¸€ä¸ªString -&gt; Stringçš„å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªIO ()ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨åœ¨mainä¸Šã€‚</p>
<p>äºæ˜¯æ•´ä¸ªè½¬æ¢ä¸ºå¤§å†™çš„ç¨‹åºå°±å¯ä»¥ç®€åŒ–ä¸ºï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">main</span> = interact $ unlines . map (map toUpper) . lines</span><br></pre></td></tr></table></figure>

<h2 id="æ–‡ä»¶å’Œæµ"><a href="#æ–‡ä»¶å’Œæµ" class="headerlink" title="æ–‡ä»¶å’Œæµ"></a>æ–‡ä»¶å’Œæµ</h2><p>ä»¥ä¸‹ä¸æ–‡ä»¶å’Œæµç›¸å…³çš„å‡½æ•°éƒ½åŒ…å«åœ¨<code>System.IO</code>æ¨¡å—ä¸­</p>
<h3 id="openFile"><a href="#openFile" class="headerlink" title="openFile"></a>openFile</h3><p>openFileå‡½æ•°å¯ä»¥ç”¨æ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">openFile :: FilePath -> IOMode -> IO Handle</p>

<p>å…¶ä¸­<code>FilePath</code>æ˜¯Stringçš„type synonymsï¼Œç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ¥è¡¨ç¤ºéœ€è¦æ‰“å¼€çš„æ–‡ä»¶çš„è·¯å¾„</p>
<p><code>IOMode</code>çš„å®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">IOMode</span> = <span class="type">ReadMode</span> | <span class="type">WriteMode</span> | <span class="type">AppendMode</span> | <span class="type">ReadWriteMode</span></span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥å®ƒä¸€å…±åªæœ‰å››ä¸ªå€¼ï¼Œç”¨æ¥è¡¨ç¤ºè¿›è¡ŒIOæ“ä½œçš„æ¨¡å¼</p>
<p>openFileè¿”å›ä¸€ä¸ªIO Handleç±»å‹çš„å€¼ï¼Œå°†å…¶ç”¨&lt;-æ“ä½œç¬¦æå–åä¼šå‡ºç°ä¸€ä¸ªHandleçš„å€¼ã€‚ä½†ä¸èƒ½ä»Handleä¸­ç›´æ¥ä½¿ç”¨æ–‡å­—ï¼Œè¿˜éœ€è¦ä½¿ç”¨ä¸€ç³»åˆ—å‡½æ•°ï¼š</p>
<ul>
<li><code>hGetContents</code> :: Handle -&gt; IO String ï¼Œä»Handleä¸­è¯»å–å…¨éƒ¨å†…å®¹ï¼Œè¿”å›ä¸€ä¸ªIO String</li>
<li><code>hGetChar</code> :: Handle -&gt; IO Char ï¼Œä»Handleä¸­è¯»å–ä¸€ä¸ªå­—ç¬¦</li>
<li><code>hGetLine</code> :: Handle -&gt; IO String ï¼Œä»Handleä¸­è¯»å–ä¸€è¡Œï¼Œè¿”å›ä¸€ä¸ªIO String</li>
<li><code>hPutStr</code> :: Handle -&gt; String -&gt; IO () ï¼Œå‘Handleä¸­è¾“å‡ºå­—ç¬¦ä¸²</li>
<li><code>hPutStrLn</code> :: Handle -&gt; String -&gt; IO () ï¼ŒåŒä¸Š</li>
</ul>
<p>åœ¨ä½¿ç”¨openFileè¿›è¡Œæ–‡ä»¶æ“ä½œåï¼Œéœ€è¦ä½¿ç”¨hCloseæ‰‹åŠ¨å…³é—­Handleã€‚hClose :: Handle -&gt; IO ()ï¼Œæ¥æ”¶ä¸€ä¸ªHandleå¹¶è¿”å›IO ()ï¼Œå¯ä»¥ç›´æ¥æ”¾åœ¨mainå‡½æ•°æœ«å°¾</p>
<p>æ‰€ä»¥ä½¿ç”¨openFileè¯»å–ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å…¨éƒ¨å†…å®¹å¹¶è¾“å‡ºçš„å…¨éƒ¨ä»£ç æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> System.IO</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    handle &lt;- openFile <span class="string">&quot;text.txt&quot;</span> <span class="type">ReadMode</span></span><br><span class="line">    contents &lt;- hGetContents handle</span><br><span class="line">    putStrLn contents</span><br><span class="line">    hClose handle</span><br></pre></td></tr></table></figure>

<h3 id="withFile"><a href="#withFile" class="headerlink" title="withFile"></a>withFile</h3><p>withFileç±»ä¼¼Pythonä¸­çš„with openï¼Œå®ƒåœ¨è¯»å–æ–‡ä»¶ä½¿ç”¨ä¹‹åä¸éœ€è¦æ‰‹åŠ¨closeæ–‡ä»¶ã€‚å®ƒçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">withFile :: FilePath -> IOMode -> (Handle -> IO a) -> IO a</p>

<p>å¯ä»¥çœ‹å‡ºï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>FilePath</code>ï¼šä¸€ä¸ªè¡¨ç¤ºæ–‡ä»¶è·¯å¾„çš„String</li>
<li><code>IOMode</code>ï¼šæ‰“å¼€æ–‡ä»¶çš„æ¨¡å¼</li>
<li><code>(Handle -&gt; IO a)</code>ï¼šä¸€ä¸ªå‡½æ•°ï¼Œè¡¨ç¤ºå¯¹è¯»å–æ–‡ä»¶åçš„Handleç´¢è¦è¿›è¡Œçš„æ“ä½œï¼Œéœ€è¦è¿”å›ä¸€ä¸ªI/O actionï¼›è€Œè¿™ä¸ªè¿”å›å€¼ä¹Ÿå°†ä½œä¸ºwithFileçš„è¿”å›å€¼</li>
</ul>
<p>ç°åœ¨ä½¿ç”¨withFileæ¥æ”¹å†™ä¸Šè¿°ä»£ç ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> System.IO</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = withFile <span class="string">&quot;text.txt&quot;</span> <span class="type">ReadMode</span> (\handle -&gt; <span class="keyword">do</span></span><br><span class="line">    contents &lt;- hGetContents handle</span><br><span class="line">    putStrLn contents)</span><br></pre></td></tr></table></figure>

<p>withFileçš„åŠŸèƒ½ç›¸å½“äºä»¥ä¸‹å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">withFile&#x27;</span> :: <span class="type">FilePath</span> -&gt; <span class="type">IOMode</span> -&gt; (<span class="type">Handle</span> -&gt; <span class="type">IO</span> a) -&gt; <span class="type">IO</span> a  </span><br><span class="line"><span class="title">withFile&#x27;</span> path mode f = <span class="keyword">do</span>  </span><br><span class="line">    handle &lt;- openFile path mode   </span><br><span class="line">    result &lt;- f handle  </span><br><span class="line">    hClose handle  </span><br><span class="line">    return result  </span><br></pre></td></tr></table></figure>

<h3 id="readFile"><a href="#readFile" class="headerlink" title="readFile"></a>readFile</h3><p>readFileå¯ä»¥æ›´åŠ ç®€åŒ–è¯»å–æ–‡ä»¶å†…å®¹çš„æ“ä½œï¼Œå®ƒçš„ç±»å‹ï¼š</p>
<p style="text-align: center;">readFile :: FilePath -> IO String</p>

<p>å®ƒåªéœ€è¦è¾“å…¥ä¸€ä¸ªè¡¨ç¤ºæ–‡ä»¶è·¯å¾„çš„å­—ç¬¦ä¸²ï¼Œè¿”å›å…¶ä¸­ä»¥å…¶ä¸­å†…å®¹ä¸ºå†…å®¹çš„I/O actionï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> System.IO</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    contents &lt;- readFile <span class="string">&quot;text.txt&quot;</span></span><br><span class="line">    putStrLn contents</span><br></pre></td></tr></table></figure>

<h3 id="writeFile"><a href="#writeFile" class="headerlink" title="writeFile"></a>writeFile</h3><p>writeFileç®€åŒ–äº†å†™å…¥æ–‡ä»¶çš„æ“ä½œï¼Œå®ƒçš„ç±»å‹ï¼š</p>
<p style="text-align: center;">writeFile :: FilePath -> String -> IO ()</p>

<p>ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦å†™å…¥çš„æ–‡ä»¶çš„è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦å†™å…¥çš„å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªIO ()</p>
<h3 id="appendFile"><a href="#appendFile" class="headerlink" title="appendFile"></a>appendFile</h3><p>appendFileç±»ä¼¼writeFileï¼Œä½†ä½¿ç”¨å®ƒä¸ä¼šè¦†ç›–æ–‡ä»¶ä¸­åŸæ¥å†…å®¹ï¼Œè€Œæ˜¯ç›´æ¥æŠŠå­—ç¬¦ä¸²æ·»åŠ åˆ°æ–‡ä»¶æœ«å°¾</p>
<h3 id="buffer"><a href="#buffer" class="headerlink" title="buffer"></a>buffer</h3><p>æ–‡ä»¶ä»¥æµçš„å½¢å¼è¢«è¯»å–ï¼Œé»˜è®¤æ–‡å­—æ–‡ä»¶çš„ç¼“å†²åŒºï¼ˆbufferï¼‰å¤§å°æ˜¯ä¸€è¡Œï¼Œå³æ¯æ¬¡è¯»å–ä¸€è¡Œå†…å®¹ï¼›é»˜è®¤äºŒè¿›åˆ¶æ–‡ä»¶çš„ç¼“å†²åŒºå¤§å°æ˜¯ä»¥å—ä¸ºå•ä½ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™æ ¹æ®ç³»ç»Ÿé»˜è®¤æ¥é€‰æ‹©ã€‚</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡<code>hSetBuffering</code>å‡½æ•°æ¥æ‰‹åŠ¨è®¾ç½®ç¼“å†²åŒºå¤§å°ï¼Œè¿™ä¸ªå‡½æ•°çš„ç±»å‹ï¼š</p>
<p style="text-align: center;">hSetBuffering :: Handle -> BufferMode -> IO ()</p>

<p>å®ƒæ¥æ”¶ä¸€ä¸ªhandleï¼Œå’Œä¸€ä¸ªBufferModeï¼Œå¹¶è¿”å›IO ()ã€‚å…¶ä¸­BufferModeæœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li><code>NoBuffering</code>ï¼šæ²¡æœ‰ç¼“å†²åŒºï¼Œä¸€æ¬¡è¯»å…¥ä¸€ä¸ªå­—ç¬¦</li>
<li><code>LineBuffering</code>ï¼šç¼“å†²åŒºå¤§å°æ˜¯ä¸€è¡Œï¼Œå³æ¯æ¬¡è¯»å…¥ä¸€è¡Œå†…å®¹</li>
<li><code>BlockBuffering (Maybe Int)</code>ï¼šç¼“å†²åŒºå¤§å°æ˜¯ä¸€å—ï¼Œå—çš„å¤§å°ç”±Maybe IntæŒ‡å®šï¼š<ul>
<li><code>BlockBuffering (Nothing)</code>ï¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å—å¤§å°</li>
<li><code>BlockBuffering (Just 2048)</code>ï¼šä¸€å—çš„å¤§å°æ˜¯2048å­—èŠ‚ï¼Œå³æ¯æ¬¡è¯»å…¥2048bytesçš„å†…å®¹</li>
</ul>
</li>
</ul>
<p>ç¼“å†²åŒºçš„åˆ·æ–°æ˜¯è‡ªåŠ¨çš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>hFlush</code>æ¥æ‰‹åŠ¨åˆ·æ–°</p>
<p style="text-align: center;">hFlush :: Handle -> IO ()</p>

<p>ä¼ å…¥ä¸€ä¸ªhandleï¼Œè¿”å›IO ()ï¼Œå³åˆ·æ–°å¯¹åº”handleçš„ç¼“å†²åŒº</p>
<h3 id="openTempFile"><a href="#openTempFile" class="headerlink" title="openTempFile"></a>openTempFile</h3><p>openTempFileå¯ä»¥æ–°å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼š</p>
<p style="text-align: center;">openTempFile :: FilePath -> String -> IO (FilePath, Handle)</p>

<p><code>FilePath</code>æŒ‡ä¸´æ—¶æ–‡ä»¶è¦åˆ›å»ºçš„ä½ç½®è·¯å¾„ï¼Œ<code>String</code>æŒ‡ä¸´æ—¶æ–‡ä»¶åå­—çš„å‰ç¼€ï¼Œè¿”å›ä¸€ä¸ªI/O actionï¼Œå…¶å†…å®¹ç¬¬ä¸€ä¸ª<code>FilePath</code>æ˜¯åˆ›å»ºå¾—åˆ°çš„ä¸´æ—¶æ–‡ä»¶çš„è·¯å¾„ï¼Œ<code>Handle</code>æ˜¯ä¸´æ—¶æ–‡ä»¶çš„handle</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> System.IO</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">    (tempFile, tempHandle) &lt;- openTempFile <span class="string">&quot;.&quot;</span> <span class="string">&quot;temp&quot;</span></span><br><span class="line">    ...</span><br><span class="line">    hClose tempHandle</span><br></pre></td></tr></table></figure>
<p><code>&quot;.&quot;</code>æŒ‡ä¸´æ—¶æ–‡ä»¶è¦åœ¨å½“å‰ç›®å½•åˆ›å»ºï¼Œ<code>&quot;temp&quot;</code>æŒ‡ä¸´æ—¶æ–‡ä»¶åå­—ä»¥tempå¼€å¤´ã€‚æœ€ç»ˆå¾—åˆ°çš„tempFileå°±æ˜¯./tempâ€¦â€¦.ï¼Œtempåä¸ºéšæœºæ•°å­—ï¼Œå¦‚<code>./temp43620-0</code></p>
<h2 id="è·¯å¾„æ“ä½œ"><a href="#è·¯å¾„æ“ä½œ" class="headerlink" title="è·¯å¾„æ“ä½œ"></a>è·¯å¾„æ“ä½œ</h2><p>ç›¸å…³å‡½æ•°éƒ½åŒ…å«åœ¨<code>System.Directory</code>æ¨¡å—ä¸­ï¼Œå…¨éƒ¨å†…å®¹è§<a href="https://hackage.haskell.org/package/directory-1.3.6.2/docs/System-Directory.html">System.Directory</a></p>
<h3 id="getCurrentDirectory"><a href="#getCurrentDirectory" class="headerlink" title="getCurrentDirectory"></a>getCurrentDirectory</h3><p style="text-align: center;">getCurrentDirectory :: IO FilePath</p>

<p>ç›´æ¥è¿”å›ä¸€ä¸ªI/O actionï¼Œå…¶å†…å®¹æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºå½“å‰è·¯å¾„çš„ç»å¯¹è·¯å¾„</p>
<h3 id="removeFile"><a href="#removeFile" class="headerlink" title="removeFile"></a>removeFile</h3><p style="text-align: center;">removeFile :: FilePath -> IO ()</p>

<p>è¾“å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œå¹¶åˆ é™¤æ‰å®ƒ</p>
<h3 id="renameFile"><a href="#renameFile" class="headerlink" title="renameFile"></a>renameFile</h3><p style="text-align: center;">renameFile :: FilePath -> FilePath -> IO ()</p>

<p>è¾“å…¥ä¸€ä¸ªåŸè·¯å¾„ï¼Œä¸€ä¸ªæ–°è·¯å¾„ï¼Œä¸ºåŸè·¯å¾„çš„æ–‡ä»¶é‡å‘½åä¸ºæ–°è·¯å¾„çš„å</p>
<h3 id="doesFileExist"><a href="#doesFileExist" class="headerlink" title="doesFileExist"></a>doesFileExist</h3><p style="text-align: center;">doesFileExist :: FilePath -> IO Bool</p>

<p>æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å¸ƒå°”å€¼çš„I/O action</p>
<h2 id="Command-line-arguments"><a href="#Command-line-arguments" class="headerlink" title="Command line arguments"></a>Command line arguments</h2><p><code>System.Environment</code>æ¨¡å—ä¸­æä¾›äº†ä¸¤ä¸ªå‡½æ•°å¯ä»¥ç”¨æ¥å¤„ç†ä¼ å…¥å‘½ä»¤è¡Œçš„å‚æ•°</p>
<h3 id="getArgs"><a href="#getArgs" class="headerlink" title="getArgs"></a>getArgs</h3><p style="text-align: center;">getArgs :: IO [String]</p>

<p>ä¸éœ€è¦è¾“å…¥å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªI/O actionï¼Œå†…å®¹ä¸ºä¼ å…¥å‘½ä»¤è¡Œçš„å‚æ•°ï¼ˆä¸€ä¸ªç”±Stringç»„æˆçš„åˆ—è¡¨ï¼‰ã€‚ç›¸å½“äºCè¯­è¨€ä¸­çš„argv[1:]</p>
<h3 id="getProgName"><a href="#getProgName" class="headerlink" title="getProgName"></a>getProgName</h3><p style="text-align: center;">getProgName :: IO String</p>

<p>è¿”å›I/O actionï¼Œå†…å®¹ä¸ºç¨‹åºçš„åå­—ï¼Œç›¸å½“äºCè¯­è¨€ä¸­çš„argv[0]</p>
<h2 id="Randomness"><a href="#Randomness" class="headerlink" title="Randomness"></a>Randomness</h2><p>å’Œéšæœºæ•°æœ‰å…³çš„å‡½æ•°éƒ½åŒ…å«åœ¨<code>System.Random</code>æ¨¡å—ä¸­ã€‚GHCiå¯åŠ¨æ—¶å¯èƒ½ä¸ä¼šåŒ…å«System.Randomçš„é…ç½®ï¼Œå¯¼è‡´æ— æ³•æ‰¾åˆ°æ¨¡å—ã€‚éœ€è¦é€šè¿‡stackæ‰“å¼€:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">stack ghci --package random</span><br></pre></td></tr></table></figure>

<p>Haskellè¦æ±‚åŒæ ·çš„ç¨‹åºéœ€è¦è¿è¡Œå‡ºåŒæ ·çš„ç»“æœï¼Œé™¤äº†ç”¨åˆ°äº†I/O actionï¼Œæ‰€æœ‰ä¼šé€ æˆä¸åŒç»“æœçš„å‡½æ•°éƒ½è¦äº¤ç»™I/O actionæ¥å®Œæˆ</p>
<p>é‚£è¦ä½¿éšæœºæ•°è„±ç¦»IOå­˜åœ¨ï¼Œå°±è¦ç”¨åˆ°éšæœºç”Ÿæˆå™¨ï¼ˆrandom generatorï¼‰</p>
<p><code>System.Random</code>æ¨¡å—æä¾›äº†å‡ ä¸ªç”Ÿæˆéšæœºæ•°çš„å‡½æ•°ï¼š</p>
<h3 id="random"><a href="#random" class="headerlink" title="random"></a>random</h3><p style="text-align: center;">random :: (Random a, RandomGen g) => g -> (a, g)</p>

<p>å…¶ä¸­åˆæœ‰ä¸¤ä¸ªæ–°çš„typeclassï¼ŒRandomè¡¨ç¤ºå¯ä»¥å–éšæœºï¼ŒRandomGenè¡¨ç¤ºéšæœºæ•°ç”Ÿæˆå™¨ã€‚randomå‡½æ•°æ¥æ”¶ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œè¿”å›ä¸€ä¸ªå…ƒç»„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ç”Ÿæˆçš„éšæœºæ•°ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªæ–°çš„éšæœºæ•°ç”Ÿæˆå™¨</p>
<p>è·å–éšæœºæ•°ç”Ÿæˆå™¨å¯ä»¥ä½¿ç”¨<code>mkStdGen</code>å‡½æ•°ï¼š</p>
<p style="text-align: center;">mkStdGen :: Int -> StdGen</p>

<p>å…¶ä¸­<code>StdGen</code>æ˜¯ä¸€ä¸ªRandomGençš„å®ä¾‹</p>
<p>è¿ç”¨randomç”Ÿæˆéšæœºæ•°éœ€è¦æŒ‡å®šç±»å‹ï¼Œä¸ç„¶ç¨‹åºæ— æ³•ç¡®å®š<code>a</code>æ˜¯ä»€ä¹ˆç±»å‹ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; random (mkStdGen <span class="number">100</span>) :: (<span class="type">Int</span>, <span class="type">StdGen</span>)</span><br><span class="line">(<span class="number">9216477508314497915</span>,<span class="type">StdGen</span> &#123;unStdGen = <span class="type">SMGen</span> <span class="number">712633246999323047</span> <span class="number">2532601429470541125</span>&#125;)</span><br><span class="line"><span class="title">ghci</span>&gt; random (mkStdGen <span class="number">100</span>) :: (<span class="type">Char</span>, <span class="type">StdGen</span>)</span><br><span class="line">(&#x27;\<span class="number">537310</span>&#x27;,<span class="type">StdGen</span> &#123;unStdGen = <span class="type">SMGen</span> <span class="number">712633246999323047</span> <span class="number">2532601429470541125</span>&#125;)</span><br><span class="line"><span class="title">ghci</span>&gt; random (mkStdGen <span class="number">100</span>) :: (<span class="type">Bool</span>, <span class="type">StdGen</span>)</span><br><span class="line">(<span class="type">True</span>,<span class="type">StdGen</span> &#123;unStdGen = <span class="type">SMGen</span> <span class="number">712633246999323047</span> <span class="number">2532601429470541125</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡è¿è¡ŒåŒæ ·çš„å‡½æ•°ï¼Œä¼šå¾—åˆ°åŒæ ·çš„ç»“æœã€‚æ‰€ä»¥å¦‚æœéœ€è¦ç”Ÿæˆå…¶ä»–çš„éšæœºæ•°ï¼Œéœ€è¦æ›´æ¢ç”Ÿæˆå™¨ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸Šä¸€æ¬¡è°ƒç”¨ç»“æœè¿”å›çš„æ–°éšæœºæ•°ç”Ÿæˆå™¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">threeCoins</span> :: <span class="type">StdGen</span> -&gt; (<span class="type">Bool</span>, <span class="type">Bool</span>, <span class="type">Bool</span>)  </span><br><span class="line"><span class="title">threeCoins</span> gen =   </span><br><span class="line">    <span class="keyword">let</span> (firstCoin, newGen) = random gen  </span><br><span class="line">        (secondCoin, newGen&#x27;) = random newGen  </span><br><span class="line">        (thirdCoin, newGen&#x27;&#x27;) = random newGen&#x27;  </span><br><span class="line">    <span class="keyword">in</span>  (firstCoin, secondCoin, thirdCoin) </span><br></pre></td></tr></table></figure>

<h3 id="randoms"><a href="#randoms" class="headerlink" title="randoms"></a>randoms</h3><p style="text-align: center;">randoms :: (Random a, RandomGen g) => g -> [a]</p>

<p>randomsæ¥æ”¶ä¸€ä¸ªRandomGenï¼Œè¿”å›ä¸€ä¸ªéšæœºçš„æ— ç©·åˆ—è¡¨ã€‚å› ä¸ºå®ƒæ˜¯æ— ç©·çš„ï¼Œæ‰€ä»¥ä¸ä¼šè¿”å›æ–°çš„éšæœºæ•°ç”Ÿæˆå™¨</p>
<h3 id="randomR"><a href="#randomR" class="headerlink" title="randomR"></a>randomR</h3><p style="text-align: center;">randomR :: (Random a, RandomGen g) => (a, a) -> g -> (a, g)</p>

<p>å¯ä»¥ç”¨æ¥ç”Ÿæˆæœ‰èŒƒå›´çš„éšæœºæ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œè¡¨ç¤ºç”Ÿæˆéšæœºæ•°çš„èŒƒå›´(é—­åŒºé—´)</p>
<h3 id="randomRs"><a href="#randomRs" class="headerlink" title="randomRs"></a>randomRs</h3><p style="text-align: center;">randomRs :: (Random a, RandomGen g) => (a, a) -> g -> [a]</p>

<p>åŒä¸Šä¸¤ä¸ªï¼Œç”Ÿæˆæœ‰èŒƒå›´çš„æ— ç©·éšæœºæ•°åˆ—è¡¨</p>
<h3 id="getStdGen"><a href="#getStdGen" class="headerlink" title="getStdGen"></a>getStdGen</h3><p>å¦‚æœæƒ³è¦è®©ç¨‹åºæ¯æ¬¡è¿è¡Œå¾—åˆ°ä¸åŒçš„éšæœºç»“æœï¼Œéœ€è¦ä½¿ç”¨<code>getStdGen</code>æ¥è·å–å…¨å±€éšæœºæ•°ç”Ÿæˆå™¨ï¼Œå®ƒä¼šåœ¨æ¯æ¬¡è¿è¡Œçš„æ—¶å€™äº§ç”Ÿä¸åŒçš„å€¼ï¼Œä¹Ÿå› æ­¤ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªI/O actionï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç›´æ¥çš„StdGen</p>
<p style="text-align: center;">getStdGen :: Control.Monad.IO.Class.MonadIO m => m StdGen</p>

<p>å³å¯ä»¥çœ‹æˆgetStdGen :: IO StdGenï¼Œéœ€è¦ä½¿ç”¨&lt;-æ“ä½œç¬¦å°†StdGenæå–å‡ºæ¥</p>
<p>ä½†æ˜¯åœ¨åŒä¸€ä¸ªç¨‹åºä¸­ï¼ŒgetStdGençš„ç»“æœæ˜¯ç›¸åŒçš„ï¼Œå…¨å±€éšæœºæ•°ç”Ÿæˆå™¨ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œæ‰€ä»¥å°±éœ€è¦å¦ä¸€ä¸ªå‡½æ•°newStdGen</p>
<h3 id="newStdGen"><a href="#newStdGen" class="headerlink" title="newStdGen"></a>newStdGen</h3><p style="text-align: center;">newStdGen :: Control.Monad.IO.Class.MonadIO m => m StdGen</p>

<p>æ‰§è¡ŒnewStdGenä¼šè¿›è¡Œä¸¤ä¸ªæ“ä½œï¼š</p>
<ul>
<li>æ›´æ–°å…¨å±€éšæœºæ•°ç”Ÿæˆå™¨ï¼Œä¸‹æ¬¡æ‰§è¡ŒgetStdGenä¼šè·å¾—ä¸åŒçš„ç»“æœ</li>
<li>è¿”å›ä¸€ä¸ªI/O actionï¼ŒåŒ…å«ä¸€ä¸ªæ–°çš„StdGenï¼ˆä½†æ˜¯è¿™ä¸ªç”Ÿæˆå™¨å’Œå…¨å±€ç”Ÿæˆå™¨ä¹Ÿä¸åŒï¼‰</li>
</ul>
<h2 id="Exceptions"><a href="#Exceptions" class="headerlink" title="Exceptions"></a>Exceptions</h2><p>ç¨‹åºåœ¨è¿è¡Œå¤±è´¥æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡<code>Control.Exception</code>æ¨¡å—ä¸­çš„<code>catch</code>å‡½æ•°æ¥æ•è·å¼‚å¸¸ï¼š</p>
<p style="text-align: center;">catch :: Exception e => IO a -> (e -> IO a) -> IO a</p>

<p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è¿›è¡Œçš„æ“ä½œï¼Œä»¥IO aä¸ºè¿”å›å€¼çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶å¼‚å¸¸å¹¶è¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Control.Exception</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> = main&#x27; `catch` handler</span><br><span class="line"></span><br><span class="line"><span class="title">main&#x27;</span> :: <span class="type">IO</span> ()</span><br><span class="line"><span class="title">main&#x27;</span> = <span class="keyword">do</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="title">handler</span> :: <span class="type">Exception</span> e =&gt; e -&gt; <span class="type">IO</span> ()</span><br><span class="line"><span class="title">handler</span> e =  putStrLn <span class="string">&quot;...&quot;</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥åˆ©ç”¨å®ˆå«ï¼ˆguardï¼‰è¯­æ³•å’Œ<code>System.IO.Error</code>ä¸­çš„å‡½æ•°æ¥åˆ¤æ–­IOå¼‚å¸¸çš„ç±»å‹æ¥è¿›è¡Œä¸åŒæ“ä½œï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> System.Environment</span><br><span class="line"><span class="keyword">import</span> System.IO.Error</span><br><span class="line"><span class="keyword">import</span> Control.Exception</span><br><span class="line">  </span><br><span class="line"><span class="title">main</span> = toTry `catch` handler</span><br><span class="line">              </span><br><span class="line"><span class="title">toTry</span> :: <span class="type">IO</span> ()  </span><br><span class="line"><span class="title">toTry</span> = <span class="keyword">do</span> (fileName:_) &lt;- getArgs  </span><br><span class="line">           contents &lt;- readFile fileName  </span><br><span class="line">           putStrLn $ <span class="string">&quot;The file has &quot;</span> ++ show (length (lines contents)) ++ <span class="string">&quot; lines!&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="title">handler</span> :: <span class="type">IOError</span> -&gt; <span class="type">IO</span> ()  </span><br><span class="line"><span class="title">handler</span> e  </span><br><span class="line">    | isDoesNotExistError e = putStrLn <span class="string">&quot;The file doesn&#x27;t exist!&quot;</span>  </span><br><span class="line">    | otherwise = ioError e  </span><br></pre></td></tr></table></figure>

<p>å…·ä½“ç›¸å…³å…¨éƒ¨å‡½æ•°è§æ–‡æ¡£ï¼š<a href="https://hackage.haskell.org/package/base-4.15.0.0/docs/System-IO-Error.html">System.IO.Error</a>ã€<a href="https://hackage.haskell.org/package/base-4.15.0.0/docs/Control-Exception-Base.html">Control.Exception</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://learnyouahaskell.com/chapters">Learn You a Haskell</a></li>
</ul>
<hr>
<div style="text-align: center;">

<p style="font-size: 1.3rem; font-weight: bold;">ç›®å½•</p>

<p>#0&nbsp;|&nbsp;<a href="/p/b3ca5c18.html">æ€»ç« </a>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<br>#1&nbsp;|&nbsp;<a href="/p/d63b5b5f.html">åŸºç¡€è¯­æ³•ä¸å‡½æ•°</a>&emsp;&emsp;&emsp;<br>#2&nbsp;|&nbsp;<a href="/p/53e482b7.html">é«˜é˜¶å‡½æ•°ä¸æ¨¡å—</a>&emsp;&emsp;&emsp;<br>#3&nbsp;|&nbsp;<a href="/p/369b7e08.html">ç±»å‹ä¸ç±»å‹ç±»</a>&emsp;&emsp;&emsp;&emsp;<br>#4&nbsp;|&nbsp;<a href="/p/a5bbe48a.html">è¾“å…¥è¾“å‡ºä¸æ–‡ä»¶</a>&emsp;&emsp;&emsp;<br>#5&nbsp;|&nbsp;<a href="/p/290ecb74.html">å‡½å­ã€åº”ç”¨å‡½å­ä¸å•å­</a><br>#6&nbsp;|&nbsp;<a href="/p/d4bb2633.html">åŠç¾¤ä¸å¹ºåŠç¾¤</a>&emsp;&emsp;&emsp;&emsp;<br>#7&nbsp;|&nbsp;<a href="/p/68ef8146.html">ä¸€äº›å…¶å®ƒç±»å‹ç±»</a>&emsp;&emsp;&emsp;<br>#A&nbsp;|&nbsp;<a href="/p/96c32eae.html">Haskellä¸èŒƒç•´è®º</a>&emsp;&nbsp;&thinsp;</p>
</div>]]></content>
      <tags>
        <tag>Haskell</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLearn Haskellã€#3 ç±»å‹ä¸ç±»å‹ç±»</title>
    <url>/p/369b7e08.html</url>
    <content><![CDATA[<div style="display: flex; justify-content: space-between;">

<p><a href="/p/53e482b7.html">&lt; #2</a></p>
<p><a href="/p/a5bbe48a.html">#4 &gt;</a></p>
</div>

<h2 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h2><p>Haskellæœ‰ä¸€ä¸ªé™æ€ç±»å‹ç³»ç»Ÿï¼Œä»»ä½•å˜é‡ã€å‡½æ•°éƒ½ä¼šå…·æœ‰ç±»å‹ï¼Œå¹¶ä¸”æœ‰ç±»å‹åˆ¤æ–­åŠŸèƒ½ï¼Œæ²¡ç»™å‡ºçš„ç±»å‹ä¼šè‡ªåŠ¨è¯†åˆ«ã€‚<br>Typeçš„é¦–å­—æ¯å…¨ä¸ºå¤§å†™ï¼Œå¸¸ç”¨çš„æœ‰ï¼š</p>
<ul>
<li><code>Int</code>ï¼šæ•´å‹ï¼Œæœ‰ä¸Šä¸‹ç•ŒèŒƒå›´ï¼Œ-2147483647ï½2147483648<span id="more"></span></li>
<li><code>Integer</code>ï¼šæ•´æ•°ï¼Œæ— ç•Œï¼Œä½†æ˜¯æ•ˆç‡æ¯”Intä½</li>
<li><code>Float</code>ï¼šå•ç²¾åº¦æµ®ç‚¹å‹</li>
<li><code>Double</code>ï¼šåŒç²¾åº¦æµ®ç‚¹å‹</li>
<li><code>Bool</code>ï¼šå¸ƒå°”å€¼</li>
<li><code>Char</code>ï¼šå­—ç¬¦</li>
<li><code>String</code>ï¼šå­—ç¬¦ä¸²ï¼Œç­‰åŒäº<code>[Char]</code></li>
<li><code>Ordering</code>ï¼šå¤§å°å…³ç³»ï¼ŒåŒ…å«LTã€EQã€GTï¼Œä¸”å®ƒä»¬æœ‰å¤§å°å…³ç³» LT &lt; EQ &lt; GT</li>
</ul>
<p>åˆ—è¡¨çš„ç±»å‹æ˜¯ç”±å…¶ä¸­å…ƒç´ å†³å®šçš„ï¼Œå¹¶ä¸”åˆ—è¡¨ä¸­å…ƒç´ å¿…é¡»æ˜¯åŒä¸€ç±»å‹ï¼Œæ‰€ä»¥åˆ—è¡¨çš„ç±»å‹å°±æ˜¯å…¶å…ƒç´ ç±»å‹å¤–åŠ <code>[]</code>ã€‚</p>
<p>å…ƒç»„çš„ç±»å‹ç”±å…¶ä¸­å„ä¸ªå…ƒç´ çš„ç±»å‹å…±åŒå†³å®šï¼Œå› ä¸ºå…ƒç»„ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒç±»å‹ã€‚å¦‚(â€œabcâ€, â€˜aâ€™, True)çš„ç±»å‹æ˜¯([Char], Char, Bool)ã€‚</p>
<h2 id="Typeclasses"><a href="#Typeclasses" class="headerlink" title="Typeclasses"></a>Typeclasses</h2><p>ç±»å‹ç±»ï¼ˆTypeclassï¼‰æ˜¯å®šä¹‰ä¸€ç³»åˆ—åŠŸèƒ½çš„æ¥å£ï¼Œå¦‚æœä¸€ä¸ªTypeå±äºä¸€ä¸ªTypeclassçš„æˆå‘˜ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥å®ç°è¿™ä¸ªç±»å‹ç±»æ‰€è§„å®šçš„åŠŸèƒ½ã€‚ä¸€ä¸ªTypeä¹Ÿå¯ä»¥å±äºå¤šä¸ªTypeclass<br>Typeclassçš„é¦–å­—æ¯ä¹Ÿå…¨ä¸ºå¤§å†™ï¼Œå¸¸è§çš„æœ‰ï¼š</p>
<ul>
<li><code>Eq</code>ï¼šå¯åˆ¤æ–­æ˜¯å¦ç›¸ç­‰</li>
<li><code>Ord</code>ï¼šå¯æ¯”è¾ƒå¤§å°</li>
<li><code>Show</code>ï¼šå¯å±•ç¤ºæˆå­—ç¬¦ä¸²</li>
<li><code>Read</code>ï¼šå¯ä»å­—ç¬¦ä¸²è½¬æ¢æˆç‰¹å®šç±»å‹</li>
<li><code>Enum</code>ï¼šå¯æšä¸¾ï¼ˆè¿ç»­ï¼‰ï¼Œå³å¯ä»¥ä½¿ç”¨predå’Œsuccå‡½æ•°å¾—åˆ°å‰é©±å’Œåç¼€</li>
<li><code>Bounded</code>: æœ‰ä¸Šä¸‹ç•Œï¼Œå¦‚æœå…ƒç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½å±äºBoundedï¼Œé‚£è¿™ä¸ªå…ƒç»„çš„ç±»å‹ä¹Ÿå±äºBounded</li>
<li><code>Integral</code>ï¼šæ˜¯æ•´æ•°ï¼ŒåŒ…æ‹¬Intå’ŒInteger</li>
<li><code>RealFloat</code>ï¼š æ˜¯å®æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬Floatå’ŒDouble</li>
<li><code>RealFrac</code>ï¼šæ˜¯å®åˆ†æ•°ï¼ŒåŒ…æ‹¬Floatã€Doubleå’ŒRatioï¼ˆåœ¨Data.Ratioæ¨¡å—ä¸­ï¼‰</li>
<li><code>Floating</code>ï¼šæ˜¯æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬Floatã€Doubleå’ŒComplexï¼ˆåœ¨Data.Complexæ¨¡å—ä¸­ï¼‰</li>
<li><code>Real</code>ï¼šæ˜¯å®æ•°ï¼ŒåŒ…æ‹¬Integralå’ŒRealFracçš„æˆå‘˜</li>
<li><code>Fractional</code>ï¼šæ˜¯åˆ†æ•°ï¼ŒåŒ…æ‹¬RealFracå’ŒFloatingçš„æˆå‘˜</li>
<li><code>Num</code>ï¼šæ˜¯æ•°å­—ï¼ŒåŒ…æ‹¬ä¸Šè¿°æ‰€æœ‰æ•°å­—ç›¸å…³çš„ç±»å‹</li>
</ul>
<h2 id="Type-variables"><a href="#Type-variables" class="headerlink" title="Type variables"></a>Type variables</h2><p>å¦‚æœæŸ¥çœ‹ä¸€ä¸ªå‡½æ•°çš„ç±»å‹ï¼Œæ¯”å¦‚<code>head</code>ï¼Œé‚£ä¹ˆå°†ä¼šè¿”å›ä»¥ä¸‹ç±»å‹ï¼š</p>
<p style="text-align: center;">head :: [a] -> a</p>

<p>å…¶ä¸­çš„aå°±æ˜¯ä¸€ä¸ªç±»å‹å˜é‡ï¼ˆtype variableï¼‰ï¼Œå®ƒåœ¨headä¸­å¯ä»¥å±äºä»»ä½•ç±»å‹ï¼Œåœ¨è¿™é‡Œåªæ˜¯è¡¨ç¤ºè¿”å›å€¼çš„ç±»å‹å’Œè¾“å…¥çš„åˆ—è¡¨ä¸­çš„å…ƒç´ çš„ç±»å‹ç›¸ä¸€è‡´ã€‚</p>
<p>åœ¨å‡½æ•°çš„ç±»å‹è¡¨è¾¾å¼å…¶å®å¯ä»¥çœ‹ä½œ$\lambda$è¡¨è¾¾å¼ï¼Œå®ƒé€‚ç”¨äº$\alpha$å˜æ¢ï¼ˆ$\alpha$-conversionï¼‰ã€‚å³aåœ¨è¿™é‡Œå¯ä»¥æŒ‡Intã€Charç­‰ç±»å‹ï¼Œä¹Ÿå¯ä»¥æŒ‡[Char], (Int, Char), ç”šè‡³å‡½æ•°Int -&gt; Intç­‰ã€‚</p>
<p>åœ¨å¤§éƒ¨åˆ†å‡½æ•°çš„ç±»å‹ä¸­ï¼Œç±»å‹å˜é‡éœ€è¦ä¿è¯æ˜¯æŸä¸ªTypeclassçš„æˆå‘˜æ‰èƒ½å®Œæˆæ“ä½œã€‚æ¯”å¦‚<code>(==)</code>å‡½æ•°ï¼Œå®ƒéœ€è¦ä¼ å…¥çš„å‚æ•°æ˜¯å¯åˆ¤æ–­ç›¸ç­‰çš„ï¼Œå³æ˜¯Eqçš„æˆå‘˜ï¼Œé‚£ä¹ˆ<code>(==)</code>çš„ç±»å‹å°±æ˜¯ï¼š</p>
<p style="text-align: center;">(==) :: (Eq a) => a -> a -> Bool</p>

<p>å…¶ä¸­<code>=&gt;</code>å‰çš„éƒ¨åˆ†(Eq a)å°±æ˜¯ç±»çº¦æŸï¼ˆclass constraintï¼‰ï¼Œå®ƒè§„å®šäº†aæ˜¯Eqçš„æˆå‘˜ï¼Œæ‰€ä»¥<code>(==)</code>å‡½æ•°ä¼ å…¥çš„ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯aç±»å‹ï¼Œä¸”éƒ½æ˜¯Eqçš„æˆå‘˜ï¼Œä¿è¯äº†å®ƒä»¬ä¹‹é—´æ˜¯å¯ä»¥æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰çš„ã€‚</p>
<h2 id="å®šä¹‰æ–°Type"><a href="#å®šä¹‰æ–°Type" class="headerlink" title="å®šä¹‰æ–°Type"></a>å®šä¹‰æ–°Type</h2><p>å®šä¹‰ä¸€ä¸ªæ–°çš„Typeéœ€è¦ä½¿ç”¨<code>data</code>å…³é”®å­—ï¼Œæ¯”å¦‚å®šä¹‰<code>Bool</code>éœ€è¦ä½¿ç”¨ï¼š</p>
<p style="text-align: center;">data Bool = False | True</p>

<p>å…¶ä¸­<code>=</code>å·¦ä¾§çš„éƒ¨åˆ†å®šä¹‰äº†æ–°ç±»å‹çš„åç§°<code>Bool</code>ï¼Œå³ä¾§çš„éƒ¨åˆ†å«åšå€¼æ„é€ å™¨ï¼ˆvalue constructorsï¼‰ï¼Œè¡¨ç¤ºäº†Boolç±»å‹çš„å€¼ä¸ºFalseæˆ–Trueã€‚<br>å¹¶ä¸”åç§°å’Œå€¼æ„é€ å™¨çš„é¦–å­—æ¯éƒ½éœ€è¦å¤§å†™ã€‚</p>
<p>å¦å¤–ï¼Œå€¼æ„é€ å™¨ä¹Ÿæ˜¯å‡½æ•°ï¼Œå®ƒä»¬å¯ä»¥æœ‰å‚æ•°ï¼Œå«åšé¡¹ï¼ˆfieldï¼‰ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Shape</span> = <span class="type">Circle</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span> | <span class="type">Rectangle</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span>   </span></span><br></pre></td></tr></table></figure>
<p>å®ƒå®šä¹‰äº†ä¸€ä¸ªæ–°Typeå«Shapeï¼Œå€¼æ„é€ å™¨æ˜¯Circleå’ŒRectangleï¼ŒCircleæ¥æ”¶ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯Floatç±»å‹ï¼ŒRectangleæ¥æ”¶å››ä¸ªFloatç±»å‹å‚æ•°ã€‚<br>å¦‚æœæŸ¥çœ‹Circleçš„ç±»å‹ï¼Œå°†è¿”å›ï¼š</p>
<p style="text-align: center;">Circle :: Float -> Float -> Float -> Shape</p>

<p>å¦‚æœæƒ³è¦è®©å®ƒèƒ½ç»™ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œéœ€è¦è®©å®ƒå±äºShowç±»å‹ç±»ã€‚åœ¨ä»£ç ä¸­åªéœ€è¦åœ¨ç»“å°¾åŠ ä¸Š<code>deriving (Show)</code>:</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Shape</span> = <span class="type">Circle</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span> | <span class="type">Rectangle</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span> <span class="type">Float</span> <span class="keyword">deriving</span> (<span class="type">Show</span>)</span></span><br></pre></td></tr></table></figure>

<p>ç±»å‹çš„åç§°å’Œå€¼æ„é€ å™¨åç§°ä¹Ÿå¯ä»¥ç›¸åŒï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Point</span> = <span class="type">Point</span> <span class="type">Float</span> <span class="type">Float</span> <span class="keyword">deriving</span> (<span class="type">Show</span>)</span></span><br></pre></td></tr></table></figure>

<h3 id="å¯¼å‡ºType"><a href="#å¯¼å‡ºType" class="headerlink" title="å¯¼å‡ºType"></a>å¯¼å‡ºType</h3><p>åœ¨æ–‡ä»¶ä¸­å®šä¹‰äº†æ–°çš„Typeä¹‹åï¼Œå¦‚æœåœ¨åˆ«çš„æ–‡ä»¶ä¸­å°†å…¶ä½œä¸ºæ¨¡å—å¯¼å…¥ï¼Œåˆ™éœ€è¦å…ˆå¯¼å‡ºã€‚æ¯”å¦‚æ–‡ä»¶<code>Shapes.hs</code>ä¸­å®šä¹‰äº†Shapeå’ŒPointï¼Œä»¥åŠå…¶ä»–çš„ä¸€äº›å‡½æ•°ï¼Œé‚£ä¹ˆæ–‡ä»¶å¼€å¤´éœ€è¦å†™ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> Shapes</span><br><span class="line">( <span class="type">Shape(..)</span></span><br><span class="line">, <span class="type">Point(..)</span></span><br><span class="line">, <span class="title">functionA</span></span><br><span class="line">, <span class="title">functionB</span></span><br><span class="line">) <span class="keyword">where</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„<code>Shape(..)</code>å¯¼å‡ºäº†Shapeç±»å‹å’Œå®ƒæ‰€æœ‰çš„å€¼æ„é€ å™¨ï¼Œ<code>..</code>ä»£è¡¨äº†å®ƒçš„æ‰€æœ‰å€¼æ„é€ å™¨ã€‚å› æ­¤ï¼Œ<code>Shape(..)</code>ç›¸å½“äº<code>Shape (Circle, Rectangle)</code>ã€‚</p>
<p>å¦‚æœä¸æƒ³è¦å¯¼å‡ºå€¼æ„é€ å™¨ï¼Œå³ä¸å…è®¸ä½¿ç”¨å€¼æ„é€ å™¨çš„æ–¹æ³•æ¥åˆ›å»ºShapeç±»å‹çš„å˜é‡ã€‚é‚£ä¹ˆéœ€è¦å°†<code>Shape(..)</code>æ›¿æ¢ä¸º<code>Shape</code>ï¼Œè¿™æ ·å°±åªå¯¼å‡ºäº†Shapeç±»å‹ï¼Œè€Œä¸å¯¼å‡ºå…¶å€¼æ„é€ å™¨ã€‚</p>
<h3 id="Record-Syntax"><a href="#Record-Syntax" class="headerlink" title="Record Syntax"></a>Record Syntax</h3><p>å¦‚æœæƒ³è¦æ–¹ä¾¿åœ°å–å‡ºç±»å‹å®ä¾‹ä¸­çš„å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨Recordè¯­æ³•ï¼Œå¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Point</span> = <span class="type">Point</span> &#123; <span class="title">xcoord</span> :: <span class="type">Float</span></span></span><br><span class="line"><span class="class">                   , <span class="title">ycoord</span> :: <span class="type">Float</span></span></span><br><span class="line"><span class="class">                   &#125; <span class="keyword">deriving</span> (<span class="type">Show</span>)</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å€¼æ„é€ å™¨çš„å‚æ•°éƒ¨åˆ†å…ˆåŠ ä¸€ä¸ªå¤§æ‹¬å·ï¼Œç„¶åæŒ‡å®šå–å‡ºå€¼çš„å‡½æ•°åç§°ï¼ˆxcoord, ycoordï¼‰ï¼Œåé¢æŒ‡å®šç±»å‹ï¼ˆ:: Floatï¼‰ã€‚è¿™æ ·xcoordå’Œycoordå°±éƒ½æ˜¯ä¸€ä¸ªç±»å‹ä¸ºPoint -&gt; Floatçš„å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹æ³•æ¥è®¿é—®å€¼ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="keyword">let</span> point = <span class="type">Point</span> <span class="number">1.0</span> <span class="number">2.0</span></span><br><span class="line"><span class="title">ghci</span>&gt; xcoord point</span><br><span class="line"><span class="number">1.0</span></span><br><span class="line"><span class="title">ghci</span>&gt; ycoord point</span><br><span class="line"><span class="number">2.0</span></span><br></pre></td></tr></table></figure>
<p>åŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹æ³•æ¥åˆ›å»ºè¿™ä¸ªpointï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">point</span> = <span class="type">Point</span> &#123;ycoord=<span class="number">2.0</span>, xcoord=<span class="number">1.0</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Type-parameters"><a href="#Type-parameters" class="headerlink" title="Type parameters"></a>Type parameters</h3><p>å€¼æ„é€ å™¨å¯ä»¥æ¥æ”¶å‚æ•°ï¼Œç±»å‹ä¹Ÿå¯ä»¥æ¥æ”¶å‚æ•°ï¼Œè¿™æ ·å®ƒå°±æˆä¸ºäº†ç±»å‹æ„é€ å™¨ï¼ˆtype constructorsï¼‰ã€‚å¦‚Maybeçš„å®šä¹‰ï¼š</p>
<p style="text-align: center;">data Maybe a = Nothing | Just a</p>

<p>å®ƒçš„å€¼æ˜¯Nothingæ—¶ï¼Œç±»å‹ä¸ºMaybe aï¼Œæ˜¯å¤šæ€çš„ï¼ˆpolymorphicï¼‰ã€‚<br>ä»–çš„å€¼ä¸æ˜¯Nothingæ—¶ï¼Œç±»å‹å–å†³äºå€¼Just aä¸­açš„ç±»å‹ï¼Œå¯ä»¥æ„é€ å‡ºMaybe Intã€Maybe [Char]ç­‰å¤šç§ç±»å‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="type">Nothing</span> :: <span class="type">Maybe</span> a</span><br><span class="line"><span class="type">Just</span> <span class="number">1</span> :: <span class="type">Num</span> a =&gt; <span class="type">Maybe</span> a</span><br><span class="line"><span class="type">Just</span> &#x27;a&#x27; :: <span class="type">Maybe</span> <span class="type">Char</span></span><br><span class="line"><span class="type">Just</span> <span class="string">&quot;abc&quot;</span> :: <span class="type">Maybe</span> [<span class="type">Char</span>]</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ç”¨è¿™ç§æ–¹æ³•æ”¹å†™Pointï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Point</span> x y = <span class="type">Point</span> &#123; <span class="title">xcoord</span> :: <span class="title">x</span></span></span><br><span class="line"><span class="class">                       , <span class="title">ycoord</span> :: <span class="title">y</span></span></span><br><span class="line"><span class="class">                       &#125; <span class="keyword">deriving</span> (<span class="type">Show</span>)</span></span><br></pre></td></tr></table></figure>

<p>ä½†ä½¿ç”¨ç±»å‹å‚æ•°ï¼ˆtype parametersï¼‰å¹¶ä¸æ˜¯æ€»æ˜¯æ–¹ä¾¿ï¼Œæ¯”å¦‚åœ¨å£°æ˜å‡½æ•°ç±»å‹çš„æ—¶å€™ä¸èƒ½åªä½¿ç”¨Pointæ¥è¡¨ç¤ºPointç±»å‹ï¼Œè€Œæ˜¯å¿…é¡»å†™æˆPoint Float Floatã€‚</p>
<p>è€Œä¸”ä¸èƒ½åœ¨å®šä¹‰ç±»å‹æ„é€ å™¨æ—¶æ·»åŠ ç±»çº¦æŸï¼ˆclass constraintï¼‰ï¼Œä¸ç„¶åœ¨ä¹‹åå£°æ˜å‡½æ•°ç±»å‹çš„æ—¶å€™ä¹Ÿéƒ½éœ€è¦æ·»åŠ ç±»çº¦æŸï¼Œå¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> (<span class="type">Ord</span> <span class="title">k</span>) =&gt; <span class="type">Map</span> k v = ... </span></span><br><span class="line"><span class="title">toList</span> :: (<span class="type">Ord</span> k) =&gt; <span class="type">Map</span> k a -&gt; [(k, a)]</span><br></pre></td></tr></table></figure>

<h4 id="Either"><a href="#Either" class="headerlink" title="Either"></a>Either</h4><p>Eitheræ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œå®ƒæœ‰ä¸¤ä¸ªå€¼æ„é€ å™¨ï¼Œå®šä¹‰æ˜¯ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Either</span> a b = <span class="type">Left</span> a | <span class="type">Right</span> b <span class="keyword">deriving</span> (<span class="type">Eq</span>, <span class="type">Ord</span>, <span class="type">Read</span>, <span class="type">Show</span>)  </span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨äº†Leftï¼Œé‚£å®ƒçš„açš„ç±»å‹å°±æ˜¯å…·ä½“çš„ï¼›å¦‚æœä½¿ç”¨äº†Rightï¼Œé‚£å®ƒçš„bçš„ç±»å‹å°±æ˜¯å…·ä½“çš„ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="type">Right</span> <span class="number">20</span>  </span><br><span class="line"><span class="type">Right</span> <span class="number">20</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Left</span> <span class="string">&quot;w00t&quot;</span>  </span><br><span class="line"><span class="type">Left</span> <span class="string">&quot;w00t&quot;</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; :t <span class="type">Right</span> &#x27;a&#x27;  </span><br><span class="line"><span class="type">Right</span> &#x27;a&#x27; :: <span class="type">Either</span> a <span class="type">Char</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; :t <span class="type">Left</span> <span class="type">True</span>  </span><br><span class="line"><span class="type">Left</span> <span class="type">True</span> :: <span class="type">Either</span> <span class="type">Bool</span> b  </span><br></pre></td></tr></table></figure>
<p>Eitherå¯ä»¥çœ‹ä½œMaybeçš„è¡¥å……ï¼Œæ¯”å¦‚Maybeåœ¨ä½¿ç”¨æ—¶ï¼Œå‡ºç°å¼‚å¸¸å¯ä»¥è¿”å›Nothingï¼Œä½†åªæ˜¯ä¸€ä¸ªNothingï¼Œä¸åŒ…å«ä»»ä½•ä¿¡æ¯ï¼›ä½†EitheråŒ…å«å·¦å€¼å’Œå³å€¼ï¼Œæ­£å¸¸ç»“æœè¿”å›å³å€¼ï¼Œè€Œå‡ºç°å¼‚å¸¸å°±å¯ä»¥è¿”å›åŒ…å«é”™è¯¯ä¿¡æ¯çš„å·¦å€¼ï¼Œæ¯”å¦‚å®‰å…¨é™¤æ³•ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">safeDiv</span> :: <span class="type">Int</span> -&gt; <span class="type">Int</span> -&gt; <span class="type">Maybe</span> <span class="type">Int</span></span><br><span class="line"><span class="title">safeDiv</span> _ <span class="number">0</span> = <span class="type">Nothing</span></span><br><span class="line"><span class="title">safeDiv</span> x y = <span class="type">Just</span> (x `div` y)</span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; safeDiv <span class="number">4</span> <span class="number">2</span></span><br><span class="line"><span class="type">Just</span> <span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; safeDiv <span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="type">Nothing</span></span><br></pre></td></tr></table></figure>
<p>è€Œä½¿ç”¨Eitherï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">safeDiv</span> :: <span class="type">Int</span> -&gt; <span class="type">Int</span> -&gt; <span class="type">Either</span> <span class="type">String</span> <span class="type">Int</span></span><br><span class="line"><span class="title">safeDiv</span> _ <span class="number">0</span> = <span class="type">Left</span> <span class="string">&quot;Divided by zero&quot;</span></span><br><span class="line"><span class="title">safeDiv</span> x y = <span class="type">Right</span> (x `div` y)</span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; safeDiv <span class="number">4</span> <span class="number">2</span></span><br><span class="line"><span class="type">Right</span> <span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; safeDiv <span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="type">Left</span> <span class="string">&quot;Divided by zero&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Derived-instances"><a href="#Derived-instances" class="headerlink" title="Derived instances"></a>Derived instances</h3><p>æƒ³è¦ä½¿ä¸€ä¸ªå®šä¹‰çš„ç±»æ»¡è¶³æŸäº›Typeclassçš„éœ€æ±‚ï¼Œéœ€è¦ä»å…¶æ´¾ç”Ÿï¼ˆderiveï¼‰ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Day</span> = <span class="type">Monday</span> | <span class="type">Tuesday</span> | <span class="type">Wednesday</span> | <span class="type">Thursday</span> | <span class="type">Friday</span> | <span class="type">Saturday</span> | <span class="type">Sunday</span>   </span></span><br><span class="line">           <span class="keyword">deriving</span> (<span class="type">Eq</span>, <span class="type">Ord</span>, <span class="type">Show</span>, <span class="type">Read</span>, <span class="type">Bounded</span>, <span class="type">Enum</span>)  </span><br></pre></td></tr></table></figure>
<p>è¿™æ ·Dayç±»å‹çš„å€¼ï¼ˆMondayï½Sundayï¼‰ä¹‹é—´å°±å¯ä»¥æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰ï¼ˆä»Eqæ´¾ç”Ÿï¼‰ï¼Œæ¯”è¾ƒå¤§å°ï¼ˆä»Ordæ´¾ç”Ÿï¼Œå·¦ä¾§ä¸ºå°ï¼Œå³ä¾§ä¸ºå¤§ï¼‰ï¼Œæ˜¾ç¤ºæˆå­—ç¬¦ä¸²ï¼ˆä»Showæ´¾ç”Ÿï¼‰ï¼Œä»å­—ç¬¦ä¸²ä¸­è¯»å–ï¼ˆä»Readæ´¾ç”Ÿï¼‰ï¼ŒåŒ…å«è¾¹ç•Œï¼ˆä»Boundedæ´¾ç”Ÿï¼‰ï¼Œå¯ä»¥æšä¸¾ï¼ˆä»Enumæ´¾ç”Ÿï¼ŒæŒ‰ç…§å€¼æ„é€ å™¨ä¸­çš„é¡ºåºä¾æ¬¡å‘å³ï¼‰</p>
<h3 id="Type-synonyms"><a href="#Type-synonyms" class="headerlink" title="Type synonyms"></a>Type synonyms</h3><p>ä¸ºäº†é˜…è¯»æ–¹ä¾¿ï¼Œä¹¦å†™ç®€ä¾¿ï¼Œå¯ä»¥ä½¿ç”¨<code>type</code>å…³é”®å­—ä¸ºå·²æœ‰ç±»å‹åˆ›å»ºåˆ«åï¼ˆsynonymsï¼‰ã€‚æ¯”å¦‚Stringçš„å®šä¹‰ï¼š</p>
<p style="text-align: center;">type String = [Char]</p>

<p>åœ¨æ‰€æœ‰éœ€è¦ä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆå³[Char]ï¼‰çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨Stringæ¥ä»£æ›¿ï¼Œå®ƒä»¬æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œåªæ˜¯Stringæ›´ç®€ä¾¿æ˜“è¯»ã€‚<br>åŒæ—¶ï¼Œç±»å‹åˆ«åä¹Ÿå¯ä»¥æ¥æ”¶ç±»å‹å‚æ•°</p>
<h4 id="newtype-keyword"><a href="#newtype-keyword" class="headerlink" title="newtype keyword"></a>newtype keyword</h4><p>é™¤äº†<code>data</code>ã€<code>type</code>å…³é”®å­—ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ç”¨<code>newtype</code>å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œæ¯”å¦‚<code>Control.Applicative</code>æ¨¡å—ä¸­çš„ZipListï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">newtype</span> <span class="type">ZipList</span> a = &#123; <span class="title">getZipList</span> :: [<span class="title">a</span>] &#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸åŒäºtypeï¼Œå®ƒä¸æ˜¯åˆ«åï¼Œå¯ä»¥ä½¿ç”¨recordè¯­æ³•æ¥ç›´æ¥å®šä¹‰å–å‡ºå€¼çš„å‡½æ•°</li>
<li>ä¸åŒäºdataï¼Œå®ƒåªèƒ½æœ‰ä¸€ä¸ªå€¼æ„é€ å™¨ï¼Œä½†æ˜¯é€Ÿåº¦è¦æ¯”dataå¿«ï¼Œè€Œä¸”æ›´åŠ æ‡’æƒ°</li>
</ul>
<h3 id="Recursive-data-structures"><a href="#Recursive-data-structures" class="headerlink" title="Recursive data structures"></a>Recursive data structures</h3><p>ä¸€ä¸ªç±»å‹ä¹Ÿå¯ä»¥é€’å½’å®šä¹‰ï¼Œæ¯”å¦‚ä¸€é¢—äºŒå‰æ ‘ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Tree</span> a = <span class="type">EmptyTree</span> | <span class="type">Node</span> a (<span class="type">Tree</span> <span class="title">a</span>) (<span class="type">Tree</span> <span class="title">a</span>) <span class="keyword">deriving</span> (<span class="type">Show</span>, <span class="type">Read</span>, <span class="type">Eq</span>)  </span></span><br></pre></td></tr></table></figure>

<h2 id="å®šä¹‰æ–°Typeclass"><a href="#å®šä¹‰æ–°Typeclass" class="headerlink" title="å®šä¹‰æ–°Typeclass"></a>å®šä¹‰æ–°Typeclass</h2><p>å®šä¹‰ä¸€ä¸ªæ–°çš„Typeclasséœ€è¦ä½¿ç”¨classå…³é”®å­—ï¼Œä¾‹å¦‚å®šä¹‰Eqç±»å‹ç±»ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Eq</span> a <span class="keyword">where</span></span>  </span><br><span class="line">    (==) :: a -&gt; a -&gt; <span class="type">Bool</span>  </span><br><span class="line">    (/=) :: a -&gt; a -&gt; <span class="type">Bool</span>  </span><br><span class="line">    x == y = not (x /= y)  </span><br><span class="line">    x /= y = not (x == y)  </span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>a</code>æ˜¯ä¸€ä¸ªç±»å‹å˜é‡ï¼Œå‰ä¸¤è¡Œå£°æ˜äº†éœ€è¦å®ç°çš„å‡½æ•°çš„åå­—åŠå…¶ç±»å‹ï¼Œåä¸¤è¡Œè¡¨æ˜äº†éœ€è¦çš„å‡½æ•°ä¹‹é—´å¯ä»¥ç›¸äº’å®šä¹‰ï¼ˆä¸å¿…è¦ï¼‰ã€‚</p>
<p>åŒ…å«äº†åä¸¤è¡Œä¹‹åï¼Œåªå®šä¹‰(==)å‡½æ•°æˆ–è€…(/=)å‡½æ•°éƒ½å¯ä»¥å®Œæˆå…¨éƒ¨å®šä¹‰ï¼Œå®ƒä»¬ï¼ˆ<code>(==) | (/=)</code>ï¼‰æˆä¸ºè¿™ä¸ªç±»å‹ç±»çš„æœ€å°å®Œæ•´å®šä¹‰ï¼ˆminimal complete definitionï¼‰</p>
<p>æŸ¥çœ‹ä¸€ä¸ªç±»å‹ç±»çš„æˆå‘˜éœ€è¦å®ç°çš„å‡½æ•°å¯ä»¥åœ¨GHCiä¸­ä½¿ç”¨<code>:info</code>ï¼š</p>
<p style="text-align: center;">ghci> :info Eq</p>

<h3 id="æ‰‹åŠ¨åˆ›å»ºå®ä¾‹"><a href="#æ‰‹åŠ¨åˆ›å»ºå®ä¾‹" class="headerlink" title="æ‰‹åŠ¨åˆ›å»ºå®ä¾‹"></a>æ‰‹åŠ¨åˆ›å»ºå®ä¾‹</h3><p>ä½¿ä¸€ä¸ªç±»å‹æˆä¸ºä¸€ä¸ªç±»å‹ç±»çš„å®ä¾‹å¯ä»¥ç›´æ¥ä½¿ç”¨<code>deriving</code>æ¥è‡ªåŠ¨å®Œæˆï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨instanceå…³é”®å­—æ¥æ‰‹åŠ¨å®Œæˆã€‚æ¯”å¦‚ä½¿Pointæˆä¸ºShowçš„å®ä¾‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Show</span> <span class="type">Point</span> <span class="keyword">where</span></span></span><br><span class="line">    show (<span class="type">Point</span> x y) = <span class="string">&quot;(&quot;</span> ++ show x ++ <span class="string">&quot;, &quot;</span> ++ show y ++ <span class="string">&quot;)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- in ghci</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="type">Point</span> <span class="number">1.0</span> <span class="number">2.0</span></span><br><span class="line">(<span class="number">1.0</span>, <span class="number">2.0</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥è‡ªå®šä¹‰æ˜¾ç¤ºçš„å†…å®¹ï¼Œå¦åˆ™ä½¿ç”¨derivingçš„è¯åªä¼šç›´æ¥å°†å…¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚</p>
<p>åŒæ—¶ä¹Ÿè¦æ³¨æ„ç±»å‹å’Œç±»å‹æ„é€ å™¨çš„åŒºåˆ«ï¼Œä¼ å…¥ç»™instanceçš„ç¬¬äºŒä¸ªå‚æ•°åº”è¯¥ä¸ºç±»å‹è€Œä¸æ˜¯ç±»å‹æ„é€ å™¨ï¼Œæ¯”å¦‚Maybeï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Eq</span> <span class="type">Maybe</span> <span class="keyword">where</span></span>  </span><br><span class="line">    ...    </span><br><span class="line"><span class="comment">-- é”™è¯¯ç”¨æ³•ï¼Œå› ä¸ºMaybeæ˜¯ç±»å‹æ„é€ å™¨è€Œä¸æ˜¯ç±»å‹</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Eq</span> (<span class="type">Maybe</span> <span class="title">m</span>) <span class="keyword">where</span></span>  </span><br><span class="line">    ...</span><br><span class="line"><span class="comment">-- é”™è¯¯ç”¨æ³•ï¼Œå› ä¸ºmä¸ä¸€å®šæ˜¯Eqçš„æˆå‘˜</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> (<span class="type">Eq</span> <span class="title">m</span>) =&gt; <span class="type">Eq</span> (<span class="type">Maybe</span> <span class="title">m</span>) <span class="keyword">where</span></span>  </span><br><span class="line">    <span class="type">Just</span> x == <span class="type">Just</span> y = x == y  </span><br><span class="line">    <span class="type">Nothing</span> == <span class="type">Nothing</span> = <span class="type">True</span>  </span><br><span class="line">    _ == _ = <span class="type">False</span>  </span><br></pre></td></tr></table></figure>

<h3 id="Functor-Typeclass"><a href="#Functor-Typeclass" class="headerlink" title="Functor Typeclass"></a>Functor Typeclass</h3><p>Functorä¹Ÿæ˜¯ä¸€ç§ç±»å‹ç±»ï¼Œå®ƒåªè§„å®šäº†ä¸€ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Functor</span> f <span class="keyword">where</span></span></span><br><span class="line">    fmap :: (a -&gt; b) -&gt; f a -&gt; f b</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>f</code>æ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…·ä½“ç±»å‹</p>
<h2 id="Kinds"><a href="#Kinds" class="headerlink" title="Kinds"></a>Kinds</h2><p>ä¸€ä¸ªå€¼çš„ç±»å‹å«åšç±»å‹ï¼ˆTypeï¼‰ï¼Œè€Œä¸€ä¸ªç±»å‹çš„ç±»å‹å«åšKindã€‚å¯ä»¥é€šè¿‡GHCiä¸­<code>:k</code>æ¥æŸ¥çœ‹Kindï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; :k <span class="type">Int</span></span><br><span class="line"><span class="type">Int</span> :: *</span><br><span class="line"><span class="title">ghci</span>&gt; :k <span class="type">Maybe</span></span><br><span class="line"><span class="type">Maybe</span> :: * -&gt; *</span><br><span class="line"><span class="title">ghci</span>&gt; :k <span class="type">Maybe</span> <span class="type">Int</span></span><br><span class="line"><span class="type">Maybe</span> <span class="type">Int</span> :: *</span><br><span class="line"><span class="title">ghci</span>&gt; :k <span class="type">Either</span></span><br><span class="line"><span class="type">Either</span> :: * -&gt; * -&gt; *</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„æ˜Ÿå·<code>*</code>ä»£è¡¨äº†ä¸€ä¸ªå…·ä½“ç±»å‹ï¼ˆconcrete typeï¼‰ã€‚Intæœ¬èº«å°±æ˜¯ä¸€ä¸ªå…·ä½“ç±»å‹ï¼Œæ‰€ä»¥Intçš„Kindæ˜¯*ã€‚è€ŒMaybeæ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå…·ä½“ç±»å‹è¿”å›ä¸€ä¸ªæ–°çš„å…·ä½“ç±»å‹ï¼Œæ‰€ä»¥Maybeçš„Kindæ˜¯* -&gt; *ã€‚å¦‚æœç»™Maybeä¼ å…¥äº†ä¸€ä¸ªIntï¼Œé‚£ä¹ˆå¾—åˆ°çš„Maybe Intå°±æ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»å‹ï¼Œå®ƒçš„Kindå°±æ˜¯*ã€‚Eitherä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹æ„é€ å™¨ï¼Œä½†å®ƒæ¥æ”¶ä¸¤ä¸ªç±»å‹æ‰äº§ç”Ÿä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œæ‰€ä»¥Eitherçš„Kindæ˜¯* -&gt; * -&gt; *ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://learnyouahaskell.com/chapters">Learn You a Haskell</a></li>
</ul>
<hr>
<div style="text-align: center;">

<p style="font-size: 1.3rem; font-weight: bold;">ç›®å½•</p>

<p>#0&nbsp;|&nbsp;<a href="/p/b3ca5c18.html">æ€»ç« </a>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<br>#1&nbsp;|&nbsp;<a href="/p/d63b5b5f.html">åŸºç¡€è¯­æ³•ä¸å‡½æ•°</a>&emsp;&emsp;&emsp;<br>#2&nbsp;|&nbsp;<a href="/p/53e482b7.html">é«˜é˜¶å‡½æ•°ä¸æ¨¡å—</a>&emsp;&emsp;&emsp;<br>#3&nbsp;|&nbsp;<a href="/p/369b7e08.html">ç±»å‹ä¸ç±»å‹ç±»</a>&emsp;&emsp;&emsp;&emsp;<br>#4&nbsp;|&nbsp;<a href="/p/a5bbe48a.html">è¾“å…¥è¾“å‡ºä¸æ–‡ä»¶</a>&emsp;&emsp;&emsp;<br>#5&nbsp;|&nbsp;<a href="/p/290ecb74.html">å‡½å­ã€åº”ç”¨å‡½å­ä¸å•å­</a><br>#6&nbsp;|&nbsp;<a href="/p/d4bb2633.html">åŠç¾¤ä¸å¹ºåŠç¾¤</a>&emsp;&emsp;&emsp;&emsp;<br>#7&nbsp;|&nbsp;<a href="/p/68ef8146.html">ä¸€äº›å…¶å®ƒç±»å‹ç±»</a>&emsp;&emsp;&emsp;<br>#A&nbsp;|&nbsp;<a href="/p/96c32eae.html">Haskellä¸èŒƒç•´è®º</a>&emsp;&nbsp;&thinsp;</p>
</div>]]></content>
      <tags>
        <tag>Haskell</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLearn Haskellã€#2 é«˜é˜¶å‡½æ•°ä¸æ¨¡å—</title>
    <url>/p/53e482b7.html</url>
    <content><![CDATA[<div style="display: flex; justify-content: space-between;">

<p><a href="/p/d63b5b5f.html">&lt; #1</a></p>
<p><a href="/p/369b7e08.html">#3 &gt;</a></p>
</div>

<h2 id="Higher-Order-Functions"><a href="#Higher-Order-Functions" class="headerlink" title="Higher Order Functions"></a>Higher Order Functions</h2><h3 id="Currying"><a href="#Currying" class="headerlink" title="Currying"></a>Currying</h3><p>Haskellä¸­çš„å‡½æ•°æ˜¯æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰çš„ï¼Œå¯ä»¥çœ‹ä½œæ‰€æœ‰å‡½æ•°éƒ½åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè€Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°å®é™…ä¸Šæ˜¯è¿™ä¸ªå‡½æ•°æ¥æ”¶äº†ç¬¬ä¸€ä¸ªå‚æ•°åè¿”å›äº†ä¸€ä¸ªæ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç„¶åç”¨è¿™ä¸ªå‡½æ•°æ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿”å›æœ€ç»ˆçš„ç»“æœã€‚æ¯”å¦‚maxå‡½æ•°ï¼Œå®ƒçš„ç±»å‹ç­¾åæ˜¯ï¼š</p>
<span id="more"></span>
<p style="text-align: center;">max :: Ord a => a -> a -> a</p>

<p>å¯ä»¥çœ‹æˆa -&gt; (a -&gt; a)ï¼Œå³æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç±»å‹ä¸ºa -&gt; açš„å‡½æ•°ã€‚æ¯”å¦‚max 1çš„ç±»å‹ç­¾åæ˜¯ï¼š</p>
<p style="text-align: center;">max 1 :: (Ord a, Num a) => a -> a</p>

<p>å› æ­¤max 1 2ï¼Œä¹Ÿå°±ç­‰åŒäº(max 1) 2ï¼Œå³å°†å‡½æ•°max 1åº”ç”¨åœ¨æ•°å­—2ä¸Š</p>
<p>åŒæ—¶ï¼Œå‡½æ•°ä¹Ÿå¯ä»¥æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå‚æ•°æœ‰å‡½æ•°çš„å‡½æ•°å°±è¢«ç§°ä¸ºé«˜é˜¶å‡½æ•°ï¼ˆHigher Order Functionsï¼‰</p>
<h3 id="ä¸€äº›é«˜é˜¶å‡½æ•°"><a href="#ä¸€äº›é«˜é˜¶å‡½æ•°" class="headerlink" title="ä¸€äº›é«˜é˜¶å‡½æ•°"></a>ä¸€äº›é«˜é˜¶å‡½æ•°</h3><h4 id="zipWith"><a href="#zipWith" class="headerlink" title="zipWith"></a>zipWith</h4><p style="text-align: center;">zipWith :: (a -> b -> c) -> [a] -> [b] -> [c]</p>

<p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ¥æ”¶ä¸¤ä¸ªåˆ—è¡¨ï¼Œå°†å…¶å¯¹åº”å…ƒç´ ä¼ å…¥æ¥æ”¶çš„å‡½æ•°ä¸­ï¼Œå¾—åˆ°çš„ç»“æœç»„æˆä¸€ä¸ªæ–°çš„åˆ—è¡¨ã€‚å¦‚æœä¸¤ä¸ªä¼ å…¥çš„åˆ—è¡¨é•¿åº¦ä¸åŒï¼Œä»¥æœ€çŸ­çš„åˆ—è¡¨ä¸ºå‡†ï¼Œé•¿åˆ—è¡¨ä¸­è¶…å‡ºçš„å…ƒç´ çœç•¥ã€‚ç”¨ä¾‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; zipWith (+) [<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>] [<span class="number">2</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">3</span>]  </span><br><span class="line">[<span class="number">6</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">9</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; zipWith max [<span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>] [<span class="number">7</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>]  </span><br><span class="line">[<span class="number">7</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>]  </span><br></pre></td></tr></table></figure>

<h4 id="flip"><a href="#flip" class="headerlink" title="flip"></a>flip</h4><p style="text-align: center;">flip :: (a -> b -> c) -> b -> a -> c</p>

<p>flipå‡½æ•°æ¥æ”¶ä¸€ä¸ªäºŒå…ƒå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„äºŒå…ƒå‡½æ•°ï¼Œå°†å…¶è¾“å…¥çš„ä¸¤ä¸ªå‚æ•°é¡ºåºåè¿‡æ¥ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; zip [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>] <span class="string">&quot;hello&quot;</span></span><br><span class="line">[(<span class="number">1</span>,&#x27;h&#x27;),(<span class="number">2</span>,&#x27;e&#x27;),(<span class="number">3</span>,&#x27;l&#x27;),(<span class="number">4</span>,&#x27;l&#x27;),(<span class="number">5</span>,&#x27;o&#x27;)]</span><br><span class="line"><span class="title">ghci</span>&gt; flip zip [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>] <span class="string">&quot;hello&quot;</span>  </span><br><span class="line">[(&#x27;h&#x27;,<span class="number">1</span>),(&#x27;e&#x27;,<span class="number">2</span>),(&#x27;l&#x27;,<span class="number">3</span>),(&#x27;l&#x27;,<span class="number">4</span>),(&#x27;o&#x27;,<span class="number">5</span>)]</span><br></pre></td></tr></table></figure>

<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><p style="text-align: center;">map :: (a -> b) -> [a] -> [b]</p>

<p>mapå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°få’Œä¸€ä¸ªåˆ—è¡¨aï¼Œå°†å‡½æ•°fåº”ç”¨åœ¨åˆ—è¡¨açš„æ¯ä¸ªå…ƒç´ ä¸­ï¼Œå¹¶è¿”å›å¾—åˆ°çš„æ‰€æœ‰ç»“æœç»„æˆçš„åˆ—è¡¨bï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; map (+<span class="number">3</span>) [<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">6</span>]  </span><br><span class="line">[<span class="number">4</span>,<span class="number">8</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">9</span>]  </span><br></pre></td></tr></table></figure>

<h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><p style="text-align: center;">filter :: (a -> Bool) -> [a] -> [a]</p>

<p>filterå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°få’Œä¸€ä¸ªåˆ—è¡¨aï¼Œå°†åˆ—è¡¨aä¸­çš„æ¯ä¸ªå…ƒç´ ä¼ å…¥å‡½æ•°fä¸­ï¼Œå¦‚æœç»“æœä¸ºTrueå°±ä¿ç•™ï¼Œç»“æœä¸ºFalseå°±æŠ›å¼ƒï¼Œè¿”å›æ‰€æœ‰ä¿ç•™çš„å…ƒç´ ç»„æˆçš„æ–°åˆ—è¡¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; filter even [<span class="number">1.</span><span class="number">.10</span>]  </span><br><span class="line">[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>] </span><br></pre></td></tr></table></figure>

<h4 id="takeWhile"><a href="#takeWhile" class="headerlink" title="takeWhile"></a>takeWhile</h4><p style="text-align: center;">takeWhile :: (a -> Bool) -> [a] -> [a]</p>

<p>takeWhileå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°få’Œä¸€ä¸ªåˆ—è¡¨aï¼Œå°†åˆ—è¡¨aä¸­ä»å·¦å‘å³æ¯ä¸ªå…ƒç´ ä¼ å…¥å‡½æ•°fï¼Œç›´åˆ°ç»“æœä¸ºFalseåœæ­¢ï¼Œè¿”å›åœæ­¢å‰ä¼ å…¥çš„æ‰€æœ‰å…ƒç´ ç»„æˆçš„æ–°åˆ—è¡¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; takeWhile (/=&#x27; &#x27;) <span class="string">&quot;word1 word2&quot;</span></span><br><span class="line"><span class="string">&quot;word1&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Function-application"><a href="#Function-application" class="headerlink" title="Function application"></a>Function application</h3><p>å‡½æ•°åº”ç”¨å¯ä»¥ä½¿ç”¨<code>$</code>ï¼Œ<code>$</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">($) :: (a -> b) -> a -> b</p>

<p>å®ƒå¯ä»¥æ”¹å˜å‡½æ•°ç»“åˆä¼˜å…ˆçº§ï¼Œå°†å·¦ä¾§å‡½æ•°åº”ç”¨äºå…¨éƒ¨å³ä¾§å†…å®¹ä¸Šï¼Œç›¸å½“äºç»™å³ä¾§æ•´ä½“åŠ ä¸Šäº†æ‹¬å·ã€‚å¦åˆ™å‡½æ•°é»˜è®¤å·¦ç»“åˆï¼Œä¼šä¾æ¬¡å‘å³åº”ç”¨è€Œä¸ä¼šåº”ç”¨åœ¨æ•´ä½“ä¸Šã€‚</p>
<!--more-->
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">f</span> $ g x</span><br><span class="line"><span class="comment">-- ç­‰ä»·äº</span></span><br><span class="line"><span class="title">f</span> (g x)</span><br><span class="line"><span class="comment">-----</span></span><br><span class="line"><span class="title">f</span> g x</span><br><span class="line"><span class="comment">-- ç­‰ä»·äº</span></span><br><span class="line">(f g) x</span><br></pre></td></tr></table></figure>
<h3 id="Function-Composition"><a href="#Function-Composition" class="headerlink" title="Function Composition"></a>Function Composition</h3><p>å‡½æ•°å¤åˆå¯ä»¥ä½¿ç”¨<code>.</code>ï¼Œ<code>.</code>ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„ç±»å‹æ˜¯ï¼š</p>
<p style="text-align: center;">(.) :: (b -> c) -> (a -> b) -> a -> c</p>

<p>å®šä¹‰æ˜¯ï¼š</p>
<p style="text-align: center;">f . g = \x -> f (g x)</p>

<p>ä½†æ˜¯å‡½æ•°å¤åˆçš„ä¼˜å…ˆçº§è¦æ¯”å‡½æ•°æ‰§è¡Œä½ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">sum</span> . replicate <span class="number">5</span> . max <span class="number">6.7</span> <span class="number">8.9</span></span><br></pre></td></tr></table></figure>
<p>ä¼šå…ˆæ‰§è¡Œmax 6.7 8.9å¹¶è¿”å›8.9ï¼Œç„¶åå°†sumã€replicate 5ã€8.9å¤åˆï¼Œä½†ä¸¤ä¸ªå‡½æ•°æ— æ³•å’Œä¸€ä¸ªå€¼(8.9)å¤åˆï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚å› æ­¤è¦ä½¿ç”¨<code>$</code>æ¥è§„å®šå…ˆå¤åˆå†æ‰§è¡Œï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">sum</span> . replicate <span class="number">5</span> . max <span class="number">6.7</span> $ <span class="number">8.9</span></span><br></pre></td></tr></table></figure>

<h3 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h3><p>Haskellè¯­è¨€ä¸­çš„lambdaè¡¨è¾¾å¼æ˜¯ç”¨<code>\</code>æ¥è¡¨ç¤ºçš„ï¼ˆå› ä¸ºçœ‹ç€åƒ$\mathtt{\lambda}$ï¼Ÿï¼‰<br>å…·ä½“è¯­æ³•æ˜¯</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">\para1 para2 ... -&gt; return</span><br></pre></td></tr></table></figure>
<p>â€œ-&gt;â€å‰çš„ para1 para2 â€¦ æ˜¯ä¼ å…¥å‚æ•°ï¼Œå•ä¸ªå¤šä¸ªéƒ½å¯ä»¥ï¼Œéœ€è¦ç”¨ç©ºæ ¼éš”å¼€ï¼›â€-&gt;â€åçš„ return æ˜¯è®¡ç®—å¾—åˆ°çš„è¿”å›å€¼ã€‚ä¸€èˆ¬éœ€è¦ç”¨æ‹¬å·å°†æ•´ä¸ªè¡¨è¾¾å¼æ‹¬èµ·æ¥ï¼Œé˜²æ­¢è¿”å›å€¼éƒ¨åˆ†ä¸€ç›´å‘å³å»¶ä¼¸ã€‚</p>
<h3 id="foldå’Œscan"><a href="#foldå’Œscan" class="headerlink" title="foldå’Œscan"></a>foldå’Œscan</h3><p>foldå’Œscanéƒ½æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼ˆä¸€ä¸ªäºŒå…ƒå‡½æ•°ï¼Œä¸€ä¸ªåˆå§‹å€¼accumulatorï¼Œä¸€ä¸ªè¦æŠ˜å çš„åˆ—è¡¨ï¼‰ï¼Œfoldè¿”å›ä¸€ä¸ªå€¼ï¼Œè€Œscanè¿”å›ä¸€ä¸ªåˆ—è¡¨<br>ä¼ å…¥çš„äºŒå…ƒå‡½æ•°<code>f :: a -&gt; b -&gt; b</code>å°†accumulatorå’Œä»åˆ—è¡¨ä¸­å–å‡ºçš„å€¼ä¸€åŒä¼ å…¥ï¼ˆlåˆ™accumulatoråœ¨å·¦è¾¹ä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œråˆ™accumulatoråœ¨å³è¾¹ä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼‰</p>
<h4 id="foldl"><a href="#foldl" class="headerlink" title="foldl"></a>foldl</h4><p>å·¦æŠ˜å ï¼Œæ¯æ¬¡ä»åˆ—è¡¨æœ€å·¦ä¾§å–å‡ºä¸€ä¸ªå€¼ï¼Œå’Œaccumulatorä¸€èµ·ä¼ å…¥äºŒå…ƒå‡½æ•°ï¼Œå¹¶ä¸”accumulatoråœ¨å·¦è¾¹ä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">foldl</span> f a xs</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„ç»“æœè®¡ç®—è¿‡ç¨‹ä¸º</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">&gt; foldl f a [x1, x2, x3]</span><br><span class="line">[<span class="number">1.</span>] a = f a x1</span><br><span class="line">[<span class="number">2.</span>] a = f a x2 = f (f a x1) x2</span><br><span class="line">[<span class="number">3.</span>] a = f a x3 = f (f (f a x1) x2) x3</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡º f (f a x1) x2 å…¶å®å°±æ˜¯ foldl f a [x1, x2]<br>è€Œä¸”å› æ­¤ï¼Œfoldlåœ¨è®¡ç®—æ—¶æœ€å¤–å±‚éœ€è¦æ‰¾åˆ°x3ï¼Œè¿™æ ·å¦‚æœxsæ˜¯ä¸€ä¸ªæ— ç©·åˆ—è¡¨ï¼Œé‚£ä¹ˆå°†æ— æ³•è®¡ç®—ï¼Œé™·å…¥æ— ç©·ã€‚æ‰€ä»¥foldlè™½ç„¶çœ‹èµ·æ¥ä»å·¦è¾¹å–å€¼ï¼Œä½†æ˜¯å‡½æ•°éœ€è¦ä»å³ä¾§å±•å¼€ï¼Œå¹¶ä¸é€‚ç”¨äºæ— ç©·åˆ—è¡¨</p>
<h4 id="foldr"><a href="#foldr" class="headerlink" title="foldr"></a>foldr</h4><p>å³æŠ˜å ï¼Œæ¯æ¬¡ä»åˆ—è¡¨æœ€å³ä¾§å–å‡ºä¸€ä¸ªå€¼ï¼Œå’Œaccumulatorä¸€èµ·ä¼ å…¥äºŒå…ƒå‡½æ•°ï¼Œå¹¶ä¸”accumulatoråœ¨å³è¾¹ä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">foldr</span> f a xs</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„ç»“æœè®¡ç®—è¿‡ç¨‹ä¸º</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">&gt; foldr f a [x1, x2, x3]</span><br><span class="line">[<span class="number">1.</span>] a = f x3 a</span><br><span class="line">[<span class="number">2.</span>] a = f x2 a = f x2 (f x3 a)</span><br><span class="line">[<span class="number">3.</span>] a = f x1 a = f x1 (f x2 (f x3 a))</span><br></pre></td></tr></table></figure>
<p>ä»ä¸­å¯ä»¥çœ‹å‡º f x2 (f x3 a) å°±æ˜¯ foldr f a [x2, x3]<br>å› æ­¤å¯ä»¥ä½¿ç”¨é€’å½’æ¥å†™ä¸€ä¸ªå’Œfoldræ•ˆæœä¸€æ ·çš„å‡½æ•°:</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">foldr&#x27;</span> :: (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b</span><br><span class="line"><span class="title">foldr&#x27;</span> _ x [] = x</span><br><span class="line"><span class="title">foldr&#x27;</span> f a (x:xs) = f x (foldr&#x27; f a xs)</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œæœ€å¤–å±‚è®¡ç®—æ—¶åªéœ€è¦x1å¹¶ä¸”å‘ä¸‹é€’å½’ï¼Œå¹¶ä¸ä¼šæ¥è§¦åˆ°åˆ—è¡¨æœ«å°¾ï¼Œå› æ­¤å¯ä»¥ç”¨äºæ— ç©·åˆ—è¡¨ã€‚foldrå³ä½¿çœ‹ä¸Šå»ä»å³è¾¹å–å€¼ï¼Œä½†æ˜¯è¦ä»å·¦å¼€å§‹å±•å¼€ï¼Œå¯ä»¥ç”¨äºæ— ç©·åˆ—è¡¨</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; foldr (||) <span class="type">False</span> (repeat <span class="type">True</span>)</span><br><span class="line"><span class="type">True</span>    <span class="comment">-- ç”±äºé€»è¾‘è¿ç®—å­˜åœ¨çŸ­è·¯ï¼Œè®¡ç®—å€¼å…¨åº”ä¸ºTrueï¼Œæ‰€ä»¥ç›´æ¥è¿”å›äº†</span></span><br><span class="line"><span class="title">ghci</span>&gt; foldl (||) <span class="type">False</span> (repeat <span class="type">True</span>)</span><br><span class="line"><span class="comment">-- è¿™é‡Œä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿï¼Œç›´åˆ°ç”µè„‘å†…å­˜è¢«çˆ†æ‰</span></span><br><span class="line"><span class="comment">-- å› ä¸ºå‡½æ•°åˆšå¼€å§‹å°±éœ€è¦åˆ—è¡¨æœ€å³ä¾§çš„å€¼ï¼Œæ‰€ä»¥åœ¨ä¸æ–­è®¡ç®—è¿™ä¸ªæ— ç©·åˆ—è¡¨</span></span><br></pre></td></tr></table></figure>

<h4 id="scanlå’Œscanr"><a href="#scanlå’Œscanr" class="headerlink" title="scanlå’Œscanr"></a>scanlå’Œscanr</h4><p>scanç±»ä¼¼foldï¼Œåªæ˜¯å°†ä¸­é—´å¾—åˆ°çš„æ¯ä¸€ä¸ªå€¼éƒ½æ·»åŠ è¿›ä¸€ä¸ªåˆ—è¡¨ä¸­å¹¶è¿”å›è¿™ä¸ªåˆ—è¡¨<br>scanlåˆ™å‘å³å»¶ä¼¸è¿™ä¸ªåˆ—è¡¨ï¼Œscanråˆ™å‘å·¦å»¶ä¼¸è¿™ä¸ªåˆ—è¡¨<br>ä½†æ˜¯å®ƒå’Œfoldæ°æ°ç›¸åï¼Œscanlèƒ½ç”¨äºæ— ç©·åˆ—è¡¨ï¼Œè€Œscanrä¸èƒ½</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">&gt; scanr f a [x1, x2, x3]</span><br><span class="line">[<span class="number">1.</span>] æœ€å³ä¾§å…ƒç´ (<span class="number">-1</span> <span class="keyword">in</span> python) : a</span><br><span class="line">[<span class="number">2.</span>] å³ä¾§ç¬¬äºŒä¸ªå…ƒç´ (<span class="number">-2</span>) : f x3 a</span><br><span class="line">[<span class="number">3.</span>] å³ä¾§ç¬¬ä¸‰ä¸ªå…ƒç´ (<span class="number">-3</span>) : f x2 (f x3 a)</span><br><span class="line">[<span class="number">4.</span>] å³ä¾§ç¬¬å››ä¸ªå…ƒç´ (<span class="number">-4</span>) : f x1 (f x2 (f x3 a))</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡º f x2 (f x3 a) æ˜¯ foldr f a [x2, x3]ï¼Œä¹Ÿæ˜¯ scanr f a [x2, x3] çš„ç¬¬ä¸€ä¸ªå…ƒç´ <br>å› æ­¤å¯ä»¥ç”¨é€’å½’æ¥å†™ä¸€ä¸ªå’Œscanræ•ˆæœä¸€æ ·çš„å‡½æ•°ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">scanr&#x27;</span> :: (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; [b]</span><br><span class="line"><span class="title">scanr&#x27;</span> _ x [] = [x]</span><br><span class="line"><span class="comment">-- scanr&#x27; f a (x:xs) = f x (foldr f a xs) : scanr&#x27; f a xs</span></span><br><span class="line"><span class="title">scanr&#x27;</span> f a (x:xs) = f x q : qs</span><br><span class="line">                    <span class="keyword">where</span> qs@(q:_) = scanr&#x27; f a xs</span><br></pre></td></tr></table></figure>
<p>scanlä¹Ÿæ˜¯åŒç†ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">scanl&#x27;</span> :: (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; [b]</span><br><span class="line"><span class="title">scanl&#x27;</span> _ x [] = [x]</span><br><span class="line"><span class="title">scanl&#x27;</span> f a (x:xs) = a : scanl&#x27; f (f a x) xs</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œscanrè¿”å›çš„åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æœ€åæ·»åŠ è¿›å»çš„ï¼Œæ‰€ä»¥å®ƒæ— æ³•ç”¨äºæ— ç©·åˆ—è¡¨ã€‚è€Œscanlè¿”å›çš„åˆ—è¡¨ä¸­çš„å…ƒç´ æ˜¯ä»å·¦åˆ°å³ä¾æ¬¡æ·»åŠ ï¼Œå¯ä»¥ç”¨äºæ— ç©·åˆ—è¡¨æˆªå–å‰ä¸€éƒ¨åˆ†ç»“æœï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; take <span class="number">10</span> (scanl (+) <span class="number">0</span> [<span class="number">1.</span>.])</span><br><span class="line">[<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">15</span>,<span class="number">21</span>,<span class="number">28</span>,<span class="number">36</span>,<span class="number">45</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; take <span class="number">10</span> (scanr (+) <span class="number">0</span> [<span class="number">1.</span>.])</span><br><span class="line">[*** <span class="type">Exception</span>: stack overflow</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨foldrç¼–å†™foldl"><a href="#ä½¿ç”¨foldrç¼–å†™foldl" class="headerlink" title="ä½¿ç”¨foldrç¼–å†™foldl"></a>ä½¿ç”¨foldrç¼–å†™foldl</h4><p>pdcxsè¿˜ç»™æˆ‘ä»‹ç»äº†ä¸€ä¸ªç¥å¥‡çš„æ“ä½œï¼Œç”¨foldlæ¥å®šä¹‰foldrï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">foldl&#x27;</span> f z xs = foldr (\x g y -&gt; g (f y x)) id xs z</span><br></pre></td></tr></table></figure>

<p>å®ƒåˆ©ç”¨ foldr (\x g y -&gt; g (f y x)) id xs ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼Œä½œç”¨äºzå¾—åˆ°ç»“æœã€‚</p>
<p>å…ˆæ¥çœ‹ä¸€ä¸‹foldrçš„ç±»å‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">foldr</span> :: <span class="type">Foldable</span> t =&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b</span><br><span class="line"><span class="comment">-- å¯ä»¥çœ‹æˆ (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç±»å‹bå¹¶ä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°(b -&gt; b)ã€‚</p>
<p>æ‰€ä»¥è¿™é‡Œfoldrçš„ç±»å‹å¯ä»¥å†™æˆï¼š</p>
<p style="text-align: center;">(a -> (b -> b) -> (b -> b)) -> (b -> b) -> [a] -> (b -> b)</p>

<p>å¯¹åº”äºç”¨æ³• foldr (\x g y -&gt; g (f y x)) id xs ï¼Œå®ƒè¿”å›çš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç±»å‹ä¸º b -&gt; bï¼ˆåé¢è¦ä½œç”¨äºzï¼‰<br>è€Œxså¯¹åº”äº[a]ï¼›idå¯¹åº”äº(b -&gt; b)<br>æ‰€ä»¥ (\x g y -&gt; g (f y x)) è¦å¯¹åº”äºï¼š</p>
<p style="text-align: center;">(a -> (b -> b) -> (b -> b))</p>

<p>å› æ­¤å¯ä»¥æ¨æ–­å‡ºxçš„ç±»å‹æ˜¯aï¼›yçš„ç±»å‹æ˜¯bï¼›è€Œè¿”å›çš„å€¼ä¸ºä¸€ä¸ªç±»å‹ä¸º(b -&gt; b)çš„å‡½æ•°ã€‚</p>
<p>å†çœ‹ï¼Œè¿”å›çš„å€¼æ˜¯ g (f y x) ï¼Œå…¶ä¸­ f y x è¿”å›çš„æ˜¯ä¸€ä¸ªå€¼ï¼Œç±»å‹ä¸ºb<br>æ‰€ä»¥gæ¥æ”¶ä¸€ä¸ªç±»å‹bï¼Œè¿”å›ä¸€ä¸ªç±»å‹b -&gt; bã€‚å³gçš„ç±»å‹ä¸ºï¼š</p>
<p style="text-align: center;">b -> (b -> b)</p>

<p>ç°åœ¨æ ¹æ®foldrçš„å®šä¹‰ï¼š</p>
<p style="text-align: center;">foldr f a (x:xs) = f x (foldr f a xs)</p>

<p>å¸¦å…¥è®¡ç®—ä¸€ä¸‹ï¼š</p>
<blockquote>
<p>xså³ä¸º[x1..xn]ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œç”¨xsâ€™æ¥è¡¨ç¤º[x2..xn]ï¼Œç”¨xsâ€™â€™æ¥è¡¨ç¤º[x3..xn]</p>
<p>å®šä¹‰ä¸­çš„få³ä¸º(\x g y -&gt; g (f y x))ï¼Œaå³ä¸ºid</p>
</blockquote>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  foldr (\x g y -&gt; g (f y x)) id xs z</span><br><span class="line">= (\x g y -&gt; g (f y x)) x1 (foldr (...) id xs&#x27;) z</span><br></pre></td></tr></table></figure>
<p>å†™å®Œç¬¬ä¸€æ­¥ï¼Œå¯ä»¥å‘ç°ï¼Œx1 (foldr (â€¦) id xsâ€™) z æ­£å¥½åˆ†åˆ«å¯¹åº”äº†lambdaè¡¨è¾¾å¼ä¸­çš„xã€gã€yã€‚å¯ä»¥å°†å…¶åº”ç”¨ï¼Œè¿›ä¸€æ­¥å±•å¼€ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  (\x g y -&gt; g (f y x)) x1 (foldr (...) id xs&#x27;) z</span><br><span class="line">= (foldr (...) id xs&#x27;) (f z x1)</span><br></pre></td></tr></table></figure>
<p>ä¸éš¾å‘ç°ï¼ŒåŸå¼ (foldr (â€¦) id xs) z ç­‰ä»·äºï¼š</p>
<p style="text-align: center;">(foldr (...) id xs') (f z x1)</p>

<p>è·Ÿç€è¿™ä¸ªæ€è·¯ï¼Œxsæ¯æ¬¡å°‘ä¸€ä¸ªå¼€å¤´çš„å…ƒç´ xâ€™ï¼Œzæ¯æ¬¡å˜æ¢æˆä¸º f z xâ€™<br>å› æ­¤ä¸‹ä¸€æ­¥ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  (\x g y -&gt; g (f y x)) x1 (foldr (...) id xs&#x27;) z</span><br><span class="line">= (foldr (...) id xs&#x27;) (f z x1)</span><br><span class="line">= (foldr (...) id xs&#x27;&#x27;) (f (f z x1) x2)</span><br><span class="line">= (foldr (...) id xs&#x27;&#x27;&#x27;) (f (f (f z x1) x2) x3)</span><br><span class="line">= ...</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œå·²ç»æœ‰äº†è§„å¾‹ã€‚é‚£ä¹ˆæœ€ç»ˆåœæ­¢æ—¶æ˜¯ä»€ä¹ˆæ ·å‘¢ï¼Ÿ</p>
<p>æœ€ååˆ°äº†ä¸èƒ½åœ¨å±•å¼€æ—¶ï¼Œæœ€å‰é¢çš„ foldr (â€¦) id xs å·²ç»å˜æˆäº† foldr (â€¦) id []<br>è€Œæ ¹æ®å‰é¢foldrçš„å®šä¹‰ foldr _ x [] = x ï¼Œå®ƒåº”è¯¥è¿”å›id</p>
<p>æ‰€ä»¥æœ€åçš„ç»“æœï¼š<br>(idçš„å®šä¹‰ï¼šid x = x)</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">  ...</span><br><span class="line">= (foldr (...) id xs&#x27;) (f z x1)</span><br><span class="line">= (foldr (...) id xs&#x27;&#x27;) (f (f z x1) x2)</span><br><span class="line">= ...</span><br><span class="line">= (foldr (...) id []) (f (.. (f z x1) ..) xn)</span><br><span class="line">= id (f (.. (f z x1) ..) xn)</span><br><span class="line">= f (.. (f z x1) ..) xn</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆæœ€åè¿™ä¸ªç»“æœå°±å¾ˆç†Ÿæ‚‰äº†ï¼Œå®ƒå°±æ˜¯ foldl f z xsã€‚<br>æ‰€ä»¥æˆ‘ä»¬æ¨å¯¼å‡ºäº†è¿™ä¸ªç”¨foldrè¡¨ç¤ºfoldlçš„å†™æ³•æ˜¯æ­£ç¡®çš„ã€‚</p>
<h2 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h2><p>Haskellä¼šè‡ªåŠ¨åŠ è½½Preludeæ¨¡å—ï¼ˆmoduleï¼‰ï¼Œå¦‚æœåœ¨GHCiä¸­å†åŠ è½½å…¶ä»–æ¨¡å—ï¼Œéœ€è¦ä½¿ç”¨<code>:m + ...</code>ï¼Œæ¯”å¦‚åŠ è½½Data.Listæ¨¡å—ï¼š</p>
<p style="text-align: center;">Prelude> :m + Data.List</p>

<p>è€Œåœ¨hsæ–‡ä»¶ä¸­å¼•å…¥æ¨¡å—ï¼Œéœ€è¦ä½¿ç”¨<code>import</code>è¯­å¥ï¼Œä¸‹é¢å’Œpythonçš„å¯¹æ¯”å¯ä»¥ä¾¿äºç†è§£ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Data.List</span><br><span class="line"><span class="comment">-- from Data.List import *</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Data.List (<span class="title">nub</span>, <span class="title">sort</span>)</span><br><span class="line"><span class="comment">-- from Data.List import nub, sort</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Data.List <span class="keyword">hiding</span> (<span class="title">nub</span>)</span><br><span class="line"><span class="comment">-- ä»Data.Listä¸­å¼•å…¥æ‰€æœ‰ï¼Œä½†ä¸å¼•å…¥nubå‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">qualified</span> Data.List</span><br><span class="line"><span class="comment">-- import Data.List</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">qualified</span> Data.List <span class="keyword">as</span> Li</span><br><span class="line"><span class="comment">-- import Data.List as Li</span></span><br></pre></td></tr></table></figure>

<h3 id="ç¼–å†™Modules"><a href="#ç¼–å†™Modules" class="headerlink" title="ç¼–å†™Modules"></a>ç¼–å†™Modules</h3><p>æ¨¡å—ä¸­è¦åŒ…å«å°†è¦ä½¿ç”¨çš„ä¸€äº›å‡½æ•°ï¼Œåƒæ­£å¸¸çš„hsæ–‡ä»¶ä¸€æ ·å†™å³å¯ï¼Œä½†å¤´éƒ¨éœ€è¦æœ‰å¯¼å‡ºè¯­å¥ï¼ˆexportï¼‰ã€‚æ¯”å¦‚ä¸€ä¸ªæ¨¡å—æ–‡ä»¶åå«<code>ModuleA.hs</code>ï¼Œé‚£å®ƒçš„å¤´éƒ¨éœ€è¦å†™ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> ModuleA</span><br><span class="line">( <span class="title">functionA</span></span><br><span class="line">, <span class="title">functionB</span></span><br><span class="line">, <span class="title">functionC</span></span><br><span class="line">) <span class="keyword">where</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è€Œä¸”æ–‡ä»¶ä¸­çš„æ‰€æœ‰å‡½æ•°åªå¯¼å‡ºéœ€è¦ä½¿ç”¨çš„å³å¯ã€‚æ¯”å¦‚è¯¥æ–‡ä»¶ä¸­è¿˜å«æœ‰functionDä¾›å‰ä¸‰ä¸ªå‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œé‚£ä¹ˆåœ¨import ModuleAä¹‹åä¹Ÿæ— æ³•è°ƒç”¨functionDã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://learnyouahaskell.com/chapters">Learn You a Haskell</a></li>
<li><a href="https://stackoverflow.com/questions/6172004/writing-foldl-using-foldr">Writing foldl using foldr - StackOverflow</a></li>
<li><a href="https://blog.csdn.net/WinterShiver/article/details/103308165">Haskellï¼šç”¨foldrå®šä¹‰foldl</a></li>
</ul>
<hr>
<div style="text-align: center;">

<p style="font-size: 1.3rem; font-weight: bold;">ç›®å½•</p>

<p>#0&nbsp;|&nbsp;<a href="/p/b3ca5c18.html">æ€»ç« </a>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<br>#1&nbsp;|&nbsp;<a href="/p/d63b5b5f.html">åŸºç¡€è¯­æ³•ä¸å‡½æ•°</a>&emsp;&emsp;&emsp;<br>#2&nbsp;|&nbsp;<a href="/p/53e482b7.html">é«˜é˜¶å‡½æ•°ä¸æ¨¡å—</a>&emsp;&emsp;&emsp;<br>#3&nbsp;|&nbsp;<a href="/p/369b7e08.html">ç±»å‹ä¸ç±»å‹ç±»</a>&emsp;&emsp;&emsp;&emsp;<br>#4&nbsp;|&nbsp;<a href="/p/a5bbe48a.html">è¾“å…¥è¾“å‡ºä¸æ–‡ä»¶</a>&emsp;&emsp;&emsp;<br>#5&nbsp;|&nbsp;<a href="/p/290ecb74.html">å‡½å­ã€åº”ç”¨å‡½å­ä¸å•å­</a><br>#6&nbsp;|&nbsp;<a href="/p/d4bb2633.html">åŠç¾¤ä¸å¹ºåŠç¾¤</a>&emsp;&emsp;&emsp;&emsp;<br>#7&nbsp;|&nbsp;<a href="/p/68ef8146.html">ä¸€äº›å…¶å®ƒç±»å‹ç±»</a>&emsp;&emsp;&emsp;<br>#A&nbsp;|&nbsp;<a href="/p/96c32eae.html">Haskellä¸èŒƒç•´è®º</a>&emsp;&nbsp;&thinsp;</p>
</div>]]></content>
      <tags>
        <tag>Haskell</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLearn Haskellã€#1 åŸºç¡€è¯­æ³•ä¸å‡½æ•°</title>
    <url>/p/d63b5b5f.html</url>
    <content><![CDATA[<div style="display: flex; justify-content: space-between;">

<p><a href="/p/b3ca5c18.html">&lt; #0</a></p>
<p><a href="/p/53e482b7.html">#2 &gt;</a></p>
</div>

<h2 id="åŸºç¡€è¿ç®—"><a href="#åŸºç¡€è¿ç®—" class="headerlink" title="åŸºç¡€è¿ç®—"></a>åŸºç¡€è¿ç®—</h2><ul>
<li><code>+ - * / ()</code>ï¼šåŠ å‡ä¹˜é™¤</li>
<li><code>div</code>ï¼šæ•´é™¤</li>
<li><code>mod</code>ï¼šå–æ¨¡</li>
<li><code>True False</code>ï¼šå¸ƒå°”å€¼<span id="more"></span></li>
<li><code>|| &amp;&amp; not</code>ï¼šæˆ–ä¸”é</li>
<li><code>==</code>ï¼šæ¡ä»¶åˆ¤æ–­ï¼Œç›¸ç­‰</li>
<li><code>/=</code>ï¼šæ¡ä»¶åˆ¤æ–­ï¼Œä¸ç­‰</li>
</ul>
<h3 id="å‡½æ•°è°ƒç”¨"><a href="#å‡½æ•°è°ƒç”¨" class="headerlink" title="å‡½æ•°è°ƒç”¨"></a>å‡½æ•°è°ƒç”¨</h3><p>Haskellä¸­è°ƒç”¨å‡½æ•°ä¸åŠ æ‹¬å·ï¼Œå…ˆå†™å‡ºå‡½æ•°åï¼Œç„¶åé€ä¸ªåˆ—å‡ºå‚æ•°ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; max <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>å‰ç¼€ï¼ˆprefixï¼‰å‡½æ•°ä¸ä¸­ç¼€ï¼ˆinfixï¼‰å‡½æ•°è½¬æ¢ï¼š</p>
<ul>
<li>å¯¹å‰ç¼€å‡½æ•°åŠ <code>``</code>ä½¿å…¶å˜æˆä¸­ç¼€å‡½æ•°</li>
<li>å¯¹ä¸­ç¼€å‡½æ•°åŠ <code>()</code>ä½¿å…¶å˜æˆå‰ç¼€å‡½æ•°</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="number">4</span> `div` <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; <span class="number">1</span> `max` <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="title">ghci</span>&gt; (+) <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="title">ghci</span>&gt; (||) <span class="type">True</span> <span class="type">False</span></span><br><span class="line"><span class="type">True</span></span><br></pre></td></tr></table></figure>

<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>åˆ—è¡¨æ˜¯Haskellä¸­å¾ˆå¸¸è§çš„æ•°æ®ç±»å‹ï¼Œå’ŒPythonä¸­ä¸åŒï¼ŒHaskellä¸­çš„åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯åŒä¸€ä¸ªç±»å‹ã€‚</p>
<p>ä»¥ä¸‹æ˜¯åˆ—è¡¨å¸¸ç”¨çš„å‡½æ•°ï¼š</p>
<!--more-->
<ul>
<li><code>(++)</code> :: [a] -&gt; [a] -&gt; [a]ï¼šåˆå¹¶ä¸¤ä¸ªåˆ—è¡¨</li>
<li><code>(:)</code> :: a -&gt; [a] -&gt; [a]ï¼šå°†å•ä¸ªå…ƒç´ å¹¶å…¥åˆ—è¡¨ã€‚[1, 2, 3]æ˜¯1:2:3:[]çš„è¯­æ³•ç³–</li>
<li><code>(!!)</code> :: [a] -&gt; Int -&gt; aï¼šé€šè¿‡ç´¢å¼•å–å‡ºæŸä¸ªä½ç½®ä¸Šçš„å…ƒç´ ã€‚a !! 1ç›¸å½“äºPythonä¸­çš„a[1]</li>
<li><code>head</code> :: [a] -&gt; aï¼šè¿”å›åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li>
<li><code>tail</code> :: [a] -&gt; [a]ï¼šè¿”å›åˆ—è¡¨ä¸­é™¤å»ç¬¬ä¸€ä¸ªå…ƒç´ åçš„åˆ—è¡¨ï¼ˆè‹¥åªæœ‰ä¸€ä¸ªå…ƒç´ åˆ™è¿”å›ç©ºåˆ—è¡¨[]ï¼‰</li>
<li><code>last</code> :: [a] -&gt; aï¼šè¿”å›åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </li>
<li><code>init</code> :: [a] -&gt; [a]ï¼šè¿”å›åˆ—è¡¨ä¸­é™¤å»æœ€åä¸€ä¸ªå…ƒç´ åçš„åˆ—è¡¨</li>
<li><code>length</code> :: Foldable t =&gt; t a -&gt; Intï¼šè¿”å›åˆ—è¡¨çš„é•¿åº¦</li>
<li><code>null</code> :: Foldable t =&gt; t a -&gt; Boolï¼šè¿”å›åˆ—è¡¨æ˜¯å¦ä¸ºç©º</li>
<li><code>reverse</code> :: [a] -&gt; [a]ï¼šè¿”å›ç¿»è½¬åçš„åˆ—è¡¨</li>
<li><code>take</code> :: Int -&gt; [a] -&gt; [a]ï¼šè¿”å›åˆ—è¡¨açš„å‰nä¸ªå…ƒç´ çš„åˆ—è¡¨(take n a)</li>
<li><code>drop</code> :: Int -&gt; [a] -&gt; [a]ï¼šè¿”å›åˆ—è¡¨aä¸­é™¤å»å‰nä¸ªå…ƒç´ åçš„åˆ—è¡¨(drop n a)</li>
<li><code>maximum</code> :: (Foldable t, Ord a) =&gt; t a -&gt; aï¼šè¿”å›åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼</li>
<li><code>minimum</code> :: (Foldable t, Ord a) =&gt; t a -&gt; aï¼šè¿”å›åˆ—è¡¨ä¸­çš„æœ€å°å€¼</li>
<li><code>sum</code> :: (Foldable t, Num a) =&gt; t a -&gt; aï¼šè¿”å›åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œ</li>
<li><code>product</code> :: (Foldable t, Num a) =&gt; t a -&gt; aï¼šè¿”å›åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„ç§¯</li>
<li><code>elem</code> :: (Foldable t, Eq a) =&gt; t a -&gt; Boolï¼šåˆ¤æ–­å€¼næ˜¯å¦åœ¨åˆ—è¡¨aä¸­(  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">elem</span> n a</span><br><span class="line"><span class="comment">-- æˆ–</span></span><br><span class="line"><span class="title">n</span> `elem` a <span class="comment">--ç”¨``åŒ…ä¸Šå¯ä»¥å˜æˆä¸­ç¼€å‡½æ•°ä½¿ç”¨</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Texas-ranges"><a href="#Texas-ranges" class="headerlink" title="Texas ranges"></a>Texas ranges</h3><p>ä½¿ç”¨<code>..</code>å¯ä»¥è¡¨ç¤ºå‡ºèŒƒå›´å¹¶è‡ªåŠ¨æ¨å¯¼ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [<span class="number">1</span> .. <span class="number">10</span>]  </span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; [&#x27;a&#x27; .. &#x27;z&#x27;]  </span><br><span class="line"><span class="string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; [&#x27;<span class="type">K&#x27;</span> .. &#x27;<span class="type">Z&#x27;</span>]  </span><br><span class="line"><span class="string">&quot;KLMNOPQRSTUVWXYZ&quot;</span> </span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">2</span>, <span class="number">4</span> .. <span class="number">20</span>]  </span><br><span class="line">[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">14</span>,<span class="number">16</span>,<span class="number">18</span>,<span class="number">20</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">3</span>, <span class="number">6</span> .. <span class="number">20</span>]  </span><br><span class="line">[<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">18</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="number">5</span>, <span class="number">4</span> .. <span class="number">1</span>]</span><br><span class="line">[<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ç”¨æ¥ç”Ÿæˆæ— ç©·åˆ—è¡¨ï¼Œå¦‚[1..]ã€[1, 3..]ã€‚åŒæ—¶ä¹Ÿæœ‰å‡½æ•°å¯ä»¥ç”Ÿæˆæ— ç©·åˆ—è¡¨ï¼š</p>
<ul>
<li><code>cycle</code> :: [a] -&gt; [a]ï¼šå°†åŸåˆ—è¡¨ä¸æ–­å¾ªç¯ç”Ÿæˆæ— ç©·åˆ—è¡¨</li>
<li><code>repeat</code> :: a -&gt; [a]ï¼šå°†ä¼ å…¥çš„å€¼ä¸æ–­é‡å¤ç”Ÿæˆæ— ç©·åˆ—è¡¨<ul>
<li><code>replicate</code> :: Int -&gt; a -&gt; [a]ï¼šå°†å€¼aé‡å¤næ¬¡ï¼Œè¿”å›ç”Ÿæˆçš„åˆ—è¡¨(replicate n a)</li>
</ul>
</li>
</ul>
<h3 id="List-comprehension"><a href="#List-comprehension" class="headerlink" title="List comprehension"></a>List comprehension</h3><p>Haskellä¸­ä¹Ÿæœ‰åˆ—è¡¨æ¨å¯¼ï¼Œå½¢å¼æ˜¯ä¸€ä¸ªä¸­æ‹¬å·ï¼Œå·¦ä¾§ä¸ºè¡¨è¾¾å¼ï¼Œå³ä¾§ä¸ºå˜é‡çš„èŒƒå›´å’Œçº¦æŸæ¡ä»¶</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; [x * <span class="number">2</span> | x &lt;- [<span class="number">1</span> .. <span class="number">10</span>]]  </span><br><span class="line">[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">14</span>,<span class="number">16</span>,<span class="number">18</span>,<span class="number">20</span>]  </span><br><span class="line"><span class="title">ghci</span>&gt; [x * <span class="number">2</span> | x &lt;- [<span class="number">1</span> .. <span class="number">10</span>], x * <span class="number">2</span> &gt;= <span class="number">12</span>]  </span><br><span class="line">[<span class="number">12</span>,<span class="number">14</span>,<span class="number">16</span>,<span class="number">18</span>,<span class="number">20</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; [ x | x &lt;- [<span class="number">50</span> .. <span class="number">100</span>], x `mod` <span class="number">7</span> == <span class="number">3</span>]  </span><br><span class="line">[<span class="number">52</span>,<span class="number">59</span>,<span class="number">66</span>,<span class="number">73</span>,<span class="number">80</span>,<span class="number">87</span>,<span class="number">94</span>]   </span><br><span class="line"><span class="title">ghci</span>&gt; [x * y | x &lt;- [<span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>], y &lt;- [<span class="number">8</span>, <span class="number">10</span>, <span class="number">11</span>]]  </span><br><span class="line">[<span class="number">16</span>,<span class="number">20</span>,<span class="number">22</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">55</span>,<span class="number">80</span>,<span class="number">100</span>,<span class="number">110</span>]</span><br></pre></td></tr></table></figure>

<h2 id="Tuple"><a href="#Tuple" class="headerlink" title="Tuple"></a>Tuple</h2><p>Haskellä¸­çš„å…ƒç»„å¯ä»¥æœ‰ä¸åŒé•¿åº¦ï¼Œå…ƒç´ å¯ä»¥æœ‰ä¸åŒç±»å‹ã€‚å¹¶ä¸”ä¸€ä¸ªå…ƒç»„çš„ç±»å‹ç”±å…¶ä¸­æ‰€æœ‰å…ƒç´ çš„ç±»å‹å…±åŒå†³å®šã€‚å®ƒçš„å¸¸ç”¨å‡½æ•°ï¼š</p>
<ul>
<li><code>fst</code> :: (a, b) -&gt; aï¼šè¿”å›å«æœ‰ä¸¤ä¸ªå…ƒç´ å…ƒç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li>
<li><code>snd</code> :: (a, b) -&gt; bï¼šè¿”å›å«æœ‰ä¸¤ä¸ªå…ƒç´ å…ƒç»„ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ </li>
<li><code>zip</code> :: [a] -&gt; [b] -&gt; [(a, b)]ï¼šæ¥æ”¶ä¸¤ä¸ªåˆ—è¡¨ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¾æ¬¡å°†ä¸¤ä¸ªåˆ—è¡¨ä¸­å…ƒç´ é…å¯¹æˆçš„äºŒå…ƒç»„</li>
</ul>
<h2 id="Syntax-in-Functions"><a href="#Syntax-in-Functions" class="headerlink" title="Syntax in Functions"></a>Syntax in Functions</h2><p>å‡½æ•°å¯ä»¥ç›´æ¥å®šä¹‰ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">plus</span> x y = x + y</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶Haskellä¼šè‡ªåŠ¨æ¨æ–­å‡½æ•°çš„ç±»å‹ä¸º(Num a) =&gt; a -&gt; a -&gt; aã€‚ä½†æ˜¯æœ€å¥½åœ¨å®šä¹‰å‡½æ•°å‰å£°æ˜å‡½æ•°çš„ç±»å‹ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">plus</span> :: (<span class="type">Num</span> a) =&gt; a -&gt; a -&gt; a</span><br><span class="line"><span class="title">plus</span> x y = x + y</span><br></pre></td></tr></table></figure>

<h3 id="Pattern-matching"><a href="#Pattern-matching" class="headerlink" title="Pattern matching"></a>Pattern matching</h3><p>å®šä¹‰å‡½æ•°æ—¶å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…è¯­æ³•ã€‚è¿è¡Œæ—¶ä¾æ¬¡å°†è¾“å…¥ä¸ç»™å‡ºçš„æ¨¡å¼ç›¸åŒ¹é…ï¼Œå¦‚æœåŒ¹é…ï¼Œå°±æ‰§è¡Œå¯¹åº”æ“ä½œï¼›ä¸åŒ¹é…ï¼Œå°±ç»§ç»­ä¸ä¸‹ä¸€ä¸ªæ¨¡å¼ç›¸åŒ¹é…ï¼Œç›´åˆ°åŒ¹é…æˆåŠŸï¼Œä¹Ÿå› æ­¤ï¼Œæœ€åå¿…é¡»è¦ç»™å‡ºä¸€ç§é€šç”¨çš„åŒ¹é…æ¥æ¥æ”¶ä¸ç»™å‡ºæ¨¡å¼å…¨ä¸åŒ¹é…çš„è¾“å…¥ã€‚å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">factorial</span> :: (<span class="type">Integral</span> a) =&gt; a -&gt; a  </span><br><span class="line"><span class="title">factorial</span> <span class="number">0</span> = <span class="number">1</span>  </span><br><span class="line"><span class="title">factorial</span> n = n * factorial (n - <span class="number">1</span>)  </span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">first</span> :: (a, b, c) -&gt; a  </span><br><span class="line"><span class="title">first</span> (x, _, _) = x  </span><br><span class="line">  </span><br><span class="line"><span class="title">second</span> :: (a, b, c) -&gt; b  </span><br><span class="line"><span class="title">second</span> (_, y, _) = y  </span><br><span class="line">  </span><br><span class="line"><span class="title">third</span> :: (a, b, c) -&gt; c  </span><br><span class="line"><span class="title">third</span> (_, _, z) = z  </span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>_</code>è¡¨ç¤ºä»»ä½•å€¼ï¼Œä¸”ä¸å…³å¿ƒå®ƒçš„å†…å®¹ï¼Œåªæ˜¯ç”¨æ¥å ä½</p>
<p>åˆ—è¡¨çš„(:)æ“ä½œä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œæ¨¡å¼åŒ¹é…ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">head&#x27;</span> :: [a] -&gt; a  </span><br><span class="line"><span class="title">head&#x27;</span> [] = error <span class="string">&quot;Can&#x27;t call head on an empty list, dummy!&quot;</span>  </span><br><span class="line"><span class="title">head&#x27;</span> (x:_) = x</span><br><span class="line"></span><br><span class="line"><span class="title">sum&#x27;</span> :: (<span class="type">Num</span> a) =&gt; [a] -&gt; a  </span><br><span class="line"><span class="title">sum&#x27;</span> [] = <span class="number">0</span>  </span><br><span class="line"><span class="title">sum&#x27;</span> (x:xs) = x + sum&#x27; xs  </span><br></pre></td></tr></table></figure>
<p>ä½†(++)æ“ä½œä¸å¯ä»¥ç”¨æ¥æ¨¡å¼åŒ¹é…</p>
<p>åœ¨é’ˆå¯¹åˆ—è¡¨è¿›è¡Œæ¨¡å¼åŒ¹é…æ—¶ï¼Œå¦‚æœåŒæ—¶éœ€è¦æ•´ä¸ªåˆ—è¡¨ã€åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå€¼ã€åˆ—è¡¨é™¤ç¬¬ä¸€ä¸ªå€¼å¤–çš„å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨<code>xs@(q:qs)</code>ã€‚æ¯”å¦‚[1, 2, 3]é€šè¿‡<code>xs@(q:qs)</code>åŒ¹é…åï¼Œxsä¸º[1, 2, 3]ï¼Œqä¸º1ï¼Œqsä¸º[2, 3]</p>
<h3 id="Guard-syntax"><a href="#Guard-syntax" class="headerlink" title="Guard syntax"></a>Guard syntax</h3><p>åœ¨å‡½æ•°çš„å®šä¹‰ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®ˆå«ï¼ˆguardï¼‰è¯­æ³•ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">max&#x27;</span> :: (<span class="type">Ord</span> a) =&gt; a -&gt; a -&gt; a  </span><br><span class="line"><span class="title">max&#x27;</span> a b   </span><br><span class="line">    | a &gt; b     = a  </span><br><span class="line">    | otherwise = b </span><br></pre></td></tr></table></figure>
<p>å…ˆç»™å‡ºä¼ å…¥çš„å‚æ•°å˜é‡ï¼Œç„¶åä¸‹ä¸€è¡Œç¼©è¿›ååŠ |ï¼Œ|åé¢ç­‰å·å‰è¡¨ç¤ºè¿›è¡Œçš„åˆ¤æ–­ï¼Œå¦‚æœä¸ºTrueåˆ™è¿”å›è¿™ä¸ªç­‰å·åé¢çš„å€¼ï¼›å¦‚æœä¸ºFalseåˆ™ç»§ç»­åˆ¤æ–­ä¸‹ä¸€è¡Œï¼Œç›´åˆ°otherwise</p>
<h3 id="Case-expressions"><a href="#Case-expressions" class="headerlink" title="Case expressions"></a>Case expressions</h3><p>åœ¨å‡½æ•°çš„å®šä¹‰ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨caseè¡¨è¾¾å¼æ¥é…åˆæ¨¡å¼åŒ¹é…ä½¿ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">case</span> expression <span class="keyword">of</span> pattern -&gt; result  </span><br><span class="line">                   pattern -&gt; result</span><br><span class="line">                   ...  </span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">head&#x27;</span> :: [a] -&gt; a  </span><br><span class="line"><span class="title">head&#x27;</span> [] = error <span class="string">&quot;No head for empty lists!&quot;</span>  </span><br><span class="line"><span class="title">head&#x27;</span> (x:_) = x  </span><br><span class="line"><span class="comment">-- ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="title">head&#x27;</span> :: [a] -&gt; a  </span><br><span class="line"><span class="title">head&#x27;</span> xs = <span class="keyword">case</span> xs <span class="keyword">of</span> [] -&gt; error <span class="string">&quot;No head for empty lists!&quot;</span>  </span><br><span class="line">                      (x:_) -&gt; x  </span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">describeList</span> :: [a] -&gt; <span class="type">String</span>  </span><br><span class="line"><span class="title">describeList</span> xs = <span class="string">&quot;The list is &quot;</span> ++ <span class="keyword">case</span> xs <span class="keyword">of</span> [] -&gt; <span class="string">&quot;empty.&quot;</span>  </span><br><span class="line">                                               [x] -&gt; <span class="string">&quot;a singleton list.&quot;</span>   </span><br><span class="line">                                               xs -&gt; <span class="string">&quot;a longer list.&quot;</span>  </span><br><span class="line"><span class="comment">-- ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="title">describeList</span> :: [a] -&gt; <span class="type">String</span>  </span><br><span class="line"><span class="title">describeList</span> xs = <span class="string">&quot;The list is &quot;</span> ++ what xs  </span><br><span class="line">    <span class="keyword">where</span> what [] = <span class="string">&quot;empty.&quot;</span>  </span><br><span class="line">          what [x] = <span class="string">&quot;a singleton list.&quot;</span>  </span><br><span class="line">          what xs = <span class="string">&quot;a longer list.&quot;</span> </span><br></pre></td></tr></table></figure>

<h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><p>å£°æ˜åœ¨å‡½æ•°å®šä¹‰ä¸­è¦ä½¿ç”¨çš„å±€éƒ¨å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨whereå…³é”®å­—ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">initials</span> :: <span class="type">String</span> -&gt; <span class="type">String</span> -&gt; <span class="type">String</span>  </span><br><span class="line"><span class="title">initials</span> firstname lastname = [f] ++ <span class="string">&quot;. &quot;</span> ++ [l] ++ <span class="string">&quot;.&quot;</span>  </span><br><span class="line">    <span class="keyword">where</span> (f:_) = firstname  </span><br><span class="line">          (l:_) = lastname  </span><br></pre></td></tr></table></figure>
<p>åœ¨whereä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ¨¡å¼åŒ¹é…</p>
<h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><p><code>let &lt;bindings&gt; in &lt;expression&gt;</code>è¯­æ³•å¯ä»¥åœ¨å‡½æ•°çš„å®šä¹‰ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨æ™®é€šç®—å¼æˆ–åˆ—è¡¨ä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">cylinder</span> :: (<span class="type">RealFloat</span> a) =&gt; a -&gt; a -&gt; a  </span><br><span class="line"><span class="title">cylinder</span> r h = </span><br><span class="line">    <span class="keyword">let</span> sideArea = <span class="number">2</span> * pi * r * h  </span><br><span class="line">        topArea = pi * r ^<span class="number">2</span>  </span><br><span class="line">    <span class="keyword">in</span>  sideArea + <span class="number">2</span> * topArea  </span><br></pre></td></tr></table></figure>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; <span class="number">4</span> * (<span class="keyword">let</span> a = <span class="number">9</span> <span class="keyword">in</span> a + <span class="number">1</span>) + <span class="number">2</span>  </span><br><span class="line"><span class="number">42</span> </span><br><span class="line"><span class="title">ghci</span>&gt; [<span class="keyword">let</span> square x = x * x <span class="keyword">in</span> (square <span class="number">5</span>, square <span class="number">3</span>, square <span class="number">2</span>)]  </span><br><span class="line">[(<span class="number">25</span>,<span class="number">9</span>,<span class="number">4</span>)] </span><br></pre></td></tr></table></figure>

<h3 id="if-statement"><a href="#if-statement" class="headerlink" title="if statement"></a>if statement</h3><p>Haskellä¸­çš„ifè¯­å¥ä¸ºï¼š</p>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">if</span> ... <span class="keyword">then</span> ...</span><br><span class="line"><span class="title">else</span> ...</span><br><span class="line"><span class="comment">-- or if ... then ... else ...</span></span><br><span class="line"><span class="comment">-- or</span></span><br><span class="line"><span class="title">if</span> ... <span class="keyword">then</span> ...</span><br><span class="line"><span class="title">else</span> <span class="keyword">if</span> ... <span class="keyword">then</span> ...</span><br><span class="line"><span class="title">else</span> ...</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æœ€åä¸€ä¸ªelseæ— è®ºå¦‚ä½•ä¹Ÿä¸å¯ä»¥çœå»</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://learnyouahaskell.com/chapters">Learn You a Haskell</a></li>
</ul>
<hr>
<div style="text-align: center;">

<p style="font-size: 1.3rem; font-weight: bold;">ç›®å½•</p>

<p>#0&nbsp;|&nbsp;<a href="/p/b3ca5c18.html">æ€»ç« </a>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<br>#1&nbsp;|&nbsp;<a href="/p/d63b5b5f.html">åŸºç¡€è¯­æ³•ä¸å‡½æ•°</a>&emsp;&emsp;&emsp;<br>#2&nbsp;|&nbsp;<a href="/p/53e482b7.html">é«˜é˜¶å‡½æ•°ä¸æ¨¡å—</a>&emsp;&emsp;&emsp;<br>#3&nbsp;|&nbsp;<a href="/p/369b7e08.html">ç±»å‹ä¸ç±»å‹ç±»</a>&emsp;&emsp;&emsp;&emsp;<br>#4&nbsp;|&nbsp;<a href="/p/a5bbe48a.html">è¾“å…¥è¾“å‡ºä¸æ–‡ä»¶</a>&emsp;&emsp;&emsp;<br>#5&nbsp;|&nbsp;<a href="/p/290ecb74.html">å‡½å­ã€åº”ç”¨å‡½å­ä¸å•å­</a><br>#6&nbsp;|&nbsp;<a href="/p/d4bb2633.html">åŠç¾¤ä¸å¹ºåŠç¾¤</a>&emsp;&emsp;&emsp;&emsp;<br>#7&nbsp;|&nbsp;<a href="/p/68ef8146.html">ä¸€äº›å…¶å®ƒç±»å‹ç±»</a>&emsp;&emsp;&emsp;<br>#A&nbsp;|&nbsp;<a href="/p/96c32eae.html">Haskellä¸èŒƒç•´è®º</a>&emsp;&nbsp;&thinsp;</p>
</div>
]]></content>
      <tags>
        <tag>Haskell</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¿®å¤manimä¸­Textç±»çš„bug</title>
    <url>/p/b6815e8.html</url>
    <content><![CDATA[<p>åœ¨ä½¿ç”¨manimæ—¶,å¯¹äºTextç±»,ä¼šæœ‰ä¸€äº›bug,æˆ‘å°è¯•ä¿®å¤äº†å®ƒä»¬</p>
<ol>
<li>åœ¨<code>shaders</code>åˆ†æ”¯ä¸‹æ— æ³•ä½¿ç”¨Textç±»</li>
<li>Textæ–‡å­—çš„strokeè¾¹æ¡†ä¸å®Œæ•´,å¯¼è‡´æ˜¾ç¤ºstrokeä¼šéå¸¸éš¾çœ‹</li>
<li>å«æœ‰ç©ºæ ¼çš„Textçš„ç©ºæ ¼ä¸åœ¨æ–‡å­—å†…éƒ¨,è€Œåœ¨<code>ORIGIN</code>çš„ä½ç½®,å¯¼è‡´<code>Transform</code>æ—¶ä¼šæœ‰å­—ç¬¦åœ¨åŸä½ç½®å’Œ<code>ORIGIN</code>ä¹‹é—´ <del>åå¤æ¨ªè·³</del></li>
<li>Textæ–‡å­—çš„é»˜è®¤å¤§å°è¦æ¯”TextMobjectå¤§,ä¸å®¹æ˜“åƒTextMobjectä¸€æ ·æ§åˆ¶å¤§å°</li>
</ol>
<p>è¿™äº›é—®é¢˜å·²ç»é€šè¿‡<a href="https://github.com/3b1b/manim/pull/1030">#1030</a>ä¿®å¤åˆ°äº†manimçš„masteråˆ†æ”¯ä¸­</p>
<span id="more"></span>

<h2 id="mathcal-Bug-1"><a href="#mathcal-Bug-1" class="headerlink" title="$\mathcal{Bug\ 1.}$"></a>$\mathcal{Bug\ 1.}$</h2><p>å½“åœ¨<code>shaders</code>åˆ†æ”¯ä¸‹ä½¿ç”¨Textç±»æ—¶ä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™:<br><img src="../images/text_bug1.png"><br>å…¶ä¸­æœ€åä¸€è¡Œè®©æˆ‘å‘ç°æ­¤æ—¶çš„p0å’Œp1çš„å¤§å°ä¸ç›¸ç­‰,ä¸èƒ½ç›¸åŠ (broadcast),è€Œp0å’Œp1æ˜¯é€šè¿‡è´èµ›å°”æ›²çº¿çš„æ¬¡æ•°(åœ¨shadersä¸‹æ˜¯3)æ¥æ‹†åˆ†<code>self.points</code>çš„<br>æ‰€ä»¥å¯èƒ½æ˜¯<code>self.points</code>çš„é•¿åº¦ä¸ä¸º3çš„å€æ•°,å¯¼è‡´äº†é”™è¯¯.åœ¨<code>print(len(self.points))</code>åå‘ç°ç¡®å®æ˜¯è¿™æ ·<br>ç„¶åæˆ‘åˆç”¨äº† <del>ç„å­¦</del> æ‰‹æ®µ,åˆ æ‰äº†SVGMobjectçš„æœ€åä¸€ä¸ªç‚¹,å‘ç°å¯ä»¥æ­£å¸¸æ¸²æŸ“</p>
<p>æ­¤æ—¶æˆ‘åˆå»çœ‹äº†cairoè‡ªåŠ¨ç”Ÿæˆçš„svgä»£ç ,æ ¹æ®æˆ‘ä¹‹å‰å­¦svgçš„ä¸€ç‚¹ç»éªŒ,å‘ç°æ¯ä¸ª<code>&lt;path/&gt;</code>çš„è·¯å¾„ç»“å°¾éƒ½ä¸º<code>Z M ... ... /&quot;&gt;</code><br>è€Œ<code>Z</code>æ˜¯å°†è·¯å¾„é—­åˆ,ä½†é—­åˆååˆå¤šå‡ºäº†ä¸€ä¸ª<code>M</code>æ§åˆ¶ç¬¦,è¿™ä¼šå¯¼è‡´manimåœ¨å¤„ç†svgæ—¶é¢å¤–ç”Ÿæˆä¸€ä¸ªç‚¹<br>è€Œåˆ æ‰æ¯ä¸ªè·¯å¾„å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ª<code>M</code>æ§åˆ¶ç¬¦,å¯ä»¥ç›´æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å‡ºæ¥,ç„¶åæ›¿æ¢æ‰<br><img src="../images/text_bug1_svg.png"></p>
<p>æˆ‘ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„æ­£åˆ™è¡¨è¾¾å¼æ˜¯<code>Z M .*? /&quot;&gt;</code>,ä½†æ˜¯å¦‚æœåœ¨è·¯å¾„çš„ä¸­é—´å‡ºç°<code>Z M</code>,åˆ™ä¼šå°†å…¶åé¢æœ‰ç”¨çš„éƒ¨åˆ†ä¸€èµ·åˆ é™¤<br>è€Œæœ‰ç”¨çš„éƒ¨åˆ†ä¸€å®šå«æœ‰æ§åˆ¶ç¬¦,æ‰€ä»¥å°†æ§åˆ¶ç¬¦æ’é™¤,å°±å¯ä»¥ä»…ä»…åŒ¹é…æ‰æœ€åä¸€ä¸ª<code>M</code>,æ­£åˆ™è¡¨è¾¾å¼:<code>Z M [^A-Za-z]*? /&quot;&gt;</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">remove_last_M</span>(<span class="params">self, file_name</span>):</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> fpr:</span><br><span class="line">        content = fpr.read()</span><br><span class="line">    content = re.sub(<span class="string">r&#x27;Z M [^[A-Za-z]*? &quot;\/&gt;&#x27;</span>, <span class="string">&#x27;Z &quot;/&gt;&#x27;</span>, content)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> fpw:</span><br><span class="line">        fpw.write(content)</span><br></pre></td></tr></table></figure>

<h2 id="mathcal-Bug-2"><a href="#mathcal-Bug-2" class="headerlink" title="$\mathcal{Bug\ 2.}$"></a>$\mathcal{Bug\ 2.}$</h2><p>Textæ–‡å­—çš„strokeè¾¹æ¡†ä¸å®Œæ•´,å¯¼è‡´strokeæ˜¾ç¤ºä¸å…¨,ä¹Ÿä¼šå¯¹<code>DrawBorderThenFill</code>é€ æˆå½±å“,ä¹Ÿæœ‰Bç«™çš„è§‚ä¼—å‘æˆ‘æäº†è¿™ä¸ªé—®é¢˜</p>
<blockquote>
<p>â€“ è¯è¯´ï¼Œæ„Ÿè§‰æ¯ä¸ªChapterä¹‹é—´çš„æ–‡å­—æ˜¯ä¸æ˜¯å…ˆç”»å‡ºè½®å»“å†å¡«å……ä¸Šè‰²ï¼Œç”»å®Œè½®å»“çš„æ—¶å€™åœé¡¿äº†ä¸€ä¸‹ã€‚ä½†æ˜¯åœé¡¿çš„æ—¶å€™è½®å»“æ²¡æœ‰ç”»å®Œï¼Œæœ‰äº›åœ°æ–¹æœ‰ç‚¹æ–­ç»­çš„æ„Ÿè§‰<br>â€“ Textç±»çš„bugï¼Œstrokeæ—¥å¸¸ä¹±å¥—</p>
</blockquote>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,æˆ‘åªæ˜¾ç¤ºäº†stroke,å¹¶ä¸”ç”¨<code>debugTeX</code>æ ‡å‡ºäº†æ„æˆæ¯ä¸ªå­—ç¬¦çš„<code>self.points</code>çš„ä½ç½®,æ¯”å¦‚â€manimâ€å¦‚ä¸‹:<br><img src="../images/text_bug2_before.png"><br>é€šè¿‡è§‚å¯Ÿå’Œä¸<a href="https://github.com/xy-23">@XiaoYoung</a>äº¤æµä¹‹å,ç¡®å®šäº†cairoç”Ÿæˆçš„svgå¹¶ä¸èƒ½ä½¿è·¯å¾„è‡ªåŠ¨é—­åˆ<br>è€Œåœ¨ä¸€èˆ¬æŸ¥çœ‹svgçš„è½¯ä»¶(Chrome)ä¸­,svgå›¾åƒåªæ˜¾ç¤ºå†…éƒ¨(fill),è€Œstrokeè¢«å¿½ç•¥(å¾ˆç»†),æ‰€ä»¥æ­£å¸¸ä½¿ç”¨æ²¡é—®é¢˜<br>ä½†æ˜¯åœ¨manimä¸­æœ‰æ—¶éœ€è¦ä½¿ç”¨stroke,è¿™æ—¶cairoç”Ÿæˆçš„svgå‡ºç°äº†bug,è·¯å¾„æ²¡æœ‰å®Œå…¨é—­åˆ</p>
<p>æˆ‘æœ€å¼€å§‹çš„æƒ³æ³•æ˜¯ç›´æ¥é€šè¿‡<code>.add_line_to()</code>æ–¹æ³•å°†svgæ”¶å°¾ç›¸è¿,ä½†æ˜¯è¿™æ˜¾ç„¶åªè§£å†³äº†må’Œn<br>è€Œaå’Œiæ˜¯ç”±ä¸¤æ¡è·¯å¾„å¤åˆè€Œæˆçš„,å…¶ä¸­çš„æ¯æ¡è·¯å¾„éƒ½æ²¡æœ‰é—­åˆ,æ‰€ä»¥éƒ½éœ€è¦æ‰‹åŠ¨é—­åˆ,æ‰€ä»¥æˆ‘å†³å®šéå†<code>self.points</code><br>è¿™æ—¶æˆ‘ä½¿ç”¨äº†ä¸€ä¸ª<code>last</code>å˜é‡æ¥è®°å½•éå†åˆ°å½“å‰ä½ç½®æ‰€åœ¨çš„è·¯å¾„ä¸Šçš„èµ·ç‚¹,å¹¶ä¸”å¦‚æœåˆ°äº†ä¸‹ä¸€æ¡è·¯å¾„(ç´¢å¼•ä¸ºnppcçš„å€æ•°,å¹¶ä¸”ä¸ä¸å‰ä¸€ä¸ªç‚¹ç›¸é‡åˆ),å°±å°†é¦–å°¾è¿æ¥ä¸Š,å¹¶æ›´æ–°<code>last</code></p>
<p>è€Œè¿™æ ·åšè¿˜éœ€è¦ä¸€ä¸ªç‰¹åˆ¤,å½“pointsä¸ºç©ºæ—¶(ç©ºæ ¼)ç›´æ¥è·³è¿‡,å¦åˆ™<code>points[0]</code>ä¼šæŠ¥é”™</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">nppc = self.n_points_per_cubic_curve</span><br><span class="line"><span class="keyword">for</span> each <span class="keyword">in</span> self:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(each.points) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    points = each.points</span><br><span class="line">    last = points[<span class="number">0</span>]</span><br><span class="line">    each.clear_points()</span><br><span class="line">    <span class="keyword">for</span> index, point <span class="keyword">in</span> <span class="built_in">enumerate</span>(points):</span><br><span class="line">        each.append_points([point])</span><br><span class="line">        <span class="keyword">if</span> index != <span class="built_in">len</span>(points) - <span class="number">1</span> <span class="keyword">and</span> (index + <span class="number">1</span>) % nppc == <span class="number">0</span> <span class="keyword">and</span> <span class="built_in">any</span>(point != points[index+<span class="number">1</span>]):</span><br><span class="line">            each.add_line_to(last)</span><br><span class="line">            last = points[index + <span class="number">1</span>]</span><br><span class="line">    each.add_line_to(last)</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·åšä¹‹å,è¿™ä¸ªbugå°±å®Œå…¨è§£å†³äº†,è€Œä¸”ä¸­æ–‡ä¹ŸåŒæ—¶é€‚ç”¨,å¯¹æ¯”å¦‚ä¸‹,ä¸Šä¸ºä¿®å¤ä¹‹å‰,ä¸‹ä¸ºä¿®å¤ä¹‹å(éƒ½ä¸ºä»…æ˜¾ç¤ºstroke)<br><img src="../images/text_bug2_after.png"><br><img src="../images/text_bug2_en.png"><br><img src="../images/text_bug2_cn.png"></p>
<h2 id="mathcal-Bug-3"><a href="#mathcal-Bug-3" class="headerlink" title="$\mathcal{Bug\ 3.}$"></a>$\mathcal{Bug\ 3.}$</h2><p>è¿™ä¸ªæ˜¯éå¸¸å¸¸è§çš„é—®é¢˜äº†,å¦‚ä¸‹:<br><img src="../images/text_bug3_before.gif"><br>ä¹‹å‰è§£å†³è¿™ä¸ªé—®é¢˜æ˜¯é€šè¿‡â€™å‡ç©ºæ ¼â€™,å³ç”¨ä¸€ä¸ªä¸å¸¸ç”¨å­—ç¬¦è¡¨ç¤ºç©ºæ ¼,å¹¶å°†å…¶è®¾ä¸ºèƒŒæ™¯è‰²,æˆ–è€…opacityæ”¹æˆ0<br>é€šè¿‡debugTeXå¯ä»¥å‘ç°,Textçš„ç©ºæ ¼å å­—ç¬¦è€Œä¸”ä½ç½®åœ¨ORIGIN<br>è€ŒTextMobjectä¸­çš„ç©ºæ ¼ç›´æ¥ä¸å ä½ç½®.æ‰€ä»¥æˆ‘ç›´æ¥åœ¨å¤„ç†bug2çš„åŒæ—¶,å°†<code>len(each.points) == 0</code>çš„å¤„ç†ä¸­åŠ ä¸Šäº†<code>self.remove(each)</code>,è¿™æ ·å°±æš‚æ—¶è§£å†³äº†<br><img src="../images/text_bug3.png"><br><img src="../images/text_bug3_after.gif"><br>è€Œ<a href="https://github.com/xy-23">@XiaoYoung</a>ä¹Ÿæé†’äº†æˆ‘,è¿™æ ·çš„å¤„ç†ä¼šå¹²æ‰°t2cçš„è‡ªåŠ¨ä¸Šè‰²(ä¸‹æ ‡æ”¹å˜äº†),åœ¨<a href="https://github.com/3b1b/manim/pull/1018">#1018</a>è¿™é‡Œ,ä»–å†³å®šå•å¼€ä¸€ä¸ªpræ¥ä¿®å¤è¿™ä¸ªbug,æ‰€ä»¥æˆ‘å°±æŠŠè¿™ä¸€ä¸ªcommitåˆ é™¤æ‰äº†</p>
<h2 id="mathcal-Bug-4"><a href="#mathcal-Bug-4" class="headerlink" title="$\mathcal{Bug\ 4.}$"></a>$\mathcal{Bug\ 4.}$</h2><p>Textæ–‡å­—çš„é»˜è®¤å¤§å°è¦æ¯”TextMobjectå¤§,ä¸å®¹æ˜“åƒTextMobjectä¸€æ ·æ§åˆ¶å¤§å°<br>é€šè¿‡é˜…è¯»æºç å¯ä»¥å‘ç°,TextMobjectåœ¨<code>__init__()</code>çš„ç»“å°¾,æœ‰ä¸€å¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> self.height <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    self.scale(TEX_MOB_SCALE_FACTOR)</span><br></pre></td></tr></table></figure>
<p>è€Œè¿™ä¸ª<code>TEX_MOB_SCALE_FACTOR</code>é»˜è®¤ä¸º<code>0.05</code>,å³å°†é»˜è®¤çš„SVGMobject(é«˜åº¦ä¸ºå›ºå®šé»˜è®¤å€¼)ç¼©å°ä¸º0.05å€<br>è€ŒTextç±»æœ€åç¼©å°äº†0.1å€,å¯¼è‡´äº†å¤§å°ä¸ç­‰,å°†å…¶æ”¹ä¸º0.05å,å°±æ–¹ä¾¿ç»Ÿä¸€å¤§å°äº†<br><img src="../images/text_bug4.png"></p>
<h2 id="mathcal-Pull-Requests"><a href="#mathcal-Pull-Requests" class="headerlink" title="$\mathcal{Pull\ Requests}$"></a>$\mathcal{Pull\ Requests}$</h2><p>ç¬¬ä¸€æ¬¡æäº¤pr,è®°å½•ä¸€ä¸‹</p>
<ol>
<li>å°†åŸrepo forkåˆ°è‡ªå·±çš„ç”¨æˆ·ä¸Š</li>
<li>cloneä¸‹æ¥forkçš„repo</li>
<li>è¿›è¡Œæ›´æ”¹,add/commit/push,commitçš„æ³¨é‡Šè¦è§„èŒƒ</li>
<li>åœ¨GitHubç½‘é¡µä¸Š,æ‰“å¼€forkçš„repo,ä¼šæœ‰ä¸€ä¸ªæŒ‰é’®<code>New Pull Request</code></li>
<li>æ¯”è¾ƒ,ç¡®è®¤æ›´æ”¹,ç„¶å<code>Create Pull Request</code>,è¡¨è¿°å‡ºprçš„å¿…è¦æ€§å’ŒéªŒè¯,æäº¤pr</li>
<li>ç­‰å¾…repoç®¡ç†å‘˜merge</li>
</ol>
<p>è¿™æ¬¡ä¿®å¤bugçš„pråœ¨<a href="https://github.com/3b1b/manim/pull/1030">#1030</a>å’Œ<a href="https://github.com/3b1b/manim/pull/1031">#1031</a><br>å…¶ä¸­<a href="https://github.com/3b1b/manim/pull/1030">#1030</a>è¢«mergeäº†,è€Œ<a href="https://github.com/3b1b/manim/pull/1031">#1031</a>è¿˜åœ¨ç­‰å¾…</p>
]]></content>
      <categories>
        <category>manim</category>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>ç¬”è®°</tag>
        <tag>manim</tag>
        <tag>python</tag>
        <tag>bug</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘ä¸Šè«é˜Ÿ-ç¬”è®°  /ã€ŒSPOJ 10707ã€COT2-é¢˜è§£</title>
    <url>/p/24f5ddbc.html</url>
    <content><![CDATA[<p>é€šè¿‡<a href="https://www.luogu.com.cn/problem/SP10707">SPOJ 10707 COT2-Count on a tree II</a>è¿™é“é¢˜ç›®æ¥å­¦ä¹ ä¸€ä¸‹ <strong>æ ‘ä¸Šè«é˜Ÿ</strong><br>å½“éœ€è¦ç¦»çº¿æŸ¥è¯¢ <strong>æ ‘ä¸Š</strong> çš„å¤šåŒºé—´é—®é¢˜æ—¶,å¯ä»¥ä½¿ç”¨ <strong>æ ‘ä¸Šè«é˜Ÿ</strong> æ¥è§£å†³</p>
<p>ä¸»è¦é€šè¿‡ <strong>æ¬§æ‹‰åº</strong> å°†æ ‘è½¬åŒ–ä¸ºä¸€æ¡é“¾,ç„¶ååœ¨é“¾ä¸Šæ‰§è¡Œæ™®é€šè«é˜Ÿçš„æ“ä½œ</p>
<span id="more"></span>

<h2 id="æ ‘ä¸Šè«é˜Ÿ"><a href="#æ ‘ä¸Šè«é˜Ÿ" class="headerlink" title="æ ‘ä¸Šè«é˜Ÿ"></a>æ ‘ä¸Šè«é˜Ÿ</h2><h3 id="æ¬§æ‹‰åº"><a href="#æ¬§æ‹‰åº" class="headerlink" title="æ¬§æ‹‰åº"></a>æ¬§æ‹‰åº</h3><p>æ­£å¸¸è¿›è¡Œ<code>dfs</code>,åœ¨å…¥å’Œå‡ºæ—¶å„åŠ å…¥åºåˆ—ä¸­<br>æ¯”å¦‚æ ·ä¾‹çš„æ ‘å¦‚ä¸‹:<br><img src="/p/24f5ddbc/graph.png"><br>å…¶æ¬§æ‹‰åºä¸º<code>1 2 2 3 5 5 6 6 7 7 3 4 8 8 4 1</code><br>å¯ä»¥å¾ˆå¥½åœ°å‘ˆç°å‡ºå­æ ‘çš„å…³ç³»,å³ä¸¤ä¸ªç›¸åŒçš„æ•°$x$ä¹‹é—´çš„éƒ¨åˆ†ä¸º$x$å­æ ‘ä¸­çš„èŠ‚ç‚¹<br>å…¶æœ‰ä¸€ä¸ªæ€§è´¨:<strong>åŒºé—´å†…å‡ºç°ä¸¤æ¬¡çš„ç‚¹ä¸åœ¨å…¶è·¯å¾„ä¸Š</strong><br>æ ¹æ®è¿™ä¸ªæ€§è´¨,å¯ä»¥å°†æ ‘è½¬åŒ–ä¸ºé“¾æ¥æ±‚è§£äº†</p>
<h3 id="æ€æƒ³"><a href="#æ€æƒ³" class="headerlink" title="æ€æƒ³"></a>æ€æƒ³</h3><p>é™¤äº†å°†æ ‘è½¬åŒ–ä¸ºæ¬§æ‹‰åºä¹‹å¤–,è¿˜éœ€è¦æ±‚å‡ºå·¦å³ç«¯ç‚¹çš„$LCA$,ä»¥åŠä¸€ä¸ªç‚¹$\texttt{u}$åœ¨æ¬§æ‹‰åºä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®$\texttt{fst[u]}$,ç¬¬äºŒæ¬¡(æœ€åä¸€æ¬¡)å‡ºç°çš„ä½ç½®$\texttt{lst[u]}$</p>
<p>åœ¨è¿›è¡Œè«é˜Ÿæ“ä½œæ—¶,å¦‚æœç¬¬ä¸€æ¬¡ç»è¿‡è¿™ä¸ªç‚¹,åˆ™<code>add</code>å…¶è´¡çŒ®,ç¬¬äºŒæ¬¡ç»è¿‡è¿™ä¸ªç‚¹,åˆ™è¯´æ˜è¿™ä¸ªç‚¹ä¸åœ¨æ‰€æ±‚é“¾ä¸Š,<code>del</code>å…¶è´¡çŒ®<br>è¿™ä¸ªç”¨ä¸€ä¸ª<code>vis</code>æ•°ç»„,åå¤è¿›è¡Œå¼‚æˆ–æ“ä½œå°±å¯ä»¥è§£å†³</p>
<p>å†è€ƒè™‘è¯¢é—®çš„åŒºé—´çš„$l,r$åº”è¯¥èµ‹å€¼ä¸º$\texttt{fst}$è¿˜æ˜¯$\texttt{lst}$<br>è®¾å·¦ç«¯ç‚¹çš„æ·±åº¦å°äºå³ç«¯ç‚¹</p>
<ol>
<li>å¦‚æœ$LCA$å’Œå·¦ç«¯ç‚¹ç›¸ç­‰,åˆ™è¯´æ˜$[l,r]$åœ¨ä¸€æ¡é“¾ä¸Š,$l$å’Œ$r$å‡å–$\texttt{fst}$å³å¯</li>
<li>å¦åˆ™æ˜¯ä¸¤æ¡é“¾$[l, LCA],[LCA,r]$, é˜²æ­¢å·¦å³ç«¯ç‚¹è¢«ç»Ÿè®¡ä¸¤æ¬¡å¯¼è‡´è´¡çŒ®è¢«åˆ é™¤,éœ€è¦$l$å–$\texttt{lst}$,$r$å–$\texttt{fst}$</li>
</ol>
<p>æœ€åè€ƒè™‘è´¡çŒ®</p>
<ol>
<li>è‹¥æ˜¯ä¸Šé¢ç¬¬ä¸€ç§æƒ…å†µ,åœ¨ä¸€æ¡é“¾ä¸Š,ç›´æ¥ç»Ÿè®¡æ¬§æ‹‰åºåŒºé—´å†…æ‰€æœ‰ç‚¹å³å¯,é‡å¤ä¸¤æ¬¡çš„æ ¹æ®å‰æ–‡çš„æ€§è´¨ä¼šç›´æ¥åˆ æ‰</li>
<li>è‹¥æ˜¯ä¸Šé¢ç¬¬äºŒç§æƒ…å†µ,ç”±äºå·¦å³ç«¯ç‚¹éƒ½åœ¨$LCA$è¿™é¢—å­æ ‘å†…,æ‰€ä»¥åŒºé—´ä¸­å¹¶ä¸ä¼šå‡ºç°$LCA$,ä½†æ˜¯å´ä¸€å®šä¼šç»è¿‡,æ‰€ä»¥é¢å¤–å°†$LCA$åŠ å…¥è´¡çŒ®,å¹¶ä¸”è®°å½•ä¸‹å½“å‰ç»“æœä¹‹å,å†å°†å…¶è´¡çŒ®å‡å»,é˜²æ­¢å½±å“ä¸‹ä¸€ä¸ªæŸ¥è¯¢</li>
</ol>
<p><strong>æ³¨æ„:</strong> è½¬åŒ–ä¸ºæ¬§æ‹‰åºä¹‹åçš„åºåˆ—é•¿åº¦ä¸º$2n$</p>
<h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><ol>
<li><code>dfs</code>: $O(n)$</li>
<li>æ±‚$LCA$:$O(n\log n)$</li>
<li>è«é˜Ÿ: $O(n\sqrt{n})$</li>
</ol>
<p>ç»¼ä¸Š,æ ‘ä¸Šè«é˜Ÿçš„å¤æ‚åº¦ <del>å·®ä¸å¤š</del> ä¹Ÿæ˜¯$O(n\sqrt{n})$</p>
<h2 id="é’ˆå¯¹-mathcal-SP10707-çš„å…·ä½“å®ç°"><a href="#é’ˆå¯¹-mathcal-SP10707-çš„å…·ä½“å®ç°" class="headerlink" title="é’ˆå¯¹$\mathcal{SP10707}$çš„å…·ä½“å®ç°"></a>é’ˆå¯¹$\mathcal{SP10707}$çš„å…·ä½“å®ç°</h2><p>æ²¡å•¥è¯´çš„,æ¨¡æ¿é¢˜,åšæ³•å…¨åœ¨ä¸Šé¢äº†</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">200020</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, l, r, Ans, len, ocnt;</span><br><span class="line"><span class="keyword">int</span> cnt[maxn], fst[maxn], lst[maxn], vis[maxn], ans[maxn];</span><br><span class="line"><span class="keyword">int</span> ord[maxn], val[maxn], dep[maxn], fa[maxn][<span class="number">25</span>], old[maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Query</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r, id, pos, lca;</span><br><span class="line">&#125;q[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Query a, Query b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a.pos != b.pos) <span class="keyword">return</span> a.pos &lt; b.pos;</span><br><span class="line">    <span class="keyword">if</span> (a.pos &amp; <span class="number">1</span>) <span class="keyword">return</span> a.r &lt; b.r;</span><br><span class="line">    <span class="keyword">return</span> a.r &gt; b.r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to;</span><br><span class="line">    <span class="built_in">Edge</span>(<span class="keyword">int</span> f, <span class="keyword">int</span> t): <span class="built_in">from</span>(f), <span class="built_in">to</span>(t) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(f, t));</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(t, f));</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[t].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">    G[f].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> f)</span> </span>&#123;</span><br><span class="line">    ord[++ocnt] = u; fst[u] = ocnt;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[u][i]];</span><br><span class="line">        <span class="keyword">if</span> (e.to == f) <span class="keyword">continue</span>;</span><br><span class="line">        dep[e.to] = dep[u] + <span class="number">1</span>;</span><br><span class="line">        fa[e.to][<span class="number">0</span>] = u;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">20</span>; ++j) &#123;</span><br><span class="line">            fa[e.to][j] = fa[fa[e.to][j - <span class="number">1</span>]][j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">dfs</span>(e.to, u);</span><br><span class="line">    &#125;</span><br><span class="line">    ord[++ocnt] = u; lst[u] = ocnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dep[x] &gt; dep[y]) <span class="built_in">swap</span>(x, y);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">20</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (dep[fa[y][i]] &gt;= dep[x]) y = fa[y][i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x == y) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">20</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (fa[x][i] != fa[y][i]) &#123;</span><br><span class="line">            x = fa[x][i];</span><br><span class="line">            y = fa[y][i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fa[x][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    cnt[val[x]]--;</span><br><span class="line">    <span class="keyword">if</span> (!cnt[val[x]]) Ans--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">del</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    cnt[val[x]]++;</span><br><span class="line">    <span class="keyword">if</span> (cnt[val[x]] == <span class="number">1</span>) Ans++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">chg</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (vis[x]) <span class="built_in">add</span>(x);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">del</span>(x);</span><br><span class="line">    vis[x] ^= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>(); len = <span class="built_in">sqrt</span>(<span class="number">2</span> * n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) old[i] = val[i] = <span class="built_in">read</span>();</span><br><span class="line">    <span class="built_in">sort</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + n); <span class="keyword">int</span> len_ = <span class="built_in">unique</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + n) - old - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) val[i] = <span class="built_in">lower_bound</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + len_, val[i]) - old;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) <span class="built_in">add</span>(<span class="built_in">read</span>(), <span class="built_in">read</span>()); </span><br><span class="line">    dep[<span class="number">1</span>] = <span class="number">1</span>; <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> il = <span class="built_in">read</span>(), ir = <span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">int</span> LCA = <span class="built_in">lca</span>(il, ir);</span><br><span class="line">        <span class="keyword">if</span> (fst[il] &gt; fst[ir]) <span class="built_in">swap</span>(il, ir);</span><br><span class="line">        <span class="keyword">if</span> (il == LCA) &#123;</span><br><span class="line">            q[i].l = fst[il]; q[i].r = fst[ir];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            q[i].l = lst[il]; q[i].r = fst[ir]; q[i].lca = LCA;</span><br><span class="line">        &#125;</span><br><span class="line">        q[i].id = i; q[i].pos = (q[i].l - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(q + <span class="number">1</span>, q + <span class="number">1</span> + m, cmp); l = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; q[i].l) <span class="built_in">chg</span>(ord[l++]);</span><br><span class="line">        <span class="keyword">while</span> (r &gt; q[i].r) <span class="built_in">chg</span>(ord[r--]);</span><br><span class="line">        <span class="keyword">while</span> (l &gt; q[i].l) <span class="built_in">chg</span>(ord[--l]);</span><br><span class="line">        <span class="keyword">while</span> (r &lt; q[i].r) <span class="built_in">chg</span>(ord[++r]);</span><br><span class="line">        <span class="keyword">if</span> (q[i].lca) <span class="built_in">chg</span>(q[i].lca);</span><br><span class="line">        ans[q[i].id] = Ans;</span><br><span class="line">        <span class="keyword">if</span> (q[i].lca) <span class="built_in">chg</span>(q[i].lca);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
        <tag>ç¬”è®°</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>è«é˜Ÿ</tag>
        <tag>SPOJ</tag>
      </tags>
  </entry>
  <entry>
    <title>å›æ»šè«é˜Ÿ-ç¬”è®°  /ã€ŒAtCoder 1219ã€æ­´å²ã®ç ”ç©¶-é¢˜è§£</title>
    <url>/p/7d7b5548.html</url>
    <content><![CDATA[<p>é€šè¿‡<a href="https://www.luogu.com.cn/problem/AT1219">AtCoder 1219 æ­´å²ã®ç ”ç©¶</a>è¿™é“é¢˜ç›®æ¥å­¦ä¹ ä¸€ä¸‹ <strong>å›æ»šè«é˜Ÿ</strong><br><strong>å›æ»šè«é˜Ÿ</strong> é€‚ç”¨äºå®¹æ˜“è¿›è¡Œ<code>add</code>æ“ä½œ,è€Œä¸å®¹æ˜“å®ç°<code>del</code>çš„æƒ…å†µ</p>
<p>é€šè¿‡è«é˜Ÿçš„åˆ†å—,æŒ‡é’ˆç§»åŠ¨çš„æ€æƒ³,å¯ä»¥è®©å·¦æŒ‡é’ˆè¿›è¡Œå›æ»šæ“ä½œ, <em>è¿‘ä¼¼</em> è¾¾åˆ°<code>del</code>çš„æ•ˆæœ</p>
<span id="more"></span>

<h2 id="å›æ»šè«é˜Ÿ"><a href="#å›æ»šè«é˜Ÿ" class="headerlink" title="å›æ»šè«é˜Ÿ"></a>å›æ»šè«é˜Ÿ</h2><h3 id="æ€æƒ³"><a href="#æ€æƒ³" class="headerlink" title="æ€æƒ³"></a>æ€æƒ³</h3><p>ç”±äºè«é˜Ÿå¯¹æ‰€æœ‰è¯¢é—®ç¦»çº¿æ’åºå,å½“å·¦ç«¯ç‚¹åœ¨åŒä¸€ä¸ªå—å†…æ—¶,å³ç«¯ç‚¹é€’å¢<br>æ‰€ä»¥å¯¹äºæ¯ä¸ªå—,å³æŒ‡é’ˆç›´æ¥å‘å³ä¾æ¬¡æ‰§è¡Œ<code>add</code>æ“ä½œå³å¯</p>
<p>å¯¹äºå·¦æŒ‡é’ˆ,åœ¨ä¸€ä¸ªå—å†…æ—¶,å¯ä»¥æ¯æ¬¡éƒ½ä»å—çš„å³è¾¹ç•Œå‘å·¦è¿›è¡Œ<code>add</code>,ç”±äºä¸æ–¹ä¾¿è¿›è¡Œ<code>del</code>æ“ä½œ,æ‰€ä»¥å¯ä»¥å…ˆè®°å½•ä¸‹å·¦æŒ‡é’ˆåœ¨å³è¾¹ç•Œæ—¶çš„<code>Ans</code>,ç„¶åæ¯æ¬¡å‘å·¦ç§»åŠ¨åˆ°<code>q[i].l</code>æ—¶,å°†å·¦æŒ‡é’ˆå†ç§»å›å³è¾¹ç•Œ,å¹¶ä¸”å°†<code>Ans</code>å›æ»šåˆ°ç§»åŠ¨ä¹‹å‰çš„å€¼ã€‚ç”±äºåˆ†å—,è¿™æ ·åšçš„å¤æ‚åº¦ä¹Ÿä¸ä¼šå¾ˆå¤§</p>
<p>ç»¼ä¸Š,å¯¹äºæ¯ä¸ªå—,<strong>å³æŒ‡é’ˆä¾æ¬¡å‘å³æ¨è¿›,å·¦æŒ‡é’ˆåœ¨å³è¾¹ç•Œå’ŒæŸ¥è¯¢çš„å·¦ç«¯ç‚¹ä¹‹é—´åå¤æ¨ªè·³</strong><br>è¿™æ ·,æ‰§è¡Œçš„å°±åªå‰©<code>add</code>æ“ä½œ,é€šè¿‡å·¦æŒ‡é’ˆçš„æ¨ªè·³,é¿å…äº†<code>del</code>æ“ä½œ</p>
<p>æ³¨æ„,å½“å·¦å³ç«¯ç‚¹éƒ½åœ¨åŒä¸€ä¸ªå—æ—¶,åªè¦æš´åŠ›æ±‚å‡ºç»“æœå°±å¯ä»¥äº†<br><strong>ä¸€å®šè¦æ³¨æ„</strong>: ä¸è¦ä½¿ç”¨å¥‡å¶æ’åº,å¿…é¡»ä¿è¯å³ç«¯ç‚¹çš„ <strong>å•è°ƒé€’å¢</strong></p>
<p>å¯¹äºæ¯ä¸ªå—å†…çš„å¤„ç†,å¤§æ¦‚å¦‚ä¸‹å›¾:<br><img src="/p/7d7b5548/RollBackMosAlgo.png" alt="æ©™è‰²ç®­å¤´:å·¦æŒ‡é’ˆçš„ç§»åŠ¨ è“è‰²ç®­å¤´:å³æŒ‡é’ˆçš„ç§»åŠ¨"></p>
<h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>æ—¶é—´å¤æ‚åº¦ç”±ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ç»„æˆ</p>
<ol>
<li>è¯¢é—®æ’åº</li>
<li>åŒä¸€ä¸ªå—å†…çš„æš´åŠ›æ±‚è§£</li>
<li>å·¦æŒ‡é’ˆçš„ç§»åŠ¨(<del>æ¨ªè·³</del>)</li>
<li>å³æŒ‡é’ˆçš„é¡ºæ¬¡ç§»åŠ¨</li>
</ol>
<p>ä¸‹é¢æ¥ <del>ä¸ä¸¥è°¨</del> ç®€è¦åœ°è®¡ç®—ä¸€ä¸‹æ—¶é—´å¤æ‚åº¦</p>
<ol>
<li><strong>æ’åº</strong>:$O(n\log n)$</li>
<li><strong>æš´åŠ›</strong>:æš´åŠ›çš„åŒºé—´æœ€é•¿ä¸º$\sqrt{n}$,æ‰€ä»¥å•æ¬¡æš´åŠ›çš„å¤æ‚åº¦ä¸º$O(\sqrt{n})$,$n$æ¬¡æš´åŠ›çš„å¤æ‚åº¦ä¸º$O(n\sqrt{n})$<del>å…¶å®åˆ°ä¸äº†næ¬¡</del></li>
<li><strong>å·¦æŒ‡é’ˆç§»åŠ¨</strong>: è¿›è¡Œ<code>add</code>æ“ä½œçš„å¤æ‚åº¦ä¸º$O(1)$,å—é•¿$\sqrt{n}$,æ¯æ¬¡å·¦ç§»æœ€åå¤æ‚åº¦$O(\sqrt{n})$,å›æ»šæ—¶ä»éœ€è¦$O(\sqrt{n})$æ¸…é™¤è´¡çŒ®<br>æ‰€ä»¥å¯¹äºæ‰€æœ‰å—,ä¸€å…±è¦ç§»åŠ¨$q$æ¬¡,æ€»çš„å¤æ‚åº¦ä¸º$O(2q\sqrt{n})$</li>
<li><strong>å³æŒ‡é’ˆç§»åŠ¨</strong>: å¯¹äºæ¯ä¸ªå—,æœ€ååªè¦ç§»åŠ¨$n$æ¬¡,ä¸€å…±$\sqrt{n}$ä¸ªå—,æ‰€ä»¥å¤æ‚åº¦ä¸º$O(n\sqrt{n})$</li>
</ol>
<p>ç»¼ä¸Š,æ€»çš„å¤æ‚åº¦ä¸º$O(n\log n)+O(2q\sqrt{n})+O(n\sqrt{n})\ \sim\ O(n\sqrt{n})$</p>
<h2 id="é’ˆå¯¹-mathcal-AT1219-çš„å…·ä½“å®ç°"><a href="#é’ˆå¯¹-mathcal-AT1219-çš„å…·ä½“å®ç°" class="headerlink" title="é’ˆå¯¹$\mathcal{AT1219}$çš„å…·ä½“å®ç°"></a>é’ˆå¯¹$\mathcal{AT1219}$çš„å…·ä½“å®ç°</h2><p>æ·»åŠ è´¡çŒ®çš„<code>add</code>æ“ä½œå¾ˆå®¹æ˜“å®ç°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    cnt[a[x]]++;</span><br><span class="line">    Ans = <span class="built_in">max</span>(Ans, <span class="number">1LL</span> * cnt[a[x]] * old[a[x]]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒä¸€å—å†…çš„æš´åŠ›ä¹Ÿå¾ˆå®¹æ˜“å®ç°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; ++i) cnt2[a[i]] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; ++i) &#123;</span><br><span class="line">        cnt2[a[i]]++;</span><br><span class="line">        res = <span class="built_in">max</span>(res, <span class="number">1LL</span> * cnt2[a[i]] * old[a[i]]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä½™æƒ…å†µä¸‹æ ¹æ®å‰é¢æ‰€è¯´,å¯ä»¥å®ç°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> (r &lt; q[i].r) <span class="built_in">add</span>(++r);  <span class="comment">// å³æŒ‡é’ˆå³ç§»,æ·»åŠ è´¡çŒ®</span></span><br><span class="line">LL tmp = Ans;                 <span class="comment">// è®°å½•å·¦æŒ‡é’ˆç§»åŠ¨å‰çš„ç­”æ¡ˆ</span></span><br><span class="line"><span class="keyword">while</span> (l &gt; q[i].l) <span class="built_in">add</span>(--l);  <span class="comment">// å·¦æŒ‡é’ˆå·¦ç§»,æ·»åŠ è´¡çŒ®</span></span><br><span class="line">ans[q[i].id] = Ans;</span><br><span class="line"><span class="keyword">while</span> (l &lt; rpos[k] + <span class="number">1</span>) cnt[a[l++]]--; <span class="comment">// å·¦æŒ‡é’ˆç§»åŠ¨å›å³è¾¹ç•Œ,å¹¶é€”ä¸­åˆ é™¤å¯¹cntçš„è´¡çŒ®</span></span><br><span class="line">Ans = tmp;                    <span class="comment">// å›æ»šåˆ°ç§»åŠ¨å‰çš„ç­”æ¡ˆ</span></span><br></pre></td></tr></table></figure>

<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, len, l, r;</span><br><span class="line"><span class="keyword">int</span> a[maxn], cnt[maxn], rpos[maxn], old[maxn], cnt2[maxn];</span><br><span class="line">LL Ans, ans[maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Query</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r, id, pos;</span><br><span class="line">&#125;q[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Query a, Query b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a.pos != b.pos) <span class="keyword">return</span> a.pos &lt; b.pos;</span><br><span class="line">    <span class="keyword">return</span> a.r &lt; b.r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; ++i) cnt2[a[i]] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; ++i) &#123;</span><br><span class="line">        cnt2[a[i]]++;</span><br><span class="line">        res = <span class="built_in">max</span>(res, <span class="number">1LL</span> * cnt2[a[i]] * old[a[i]]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    cnt[a[x]]++;</span><br><span class="line">    Ans = <span class="built_in">max</span>(Ans, <span class="number">1LL</span> * cnt[a[x]] * old[a[x]]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>(); len = <span class="built_in">sqrt</span>(n); <span class="keyword">int</span> num = <span class="built_in">ceil</span>((<span class="keyword">double</span>)n / len);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= num; ++i) rpos[i] = len * i; rpos[num] = n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) old[i] = a[i] = <span class="built_in">read</span>();</span><br><span class="line">    <span class="built_in">sort</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + n);</span><br><span class="line">    <span class="keyword">int</span> len_ = <span class="built_in">unique</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + n) - old - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) a[i] = <span class="built_in">lower_bound</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + len_, a[i]) - old;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        q[i].l = <span class="built_in">read</span>(); q[i].r = <span class="built_in">read</span>();</span><br><span class="line">        q[i].id = i; q[i].pos = (q[i].l - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(q + <span class="number">1</span>, q + <span class="number">1</span> + m, cmp); l = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>, i = <span class="number">1</span>; k &lt;= num; ++k) &#123;</span><br><span class="line">        l = rpos[k] + <span class="number">1</span>, r = rpos[k], Ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(cnt, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cnt));</span><br><span class="line">        <span class="keyword">while</span> (q[i].pos == k) &#123;</span><br><span class="line">            <span class="keyword">if</span> (q[i].l / len == q[i].r / len) &#123;</span><br><span class="line">                ans[q[i].id] = <span class="built_in">solve</span>(q[i].l, q[i].r);</span><br><span class="line">                i++; <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (r &lt; q[i].r) <span class="built_in">add</span>(++r);</span><br><span class="line">            LL tmp = Ans;</span><br><span class="line">            <span class="keyword">while</span> (l &gt; q[i].l) <span class="built_in">add</span>(--l);</span><br><span class="line">            ans[q[i].id] = Ans;</span><br><span class="line">            <span class="keyword">while</span> (l &lt; rpos[k] + <span class="number">1</span>) cnt[a[l++]]--;</span><br><span class="line">            Ans = tmp; i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
        <tag>ç¬”è®°</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>è«é˜Ÿ</tag>
        <tag>AtCoder</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¦ä¿®è«é˜Ÿ-ç¬”è®°  /ã€ŒLuogu P1903ã€æ•°é¢œè‰²-é¢˜è§£</title>
    <url>/p/838c5e29.html</url>
    <content><![CDATA[<p>é€šè¿‡<a href="https://www.luogu.com.cn/problem/P1903">Luogu P1903 æ•°é¢œè‰²/ç»´æŠ¤åºåˆ—</a>è¿™é“é¢˜ç›®æ¥å­¦ä¹ ä¸€ä¸‹ <strong>å¸¦ä¿®è«é˜Ÿ</strong><br>é¡¾åæ€ä¹‰,<strong>å¸¦ä¿®è«é˜Ÿ</strong> ä¸ä»…è¦æ”¯æŒæ™®é€šè«é˜Ÿçš„æŸ¥è¯¢æ“ä½œ,è¿˜è¦æ”¯æŒæ•°æ®ä¸­é€”çš„ä¿®æ”¹</p>
<p>æ¯”å¦‚è¿™é“é¢˜ç›®,éœ€è¦å®ç°ä»¥ä¸‹ç›®æ ‡</p>
<ol>
<li>æŸ¥è¯¢$[L,R]$åŒºé—´å†…ä¸åŒé¢œè‰²ç”»ç¬”çš„ç§æ•°</li>
<li>å°†$pos$å¤„çš„ç”»ç¬”æ›¿æ¢ä¸º$color$é¢œè‰²</li>
</ol>
<p>è¾¾åˆ°è¿™ä¸ªç›®æ ‡,å¯ä»¥åœ¨æ™®é€šè«é˜Ÿçš„åŸºç¡€ä¸ŠåŠ ä¸€ä¸ªæ—¶é—´ç»´åº¦,å®ç° <strong>å¸¦ä¿®è«é˜Ÿ</strong></p>
<span id="more"></span> 

<h2 id="å¸¦ä¿®è«é˜Ÿ"><a href="#å¸¦ä¿®è«é˜Ÿ" class="headerlink" title="å¸¦ä¿®è«é˜Ÿ"></a>å¸¦ä¿®è«é˜Ÿ</h2><h3 id="æ—¶é—´æˆ³"><a href="#æ—¶é—´æˆ³" class="headerlink" title="æ—¶é—´æˆ³"></a>æ—¶é—´æˆ³</h3><p>è¿™é‡Œçš„æ¯ä¸ªæŸ¥è¯¢çš„æ—¶é—´æˆ³è§„å®šä¸º <strong>æœ€è¿‘ä¿®æ”¹æ“ä½œçš„æ—¶é—´æˆ³</strong>,å³æœ€è¿‘ä¸€æ¬¡ä¿®æ”¹æ˜¯ç¬¬å‡ æ¬¡ä¿®æ”¹<br>ä¿®æ”¹æ“ä½œä¼šå¢åŠ æ€»æ—¶é—´æˆ³,æŸ¥è¯¢æ“ä½œä¸ä¼šå¢åŠ æ—¶é—´æˆ³</p>
<h3 id="æ€æƒ³"><a href="#æ€æƒ³" class="headerlink" title="æ€æƒ³"></a>æ€æƒ³</h3><p>åœ¨æ™®é€šè«é˜Ÿçš„å·¦å³ä¸¤ä¸ªæŒ‡é’ˆçš„åŸºç¡€ä¹‹ä¸Š <em>å¢åŠ </em> ä¸€ä¸ª <strong>æ—¶é—´æˆ³æŒ‡é’ˆ</strong><br>å½“å·¦å³ç«¯ç‚¹åŠæ—¶é—´æˆ³ç§»åŠ¨åˆ°å‡å’Œå½“å‰æŸ¥è¯¢çš„ä¸€è‡´,å°±å¯ä»¥è®°å½•ä¸‹å½“å‰ç­”æ¡ˆ</p>
<p>æ‰€ä»¥éœ€è¦åœ¨æ™®é€šè«é˜Ÿçš„åŸºç¡€ä¹‹ä¸ŠåŠ ä¸Šä¿®æ”¹æ—¶é—´æˆ³çš„ä¿®æ”¹æ“ä½œ,å¹¶åŠ ä¸Šä»¥ä¸‹ä¸¤ä¸ªåˆ¤æ–­</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> (t &lt; q[i].t) <span class="built_in">chg</span>(++t);</span><br><span class="line"><span class="keyword">while</span> (t &gt; q[i].t) <span class="built_in">chg</span>(t--);</span><br></pre></td></tr></table></figure>
<p>å½“å½“å‰æ—¶é—´å°äºè¯¢é—®æ—¶é—´æ—¶,å…ˆå°†å½“å‰æ—¶é—´$+1$,å†ä¿®æ”¹<br>å½“å½“å‰æ—¶é—´å¤§äºè¯¢é—®æ—¶é—´æ—¶,å…ˆä¿®æ”¹,å†å°†å½“å‰æ—¶é—´$-1$</p>
<p>ä¸æ™®é€šè«é˜Ÿè¿˜æœ‰ä¸€ç‚¹ä¸åŒ:<br>æ‰€æœ‰è¯¢é—®çš„æ’åºæ–¹æ³•,å…ˆæŒ‰ç…§å·¦ç«¯ç‚¹åˆ†å—å‡åº,å†æŒ‰ç…§å³ç«¯ç‚¹ <strong>åˆ†å—å‡åº</strong>,æœ€åæŒ‰ç…§æ—¶é—´æˆ³å‡åº<br>è¿™æ ·å¤æ‚åº¦æ‰ä¼šè¾¾åˆ°æœ€ä¼˜,èŠ‚çœäº†ä¸€ç³»åˆ—ä¸å¿…è¦çš„æ“ä½œ</p>
<h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>å½“åˆ†å—çš„å¤§å°ä¸º$n^{\frac{2}{3}}$æ—¶,å¤æ‚åº¦æœ€å°ä¸º$O(n^{\frac{5}{3}})$<br>å…·ä½“åˆ†æè§ä¸Šä¸€ç¯‡æ–‡ç« :<a href="681257d9.html">æµ…æè«é˜Ÿç®—æ³•çš„æ—¶é—´å¤æ‚åº¦</a></p>
<h2 id="é’ˆå¯¹-mathcal-P1903-çš„å…·ä½“å®ç°"><a href="#é’ˆå¯¹-mathcal-P1903-çš„å…·ä½“å®ç°" class="headerlink" title="é’ˆå¯¹$\mathcal{P1903}$çš„å…·ä½“å®ç°"></a>é’ˆå¯¹$\mathcal{P1903}$çš„å…·ä½“å®ç°</h2><p>åœ¨æ¯ä¸ªè¯¢é—®<code>Query</code>çš„ç»“æ„ä½“å†…åŠ ä¸€ä¸ªæ—¶é—´æˆ³$t$,å¹¶ä¸”æŒ‰ç…§ä¸Šæ–‡å®ç°æ’åº</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Query</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r, t, id;</span><br><span class="line">&#125;q[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Query a, Query b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (block[a.l] != block[b.l]) <span class="keyword">return</span> block[a.l] &lt; block[b.l];</span><br><span class="line">    <span class="keyword">if</span> (block[a.r] != block[b.r]) <span class="keyword">return</span> block[a.r] &lt; block[b.r];</span><br><span class="line">    <span class="keyword">return</span> a.t &lt; b.t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†å»ºä¸€ä¸ªç»“æ„ä½“<code>Change</code>,è¡¨ç¤ºæ¯æ¬¡ä¿®æ”¹æ“ä½œçš„æ•°æ®,éœ€è¦$pos$å’Œ$color$</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Change</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> pos, color;</span><br><span class="line">&#125;c[maxn];</span><br></pre></td></tr></table></figure>

<p>æ­£å¸¸çš„<code>add/del</code>æ“ä½œä¸å†èµ˜è¿°<br>ç°åœ¨æ¥çœ‹ä¸€ä¸‹ä¿®æ”¹æ—¶é—´å¯¹åº”æ•°æ®çš„æ“ä½œ</p>
<ol>
<li>å½“å½“å‰æ—¶é—´çš„æ“ä½œçš„ä½ç½®$pos$åœ¨å½“å‰åŒºé—´$[l,r]$æ—¶,å¯¹ç­”æ¡ˆæœ‰å½±å“,éœ€è¦è°ƒæ•´å½“å‰ç­”æ¡ˆ<br>å…ˆå°†$pos$ä½ç½®ä¸Šçš„è´¡çŒ®åˆ å»,å†å°†å½“å‰ä¿®æ”¹æ“ä½œçš„$color$æ·»åŠ è¿›å»</li>
<li>å°†$pos$ä½ç½®ä¸Šçš„æ•°ä¸$color$äº¤æ¢,è¿™æ ·å¯ä»¥ä¿è¯ä¹‹åå¯ä»¥å†æ¢å›æ¥</li>
</ol>
<p>å®ç°å¦‚ä¸‹:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">chg</span><span class="params">(<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= c[t].pos &amp;&amp; c[t].pos &lt;= r) &#123;</span><br><span class="line">        <span class="keyword">if</span> (--cnt[a[c[t].pos]] == <span class="number">0</span>) Ans--; <span class="comment">// åˆ é™¤è´¡çŒ®</span></span><br><span class="line">        <span class="keyword">if</span> (cnt[c[t].color]++  == <span class="number">0</span>) Ans++; <span class="comment">// æ·»åŠ è´¡çŒ®</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">swap</span>(a[c[t].pos], c[t].color); <span class="comment">// äº¤æ¢</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦å¤–è¿™é¢˜ä¿®æ”¹æ•°æ®åä¸¥é‡å¡å¸¸,æ‰‹åŠ¨å¼€äº†O3,Ofast,inlineæ‰è¿‡</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(<span class="meta-string">&quot;Ofast&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(<span class="meta-string">&quot;inline&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">140000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, l, r, t, len, cntq, cntr, Ans;</span><br><span class="line"><span class="keyword">int</span> a[maxn], cnt[<span class="number">1000010</span>], ans[maxn], block[maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Query</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r, t, id;</span><br><span class="line">&#125;q[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Query a, Query b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (block[a.l] != block[b.l]) <span class="keyword">return</span> block[a.l] &lt; block[b.l];</span><br><span class="line">    <span class="keyword">if</span> (block[a.r] != block[b.r]) <span class="keyword">return</span> block[a.r] &lt; block[b.r];</span><br><span class="line">    <span class="keyword">return</span> a.t &lt; b.t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Change</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> pos, color;</span><br><span class="line">&#125;c[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cnt[a[x]] == <span class="number">0</span>) Ans++;</span><br><span class="line">    cnt[a[x]]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">del</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cnt[a[x]] == <span class="number">1</span>) Ans--;</span><br><span class="line">    cnt[a[x]]--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">chg</span><span class="params">(<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= c[t].pos &amp;&amp; c[t].pos &lt;= r) &#123;</span><br><span class="line">        <span class="built_in">del</span>(c[t].pos);</span><br><span class="line">        <span class="keyword">if</span> (cnt[c[t].color] == <span class="number">0</span>) Ans++;</span><br><span class="line">        cnt[c[t].color]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">swap</span>(a[c[t].pos], c[t].color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>(); len = <span class="built_in">pow</span>(n, <span class="number">2.0</span> / <span class="number">3.0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        a[i] = <span class="built_in">read</span>();</span><br><span class="line">        block[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">char</span> opt[<span class="number">10</span>]; <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, opt);</span><br><span class="line">        <span class="keyword">if</span> (opt[<span class="number">0</span>] == <span class="string">&#x27;Q&#x27;</span>) &#123;</span><br><span class="line">            q[++cntq].l = <span class="built_in">read</span>(); q[cntq].r = <span class="built_in">read</span>();</span><br><span class="line">            q[cntq].id = cntq; q[cntq].t = cntr;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            c[++cntr].pos = <span class="built_in">read</span>();</span><br><span class="line">            c[cntr].color = <span class="built_in">read</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(q + <span class="number">1</span>, q + <span class="number">1</span> + cntq, cmp); l = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cntq; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; q[i].l) <span class="built_in">del</span>(l++);</span><br><span class="line">        <span class="keyword">while</span> (r &gt; q[i].r) <span class="built_in">del</span>(r--);</span><br><span class="line">        <span class="keyword">while</span> (l &gt; q[i].l) <span class="built_in">add</span>(--l);</span><br><span class="line">        <span class="keyword">while</span> (r &lt; q[i].r) <span class="built_in">add</span>(++r);</span><br><span class="line">        <span class="keyword">while</span> (t &lt; q[i].t) <span class="built_in">chg</span>(++t);</span><br><span class="line">        <span class="keyword">while</span> (t &gt; q[i].t) <span class="built_in">chg</span>(t--);</span><br><span class="line">        ans[q[i].id] = Ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cntq; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
        <tag>ç¬”è®°</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>è«é˜Ÿ</tag>
        <tag>Luogu</tag>
      </tags>
  </entry>
  <entry>
    <title>æµ…æè«é˜Ÿç®—æ³•çš„æ—¶é—´å¤æ‚åº¦</title>
    <url>/p/681257d9.html</url>
    <content><![CDATA[<p>è¿™ç¯‡æ–‡ç« æ¥è®°å½•ä¸€ä¸‹è«é˜Ÿç®—æ³•æ—¶é—´å¤æ‚åº¦çš„ç®€å•(<del>ä¸ä¸¥è°¨</del>)è®¡ç®—</p>
<p>é¦–å…ˆåˆ†æä¸€ä¸‹è«é˜Ÿç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æœ‰å“ªäº›æ–¹é¢æ„æˆ</p>
<ol>
<li>å¯¹è¯¢é—®<code>Query</code>æ•°ç»„çš„æ’åº</li>
<li>åŒºé—´å·¦æŒ‡é’ˆçš„ç§»åŠ¨</li>
<li>åŒºé—´å³æŒ‡é’ˆçš„ç§»åŠ¨<span id="more"></span> </li>
</ol>
<h2 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h2><p>æ¯ä¸ª<code>add/del</code>æ“ä½œçš„å¤æ‚åº¦ä¸º$O(1)$</p>
<ol>
<li><p>æ’åºä½¿ç”¨<code>sort</code>å¯ä»¥åœ¨$O(n\log n)$å†…å®Œæˆ</p>
</li>
<li><p>ç”±äºå·¦æŒ‡é’ˆåœ¨æ’åºä¸­è¢«åˆ†å—,æ‰€ä»¥åˆåˆ†ä¸ºå—å†…ç§»åŠ¨å’Œå—é—´ç§»åŠ¨</p>
<ul>
<li><strong>å—å†…</strong>: è®¾æ¯å—ä¸­å«å·¦ç«¯ç‚¹$x_i$ä¸ª,ç”±äºæ¯å—å¤§å°ä¸º$\sqrt{n}$,æ‰€ä»¥åœ¨å—å†…ç§»åŠ¨çš„æœ€åå¤æ‚åº¦ä¸º$O(x_i\sqrt{n})$ã€‚<br>å› æ­¤å¯¹äºæ‰€æœ‰å—,å°†å¤æ‚åº¦æ±‚å’Œ,å³ä¸º$O(\displaystyle\sum_ix_i\sqrt{n})=O(n\sqrt{n})$</li>
<li><strong>å—é—´</strong>: å·¦æŒ‡é’ˆåœ¨æ¯ä¸ªå—å†…ç§»åŠ¨ä¹‹å,éœ€è¦ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå—å†…çš„å·¦ç«¯ç‚¹å¤„,å—é—´è·³è½¬æœ€åè·¨ä¸¤ä¸ªæ•´å—éœ€è¦$O(2\sqrt{n})$ã€‚<br>æ€»å…±éœ€è¦è·¨$\sqrt{n}-1$ä¸ªå—,æ‰€ä»¥å¤æ‚åº¦ä¸º$O((\sqrt{n}-1)\times 2\sqrt{n})\sim O(n)$</li>
</ul>
</li>
</ol>
<p>ç»¼ä¸Š,å·¦æŒ‡é’ˆç§»åŠ¨çš„å¤æ‚åº¦ä¸º$O(n\sqrt{n})$<br>3. å½“å·¦æŒ‡é’ˆåœ¨åŒä¸€ä¸ªå—å†…æ—¶,å³æŒ‡é’ˆæ˜¯æœ‰åºçš„,å› æ­¤å½“å·¦æŒ‡é’ˆåœ¨åŒä¸€ä¸ªå—å†…æ—¶,å³æŒ‡é’ˆç§»åŠ¨çš„æœ€åå¤æ‚åº¦ä¸º$O(n)$å³å…¨éƒ¨ç§»åŠ¨ä¸€éã€‚è€Œæ¯ä¸ªå—é•¿åº¦ä¸º$\sqrt{n}$,æ€»é•¿ä¸º$n$,æ‰€ä»¥ä¸€å…±$\sqrt{n}$ä¸ªå—,æ‰€ä»¥æœ€åå¤æ‚åº¦ä¸º$O(n\sqrt{n})$</p>
<p>ç»¼ä¸Š,æ™®é€šè«é˜Ÿç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º<br>$$<br>O(n\log n)+O(n\sqrt{n})+O(n\sqrt{n})\ \sim\ O(n\sqrt{n})<br>$$</p>
<h2 id="ç„å­¦çš„å¥‡å¶æ’åºä¼˜åŒ–"><a href="#ç„å­¦çš„å¥‡å¶æ’åºä¼˜åŒ–" class="headerlink" title="ç„å­¦çš„å¥‡å¶æ’åºä¼˜åŒ–"></a><del>ç„å­¦</del>çš„å¥‡å¶æ’åºä¼˜åŒ–</h2><p>è§å›¾:<br><img src="/p/681257d9/MosAlgoCompare.png" alt="å·¦:æ— å¥‡å¶æ’åº,å³:æœ‰å¥‡å¶æ’åº&lt;/br&gt;å›¾ä¸­ç°è‰²è™šçº¿è¡¨ç¤ºåˆ†å—çš„è¾¹ç•Œ;å¸¦ç«¯ç‚¹çš„çº¿æ®µè¡¨ç¤ºéœ€è¦è¯¢é—®çš„åŒºé—´;çº¢è‰²ç®­å¤´è¡¨ç¤ºä¸¤ç§æ–¹æ³•å³æŒ‡é’ˆç§»åŠ¨ç›¸åŒé•¿åº¦çš„éƒ¨åˆ†;è“è‰²ç®­å¤´è¡¨ç¤ºä¸åŒçš„éƒ¨åˆ†ã€‚å¯ä»¥çœ‹å‡º,æœ‰å¥‡å¶æ’åºçš„è“è‰²ç®­å¤´å˜çŸ­,é¿å…äº†æ— æ„ä¹‰çš„å¤§å¹…åº¦è·³åŠ¨,èŠ‚çœäº†ä¸€äº›å¸¸æ•°å¤æ‚åº¦"></p>
<h2 id="åˆ†å—å¤§å°ä¸ä¸º-sqrt-n"><a href="#åˆ†å—å¤§å°ä¸ä¸º-sqrt-n" class="headerlink" title="åˆ†å—å¤§å°ä¸ä¸º$\sqrt{n}$"></a>åˆ†å—å¤§å°ä¸ä¸º$\sqrt{n}$</h2><p>è¿˜æ˜¯å’Œå‰é¢ä¸€æ ·æ¨å¤æ‚åº¦,è®¾å—å¤§å°ä¸º$a&gt;1$</p>
<ol>
<li><strong>æ’åº</strong>: éœ€è¦$O(n\log n)$</li>
<li><strong>å·¦æŒ‡é’ˆç§»åŠ¨</strong>: <ul>
<li><strong>å—å†…</strong>: $O(\displaystyle\sum_ix_ia)=O(na)$</li>
<li><strong>å—é—´</strong>: $O((\dfrac{n}{a}-1)\times 2a)=O(n)$</li>
</ul>
</li>
<li><strong>å³æŒ‡é’ˆç§»åŠ¨</strong>: $O(n\times \dfrac{n}{a})=O(\dfrac{n^2}{a})$</li>
</ol>
<p>ç»¼ä¸Š,æ€»çš„å¤æ‚åº¦ä¸º$O(n\log n)+O(na)+O(n)+O(\dfrac{n^2}{a})=O(na+\dfrac{n^2}{a})$<br>æ ¹æ®å‡å€¼ä¸ç­‰å¼,è‹¥è®©ä¸Šå¼å¤æ‚åº¦æœ€å°,åˆ™éœ€è¦$na=\dfrac{n^2}{a}$,å³$a=\sqrt{n}$<br>æ‰€ä»¥å½“å«æœ‰å·¦å³ä¸¤ä¸ªæŒ‡é’ˆæ—¶,åˆ†å—å¤§å°ä¸º$\sqrt{n}$æ—¶æ€»å¤æ‚åº¦æœ€å°,ä¸º$O(n\sqrt{n})$</p>
<h2 id="å¸¦ä¿®è«é˜Ÿ-ä¸‰æŒ‡é’ˆ"><a href="#å¸¦ä¿®è«é˜Ÿ-ä¸‰æŒ‡é’ˆ" class="headerlink" title="å¸¦ä¿®è«é˜Ÿ(ä¸‰æŒ‡é’ˆ)"></a>å¸¦ä¿®è«é˜Ÿ(ä¸‰æŒ‡é’ˆ)</h2><p>è¿˜æ˜¯è®¾åˆ†å—çš„å¤§å°ä¸º$a&gt;1$,æ³¨æ„å¸¦ä¿®è«é˜Ÿæ’åºä¼˜å…ˆçº§:å…ˆå·¦ç«¯ç‚¹æ‰€åœ¨å—,å†å³ç«¯ç‚¹æ‰€åœ¨å—,åæ—¶é—´æˆ³å¤§å°</p>
<ol>
<li><strong>æ’åº</strong>: $O(n\log n)$</li>
<li><strong>å·¦æŒ‡é’ˆç§»åŠ¨</strong>: åŒä¸Šæ¨å¯¼,å¤æ‚åº¦ä¸º$O(na)$</li>
<li><strong>å³æŒ‡é’ˆç§»åŠ¨</strong>: ç›¸åŒå³ç«¯ç‚¹çš„å—çš„å¤æ‚åº¦åŒä¸Š$O(na)$,è¿˜æœ‰æ¢å·¦ç«¯ç‚¹å†³å®šçš„å—æ—¶çš„å¤æ‚åº¦çº¦ä¸º$O(\dfrac{n^2}{a})$</li>
<li><strong>æ—¶é—´æˆ³ç§»åŠ¨</strong>: ç”±æ’åºä¼˜å…ˆçº§å¯è§,åªæœ‰å½“å³ç«¯ç‚¹æ‰€åœ¨å—ç›¸åŒæ—¶æ‰ä¼šç§»åŠ¨æ—¶é—´æˆ³,è€Œæ¯æ¬¡ç§»åŠ¨æœ€åéœ€è¦ç§»åŠ¨$\sum t \sim n$<br>å¯¹äºæ¯ä¸ªå·¦ç«¯ç‚¹ç›¸åŒçš„å—,å³ç«¯ç‚¹å—æ•°ä¸º$\dfrac{n}{a}$,å·¦ç«¯ç‚¹æœ‰$\dfrac{n}{a}$ä¸ª,æ‰€ä»¥ä¸€å…±éœ€è¦$O(\dfrac{n}{a}\times\dfrac{n}{a}\times n)=O(\dfrac{n^3}{a^2})$</li>
</ol>
<p>ç»¼ä¸Š,æ€»çš„å¤æ‚åº¦ä¸º$O(n\log n)+O(na)+O(na)+O(\dfrac{n^2}{a})+O(\dfrac{n^3}{a^2})\ \sim\  O(na+\dfrac{n^2}{a}+\dfrac{n^3}{a^2})$</p>
<p>ç”±äº$1&lt;a&lt;n$,æ‰€ä»¥$\dfrac{\dfrac{n^2}{a}}{\dfrac{n^3}{a^2}}=\dfrac{a}{n}&lt;1 \Rightarrow \dfrac{n^2}{a}&lt;\dfrac{n^3}{a^2}$,æ‰€ä»¥åŸå¼å¯åŒ–ä¸º$O(na+\dfrac{n^3}{a^2})$</p>
<p>æ ¹æ®å‡å€¼ä¸ç­‰å¼,å½“$na=\dfrac{n^3}{a^2}$æ—¶ä¸Šå¼æœ€å°,å³$a=\sqrt[3]{n^2}=n^{\frac{2}{3}}$<br>æ‰€ä»¥å«æœ‰ä¸‰ä¸ªæŒ‡é’ˆæ—¶,åˆ†å—å¤§å°ä¸º$n^{\frac{2}{3}}$æ—¶æ€»å¤æ‚åº¦æœ€å°,ä¸º$O(n^{\frac{5}{3}})=O(n\sqrt[3]{n^2})$</p>
]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
        <tag>ç¬”è®°</tag>
        <tag>è«é˜Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€æ€»ç»“åŠå›¾ç¤º</title>
    <url>/p/dccbc6bb.html</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th align="center">é—®é¢˜ç¼–å·</th>
<th align="left">é—®é¢˜åç§°</th>
<th align="left">é—®é¢˜æ¨¡å‹</th>
<th align="left">è½¬åŒ–æ¨¡å‹</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P2756">é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆé—®é¢˜</a></td>
<td align="left">äºŒåˆ†å›¾æœ€å¤§åŒ¹é…</td>
<td align="left">ç½‘ç»œæœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P2762">å¤ªç©ºé£è¡Œè®¡åˆ’é—®é¢˜</a></td>
<td align="left">æœ€å¤§æƒé—­åˆå›¾</td>
<td align="left">ç½‘ç»œæœ€å°å‰²</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P2764">æœ€å°è·¯å¾„è¦†ç›–é—®é¢˜</a></td>
<td align="left">æœ‰å‘æ— ç¯å›¾æœ€å°è·¯å¾„è¦†ç›–</td>
<td align="left">ç½‘ç»œæœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">4</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P2765">é­”æœ¯çƒé—®é¢˜</a></td>
<td align="left">æœ‰å‘æ— ç¯å›¾æœ€å°è·¯å¾„è¦†ç›–</td>
<td align="left">ç½‘ç»œæœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">5</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P3254">åœ†æ¡Œé—®é¢˜</a></td>
<td align="left">äºŒåˆ†å›¾å¤šé‡åŒ¹é…</td>
<td align="left">ç½‘ç»œæœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">6</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P2766">æœ€é•¿ä¸ä¸‹é™å­åºåˆ—é—®é¢˜</a></td>
<td align="left">æœ€å¤šä¸ç›¸äº¤è·¯å¾„</td>
<td align="left">ç½‘ç»œæœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">7</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P2763">è¯•é¢˜åº“é—®é¢˜</a></td>
<td align="left">äºŒåˆ†å›¾å¤šé‡åŒ¹é…</td>
<td align="left">ç½‘ç»œæœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">8</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P2775">æœºå™¨äººè·¯å¾„è§„åˆ’é—®é¢˜</a></td>
<td align="left">$IDA*$</td>
<td align="left">$IDA*$</td>
</tr>
<tr>
<td align="center">9</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P2774">æ–¹æ ¼å–æ•°é—®é¢˜</a></td>
<td align="left">äºŒåˆ†å›¾ç‚¹æƒæœ€å¤§ç‹¬ç«‹é›†</td>
<td align="left">ç½‘ç»œæœ€å°å‰²</td>
</tr>
<tr>
<td align="center">10</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P1251">é¤å·¾è®¡åˆ’é—®é¢˜</a></td>
<td align="left">çº¿æ€§è§„åˆ’ç½‘ç»œä¼˜åŒ–</td>
<td align="left">æœ€å°è´¹ç”¨æœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">11</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P2770">èˆªç©ºè·¯çº¿é—®é¢˜</a></td>
<td align="left">æœ€é•¿ä¸ç›¸äº¤è·¯å¾„</td>
<td align="left">æœ€å°è´¹ç”¨æœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">12</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P2761">è½¯ä»¶è¡¥ä¸é—®é¢˜</a></td>
<td align="left">æœ€å°è½¬ç§»ä»£ä»·</td>
<td align="left">æœ€çŸ­è·¯å¾„</td>
</tr>
<tr>
<td align="center">13</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P2754">æ˜Ÿé™…è½¬ç§»é—®é¢˜</a></td>
<td align="left">ç½‘ç»œåˆ¤å®š</td>
<td align="left">ç½‘ç»œæœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">14</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P4011">å­¤å²›è¥æ•‘é—®é¢˜</a></td>
<td align="left">åˆ†å±‚å›¾æœ€çŸ­è·¯å¾„</td>
<td align="left">æœ€çŸ­è·¯å¾„</td>
</tr>
<tr>
<td align="center">15</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P4009">æ±½è½¦åŠ æ²¹è¡Œé©¶é—®é¢˜</a></td>
<td align="left">åˆ†å±‚å›¾æœ€çŸ­è·¯å¾„</td>
<td align="left">æœ€çŸ­è·¯å¾„</td>
</tr>
<tr>
<td align="center">16</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P4013">æ•°å­—æ¢¯å½¢é—®é¢˜</a></td>
<td align="left">æœ€å¤§æƒä¸ç›¸äº¤è·¯å¾„</td>
<td align="left">æœ€å°è´¹ç”¨æœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">17</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P4015">è¿è¾“é—®é¢˜</a></td>
<td align="left">ç½‘ç»œè´¹ç”¨æµé‡</td>
<td align="left">æœ€å°è´¹ç”¨æœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">18</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P4014">åˆ†é…é—®é¢˜</a></td>
<td align="left">äºŒåˆ†å›¾æœ€ä½³åŒ¹é…</td>
<td align="left">æœ€å°è´¹ç”¨æœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">19</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P4016">è´Ÿè½½å¹³è¡¡é—®é¢˜</a></td>
<td align="left">æœ€å°ä»£ä»·ä¾›æ±‚</td>
<td align="left">æœ€å°è´¹ç”¨æœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">20</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P4012">æ·±æµ·æœºå™¨äººé—®é¢˜</a></td>
<td align="left">çº¿æ€§è§„åˆ’ç½‘ç»œä¼˜åŒ–</td>
<td align="left">æœ€å°è´¹ç”¨æœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">21</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P3358">æœ€é•¿kå¯é‡åŒºé—´é›†é—®é¢˜</a></td>
<td align="left">æœ€å¤§æƒä¸ç›¸äº¤è·¯å¾„</td>
<td align="left">æœ€å°è´¹ç”¨æœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">22</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P3357">æœ€é•¿kå¯é‡çº¿æ®µé›†é—®é¢˜</a></td>
<td align="left">æœ€å¤§æƒä¸ç›¸äº¤è·¯å¾„</td>
<td align="left">æœ€å°è´¹ç”¨æœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">23</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P3356">ç«æ˜Ÿæ¢é™©é—®é¢˜</a></td>
<td align="left">çº¿æ€§è§„åˆ’ç½‘ç»œä¼˜åŒ–</td>
<td align="left">æœ€å°è´¹ç”¨æœ€å¤§æµ</td>
</tr>
<tr>
<td align="center">24</td>
<td align="left"><a href="https://www.luogu.com.cn/problem/P3355">éª‘å£«å…±å­˜é—®é¢˜</a></td>
<td align="left">äºŒåˆ†å›¾æœ€å¤§ç‹¬ç«‹é›†</td>
<td align="left">ç½‘ç»œæœ€å°å‰²</td>
</tr>
</tbody></table>
<span id="more"></span>

<h3 id="äºŒåˆ†å›¾"><a href="#äºŒåˆ†å›¾" class="headerlink" title="äºŒåˆ†å›¾"></a>äºŒåˆ†å›¾</h3><ul>
<li><strong>æœ€å¤§åŒ¹é…</strong>: åŒˆç‰™åˆ©/æœ€å¤§æµ</li>
<li><strong>å¸¦æƒåŒ¹é…</strong>: KM/è´¹ç”¨æµ</li>
<li><strong>æœ€å°ç‚¹è¦†ç›–</strong>: =æœ€å¤§åŒ¹é…</li>
<li><strong>æœ€å°è¾¹è¦†ç›–</strong>: =æ€»ç»“ç‚¹æ•°-æœ€å¤§åŒ¹é…</li>
<li><strong>æœ€å¤§ç‹¬ç«‹é›†</strong>: =æ€»ç»“ç‚¹æ•°-æœ€å¤§åŒ¹é…</li>
</ul>
<h3 id="ç½‘ç»œæµ"><a href="#ç½‘ç»œæµ" class="headerlink" title="ç½‘ç»œæµ"></a>ç½‘ç»œæµ</h3><ul>
<li>å»ºç«‹è¶…çº§æºç‚¹,è¶…çº§æ±‡ç‚¹</li>
<li>ç‚¹å­˜åœ¨é™åˆ¶,æ‹†æˆå‡ºå…¥ç‚¹,å°†å‡ºå…¥ç‚¹ä¹‹é—´çš„è¾¹çœ‹åšç‚¹,é™åˆ¶æµé‡</li>
<li>å»ºå›¾è€ƒè™‘å·¦å³äºŒéƒ¨</li>
<li>è¶…çº§æºç‚¹å‘æºç‚¹çš„è¾¹å¯ä»¥é™åˆ¶æ€»æµé‡</li>
<li>æ— æºæ±‡æœ‰å®¹é‡ä¸‹ç•Œ:<code>s-ä¸‹ç•Œ-&gt;v  u-ä¸‹ç•Œ-&gt;t  u-ä¸Šç•Œå‡ä¸‹ç•Œ-&gt;v</code>,å½“æ»¡æµæ—¶å­˜åœ¨å¯è¡Œæµ</li>
<li>æœ€å°å‰²ä¸­èµ‹æµé‡ä¸ºinfåˆ™ä¸€å®šä¸ä¼šå‰²å»</li>
<li>ä¸€äº›æ±‚æœ€å¤§é—®é¢˜,å¯ä»¥ç”¨sum-æœ€å°å‰²</li>
<li>æœ€å¤§æƒé—­åˆå›¾: å»ºå›¾,æœ€å°å‰²,ä»å’Œsç›¸è¿çš„ä¸ºæœ€å¤§æƒé—­åˆå›¾,æƒå€¼å’Œä¸ºsum-æœ€å°å‰²</li>
</ul>
<h3 id="24é¢˜"><a href="#24é¢˜" class="headerlink" title="24é¢˜"></a>24é¢˜</h3><ol>
<li>ç›´æ¥å»ºäºŒåˆ†å›¾,æœ€å¤§æµæ±‚æœ€å¤§åŒ¹é…</li>
<li>æœ€å¤§æƒé—­åˆå›¾,å»ºè¾¹,å®éªŒå’Œä»ªå™¨ä¹‹é—´ä¿è¯ä¸åˆ‡å‰²å®¹é‡ä¸ºinf,è·‘æœ€å°å‰²,æ‰¾ä¸sç›¸è¿çš„å®éªŒå’Œä»ªå™¨</li>
<li>æœ€å¤§ç‹¬ç«‹é›†,æ€»ç»“ç‚¹æ•°-æœ€å¤§æµ</li>
<li>è´ªå¿ƒ</li>
<li>äºŒåˆ†å›¾å¤šé‡åŒ¹é…,s-&gt;å·¦ç‚¹é›†å’Œå³ç‚¹é›†-&gt;tä¹‹é—´çš„è¾¹å®¹é‡ä¸ä¸º1(å³å¯ä»¥é€‰å¤šæ¬¡)</li>
<li>åŠ¨æ€è§„åˆ’+æŒ‰ç…§åŠ¨æ€è§„åˆ’çš„dpæ•°ç»„çš„æ„ä¹‰å»ºè¾¹æ±‚æœ€å¤§æµ</li>
<li>äºŒåˆ†å›¾å¤šé‡åŒ¹é…,ç±»å‹-é¢˜ç›®æ•°-&gt;æ±‡ç‚¹,ä¿è¯å¯é€‰å¤šä¸ª,å­˜åœ¨æ»¡æµåˆ™å­˜åœ¨ç­”æ¡ˆæ²¿æ»¡æµè¾“å‡º</li>
<li>$IDA*$çˆ†æœ,ä½†æ´›è°·æ•°æ®åº”è¯¥æœ‰é—®é¢˜</li>
<li>æŠ½è±¡å‡ºä¸¤ä¸ªç‚¹é›†,æ±‚æœ€å¤§ç‹¬ç«‹é›†</li>
<li>æŒ‰ç…§é¢˜ç›®è¯´æ˜å»ºå›¾,è·‘è´¹ç”¨æµ</li>
<li>æŒ‰ç…§é¢˜ç›®è¯´æ˜å»ºå›¾,è·‘è´¹ç”¨æµ</li>
<li>å°†é”™è¯¯çŠ¶æ€è¿›è¡Œå‹ç¼©,ç„¶åè·‘æœ€çŸ­è·¯</li>
<li>æ ¹æ®æ—¶é—´é€å±‚å»ºå›¾,ç›´åˆ°è·‘å‡ºå¯è¡Œæµ</li>
<li>å°†æ‹¥æœ‰é’¥åŒ™è¿›è¡Œå‹ç¼©,è·‘æœ€çŸ­è·¯</li>
<li>å»ºå‡ºåˆ†å±‚å›¾,è·‘æœ€çŸ­è·¯æˆ–è€…è´¹ç”¨æµ</li>
<li>å¯¹ä¸‰ä¸ªè§„åˆ™åˆ†åˆ«å»ºå›¾,è·‘è´¹ç”¨æµ</li>
<li>çº¯è´¹ç”¨æµ</li>
<li>äºŒåˆ†å›¾æœ€ä½³åŒ¹é…,ä½¿ç”¨è´¹ç”¨æµ</li>
<li>è´¹ç”¨æµ,æ³¨æ„ç¯å½¢</li>
<li>æŒ‰ç…§é¢˜ç›®è¦æ±‚å»ºå›¾,è·‘è´¹ç”¨æµ</li>
<li>ç¦»æ•£åŒ–,å°†åŒºé—´è½¬åŒ–ä¸ºè¾¹,è´¹ç”¨æµ</li>
<li>è½¬åŒ–é—®é¢˜,å˜æˆ21é¢˜,æ³¨æ„ç«¯ç‚¹å¤„ç†å’Œå‚ç›´äºxè½´çš„çº¿æ®µ</li>
<li>æŒ‰ç…§é¢˜ç›®è¦æ±‚å»ºå›¾,è·‘è´¹ç”¨æµ,æ–¹æ¡ˆdfs</li>
<li>å°†å›¾ä¸Šæ‰€æœ‰æ ¼ç‚¹è½¬åŒ–ä¸ºä¸¤ä¸ªç‚¹é›†,å»ºäºŒåˆ†å›¾,æ±‚æœ€å¤§ç‹¬ç«‹é›†</li>
</ol>
<h3 id="å›¾ç¤º"><a href="#å›¾ç¤º" class="headerlink" title="å›¾ç¤º"></a>å›¾ç¤º</h3><p><strong><del>æ›´æ–°ä¸­</del></strong><br><img src="/p/dccbc6bb/NF24P2762.png" alt="2"><br><img src="/p/dccbc6bb/NF24P2754.png" alt="13"><br><img src="/p/dccbc6bb/NF24P3358.png" alt="21"><br><img src="/p/dccbc6bb/NF24P3357.png" alt="22"></p>
]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
        <tag>è´¹ç”¨æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLuogu P1494ã€å°Zçš„è¢œå­-é¢˜è§£</title>
    <url>/p/49548215.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P1494">ã€ŒLuogu P1494ã€å°Zçš„è¢œå­</a><br>ä¸€é“æ¨å…¬å¼ï¼Œåä½¿ç”¨è«é˜Ÿ <del>ç„å­¦</del> ä¼˜åŒ–çš„é¢˜ç›®</p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å‡º$n$ä¸ªè¢œå­,ç¬¬$i$åªè¢œå­çš„é¢œè‰²ä¸º$c_i$<br>æœ‰$m$ä¸ªè¯¢é—®,ç”¨$L,R$è¡¨ç¤º<br>åœ¨åŒºé—´$[L,R]$ä¸­éšæœºå–è¢œå­,æ±‚å–å‡ºä¸¤åªè¢œå­é¢œè‰²ç›¸åŒçš„æ¦‚ç‡(æœ€ç®€åˆ†æ•°)</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>è€ƒè™‘åŒºé—´$[L,R]$,å…¶ä¸­é¢œè‰²ä¸º$A$çš„è¢œå­æœ‰$a$åª,é¢œè‰²ä¸º$B$çš„è¢œå­æœ‰$b$åª$â€¦$</p>
<p>å–å‡ºä¸¤åªè¢œå­çš„æ€»æƒ…å†µæ•°ä¸º<br>$$C_{R-L+1}^2=\frac{(R-L+1)(R-L)}{2}$$<br>å–å‡ºä¸¤åªè¢œå­é¢œè‰²éƒ½ä¸º$A$çš„æƒ…å†µæ•°ä¸º<br>$$C_a^2=\frac{a(a - 1)}{2}$$<br>æ‰€ä»¥,å–å‡ºä¸¤åªè¢œå­é¢œè‰²ç›¸åŒçš„æƒ…å†µæ•°ä¸º<br>$$\sum_{i}C_i^2=C_a^2+C_b^2+â€¦=\frac{a(a-1)}{2}+\frac{b(b-1)}{2}+â€¦$$<br>æ‰€ä»¥æœ€ç»ˆçš„æ¦‚ç‡ä¸º<br>$$<br>\begin{aligned}<br>P&amp;=\frac{\displaystyle\sum_{i}C_i^2}{C_{R-L+1}^2}\\\\<br>&amp;=\dfrac{\dfrac{a(a-1)}{2}+\dfrac{b(b-1)}{2}+â€¦}{ \dfrac{(R-L+1)(R-L)}{2} }\\\\<br>&amp;=\dfrac{a^2+b^2+â€¦-a-b-â€¦}{(R-L+1)(R-L)}\\\\<br>&amp;=\dfrac{\displaystyle\sum_ii^2-\displaystyle\sum_ii}{(R-L+1)(R-L)}\\\\<br>&amp;=\dfrac{\displaystyle\sum_ii^2-(R-L+1)}{(R-L+1)(R-L)}<br>\end{aligned}<br>$$<br>æ‰€ä»¥è¦æ±‚çš„å°±æ˜¯$\displaystyle\sum_ii^2$,å¯ä»¥ç”¨è«é˜Ÿæ¥ç»´æŠ¤åŒºé—´å¹³æ–¹å’Œå¾—åˆ°</p>
<p>å¯¹äºæœ€ç»ˆç»“æœçš„è¡¨è¾¾å¼,ä»¤$a=$åˆ†å­,$b=$åˆ†æ¯,æ±‚å‡º$ab$çš„æœ€å¤§å…¬çº¦æ•°,å¹¶é™¤å»<br>æœ€ç»ˆç­”æ¡ˆå³ä¸º$a/b$</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">gcd</span><span class="params">(LL a, LL b)</span> </span>&#123; <span class="keyword">return</span> b == <span class="number">0</span> ? a : <span class="built_in">gcd</span>(b, a % b); &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50010</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Query</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r, pos, id;</span><br><span class="line">&#125;q[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Query a, Query b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a.pos != b.pos) <span class="keyword">return</span> a.pos &lt; b.pos;</span><br><span class="line">    <span class="keyword">if</span> (a.pos &amp; <span class="number">1</span>) <span class="keyword">return</span> a.r &lt; b.r;</span><br><span class="line">    <span class="keyword">return</span> a.r &gt; b.r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Answer</span> &#123;</span></span><br><span class="line">    LL a, b;</span><br><span class="line">&#125;ans[maxn];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, l, r, Ans, len;</span><br><span class="line">LL c[maxn], cnt[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">del</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    Ans -= cnt[c[x]] * cnt[c[x]];</span><br><span class="line">    cnt[c[x]]--;</span><br><span class="line">    Ans += cnt[c[x]] * cnt[c[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    Ans -= cnt[c[x]] * cnt[c[x]];</span><br><span class="line">    cnt[c[x]]++;</span><br><span class="line">    Ans += cnt[c[x]] * cnt[c[x]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>(); len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) c[i] = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        q[i].l = <span class="built_in">read</span>(); q[i].r = <span class="built_in">read</span>();</span><br><span class="line">        q[i].id = i; q[i].pos = q[i].l / len + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(q + <span class="number">1</span>, q + <span class="number">1</span> + m, cmp); l = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; q[i].l) <span class="built_in">del</span>(l++);</span><br><span class="line">        <span class="keyword">while</span> (r &gt; q[i].r) <span class="built_in">del</span>(r--);</span><br><span class="line">        <span class="keyword">while</span> (l &gt; q[i].l) <span class="built_in">add</span>(--l);</span><br><span class="line">        <span class="keyword">while</span> (r &lt; q[i].r) <span class="built_in">add</span>(++r);</span><br><span class="line">        <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">            ans[q[i].id].a = <span class="number">0</span>; ans[q[i].id].b = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        LL a = Ans - (r - l + <span class="number">1</span>);</span><br><span class="line">        LL b = <span class="number">1LL</span> * (r - l + <span class="number">1</span>) * (LL)(r - l);</span><br><span class="line">        LL g = <span class="built_in">gcd</span>(a, b);</span><br><span class="line">        ans[q[i].id].a = a / g;</span><br><span class="line">        ans[q[i].id].b = b / g;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld/%lld\n&quot;</span>, ans[i].a, ans[i].b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>è«é˜Ÿ</tag>
        <tag>æ•°è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€è´Ÿè½½å¹³è¡¡é—®é¢˜-é¢˜è§£</title>
    <url>/p/b8624866.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P4016">ã€ŒLuogu P4016ã€è´Ÿè½½å¹³è¡¡é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>æœ‰$n$ä¸ªç¯å½¢çš„ä»“åº“,æ¯ä¸ªä»“åº“å­˜å‚¨ä¸€å®šæ•°é‡çš„è´§ç‰©<br>è´§ç‰©å¯ä»¥åœ¨ç›¸é‚»ä»“åº“ä¹‹é—´æ¬è¿,æœ€ç»ˆè¾¾åˆ°æ¯ä¸ªä»“è´§ç‰©æ•°é‡ä¸€æ ·çš„æ•ˆæœ</p>
<p>æ±‚æœ€å°‘æ¬è¿æ¬¡æ•°</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>çœ‹é¢˜è§£è¯´å¯ä»¥ç”¨æ•°å­¦æ–¹æ³•æ¨å¯¼,ä½†æ˜¯åœ¨24é¢˜é‡Œè¿˜æ˜¯é€‰æ‹©ç”¨è´¹ç”¨æµæ°´è¿‡</p>
<p>å…ˆæ±‚å‡ºå¹³å‡æ•°,å³ç›®æ ‡<br>ç„¶åå°†æ¯ä¸ªä»“åº“çš„è´§ç‰©æ•°å‡å»å¹³å‡æ•°,å¾—å‡ºéœ€è¦ç§»åŠ¨çš„æ•°é‡</p>
<ol>
<li>å¦‚æœå¤§äº$0$,åˆ™ä» æºç‚¹ å‘ è¯¥ä»“åº“ å»ºä¸€æ¡ <strong>å®¹é‡ä¸ºå·®å€¼,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(éœ€è¦è½¬ç§»å‡º,å¯¹ç­”æ¡ˆæ— è´¡çŒ®)</li>
<li>å¦‚æœå°äº$0$,åˆ™ä» è¯¥ä»“åº“ å‘ æ±‡ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸ºå·®å€¼ç»å¯¹å€¼,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(å¸æ”¶è¿™äº›è´§ç‰©,å¯¹ç­”æ¡ˆæ— è´¡çŒ®)</li>
<li>ä» æ¯ä¸ªä»“åº“ å‘ ç›¸é‚»ä¸¤ä¸ªä»“åº“ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º$inf$,è´¹ç”¨ä¸º$1$</strong> çš„è¾¹(è½¬ç§»è´§ç‰©çš„æ•°é‡æ— è¦æ±‚,å¯¹ç­”æ¡ˆè´¡çŒ®ä¸º$1$)</li>
</ol>
<p>æ³¨æ„å»ºè¾¹3.éœ€è¦è€ƒè™‘ç¯å½¢<br>æ±‚å‡ºæœ€å°è´¹ç”¨æœ€å¤§æµ,æœ€å°è´¹ç”¨å³ä¸ºç»“æœ</p>
<p>å› ä¸ºè´¹ç”¨æµå¤§å‰ææ˜¯æ»¡è¶³æœ€å¤§æµ,è€Œä¸”æ­¤å›¾ä¸­æºç‚¹å‡ºå‘çš„ä¸æµå…¥æ±‡ç‚¹çš„è¾¹çš„å®¹é‡å’Œç›¸ç­‰,æ‰€ä»¥æœ€å¤§æµæƒ…å†µä¸‹ä¸€å®šä¼šå…¨éƒ¨æµè¿‡,å³è¾¾åˆ°ä»“åº“è´§ç‰©æ•°é‡å¹³è¡¡</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœ€å°è´¹ç”¨æœ€å¤§æµæ¨¡æ¿çœå»äº†</span></span><br><span class="line"><span class="keyword">int</span> num[<span class="number">110</span>], tot;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); s = <span class="number">0</span>; t = n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        num[i] = <span class="built_in">read</span>(); tot += num[i];</span><br><span class="line">    &#125;</span><br><span class="line">    tot /= n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (num[i] - tot &gt; <span class="number">0</span>) <span class="built_in">add</span>(s, i, num[i] - tot, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (num[i] - tot &lt; <span class="number">0</span>) <span class="built_in">add</span>(i, t, tot - num[i], <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (i != <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">add</span>(i, i - <span class="number">1</span>, inf, <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">add</span>(i - <span class="number">1</span>, i, inf, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">add</span>(<span class="number">1</span>, n, inf, <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(n, <span class="number">1</span>, inf, <span class="number">1</span>);</span><br><span class="line">    ansflow = <span class="built_in">MinCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, anscost);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
        <tag>è´¹ç”¨æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€è¿è¾“é—®é¢˜-é¢˜è§£</title>
    <url>/p/152673e9.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P4015">ã€ŒLuogu P4015ã€è¿è¾“é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>$m$ä¸ªä»“åº“,$n$ä¸ªå•†åº—,æ¯ä¸ªä»“åº“æœ‰$a_i$ä¸ªè´§ç‰©,æ¯ä¸ªå•†åº—éœ€è¦$b_i$ä¸ªè´§ç‰©<br>éœ€è¦ä»ä»“åº“è¿è¾“è´§ç‰©åˆ°å•†åº—ä¸­,ä¸”ç¬¬$i$ä¸ªä»“åº“è¿è¾“åˆ°ç¬¬$j$ä¸ªå•†åº—è´¹ç”¨ä¸º$c_{i,j}$</p>
<p>æ±‚æœ€å°è´¹ç”¨å’Œæœ€å¤§è´¹ç”¨</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å’Œ<a href="http://tony031218.github.io/p/11b1dcbd.html">P4015 åˆ†é…é—®é¢˜</a>ä¸€æ ·<br>å°†æ‰€æœ‰ä»“åº“å’Œæ‰€æœ‰å•†åº—å„åˆ†ä¸ºä¸€ä¸ªç‚¹é›†</p>
<ol>
<li>ä» æºç‚¹ å‘ æ¯ä¸ªä»“åº“ å»ºä¸€æ¡ <strong>å®¹é‡ä¸ºè´§ç‰©ä¸ªæ•°$a_i$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(æœ‰$a_i$ä¸ªè´§ç‰©éœ€è¦è¿å‡º,ä¸”å¯¹ç­”æ¡ˆæ— è´¡çŒ®)</li>
<li>ä» æ¯ä¸ªå•†åº— å‘ æ±‡ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸ºè´§ç‰©ä¸ªæ•°$b_i$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(éœ€è¦$b_i$ä¸ªè´§ç‰©,ä¸”å¯¹ç­”æ¡ˆæ— è´¡çŒ®)</li>
<li>ä» æ¯ä¸ªä»“åº“ å‘ æ¯ä¸ªå•†åº— å»ºä¸€æ¡ <strong>å®¹é‡ä¸º$inf$,è´¹ç”¨ä¸ºå¯¹åº”è´¹ç”¨</strong> çš„è¾¹(æ¯ä¸ªä»“åº“å¯ä»¥è¿å‡ºçš„æœ€å¤šè´§ç‰©ä¸é™åˆ¶,ä¸”å¯¹ç­”æ¡ˆå·¥ä½œä¸ºå¯¹åº”è´¹ç”¨)</li>
</ol>
<p>æ±‚å‡ºæœ€å°è´¹ç”¨æœ€å¤§æµå’Œæœ€å¤§è´¹ç”¨æœ€å¤§æµå³å¯</p>
<p>ç”±äºè´¹ç”¨æµçš„å¤§å‰ææ˜¯æµé‡æœ€å¤§,æ‰€ä»¥ä¸€å®šæ»¡è¶³é¢˜ç›®ä¸­è¦æ±‚çš„ä¾›éœ€å¹³è¡¡å³$\sum\limits_{i=1}^{m}a_i=\sum\limits_{j=1}^{n}b_j$</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è´¹ç”¨æµæ¨¡æ¿çœç•¥,åœ¨P4015é¢˜è§£é‚£é‡Œæœ‰</span></span><br><span class="line"><span class="comment">// ä»£ç é‡Œä¸ºäº†æ–¹ä¾¿æŠŠmnè°ƒæ¢äº†</span></span><br><span class="line"><span class="keyword">int</span> input1[<span class="number">110</span>], input2[<span class="number">110</span>], input3[<span class="number">110</span>][<span class="number">110</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>();</span><br><span class="line">    s = <span class="number">0</span>; t = n + m + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> c = <span class="built_in">read</span>(); input1[i] = c;</span><br><span class="line">        <span class="built_in">add</span>(s, i, c, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> c = <span class="built_in">read</span>(); input2[i] = c;</span><br><span class="line">        <span class="built_in">add</span>(i + n, t, c, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = <span class="built_in">read</span>(); input3[i][j] = c;</span><br><span class="line">            <span class="built_in">add</span>(i, j + n, inf, c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ansflow = <span class="built_in">MinCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, anscost);</span><br><span class="line"></span><br><span class="line">    edges.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; ++i) G[i].<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">add</span>(s, i, input1[i], <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) <span class="built_in">add</span>(i + n, t, input2[i], <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            <span class="built_in">add</span>(i, j + n, inf, input3[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ansflow = <span class="built_in">MaxCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, anscost);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
        <tag>è´¹ç”¨æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€åˆ†é…é—®é¢˜-é¢˜è§£</title>
    <url>/p/11b1dcbd.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P4014">ã€ŒLuogu P4014ã€åˆ†é…é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>æœ‰$n$ä»¶å·¥ä½œè¦åˆ†é…ç»™$n$ä¸ªäººåš<br>ç»™å‡ºæ¯ä¸ªäººåšæ¯ä¸ªå·¥ä»¶çš„æ•ˆç›Š$c_{i,j}$</p>
<p>æ±‚æœ€å°æ•ˆç›Šå’Œæœ€å¤§æ•ˆç›Š</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>è£¸çš„æœ€å°/å¤§è´¹ç”¨æœ€å¤§æµ<br>å°†æ‰€æœ‰äººå’Œæ‰€æœ‰å·¥ä½œå„åˆ†ä¸ºä¸€ä¸ªç‚¹é›†</p>
<ol>
<li>ä» æºç‚¹ å‘ æ‰€æœ‰äºº å»ºä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(åªèƒ½é€‰ä¸€æ¬¡,ä¸”å¯¹ç­”æ¡ˆæ— è´¡çŒ®)</li>
<li>ä» æ‰€æœ‰å·¥ä½œ å‘ æ±‡ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(åªèƒ½åšä¸€æ¬¡,ä¸”å¯¹ç­”æ¡ˆæ— è´¡çŒ®)</li>
<li>ä» æ¯ä¸ªäºº å‘ æ‰€æœ‰å·¥ä½œ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸ºå¯¹åº”æ•ˆç›Š</strong> çš„è¾¹(åªèƒ½åšä¸€ç§å·¥ä½œ,ä¸”å¯¹ç­”æ¡ˆå·¥ä½œä¸ºå¯¹åº”æ•ˆç›Š)</li>
</ol>
<p>æ±‚å‡ºæœ€å°è´¹ç”¨æœ€å¤§æµå’Œæœ€å¤§è´¹ç”¨æœ€å¤§æµ</p>
<p>ä¸¤ä¸ªé—®ä¹‹é—´è¦æ¸…ç©ºå›¾å¹¶é‡å»º(å› ä¸ºæ±‚æœ€å¤§æµè¿‡ç¨‹ä¸­ä¼šä¿®æ”¹flow)</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">310</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ninf = <span class="number">0xc0c0c0c0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, ansflow;</span><br><span class="line"><span class="keyword">int</span> vis[maxn], d[maxn], p[maxn], a[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> anscost;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> from, to, cap, flow, cost;</span><br><span class="line">	<span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f, <span class="keyword">int</span> w): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f), <span class="built_in">cost</span>(w)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>, w));</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>,-w));</span><br><span class="line">	<span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">	G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">	G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BellmanFord</span><span class="params">(<span class="keyword">int</span>&amp; flow, <span class="keyword">long</span> <span class="keyword">long</span>&amp; cost, <span class="keyword">int</span> opt)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (opt == <span class="number">0</span>) <span class="built_in">memset</span>(d, <span class="number">0x3f</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(d));</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">memset</span>(d, <span class="number">0xc0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(d));</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	d[s] = <span class="number">0</span>; vis[s] = <span class="number">1</span>; p[s] = <span class="number">0</span>; a[s] = inf;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">	Q.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">		vis[x] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">			Edge&amp; e = edges[G[x][i]]; <span class="keyword">bool</span> judge;</span><br><span class="line">            <span class="keyword">if</span> (opt) judge = d[e.to] &lt; d[x] + e.cost;</span><br><span class="line">            <span class="keyword">else</span> judge = d[e.to] &gt; d[x] + e.cost;</span><br><span class="line">			<span class="keyword">if</span> (e.cap &gt; e.flow &amp;&amp; judge) &#123;</span><br><span class="line">				d[e.to] = d[x] + e.cost;</span><br><span class="line">				p[e.to] = G[x][i];</span><br><span class="line">				a[e.to] = <span class="built_in">min</span>(a[x], e.cap - e.flow);</span><br><span class="line">				<span class="keyword">if</span> (!vis[e.to]) &#123;</span><br><span class="line">					Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">					vis[e.to] = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (!opt &amp;&amp; d[t] == inf) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (opt &amp;&amp; d[t] == ninf) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	flow += a[t];</span><br><span class="line">	cost += (<span class="keyword">long</span> <span class="keyword">long</span>)d[t] * (<span class="keyword">long</span> <span class="keyword">long</span>)a[t];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> u = t; u != s; u = edges[p[u]].from) &#123;</span><br><span class="line">		edges[p[u]].flow += a[t];</span><br><span class="line">		edges[p[u] ^ <span class="number">1</span>].flow -= a[t];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MinCostMaxFlow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> flow = <span class="number">0</span>; cost = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">BellmanFord</span>(flow, cost, <span class="number">0</span>));</span><br><span class="line">	<span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxCostMaxFlow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> flow = <span class="number">0</span>; cost = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">BellmanFord</span>(flow, cost, <span class="number">1</span>));</span><br><span class="line">	<span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tmp[<span class="number">110</span>][<span class="number">110</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); s = <span class="number">0</span>; t = n * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = <span class="built_in">read</span>(); tmp[i][j] = c;</span><br><span class="line">            <span class="built_in">add</span>(i, j + n, <span class="number">1</span>, c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">add</span>(s, i, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">add</span>(i + n, t, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ansflow = <span class="built_in">MinCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, anscost);</span><br><span class="line"></span><br><span class="line">    edges.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; ++i) G[i].<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="built_in">add</span>(i, j + n, <span class="number">1</span>, tmp[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">add</span>(s, i, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">add</span>(i + n, t, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ansflow = <span class="built_in">MaxCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, anscost);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
        <tag>è´¹ç”¨æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€æ•°å­—æ¢¯å½¢é—®é¢˜-é¢˜è§£</title>
    <url>/p/86b4c1f9.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P4013">ã€ŒLuogu P4013ã€æ•°å­—æ¢¯å½¢é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>æ¢¯å½¢çš„ç¬¬ä¸€è¡Œæœ‰$m$ä¸ªæ•°å­—<br>ä»æ¢¯å½¢çš„é¡¶éƒ¨çš„$m$ä¸ªæ•°å­—å¼€å§‹,åœ¨æ¯ä¸ªæ•°å­—å¤„å¯ä»¥æ²¿å·¦ä¸‹æˆ–å³ä¸‹æ–¹å‘ç§»åŠ¨,å½¢æˆä¸€æ¡ä»æ¢¯å½¢çš„é¡¶è‡³åº•çš„è·¯å¾„ã€‚</p>
<p>æœ‰ä¸‰ç§è§„åˆ™:</p>
<ol>
<li>ä»æ¢¯å½¢çš„é¡¶è‡³åº•çš„$m$æ¡è·¯å¾„äº’ä¸ç›¸äº¤</li>
<li>ä»æ¢¯å½¢çš„é¡¶è‡³åº•çš„$m$æ¡è·¯å¾„ä»…åœ¨æ•°å­—ç»“ç‚¹å¤„ç›¸äº¤</li>
<li>ä»æ¢¯å½¢çš„é¡¶è‡³åº•çš„$m$æ¡è·¯å¾„å…è®¸åœ¨æ•°å­—ç»“ç‚¹ç›¸äº¤æˆ–è¾¹ç›¸äº¤</li>
</ol>
<p>æ±‚æ¯ç§è§„åˆ™ä¸‹ç»è¿‡æ•°å­—çš„æœ€å¤§æ€»å’Œ</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å¾ˆæ˜æ˜¾æ˜¯ <strong>æœ€å¤§è´¹ç”¨æœ€å¤§æµ</strong></p>
<h4 id="è§„åˆ™1"><a href="#è§„åˆ™1" class="headerlink" title="è§„åˆ™1."></a>è§„åˆ™1.</h4><p>è·¯å¾„ä¸ç›¸äº¤,å³æ²¡æœ‰å…¬å…±ç‚¹,ä¹Ÿå°±æ˜¯æ¯ä¸ªç‚¹åªèƒ½ç»è¿‡ä¸€æ¬¡<br>å°†æ¯ä¸ªç‚¹æ‹†æˆå…¥ç‚¹å’Œå‡ºç‚¹,å°±å¯ä»¥é€šè¿‡æ§åˆ¶å‡ºå…¥ç‚¹ä¹‹é—´çš„å®¹é‡æ§åˆ¶ç»è¿‡æ¬¡æ•°</p>
<ol>
<li>ä» æºç‚¹ å‘ ç¬¬ä¸€è¡Œçš„$m$ä¸ªç‚¹çš„å…¥ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹</li>
<li>ä» æœ€åä¸€è¡Œæ¯ä¸ªç‚¹çš„å‡ºç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹</li>
<li>ä» æ¯ä¸ªç‚¹çš„å…¥ç‚¹ å‘ æ¯ä¸ªç‚¹çš„å‡ºç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸ºè¯¥ç‚¹æ•°å­—</strong> çš„è¾¹(å¯¹ç­”æ¡ˆè´¡çŒ®ä¸ºè¯¥ç‚¹æ•°å­—)</li>
<li>ä» æ¯ä¸ªç‚¹çš„å‡ºç‚¹ å‘ å·¦ä¸‹å³ä¸‹ä¸¤ä¸ªç‚¹çš„å…¥ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹</li>
</ol>
<h4 id="è§„åˆ™2"><a href="#è§„åˆ™2" class="headerlink" title="è§„åˆ™2."></a>è§„åˆ™2.</h4><p>æ¯æ¡è·¯å¾„ä»…åœ¨æ•°å­—èŠ‚ç‚¹ç›¸äº¤,ä¹Ÿå°±æ˜¯ä¸èƒ½æœ‰é‡è¾¹<br>æ— éœ€æ‹†ç‚¹æ§åˆ¶æ¯ä¸ªç‚¹ç»è¿‡çš„æ¬¡æ•°,åªéœ€ç»™æ¯æ¡å‘å·¦ä¸‹å³ä¸‹çš„è¾¹çš„å®¹é‡è®¾ä¸º$1$,å³åªèƒ½ç»è¿‡ä¸€æ¬¡</p>
<ol>
<li>ä» æºç‚¹ å‘ ç¬¬ä¸€è¡Œçš„$m$ä¸ªç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹</li>
<li>ä» æœ€åä¸€è¡Œæ¯ä¸ªç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$inf$,è´¹ç”¨ä¸ºè¯¥ç‚¹æ•°å­—</strong> çš„è¾¹(æ¯ä¸ªç‚¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡)</li>
<li>ä» æ¯ä¸ªç‚¹çš„ å‘ å·¦ä¸‹å³ä¸‹ä¸¤ä¸ªç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸ºè¯¥ç‚¹æ•°å­—</strong> çš„è¾¹</li>
</ol>
<h4 id="è§„åˆ™3"><a href="#è§„åˆ™3" class="headerlink" title="è§„åˆ™3."></a>è§„åˆ™3.</h4><p>è¾¹ä¹Ÿå¯ä»¥é‡åˆ,ä¹Ÿå°±ç›¸å½“äºæ²¡æœ‰è§„åˆ™,å¯ä»¥éšæ„å‘å·¦ä¸‹å³ä¸‹èµ°<br>åªéœ€å°†è§„åˆ™2.ä¸­å»ºè¾¹3.çš„å®¹é‡æ”¹æˆ$inf$å³å¯</p>
<p>å¯¹äºæ¯ç§æƒ…å†µ,æ±‚å‡ºæœ€å¤§è´¹ç”¨æœ€å¤§æµ,æœ€å¤§è´¹ç”¨å³ä¸ºç­”æ¡ˆ<br>æ³¨æ„æ±‚è§£è§„åˆ™2.3.ä¹‹å‰è¦æ¸…ç©ºå»ºçš„å›¾</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœ€å¤§è´¹ç”¨æœ€å¤§æµæ¨¡æ¿éƒ¨åˆ†çœå»äº†</span></span><br><span class="line"><span class="keyword">int</span> in[<span class="number">45</span>][<span class="number">45</span>];</span><br><span class="line"><span class="keyword">int</span> point[<span class="number">45</span>][<span class="number">45</span>], cnt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    m = <span class="built_in">read</span>(); n = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m + i - <span class="number">1</span>; ++j) &#123;</span><br><span class="line">            in[i][j] = <span class="built_in">read</span>();</span><br><span class="line">            point[i][j] = ++cnt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Question 1</span></span><br><span class="line">    s = <span class="number">0</span>; t = cnt * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) <span class="built_in">add</span>(s, point[<span class="number">1</span>][i], <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + m - <span class="number">1</span>; ++i) <span class="built_in">add</span>(point[n][i] + cnt, t, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; n) <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m + i - <span class="number">1</span>; ++j) &#123;</span><br><span class="line">            <span class="built_in">add</span>(point[i][j] + cnt, point[i + <span class="number">1</span>][j], <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="built_in">add</span>(point[i][j] + cnt, point[i + <span class="number">1</span>][j + <span class="number">1</span>], <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m + i - <span class="number">1</span>; ++j) </span><br><span class="line">            <span class="built_in">add</span>(point[i][j], point[i][j] + cnt, <span class="number">1</span>, in[i][j]);</span><br><span class="line">    &#125;</span><br><span class="line">    ansflow = <span class="built_in">MaxCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, anscost);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Question 2</span></span><br><span class="line">    edges.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; ++i) G[i].<span class="built_in">clear</span>();</span><br><span class="line">    s = <span class="number">0</span>; t = cnt + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) <span class="built_in">add</span>(s, point[<span class="number">1</span>][i], <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + m - <span class="number">1</span>; ++i) <span class="built_in">add</span>(point[n][i], t, inf, in[n][i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m + i - <span class="number">1</span>; ++j) &#123;</span><br><span class="line">        <span class="built_in">add</span>(point[i][j], point[i + <span class="number">1</span>][j], <span class="number">1</span>, in[i][j]);</span><br><span class="line">        <span class="built_in">add</span>(point[i][j], point[i + <span class="number">1</span>][j + <span class="number">1</span>], <span class="number">1</span>, in[i][j]);</span><br><span class="line">    &#125;</span><br><span class="line">    ansflow = <span class="built_in">MaxCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, anscost);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Question 3</span></span><br><span class="line">    edges.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; ++i) G[i].<span class="built_in">clear</span>();</span><br><span class="line">    s = <span class="number">0</span>; t = cnt + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) <span class="built_in">add</span>(s, point[<span class="number">1</span>][i], <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + m - <span class="number">1</span>; ++i) <span class="built_in">add</span>(point[n][i], t, inf, in[n][i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m + i - <span class="number">1</span>; ++j) &#123;</span><br><span class="line">        <span class="built_in">add</span>(point[i][j], point[i + <span class="number">1</span>][j], inf, in[i][j]);</span><br><span class="line">        <span class="built_in">add</span>(point[i][j], point[i + <span class="number">1</span>][j + <span class="number">1</span>], inf, in[i][j]);</span><br><span class="line">    &#125;</span><br><span class="line">    ansflow = <span class="built_in">MaxCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, anscost);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
        <tag>è´¹ç”¨æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€æ·±æµ·æœºå™¨äººé—®é¢˜-é¢˜è§£</title>
    <url>/p/cfb1d422.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P4012">ã€ŒLuogu P4012ã€æ·±æµ·æœºå™¨äººé—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ä¸€ä¸ª$P\times Q$ç½‘æ ¼,æœºå™¨äººå¯ä»¥å‘åŒ—/ä¸œèµ°,è¥¿å—ä¸º$(0, 0)$,ä¸œåŒ—ä¸º$(Q, P)$<br>æ¯ä¸ªç½‘æ ¼è¾¹ä¸Šæœ‰ç”Ÿç‰©æ ‡æœ¬,å’Œä»·å€¼<br>æœ‰$a$ä¸ªèµ·ç‚¹,æ¯ä¸ªèµ·ç‚¹æœ‰ä¸åŒçš„æœºå™¨äººä¸ªæ•°<br>æœ‰$b$ä¸ªç»ˆç‚¹,æ¯ä¸ªç»ˆç‚¹æœ‰ä¸åŒçš„æœºå™¨äººä¸ªæ•°ä½œä¸ºç›®çš„åœ°</p>
<p>æ±‚é‡‡é›†åˆ°ç”Ÿç‰©æ ‡æœ¬çš„æœ€é«˜æ€»ä»·å€¼</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>æœ€å¤§è´¹ç”¨æœ€å¤§æµ</p>
<ol>
<li>æ¯ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å»ºä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸ºæ ‡æœ¬ä»·å€¼</strong> çš„è¾¹,å’Œä¸€æ¡ <strong>å®¹é‡ä¸º$inf$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(æ ‡æœ¬åªèƒ½é‡‡é›†ä¸€æ¬¡)</li>
<li>ä» æºç‚¹ å‘ æ¯ä¸ªèµ·ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸ºæœºå™¨äººä¸ªæ•°,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹</li>
<li>ä» æ¯ä¸ªç»ˆç‚¹ å‘ æ±‡ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸ºæœºå™¨äººä¸ªæ•°,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹</li>
</ol>
<p>è·‘å‡ºæœ€å¤§è´¹ç”¨æœ€å¤§æµ,æœ€å¤§è´¹ç”¨å³ä¸ºç»“æœ</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">410</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ninf = <span class="number">0xc0c0c0c0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, ansflow;</span><br><span class="line"><span class="keyword">int</span> vis[maxn], d[maxn], p[maxn], a[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> anscost;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> from, to, cap, flow, cost;</span><br><span class="line">	<span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f, <span class="keyword">int</span> w): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f), <span class="built_in">cost</span>(w)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>, w));</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>,-w));</span><br><span class="line">	<span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">	G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">	G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BellmanFord</span><span class="params">(<span class="keyword">int</span>&amp; flow, <span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(d, <span class="number">0xc0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(d));</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	d[s] = <span class="number">0</span>; vis[s] = <span class="number">1</span>; p[s] = <span class="number">0</span>; a[s] = inf;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">	Q.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">		vis[x] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">			Edge&amp; e = edges[G[x][i]];</span><br><span class="line">			<span class="keyword">if</span> (e.cap &gt; e.flow &amp;&amp; d[e.to] &lt; d[x] + e.cost) &#123;</span><br><span class="line">				d[e.to] = d[x] + e.cost;</span><br><span class="line">				p[e.to] = G[x][i];</span><br><span class="line">				a[e.to] = <span class="built_in">min</span>(a[x], e.cap - e.flow);</span><br><span class="line">				<span class="keyword">if</span> (!vis[e.to]) &#123;</span><br><span class="line">					Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">					vis[e.to] = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (d[t] == ninf) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	flow += a[t];</span><br><span class="line">	cost += (<span class="keyword">long</span> <span class="keyword">long</span>)d[t] * (<span class="keyword">long</span> <span class="keyword">long</span>)a[t];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> u = t; u != s; u = edges[p[u]].from) &#123;</span><br><span class="line">		edges[p[u]].flow += a[t];</span><br><span class="line">		edges[p[u] ^ <span class="number">1</span>].flow -= a[t];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxCostMaxFlow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> flow = <span class="number">0</span>; cost = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">BellmanFord</span>(flow, cost));</span><br><span class="line">	<span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> p_, q_;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">point</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (x - <span class="number">1</span>) * q_ + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a_ = <span class="built_in">read</span>(), b_ = <span class="built_in">read</span>();</span><br><span class="line">    p_ = <span class="built_in">read</span>() + <span class="number">1</span>; q_ = <span class="built_in">read</span>() + <span class="number">1</span>;</span><br><span class="line">    s = <span class="number">0</span>, t = p_ * q_ + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= p_; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; q_; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> w = <span class="built_in">read</span>();</span><br><span class="line">            <span class="built_in">add</span>(<span class="built_in">point</span>(i, j), <span class="built_in">point</span>(i, j + <span class="number">1</span>), <span class="number">1</span>, w);</span><br><span class="line">            <span class="built_in">add</span>(<span class="built_in">point</span>(i, j), <span class="built_in">point</span>(i, j + <span class="number">1</span>), inf, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q_; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; p_; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> w = <span class="built_in">read</span>();</span><br><span class="line">            <span class="built_in">add</span>(<span class="built_in">point</span>(j, i), <span class="built_in">point</span>(j + <span class="number">1</span>, i), <span class="number">1</span>, w);</span><br><span class="line">            <span class="built_in">add</span>(<span class="built_in">point</span>(j, i), <span class="built_in">point</span>(j + <span class="number">1</span>, i), inf, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= a_; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> k = <span class="built_in">read</span>(), x = <span class="built_in">read</span>() + <span class="number">1</span>, y = <span class="built_in">read</span>() + <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">add</span>(s, <span class="built_in">point</span>(x, y), k, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= b_; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> r = <span class="built_in">read</span>(), x = <span class="built_in">read</span>() + <span class="number">1</span>, y = <span class="built_in">read</span>() + <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">add</span>(<span class="built_in">point</span>(x, y), t, r, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ansflow = <span class="built_in">MaxCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, anscost);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
        <tag>æœ€å¤§æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€å­¤å²›è¥æ•‘é—®é¢˜-é¢˜è§£</title>
    <url>/p/5c532c45.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P4011">ã€ŒLuogu P4011ã€å­¤å²›è¥æ•‘é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>èµ·ç‚¹ä¸º$(1,1)$,ç»ˆç‚¹ä¸º$(n,m)$<br>æœ‰äº›æ ¼å­ä¸Šæœ‰è‹¥å¹²ä¸ªé’¥åŒ™ï¼Œä¸¤ä¸ªæ ¼å­ä¹‹é—´å¯èƒ½æœ‰ä¸€å µå¢™æˆ–è€…ä¸€æ‰‡å¯ä»¥ç”¨å¯¹åº”é’¥åŒ™æ‰“å¼€çš„é—¨<br>æ¯æ¬¡ç§»åŠ¨éœ€è¦$1$ä¸ªå•ä½æ—¶é—´ï¼Œå…¶ä»–åŠ¨ä½œä¸éœ€è¦æ—¶é—´</p>
<p>æ±‚æœ€å°‘éœ€è¦å¤šå°‘æ—¶é—´èƒ½ä»èµ·ç‚¹åˆ°è¾¾ç»ˆç‚¹ã€‚</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å¯¹æ‹¥æœ‰çš„é’¥åŒ™çŠ¶æ€è¿›è¡Œå‹ç¼©<br>ä»èµ·ç‚¹åˆ°ç»ˆç‚¹è·‘bfså³å¯</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> go[<span class="number">4</span>][<span class="number">2</span>] = &#123;&#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, p, k;</span><br><span class="line"><span class="keyword">int</span> cnt[maxn][maxn], key[maxn][maxn][maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn][maxn][<span class="number">1</span> &lt;&lt; <span class="number">15</span>];</span><br><span class="line"><span class="keyword">int</span> edge[maxn][maxn][maxn][maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">int</span> keys, times;</span><br><span class="line">    <span class="built_in">Node</span>(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> k, <span class="keyword">int</span> t): <span class="built_in">x</span>(x), <span class="built_in">y</span>(y), <span class="built_in">keys</span>(k), <span class="built_in">times</span>(t) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">queue&lt;Node&gt; q;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> skey = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt[<span class="number">1</span>][<span class="number">1</span>]; ++i) skey |= (<span class="number">1</span> &lt;&lt; (key[<span class="number">1</span>][<span class="number">1</span>][i] - <span class="number">1</span>));</span><br><span class="line">    q.<span class="built_in">push</span>(<span class="built_in">Node</span>(<span class="number">1</span>, <span class="number">1</span>, skey, <span class="number">0</span>)); vis[<span class="number">1</span>][<span class="number">1</span>][skey] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        Node u = q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span> (u.x == n &amp;&amp; u.y == m) <span class="keyword">return</span> u.times;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; ++k) &#123;</span><br><span class="line">            <span class="keyword">int</span> vx = u.x + go[k][<span class="number">0</span>], vy = u.y + go[k][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (vx &lt; <span class="number">1</span> || vx &gt; n || vy &lt; <span class="number">1</span> || vy &gt; m) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> e = edge[u.x][u.y][vx][vy];</span><br><span class="line">            <span class="keyword">if</span> (e &lt; <span class="number">0</span> || (e &gt; <span class="number">0</span> &amp;&amp; !(<span class="number">1</span> &lt;&lt; (e - <span class="number">1</span>) &amp; u.keys))) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> vkeys = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt[vx][vy]; ++i) vkeys |= (<span class="number">1</span> &lt;&lt; (key[vx][vy][i] - <span class="number">1</span>));</span><br><span class="line">            <span class="keyword">int</span> nxtkeys = u.keys | vkeys;</span><br><span class="line">            <span class="keyword">if</span> (vis[vx][vy][nxtkeys]) <span class="keyword">continue</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(<span class="built_in">Node</span>(vx, vy, nxtkeys, u.times + <span class="number">1</span>));</span><br><span class="line">            vis[vx][vy][nxtkeys] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>(); p = <span class="built_in">read</span>(); k = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> x1 = <span class="built_in">read</span>(), y1 = <span class="built_in">read</span>(), x2 = <span class="built_in">read</span>(), y2 = <span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">int</span> g = <span class="built_in">read</span>();</span><br><span class="line">        edge[x1][y1][x2][y2] = ((g == <span class="number">0</span>) ? <span class="number">-1</span> : g);</span><br><span class="line">        edge[x2][y2][x1][y1] = edge[x1][y1][x2][y2];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> s = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= s; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> x1 = <span class="built_in">read</span>(), y1 = <span class="built_in">read</span>(), q = <span class="built_in">read</span>();</span><br><span class="line">        key[x1][y1][++cnt[x1][y1]] = q;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="built_in">bfs</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>æœ€çŸ­è·¯</tag>
        <tag>bfs</tag>
        <tag>çŠ¶æ€å‹ç¼©</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€æ±½è½¦åŠ æ²¹è¡Œé©¶é—®é¢˜-é¢˜è§£</title>
    <url>/p/fab3e888.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P4009">ã€ŒLuogu P4009ã€æ±½è½¦åŠ æ²¹è¡Œé©¶é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å‡ºä¸€ä¸ª$N\times N$çš„ç½‘æ ¼,è¡¨ç¤ºæœ‰åŠ æ²¹ç«™çš„ä½ç½®<br>æ±½è½¦è¦ä»$(1, 1)$èµ°åˆ°$(N, N)$,è£…æ»¡æ²¹å¯ä»¥è¡Œé©¶$K$æ¡è¾¹,ä¸”åªèƒ½æ²¿è¾¹è¡Œé©¶<br>æœä»ä»¥ä¸‹è§„åˆ™</p>
<ol>
<li>å¯ä»¥æ— è´¹ç”¨å‘å³æˆ–å‘ä¸‹èµ°,ä½†è€—1ç‚¹æ²¹</li>
<li>å‘å·¦èµ°æˆ–è€…å‘ä¸Šèµ°æ—¶éœ€è¦ä»˜è´¹ç”¨$B$,å¹¶è€—1ç‚¹æ²¹</li>
<li>åœ¨åŠ æ²¹ç«™å¤„,è‹¥æ²¹æ²¡æ»¡,åˆ™å¿…é¡»ä»˜è´¹ç”¨$A$,åŠ æ»¡æ²¹</li>
<li>å¯åœ¨æ²¡æœ‰åŠ æ²¹ç«™çš„ä½ç½®å¼€è®¾åŠ æ²¹ç«™,è´¹ç”¨$C$,å¹¶åŠ æ»¡æ²¹,ä»˜è´¹$A$</li>
<li>åœ¨èµ·ç‚¹å¤„,æ²¹é‡ä¸º$K$</li>
</ol>
<p>æ±‚å‡ºæœ€å°è´¹ç”¨</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>æ˜æ˜¾æ˜¯æœ€å°è´¹ç”¨æœ€å¤§æµ(å…¶å®åˆ†å±‚å›¾æœ€çŸ­è·¯ä¹Ÿå¯ä»¥è§£å†³,å› ä¸ºæ¯æ¡è¾¹çš„å®¹é‡éƒ½ä¸º1)<br>åˆ†å±‚å»ºå›¾,æ¯å±‚è¡¨ç¤ºæ²¹é‡,ç¬¬$0$å±‚è¡¨ç¤ºæ»¡æ²¹($K$),ç¬¬$1$å±‚è¡¨ç¤ºæ²¹é‡ä¸º$K-1$,ç¬¬$2$å±‚è¡¨ç¤ºæ²¹é‡ä¸º$K-2$,$â€¦$</p>
<ol>
<li>å¯¹äºæ¯å±‚æ¯ä¸ªèŠ‚ç‚¹,å¦‚æœä¸æ˜¯åŠ æ²¹ç«™,åˆ™ä» è¯¥ç‚¹ å‘ ä¸‹ä¸€å±‚çš„å³è¾¹å’Œä¸‹è¾¹çš„èŠ‚ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(è§„åˆ™1.)</li>
<li>å¯¹äºæ¯å±‚æ¯ä¸ªèŠ‚ç‚¹,å¦‚æœä¸æ˜¯åŠ æ²¹ç«™,åˆ™ä» è¯¥ç‚¹ å‘ ä¸‹ä¸€å±‚çš„å·¦è¾¹å’Œä¸Šè¾¹çš„èŠ‚ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$B$</strong> çš„è¾¹(è§„åˆ™2.)</li>
<li>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹,å¦‚æœæ˜¯åŠ æ²¹ç«™,åˆ™ä» ç¬¬$0$å±‚çš„è¯¥ç‚¹ æŒ‰ç…§ä¸Šä¸¤æ¡å»ºè¾¹</li>
<li>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹,å¦‚æœæ˜¯åŠ æ²¹ç«™,åˆ™ä» é™¤$0$å±‚å¤–çš„æ¯å±‚èŠ‚ç‚¹ å‘ ç¬¬$0$å±‚çš„è¯¥ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$A$</strong> çš„è¾¹(è§„åˆ™3.)</li>
<li>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹,å¦‚æœä¸æ˜¯åŠ æ²¹ç«™,åˆ™ä» ç¬¬$K$å±‚çš„è¯¥ç‚¹ å‘ ç¬¬$0$å±‚çš„è¯¥ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$A+C$</strong> çš„è¾¹(è§„åˆ™4.)</li>
<li>ä» æºç‚¹ å‘ ç¬¬$0$å±‚çš„$(1, 1)$èŠ‚ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹</li>
<li>ä» æ¯å±‚çš„$(N, N)$èŠ‚ç‚¹ å‘ æ±‡ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(åˆ°ç»ˆç‚¹ä¸è€ƒè™‘æ²¹é‡)</li>
</ol>
<p>æ±‚å‡ºæœ€å°è´¹ç”¨æœ€å¤§æµå³å¯</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">200010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, ansflow;</span><br><span class="line"><span class="keyword">int</span> vis[maxn], d[maxn], p[maxn], a[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> anscost;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> from, to, cap, flow, cost;</span><br><span class="line">	<span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f, <span class="keyword">int</span> w): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f), <span class="built_in">cost</span>(w)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>, w));</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>,-w));</span><br><span class="line">	<span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">	G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">	G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BellmanFord</span><span class="params">(<span class="keyword">int</span>&amp; flow, <span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(d, <span class="number">0x3f</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(d));</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	d[s] = <span class="number">0</span>; vis[s] = <span class="number">1</span>; p[s] = <span class="number">0</span>; a[s] = inf;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">	Q.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">		vis[x] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">			Edge&amp; e = edges[G[x][i]];</span><br><span class="line">			<span class="keyword">if</span> (e.cap &gt; e.flow &amp;&amp; d[e.to] &gt; d[x] + e.cost) &#123;</span><br><span class="line">				d[e.to] = d[x] + e.cost;</span><br><span class="line">				p[e.to] = G[x][i];</span><br><span class="line">				a[e.to] = <span class="built_in">min</span>(a[x], e.cap - e.flow);</span><br><span class="line">				<span class="keyword">if</span> (!vis[e.to]) &#123;</span><br><span class="line">					Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">					vis[e.to] = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (d[t] == inf) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	flow += a[t];</span><br><span class="line">	cost += (<span class="keyword">long</span> <span class="keyword">long</span>)d[t] * (<span class="keyword">long</span> <span class="keyword">long</span>)a[t];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> u = t; u != s; u = edges[p[u]].from) &#123;</span><br><span class="line">		edges[p[u]].flow += a[t];</span><br><span class="line">		edges[p[u] ^ <span class="number">1</span>].flow -= a[t];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MinCostMaxFlow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> flow = <span class="number">0</span>; cost = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">BellmanFord</span>(flow, cost));</span><br><span class="line">	<span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N, K, A, B, C;</span><br><span class="line"><span class="keyword">int</span> in[<span class="number">110</span>][<span class="number">110</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">point</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> dep)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (x - <span class="number">1</span>) * N + y + dep * N * N;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    N = <span class="built_in">read</span>(); K = <span class="built_in">read</span>(); A = <span class="built_in">read</span>(); B = <span class="built_in">read</span>(); C = <span class="built_in">read</span>();</span><br><span class="line">    s = <span class="number">0</span>; n = (K + <span class="number">1</span>) * N * N; t = n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; ++i) </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= N; ++j) &#123;</span><br><span class="line">            in[i][j] = <span class="built_in">read</span>();</span><br><span class="line">            <span class="keyword">if</span> (in[i][j]) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= K; ++k) &#123;</span><br><span class="line">                    <span class="built_in">add</span>(<span class="built_in">point</span>(i, j, k), <span class="built_in">point</span>(i, j, <span class="number">0</span>), <span class="number">1</span>, A);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; K; ++k) &#123;</span><br><span class="line">                <span class="keyword">if</span> (in[i][j] &amp;&amp; k) <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span> (i + <span class="number">1</span> &lt;= N) <span class="built_in">add</span>(<span class="built_in">point</span>(i, j, k), <span class="built_in">point</span>(i + <span class="number">1</span>, j, k + <span class="number">1</span>), <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">                <span class="keyword">if</span> (j + <span class="number">1</span> &lt;= N) <span class="built_in">add</span>(<span class="built_in">point</span>(i, j, k), <span class="built_in">point</span>(i, j + <span class="number">1</span>, k + <span class="number">1</span>), <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">                <span class="keyword">if</span> (i - <span class="number">1</span> &gt;= <span class="number">1</span>) <span class="built_in">add</span>(<span class="built_in">point</span>(i, j, k), <span class="built_in">point</span>(i - <span class="number">1</span>, j, k + <span class="number">1</span>), <span class="number">1</span>, B);</span><br><span class="line">                <span class="keyword">if</span> (j - <span class="number">1</span> &gt;= <span class="number">1</span>) <span class="built_in">add</span>(<span class="built_in">point</span>(i, j, k), <span class="built_in">point</span>(i, j - <span class="number">1</span>, k + <span class="number">1</span>), <span class="number">1</span>, B);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!in[i][j]) <span class="built_in">add</span>(<span class="built_in">point</span>(i, j, K), <span class="built_in">point</span>(i, j, <span class="number">0</span>), <span class="number">1</span>, A + C);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">add</span>(s, <span class="built_in">point</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>), <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= K; ++k) &#123;</span><br><span class="line">        <span class="built_in">add</span>(<span class="built_in">point</span>(N, N, k), t, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ansflow = <span class="built_in">MinCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, anscost);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
        <tag>è´¹ç”¨æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€æœ€é•¿kå¯é‡çº¿æ®µé›†é—®é¢˜-é¢˜è§£</title>
    <url>/p/f48af49a.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P3357">ã€ŒLuogu P3357ã€æœ€é•¿kå¯é‡çº¿æ®µé›†é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å®šä¸€ä¸ªå¼€çº¿æ®µçš„é›†åˆ$\mathbf{I}$,ä»$\mathbf{I}$ä¸­å–å‡ºä¸€äº›å¼€çº¿æ®µ,ç»„æˆé›†åˆ$\mathbf{S}$<br>ä½¿å¯¹äºä»»ä½•ä¸€æ¡ç›´çº¿$x=p$,æ»¡è¶³$\mathbf{S}$ä¸­ä¸$x=p$ç›¸äº¤çš„çº¿æ®µæ•°ä¸è¶…è¿‡$k$,ä¸”$\mathbf{S}$ä¸­å¼€çº¿æ®µæ€»é•¿åº¦æœ€å¤§</p>
<p>æ±‚æœ€å¤§çš„é•¿åº¦</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å’Œ<a href="https://www.luogu.com.cn/problem/P3358">ã€ŒLuogu P3358ã€æœ€é•¿kå¯é‡åŒºé—´é›†é—®é¢˜</a>ç±»ä¼¼<br>ä»…ä¿®æ”¹ä¸€ä¸‹åŒºé—´çš„è¾“å…¥éƒ¨åˆ†å³å¯</p>
<p>å°†æ¯æ¡çº¿æ®µæ˜ å°„åˆ°xè½´ä¸Š,å‘ç°å¯èƒ½ä¸å¯¹,å› ä¸ºå¯èƒ½ä¼šå­˜åœ¨å‚ç›´äºxè½´çš„çº¿æ®µ,åƒP3358ä¸€æ ·å»ºå›¾ä¼šçœç•¥æ‰è¿™æ¡çº¿æ®µ</p>
<p>æ‰€ä»¥è¦å°†æ¯ä¸ªç‚¹æ‰©å¤§ä¸€å€,å°†å·¦å³ç«¯ç‚¹xåæ ‡ç›¸åŒçš„åŒºé—´$(x, x)$æ›´æ”¹ä¸º$(2x, 2x+1)$,ä½¿å¾—ä¸å­˜åœ¨ä¸xè½´å‚ç›´çš„çº¿æ®µ<br>å¦‚æœå·¦å³ç«¯ç‚¹xåæ ‡ä¸ç›¸åŒ,åˆ™å°†$(x_1, x_2)$æ›´æ”¹ä¸º$(2x_1+1, 2x_2)$</p>
<p>å¤§æ¦‚å°±æ˜¯è¿™ä¹ˆä¸ªé“ç†:<br><img src="/p/f48af49a/NF24P3357.png"></p>
<p>å‰©ä¸‹çš„åšæ³•å’Œ<a href="https://www.luogu.com.cn/problem/P3358">P3358</a>ä¸€æ ·,<a href="https://tony031218.github.io/2020/04/21/%E3%80%8C%E7%BD%91%E7%BB%9C%E6%B5%8124%E9%A2%98%E3%80%8D%E6%9C%80%E9%95%BFk%E5%8F%AF%E9%87%8D%E5%8C%BA%E9%97%B4%E9%9B%86%E9%97%AE%E9%A2%98-%E9%A2%98%E8%A7%A3/">P3358é¢˜è§£</a></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ninf = <span class="number">0xc0c0c0c0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, ansflow;</span><br><span class="line"><span class="keyword">int</span> vis[maxn], d[maxn], p[maxn], a[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> anscost;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> from, to, cap, flow, cost;</span><br><span class="line">	<span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f, <span class="keyword">int</span> w): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f), <span class="built_in">cost</span>(w)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>, w));</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>,-w));</span><br><span class="line">	<span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">	G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">	G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BellmanFord</span><span class="params">(<span class="keyword">int</span>&amp; flow, <span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(d, <span class="number">0xc0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(d));</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	d[s] = <span class="number">0</span>; vis[s] = <span class="number">1</span>; p[s] = <span class="number">0</span>; a[s] = inf;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">	Q.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">		vis[x] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">			Edge&amp; e = edges[G[x][i]];</span><br><span class="line">			<span class="keyword">if</span> (e.cap &gt; e.flow &amp;&amp; d[e.to] &lt; d[x] + e.cost) &#123;</span><br><span class="line">				d[e.to] = d[x] + e.cost;</span><br><span class="line">				p[e.to] = G[x][i];</span><br><span class="line">				a[e.to] = <span class="built_in">min</span>(a[x], e.cap - e.flow);</span><br><span class="line">				<span class="keyword">if</span> (!vis[e.to]) &#123;</span><br><span class="line">					Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">					vis[e.to] = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (d[t] == ninf) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	flow += a[t];</span><br><span class="line">	cost += (<span class="keyword">long</span> <span class="keyword">long</span>)d[t] * (<span class="keyword">long</span> <span class="keyword">long</span>)a[t];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> u = t; u != s; u = edges[p[u]].from) &#123;</span><br><span class="line">		edges[p[u]].flow += a[t];</span><br><span class="line">		edges[p[u] ^ <span class="number">1</span>].flow -= a[t];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxCostMaxFlow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> flow = <span class="number">0</span>; cost = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">BellmanFord</span>(flow, cost));</span><br><span class="line">	<span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Interval</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r, len;</span><br><span class="line">&#125;inter[<span class="number">510</span>];</span><br><span class="line"><span class="keyword">int</span> nums[<span class="number">1020</span>], old[<span class="number">1020</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">length</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>)<span class="built_in">sqrt</span>((<span class="keyword">long</span> <span class="keyword">long</span>)(a - c) * (a - c) + (<span class="keyword">long</span> <span class="keyword">long</span>)(b - d) * (b - d));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n_ = <span class="built_in">read</span>(), k = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="built_in">read</span>(), b = <span class="built_in">read</span>(), c = <span class="built_in">read</span>(), d = <span class="built_in">read</span>();</span><br><span class="line">        inter[i].len = <span class="built_in">length</span>(a, b, c, d);</span><br><span class="line">        inter[i].l = a * <span class="number">2</span>;</span><br><span class="line">        inter[i].r = c * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (a == c) inter[i].r += <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> inter[i].l += <span class="number">1</span>;</span><br><span class="line">        nums[i * <span class="number">2</span> - <span class="number">1</span>] = inter[i].l;</span><br><span class="line">        nums[i * <span class="number">2</span>] = inter[i].r;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_ * <span class="number">2</span>; ++i) old[i] = nums[i];</span><br><span class="line">    <span class="built_in">sort</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + n_ * <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">unique</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + n_ * <span class="number">2</span>) - old - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_ * <span class="number">2</span>; ++i) nums[i] = <span class="built_in">lower_bound</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + len, nums[i]) - old;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_; ++i) &#123;</span><br><span class="line">        inter[i].l = nums[i * <span class="number">2</span> - <span class="number">1</span>];</span><br><span class="line">        inter[i].r = nums[i * <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    s = <span class="number">0</span>; n = len + <span class="number">2</span>; t = n - <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">add</span>(s, <span class="number">1</span>, k, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len; ++i) &#123;</span><br><span class="line">        <span class="built_in">add</span>(i, i + <span class="number">1</span>, inf, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_; ++i) &#123;</span><br><span class="line">        <span class="built_in">add</span>(inter[i].l, inter[i].r, <span class="number">1</span>, inter[i].len);</span><br><span class="line">    &#125;</span><br><span class="line">    ansflow = <span class="built_in">MaxCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, anscost);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
        <tag>è´¹ç”¨æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€æœ€é•¿kå¯é‡åŒºé—´é›†é—®é¢˜-é¢˜è§£</title>
    <url>/p/949e7ebf.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P3358">ã€ŒLuogu P3358ã€æœ€é•¿kå¯é‡åŒºé—´é›†é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å®šä¸€ä¸ªå¼€åŒºé—´çš„é›†åˆ$\mathbf{I}$,ä»$\mathbf{I}$ä¸­å–å‡ºä¸€äº›å¼€åŒºé—´,ç»„æˆé›†åˆ$\mathbf{S}$<br>ä½¿å¯¹äºä»»ä½•ä¸€ä¸ª$x$,æ»¡è¶³$\mathbf{S}$ä¸­åŒ…å«$x$çš„åŒºé—´æ•°ä¸è¶…è¿‡$k$,ä¸”$\mathbf{S}$ä¸­å¼€åŒºé—´æ€»é•¿åº¦æœ€å¤§</p>
<p>æ±‚æœ€å¤§çš„é•¿åº¦</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å¦‚æœä¸¤ä¸ªåŒºé—´æ²¡æœ‰é‡å çš„è¯,åˆ™å¯ä»¥åŒæ—¶é€‰æ‹©,åœ¨å›¾ä¸Šè¡¨ç°ä¸ºä¸²è”<br>å¦‚æœä¸¤ä¸ªåŒºé—´æœ‰é‡å çš„è¯,åˆ™ä¸èƒ½åŒæ—¶é€‰æ‹©,åœ¨å›¾ä¸Šè¡¨ç°ä¸ºå¹¶è”(æœä»æ€»æµé‡çš„çº¦æŸ)<br>å…ˆå¯¹æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œç¦»æ•£åŒ–,æ³¨æ„ç¦»æ•£åŒ–å‰ç»Ÿè®¡å‡ºåŒºé—´çš„é•¿</p>
<ol>
<li>ä» æºç‚¹ å‘ èŠ‚ç‚¹1 æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$k$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(æœ€å¤§å®¹é‡ä¸ºk,å¯¹ç­”æ¡ˆæ— è´¡çŒ®)</li>
<li>ä» æ¯ä¸ªèŠ‚ç‚¹$i$ å‘ èŠ‚ç‚¹$i+1$ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$inf$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(å¯ä»¥éšæ„é€šè¿‡,å¯¹ç­”æ¡ˆæ— è´¡çŒ®)</li>
<li>ä» æœ€åä¸€ä¸ªèŠ‚ç‚¹ å‘ æ±‡ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$inf$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹(æ€»æµé‡æœ‰1.æ§åˆ¶,å¯¹ç­”æ¡ˆæ— è´¡çŒ®)(å¯ä»¥åŒ…å«åœ¨2.é‡Œ)</li>
<li>ä» æ¯ä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹ å‘ å…¶å³ç«¯ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$,è´¹ç”¨ä¸ºåŒºé—´é•¿</strong> çš„è¾¹(åªå¯ç”¨ä¸€æ¬¡,å¯¹ç­”æ¡ˆè´¡çŒ®ä¸ºåŒºé—´é•¿åº¦)</li>
</ol>
<p>æ±‚å‡ºæœ€å¤§è´¹ç”¨æœ€å¤§æµ,æœ€å¤§è´¹ç”¨å³ä¸ºæœ€ç»ˆçš„ç»“æœ<br>æ ·ä¾‹çš„å›¾å¦‚ä¸‹:<br><img src="/p/949e7ebf/NF24P3358.png"></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ninf = <span class="number">0xc0c0c0c0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, ansflow;</span><br><span class="line"><span class="keyword">int</span> vis[maxn], d[maxn], p[maxn], a[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> anscost;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> from, to, cap, flow, cost;</span><br><span class="line">	<span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f, <span class="keyword">int</span> w): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f), <span class="built_in">cost</span>(w)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>, w));</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>,-w));</span><br><span class="line">	<span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">	G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">	G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BellmanFord</span><span class="params">(<span class="keyword">int</span>&amp; flow, <span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(d, <span class="number">0xc0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(d));</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	d[s] = <span class="number">0</span>; vis[s] = <span class="number">1</span>; p[s] = <span class="number">0</span>; a[s] = inf;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">	Q.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">		vis[x] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">			Edge&amp; e = edges[G[x][i]];</span><br><span class="line">			<span class="keyword">if</span> (e.cap &gt; e.flow &amp;&amp; d[e.to] &lt; d[x] + e.cost) &#123;</span><br><span class="line">				d[e.to] = d[x] + e.cost;</span><br><span class="line">				p[e.to] = G[x][i];</span><br><span class="line">				a[e.to] = <span class="built_in">min</span>(a[x], e.cap - e.flow);</span><br><span class="line">				<span class="keyword">if</span> (!vis[e.to]) &#123;</span><br><span class="line">					Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">					vis[e.to] = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (d[t] == ninf) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	flow += a[t];</span><br><span class="line">	cost += (<span class="keyword">long</span> <span class="keyword">long</span>)d[t] * (<span class="keyword">long</span> <span class="keyword">long</span>)a[t];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> u = t; u != s; u = edges[p[u]].from) &#123;</span><br><span class="line">		edges[p[u]].flow += a[t];</span><br><span class="line">		edges[p[u] ^ <span class="number">1</span>].flow -= a[t];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxCostMaxFlow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> flow = <span class="number">0</span>; cost = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">BellmanFord</span>(flow, cost));</span><br><span class="line">	<span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Interval</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r, len;</span><br><span class="line">&#125;inter[<span class="number">510</span>];</span><br><span class="line"><span class="keyword">int</span> nums[<span class="number">1020</span>], old[<span class="number">1020</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n_ = <span class="built_in">read</span>(), k = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_; ++i) &#123;</span><br><span class="line">        inter[i].l = <span class="built_in">read</span>(); inter[i].r = <span class="built_in">read</span>();</span><br><span class="line">        inter[i].len = inter[i].r - inter[i].l;</span><br><span class="line">        nums[i * <span class="number">2</span> - <span class="number">1</span>] = inter[i].l;</span><br><span class="line">        nums[i * <span class="number">2</span>] = inter[i].r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_ * <span class="number">2</span>; ++i) old[i] = nums[i];</span><br><span class="line">    <span class="built_in">sort</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + n_ * <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">unique</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + n_ * <span class="number">2</span>) - old - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_ * <span class="number">2</span>; ++i) nums[i] = <span class="built_in">lower_bound</span>(old + <span class="number">1</span>, old + <span class="number">1</span> + len, nums[i]) - old;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_; ++i) &#123;</span><br><span class="line">        inter[i].l = nums[i * <span class="number">2</span> - <span class="number">1</span>];</span><br><span class="line">        inter[i].r = nums[i * <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    s = <span class="number">0</span>; n = len + <span class="number">2</span>; t = n - <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">add</span>(s, <span class="number">1</span>, k, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len; ++i) &#123;</span><br><span class="line">        <span class="built_in">add</span>(i, i + <span class="number">1</span>, inf, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_; ++i) &#123;</span><br><span class="line">        <span class="built_in">add</span>(inter[i].l, inter[i].r, <span class="number">1</span>, inter[i].len);</span><br><span class="line">    &#125;</span><br><span class="line">    ansflow = <span class="built_in">MaxCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, anscost);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
        <tag>è´¹ç”¨æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€ç«æ˜Ÿæ¢é™©é—®é¢˜-é¢˜è§£</title>
    <url>/p/e7256d1.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P3356">ã€ŒLuogu P3356ã€ç«æ˜Ÿæ¢é™©é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>æœ‰$n$è¾†è½¦,$p\times q$çš„ç½‘æ ¼<br>ä¸º0å¯ä»¥é€šè¿‡,1æœ‰éšœç¢ä¸èƒ½é€šè¿‡,2ä¸ºå²©çŸ³å¯ä»¥é‡‡é›†<br>ä»(1, 1)å¼€å§‹åˆ°æœ€å³ä¸‹è§’,åªèƒ½å‘å³æˆ–å‘ä¸‹</p>
<p>æ±‚å‡ºä½¿åˆ°è¾¾ç»ˆç‚¹çš„è½¦æœ€å¤š,è€Œä¸”é‡‡é›†çš„å²©çŸ³æœ€å¤šçš„ç§»åŠ¨æ–¹æ¡ˆ</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å°†æ¯ä¸ªä½ç½®æ‹†æˆå…¥ç‚¹å’Œå‡ºç‚¹</p>
<ol>
<li>å¦‚æœè¿™ä¸ªä½ç½®æ˜¯$0$æˆ–$2$, åˆ™ä» å…¥ç‚¹ å‘ å‡ºç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$inf$, è´¹ç”¨ä¸º$0$</strong> çš„è¾¹</li>
<li>å¦‚æœè¿™ä¸ªä½ç½®æ˜¯$2$, åˆ™ä» å…¥ç‚¹ å‘ å‡ºç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$1$, è´¹ç”¨ä¸º$1$</strong> çš„è¾¹</li>
<li>å¦‚æœè¿™ä¸ªä½ç½®$u$çš„å³è¾¹$v$æ˜¯ä¸æ˜¯$1$, åˆ™ä» $u$çš„å‡ºç‚¹ å‘ $v$çš„å…¥ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$inf$, è´¹ç”¨ä¸º$0$</strong> çš„è¾¹</li>
<li>å¦‚æœè¿™ä¸ªä½ç½®$u$çš„ä¸‹è¾¹$v$æ˜¯ä¸æ˜¯$1$, åˆ™ä» $u$çš„å‡ºç‚¹ å‘ $v$çš„å…¥ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$inf$, è´¹ç”¨ä¸º$0$</strong> çš„è¾¹</li>
</ol>
<p>è·‘æœ€å¤§è´¹ç”¨æœ€å¤§æµ,æœ€å¤§æµæ•°å³åˆ°è¾¾ç»ˆç‚¹æœ€å¤šçš„è½¦æ•°<br>è¾“å‡ºæ–¹æ¡ˆä½¿ç”¨dfs,åœ¨æµé‡ç½‘ç»œä¸­æœç´¢è¾“å‡ºè·¯å¾„</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">4010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ninf = <span class="number">0xc0c0c0c0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, ansflow;</span><br><span class="line"><span class="keyword">int</span> vis[maxn], d[maxn], pre[maxn], a[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> anscost;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> from, to, cap, flow, cost;</span><br><span class="line">	<span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f, <span class="keyword">int</span> w): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f), <span class="built_in">cost</span>(w)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>, w));</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>,-w));</span><br><span class="line">	<span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">	G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">	G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BellmanFord</span><span class="params">(<span class="keyword">int</span>&amp; flow, <span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(d, <span class="number">0xc0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(d));</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	d[s] = <span class="number">0</span>; vis[s] = <span class="number">1</span>; pre[s] = <span class="number">0</span>; a[s] = inf;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">	Q.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">		vis[x] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">			Edge&amp; e = edges[G[x][i]];</span><br><span class="line">			<span class="keyword">if</span> (e.cap &gt; e.flow &amp;&amp; d[e.to] &lt; d[x] + e.cost) &#123;</span><br><span class="line">				d[e.to] = d[x] + e.cost;</span><br><span class="line">				pre[e.to] = G[x][i];</span><br><span class="line">				a[e.to] = <span class="built_in">min</span>(a[x], e.cap - e.flow);</span><br><span class="line">				<span class="keyword">if</span> (!vis[e.to]) &#123;</span><br><span class="line">					Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">					vis[e.to] = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (d[t] == ninf) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	flow += a[t];</span><br><span class="line">	cost += (<span class="keyword">long</span> <span class="keyword">long</span>)d[t] * (<span class="keyword">long</span> <span class="keyword">long</span>)a[t];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> u = t; u != s; u = edges[pre[u]].from) &#123;</span><br><span class="line">		edges[pre[u]].flow += a[t];</span><br><span class="line">		edges[pre[u] ^ <span class="number">1</span>].flow -= a[t];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxCostMaxFlow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> flow = <span class="number">0</span>; cost = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">BellmanFord</span>(flow, cost));</span><br><span class="line">	<span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> p, q;</span><br><span class="line"><span class="keyword">int</span> in[<span class="number">40</span>][<span class="number">40</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">point</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (x - <span class="number">1</span>) * p + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> u, <span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[u][i]];</span><br><span class="line">        Edge&amp; ne = edges[G[u][i] ^ <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (e.to == s || e.to == t || e.to == u - n) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span> (!e.flow) <span class="keyword">continue</span>;</span><br><span class="line">        e.flow--;</span><br><span class="line">        <span class="keyword">if</span> (e.to &gt; n) &#123;</span><br><span class="line">            <span class="built_in">dfs</span>(x, y, e.to, id);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> nx, ny, dir;</span><br><span class="line">        <span class="keyword">if</span> (e.to == <span class="built_in">point</span>(x, y) + <span class="number">1</span>) &#123;</span><br><span class="line">            nx = x; ny = y + <span class="number">1</span>;</span><br><span class="line">            dir = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nx = x + <span class="number">1</span>; ny = y;</span><br><span class="line">            dir = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, id, dir);</span><br><span class="line">        <span class="built_in">dfs</span>(nx, ny, e.to + n, id);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> c = <span class="built_in">read</span>(); p = <span class="built_in">read</span>(); q = <span class="built_in">read</span>();</span><br><span class="line">    n = p * q; s = <span class="number">0</span>; t = <span class="number">2</span> * n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= p; ++j) &#123;</span><br><span class="line">            in[i][j] = <span class="built_in">read</span>();</span><br><span class="line">            <span class="keyword">if</span> (in[i][j] == <span class="number">0</span>) <span class="built_in">add</span>(<span class="built_in">point</span>(i, j), <span class="built_in">point</span>(i, j) + n, inf, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (in[i][j] == <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="built_in">add</span>(<span class="built_in">point</span>(i, j), <span class="built_in">point</span>(i, j) + n, inf, <span class="number">0</span>);</span><br><span class="line">                <span class="built_in">add</span>(<span class="built_in">point</span>(i, j), <span class="built_in">point</span>(i, j) + n, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (in[<span class="number">1</span>][<span class="number">1</span>] != <span class="number">1</span>) <span class="built_in">add</span>(s, <span class="number">1</span>, c, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= p; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (in[i][j] == <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (in[i][j + <span class="number">1</span>] != <span class="number">1</span> &amp;&amp; j + <span class="number">1</span> &lt;= p) <span class="built_in">add</span>(<span class="built_in">point</span>(i, j) + n, <span class="built_in">point</span>(i, j + <span class="number">1</span>), inf, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (in[i + <span class="number">1</span>][j] != <span class="number">1</span> &amp;&amp; i + <span class="number">1</span> &lt;= q) <span class="built_in">add</span>(<span class="built_in">point</span>(i, j) + n, <span class="built_in">point</span>(i + <span class="number">1</span>, j), inf, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (in[q][p] != <span class="number">1</span>) <span class="built_in">add</span>(<span class="built_in">point</span>(q, p) + n, t, c, <span class="number">0</span>);</span><br><span class="line">    ansflow = <span class="built_in">MaxCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="comment">// printf(&quot;%d %d\n&quot;, ansflow, anscost);</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= ansflow; ++i) &#123;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
        <tag>è´¹ç”¨æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>manimæ•™ç¨‹ç³»åˆ—-é¢œè‰² ç¬”è®°</title>
    <url>/p/2e2c9a7.html</url>
    <content><![CDATA[<p>è¿™ç¯‡æ–‡ç« æ˜¯åœ¨å†™ <strong>manimæ•™ç¨‹ç³»åˆ—è§†é¢‘</strong> çš„ <em>é¢œè‰²</em> éƒ¨åˆ†æ—¶åšçš„ä¸€äº›ç¬”è®°,åŒ…æ‹¬ æ•´ä¸ªè§†é¢‘çš„ç»“æ„ å’Œ å†™ä»£ç æ—¶äº†è§£çš„ä¸€äº›ç”¨æ³•çš„ç¬”è®°<br>è§†é¢‘å·²ç»å‘å¸ƒ,åœ°å€:<a href="https://www.bilibili.com/video/BV1vZ4y1x7hT">BV1vZ4y1x7hT</a></p>
<span id="more"></span>

<h2 id="è§†é¢‘ç»“æ„å¤§çº²"><a href="#è§†é¢‘ç»“æ„å¤§çº²" class="headerlink" title="è§†é¢‘ç»“æ„å¤§çº²"></a>è§†é¢‘ç»“æ„å¤§çº²</h2><ol start="0">
<li><input checked disabled type="checkbox"> å¼€å¤´<ul>
<li>å¼€å§‹,æ ‡é¢˜,å±•ç¤ºæ‰€æœ‰è¦å°†çš„æ–¹æ³•</li>
</ul>
</li>
<li><input checked disabled type="checkbox"> é¢œè‰²çš„è¡¨ç¤º<ul>
<li>æ‰€æœ‰<code>constants.py</code>ä¸­çš„é¢œè‰²å¸¸é‡</li>
<li>ä½¿ç”¨hexè¡¨ç¤ºé¢œè‰²</li>
<li>ä½¿ç”¨rgbçš„ndarrayè¡¨ç¤ºé¢œè‰²</li>
</ul>
</li>
<li><input checked disabled type="checkbox"> é¢œè‰²ä¹‹é—´çš„è½¬æ¢<ul>
<li><code>rgb_to_hex</code></li>
<li><code>hex_to_rgb</code></li>
<li><code>color_to_rgb</code></li>
<li><code>rgb_to_color</code></li>
<li><code>color_to_int_rgb</code></li>
</ul>
</li>
<li><input checked disabled type="checkbox"> é¢œè‰²çš„è¿ç®—å‡½æ•°<ul>
<li><code>invert_color</code></li>
<li><code>color_gradient</code></li>
<li><code>interpolate_color</code></li>
<li><code>average_color</code></li>
<li><code>random_color</code></li>
</ul>
</li>
<li><input checked disabled type="checkbox"> è®¾ç½®é¢œè‰²<ul>
<li><code>Mobject</code>ç•¥,ä¸€èˆ¬ä¸Šè‰²çš„éƒ½ä¸º<code>VMobject</code></li>
<li><code>color</code>åˆ†ä¸º<code>stroke_color</code>å’Œ<code>fill_color</code></li>
<li>ä¼ å…¥<code>color</code>, <code>stroke_color</code>, <code>fill_color</code></li>
<li><code>set_color</code>, <code>set_stroke</code>, <code>set_fill</code>æ–¹æ³•çš„<code>color</code>å’Œ<code>opacity</code></li>
</ul>
</li>
<li><input checked disabled type="checkbox"> ç»™å­ç‰©ä½“ä¸Šè‰²<ul>
<li><code>set_color</code></li>
<li><code>set_color_by_gradient</code></li>
<li><code>set_colors_by_radial_gradient</code></li>
</ul>
</li>
<li><input checked disabled type="checkbox"> å…‰æ³½ä¸æ¸å˜è‰²<ul>
<li><code>set_sheen</code></li>
<li><code>set_color</code>ä¸­ä½¿ç”¨åˆ—è¡¨è¾¾åˆ°æ¸å˜è‰²</li>
</ul>
</li>
</ol>
<h2 id="ä¸€äº›ç è§†é¢‘æ—¶çš„ç¬”è®°"><a href="#ä¸€äº›ç è§†é¢‘æ—¶çš„ç¬”è®°" class="headerlink" title="ä¸€äº›ç è§†é¢‘æ—¶çš„ç¬”è®°"></a>ä¸€äº›ç è§†é¢‘æ—¶çš„ç¬”è®°</h2><ul>
<li><code>isinstance</code>å‡½æ•°æ£€æµ‹å¯¹è±¡çš„ç±»å‹</li>
<li>å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œformatæ—¶,æƒ³è¦ç”¨ç©ºæ ¼è¡¥é½å·¦è¾¹åˆ°ä¸€å®šä¸ªæ•°,å¯ä»¥ä½¿ç”¨<code>str(...).rjust(num)</code></li>
<li>æ¶‰åŠåˆ°<code>Transform</code>Textçš„åœ°æ–¹,åœ¨Texté‡Œé¢ä¸å¯ä»¥æœ‰ç©ºæ ¼,éœ€è¦ç”¨ç™½è‰²çš„<code>~</code>æ¥åšå‡ºä¼ªç©ºæ ¼</li>
<li>å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦çš„ä¸‹æ ‡å¯ä»¥ç”¨<code>.index(&quot; &quot;, beg=..., end=...)</code>æ–¹æ³•æ¥æŸ¥æ‰¾ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®,ç¬¬äºŒæ¬¡å‡ºç°éœ€è¦ä¼ å…¥<code>beg</code>ä¸ºç¬¬ä¸€æ¬¡ä½ç½®+1</li>
<li>manimçš„<code>rgb_to_color</code>å‡½æ•°ä¼ å…¥çš„rgbçš„å€¼ä¸º0<del>1,ä¸æ˜¯0</del>255</li>
<li>ç”¨forå¾ªç¯éå†å­—å…¸é”®å€¼å¯¹<code>for key, value in dic.items():</code>,éå†å…¶ä¸­ä¸€éƒ¨åˆ†<code>for key, value in list(dic.items())[1:3]</code>å°†é”®å€¼å¯¹è½¬åŒ–ä¸ºåˆ—è¡¨,å¹¶ç”¨åˆ‡ç‰‡</li>
<li><code>Arrow</code>çš„ç®­å¤´ä¸º<code>.tip</code></li>
<li><code>.keys(),.values()</code>ä¸ä¸ºåˆ—è¡¨,éœ€è¦å¥—åœ¨<code>list()</code>é‡Œé¢</li>
<li><code>set_colors_by_radial_gradient</code>åˆ©ç”¨ä¸­å¿ƒä¸centerçš„è·ç¦»å¯¹é¢œè‰²è¿›è¡Œæ’å€¼,radiuså¤–çš„æ‰€æœ‰å­ç‰©ä½“å…¨ä¸ºouter_coloré¢œè‰²</li>
<li>å«æœ‰<code>sheen_factor</code>çš„ç‰©ä½“è®¾ç½®æ¸å˜è‰²åä¸sheen_factoræ— å…³</li>
</ul>
]]></content>
      <categories>
        <category>manim</category>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
        <tag>manim</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€éª‘å£«å…±å­˜é—®é¢˜-é¢˜è§£</title>
    <url>/p/11da5c27.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P3355">ã€ŒLuogu P3355ã€éª‘å£«å…±å­˜é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å‡º$n\times n$çš„æ£‹ç›˜,$m$ä¸ªéšœç¢(éª‘å£«ä¸èƒ½æ”¾ç½®)<br>æ±‚æœ€å¤šå¯ä»¥æ”¾å¤šå°‘ä¸ªéª‘å£«,ä¸èƒ½äº’ç›¸æ”»å‡»</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å…ˆå¯¹æ£‹ç›˜è¿›è¡Œé»‘ç™½äºŒæŸ“è‰²,$x+y$ä¸ºå¥‡æ•°å’Œå¶æ•°ä¸ºé»‘å’Œç™½,æ±‚äºŒåˆ†å›¾æœ€å¤§ç‹¬ç«‹é›†</p>
<ol>
<li>ä» æºç‚¹ å‘ é»‘è‰²èŠ‚ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º1</strong> çš„è¾¹</li>
<li>ä» ç™½è‰²èŠ‚ç‚¹ å‘ æ±‡ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º1</strong> çš„è¾¹</li>
<li>ä» æ¯ä¸ªé»‘è‰²èŠ‚ç‚¹ å‘ å…¶èƒ½æ”»å‡»åˆ°çš„ç™½è‰²èŠ‚ç‚¹æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$inf$</strong> çš„è¾¹</li>
</ol>
<p>æ±‚å‡ºæœ€å°å‰²å³æœ€å¤§æµ,ç»“æœä¸º$\mathtt{n\times n - m - maxflow}$</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">40010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> go[<span class="number">8</span>][<span class="number">2</span>] = &#123;</span><br><span class="line">    &#123;<span class="number">-1</span>, <span class="number">2</span>&#125;, &#123;<span class="number">1</span>, <span class="number">2</span>&#125;, &#123;<span class="number">-1</span>, <span class="number">-2</span>&#125;, &#123;<span class="number">1</span>, <span class="number">-2</span>&#125;,</span><br><span class="line">    &#123;<span class="number">2</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">1</span>&#125;, &#123;<span class="number">-2</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">-2</span>, <span class="number">1</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, d[maxn], cur[maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;from, to, cap, <span class="number">0</span>&#125;);</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;to, from, <span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[from].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[to].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BFS</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(s);</span><br><span class="line">    d[s] = <span class="number">0</span>;</span><br><span class="line">    vis[s] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (!vis[e.to] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                vis[e.to] = <span class="number">1</span>;</span><br><span class="line">                d[e.to] = d[x] + <span class="number">1</span>;</span><br><span class="line">                Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vis[t];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == t || a == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>, f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>&amp; i = cur[x]; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (d[x] + <span class="number">1</span> == d[e.to] &amp;&amp; (f = <span class="built_in">DFS</span>(e.to, <span class="built_in">min</span>(a, e.cap - e.flow))) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            e.flow += f;</span><br><span class="line">            edges[G[x][i] ^ <span class="number">1</span>].flow -= f;</span><br><span class="line">            flow += f;</span><br><span class="line">            a -= f;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">BFS</span>()) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cur, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cur));</span><br><span class="line">        flow += <span class="built_in">DFS</span>(s, inf);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">point</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (x - <span class="number">1</span>) * n + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> valid[<span class="number">210</span>][<span class="number">210</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>();</span><br><span class="line">    s = <span class="number">0</span>; t = n * n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = <span class="built_in">read</span>(), y = <span class="built_in">read</span>();</span><br><span class="line">        valid[x][y] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((i + j) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!valid[i][j]) &#123;</span><br><span class="line">                    <span class="built_in">add</span>(s, <span class="built_in">point</span>(i, j), <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!valid[i][j]) &#123;</span><br><span class="line">                    <span class="built_in">add</span>(<span class="built_in">point</span>(i, j), t, <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!((i + j) &amp; <span class="number">1</span>)) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">8</span>; ++k) &#123;</span><br><span class="line">                <span class="keyword">int</span> nx = i + go[k][<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">int</span> ny = j + go[k][<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">if</span> (<span class="number">1</span> &lt;= nx &amp;&amp; nx &lt;= n &amp;&amp; <span class="number">1</span> &lt;= ny &amp;&amp; ny &lt;= n &amp;&amp; !valid[nx][ny]) &#123;</span><br><span class="line">                    <span class="built_in">add</span>(<span class="built_in">point</span>(i, j), <span class="built_in">point</span>(nx, ny), inf);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> maxflow = <span class="built_in">dinic</span>(s, t);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, n * n - m - maxflow);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€åœ†æ¡Œé—®é¢˜-é¢˜è§£</title>
    <url>/p/25e68a12.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P3254">ã€ŒLuogu P3254ã€åœ†æ¡Œé—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>æœ‰$m$ä¸ªå•ä½,$n$ä¸ªé¤æ¡Œ<br>ç¬¬$i$ä¸ªå•ä½çš„ä»£è¡¨äººæ•°$r_i$, ç¬¬$i$å¼ é¤æ¡Œèƒ½å®¹çº³çš„äººæ•°$c_i$<br>åŒä¸€ä¸ªå•ä½çš„ä»£è¡¨ä¸èƒ½åœ¨åŒä¸€ä¸ªé¤æ¡Œ</p>
<p>è‹¥æœ‰ä¸€ç§æ–¹æ¡ˆ,è¾“å‡º$1$,å¹¶è¾“å‡ºæ–¹æ¡ˆ<br>è‹¥æ²¡æœ‰æ–¹æ¡ˆ,è¾“å‡º$0$</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>äºŒåˆ†å›¾,å·¦ç‚¹é›†ä¸ºå•ä½,å³ç‚¹é›†ä¸ºé¤æ¡Œ,æ±‚å…¶ <strong>æœ€å¤§åŒ¹é…</strong></p>
<ol>
<li>å¯¹äºæ¯ä¸ªå•ä½,ä» è¿™ä¸ªç‚¹ å‘ æ‰€æœ‰é¤æ¡Œ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º1</strong> çš„è¾¹(å³æ¯ä¸ªé¤æ¡Œåªèƒ½å®¹çº³åŒä¸€ä¸ªå•ä½çš„ä¸€ä¸ªäºº)</li>
<li>ä» æºç‚¹ å‘ æ¯ä¸ªå•ä½ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸ºå•ä½äººæ•°</strong> çš„è¾¹(å³æ¯ä¸ªå•ä½æ‰€æœ‰äººéƒ½è¦å‚åŠ )</li>
<li>ä» æ¯ä¸ªé¤æ¡Œ å‘ æ±‡ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸ºé¤æ¡Œäººæ•°</strong> çš„è¾¹</li>
</ol>
<p>å¦‚æœæœ€å¤§æµå’Œæ‰€æœ‰å•ä½æ€»äººæ•°ç›¸ç­‰,åˆ™æœ‰å¯è¡Œæ–¹æ¡ˆ<br>å¯¹äºæ¯ä¸ªå•ä½,è¾“å‡ºå‡ºè¾¹æ»¡è¶³$\mathtt{e.cap == e.flow}$çš„$\mathtt{e.to-m}$</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">450</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, d[maxn], cur[maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;from, to, cap, <span class="number">0</span>&#125;);</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;to, from, <span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[from].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[to].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BFS</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(s);</span><br><span class="line">    d[s] = <span class="number">0</span>;</span><br><span class="line">    vis[s] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (!vis[e.to] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                vis[e.to] = <span class="number">1</span>;</span><br><span class="line">                d[e.to] = d[x] + <span class="number">1</span>;</span><br><span class="line">                Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vis[t];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == t || a == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>, f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>&amp; i = cur[x]; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (d[x] + <span class="number">1</span> == d[e.to] &amp;&amp; (f = <span class="built_in">DFS</span>(e.to, <span class="built_in">min</span>(a, e.cap - e.flow))) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            e.flow += f;</span><br><span class="line">            edges[G[x][i] ^ <span class="number">1</span>].flow -= f;</span><br><span class="line">            flow += f;</span><br><span class="line">            a -= f;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">BFS</span>()) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cur, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cur));</span><br><span class="line">        flow += <span class="built_in">DFS</span>(s, inf);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tot;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    m = <span class="built_in">read</span>(); n = <span class="built_in">read</span>();</span><br><span class="line">    s = <span class="number">0</span>; t = m + n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="built_in">add</span>(i, j + m, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> r = <span class="built_in">read</span>(); tot += r;</span><br><span class="line">        <span class="built_in">add</span>(s, i, r);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> c = <span class="built_in">read</span>();</span><br><span class="line">        <span class="built_in">add</span>(i + m, t, c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> maxflow = <span class="built_in">dinic</span>(s, t);</span><br><span class="line">    <span class="keyword">if</span> (maxflow == tot) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;1\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> u = <span class="number">1</span>; u &lt;= m; ++u) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">                Edge&amp; e = edges[G[u][i]];</span><br><span class="line">                <span class="keyword">if</span> (e.to != s &amp;&amp; e.cap == e.flow) &#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, e.to - m);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€æ–¹æ ¼å–æ•°é—®é¢˜-é¢˜è§£</title>
    <url>/p/40e04941.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P2774">ã€ŒLuogu P2774ã€æ–¹æ ¼å–æ•°é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>$m$è¡Œ$n$åˆ—çš„æ–¹æ ¼å›¾,æ¯ä¸ªæ–¹æ ¼ä¸­æœ‰ä¸€ä¸ªæ­£æ•´æ•°<br>ä»æ–¹æ ¼ä¸­å–æ•°,ä»»æ„ä¸¤ä¸ªæ•°æ‰€åœ¨æ–¹æ ¼æ²¡æœ‰å…¬å…±è¾¹<br>æ±‚å–å‡ºçš„æ•°çš„æœ€å¤§æ€»å’Œ</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å…ˆé€‰æ‹©æ‰€æœ‰æ–¹æ ¼,ç„¶åè€ƒè™‘åˆ å»ä¸€äº›æ–¹æ ¼<br>ç›¸é‚»$-&gt;$å¥‡å¶æ€§ä¸åŒ,æ„æˆä¸€ä¸ªäºŒåˆ†å›¾,å«æœ‰ä¸¤ä¸ªç‚¹é›†</p>
<ol>
<li>ä» æºç‚¹ å‘ ç‚¹é›†$A$ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸ºç‚¹æƒ</strong> çš„è¾¹</li>
<li>ä» ç‚¹é›†$B$ å‘ æ±‡ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸ºç‚¹æƒ</strong> çš„è¾¹</li>
<li>ä» ç‚¹é›†$A$ä¸­æ¯ä¸ªç‚¹ å‘ ä¸å…¶ç›¸é‚»çš„åœ¨ç‚¹é›†$B$ä¸­çš„ç‚¹ æ¥ä¸€æ¡ <strong>å®¹é‡ä¸º$inf$</strong> çš„è¾¹(ä¿è¯ä¸è¢«å‰²)</li>
</ol>
<p>æ±‚å‡ºæœ€å°å‰²å³æœ€å¤§æµå³å¯</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> go[<span class="number">4</span>][<span class="number">2</span>] = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, d[maxn], cur[maxn], tot;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;from, to, cap, <span class="number">0</span>&#125;);</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;to, from, <span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[from].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[to].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BFS</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(s);</span><br><span class="line">    d[s] = <span class="number">0</span>;</span><br><span class="line">    vis[s] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (!vis[e.to] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                vis[e.to] = <span class="number">1</span>;</span><br><span class="line">                d[e.to] = d[x] + <span class="number">1</span>;</span><br><span class="line">                Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vis[t];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == t || a == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>, f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>&amp; i = cur[x]; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (d[x] + <span class="number">1</span> == d[e.to] &amp;&amp; (f = <span class="built_in">DFS</span>(e.to, <span class="built_in">min</span>(a, e.cap - e.flow))) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            e.flow += f;</span><br><span class="line">            edges[G[x][i] ^ <span class="number">1</span>].flow -= f;</span><br><span class="line">            flow += f;</span><br><span class="line">            a -= f;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">BFS</span>()) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cur, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cur));</span><br><span class="line">        flow += <span class="built_in">DFS</span>(s, inf);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">point</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (x - <span class="number">1</span>) * n + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    m = <span class="built_in">read</span>(); n = <span class="built_in">read</span>();</span><br><span class="line">    s = <span class="number">0</span>; t = n * m + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> a = <span class="built_in">read</span>(); tot += a;</span><br><span class="line">            <span class="keyword">if</span> ((i + j) % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">add</span>(s, <span class="built_in">point</span>(i, j), a);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; ++k) &#123;</span><br><span class="line">                    <span class="keyword">int</span> nx = i + go[k][<span class="number">0</span>];</span><br><span class="line">                    <span class="keyword">int</span> ny = j + go[k][<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">if</span> (<span class="number">1</span> &lt;= nx &amp;&amp; nx &lt;= m &amp;&amp; <span class="number">1</span> &lt;= ny &amp;&amp; ny &lt;= n) &#123;</span><br><span class="line">                        <span class="built_in">add</span>(<span class="built_in">point</span>(i, j), <span class="built_in">point</span>(nx, ny), inf);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">add</span>(<span class="built_in">point</span>(i, j), t, a);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> maxflow = <span class="built_in">dinic</span>(s, t);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, tot - maxflow);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€èˆªç©ºè·¯çº¿é—®é¢˜-é¢˜è§£</title>
    <url>/p/6bb5462a.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P2770">ã€ŒLuogu P2770ã€èˆªç©ºè·¯çº¿é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å‡ºä¸€ä¸ªåŸå¸‚,$n$ä¸ªç‚¹,$v$æ¡è¾¹,æ¯ä¸ªåŸå¸‚æœ‰ä¸€ä¸ªåå­—<br>ä»è¥¿å‘ä¸œæŒ‰åºç»™å‡ºåå­—<br>æ±‚ä»æœ€è¥¿å‡ºå‘åˆ°è¾¾æœ€ä¸œå¹¶è¿”å›æœ€è¥¿(é™¤èµ·ç‚¹å¤–,æ¯ä¸ªåŸå¸‚åªèƒ½è®¿é—®ä¸€æ¬¡)çš„è·¯å¾„</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å°†æ¯ä¸ªåŸå¸‚æ‹†æˆå…¥ç‚¹å’Œå‡ºç‚¹</p>
<ol>
<li>æºç‚¹ä¸ºç‚¹1çš„å…¥ç‚¹,æ±‡ç‚¹ä¸ºç‚¹nçš„å‡ºç‚¹</li>
<li>å¯¹äº <strong>é™¤æºç‚¹æ±‡ç‚¹</strong> çš„æ¯ä¸ªç‚¹, ä» å…¥ç‚¹ å‘ å‡ºç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º1,è´¹ç”¨ä¸º1</strong> çš„è¾¹(åªèƒ½ç»è¿‡ä¸€æ¬¡,ä¸”å¯¹ç­”æ¡ˆè´¡çŒ®ä¸º1)</li>
<li>ä» ç‚¹1çš„å…¥ç‚¹ å‘ ç‚¹1çš„å‡ºç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º2,è´¹ç”¨ä¸º1</strong> çš„è¾¹(å¯ä»¥ç»è¿‡2æ¬¡,ä¸”å¯¹ç­”æ¡ˆè´¡çŒ®ä¸º1)</li>
<li>ä» ç‚¹nçš„å…¥ç‚¹ å‘ ç‚¹nçš„å‡ºç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º2,è´¹ç”¨ä¸º1</strong> çš„è¾¹(å¯ä»¥ç»è¿‡2æ¬¡,ä¸”å¯¹ç­”æ¡ˆè´¡çŒ®ä¸º1)</li>
<li>å¯¹äºè¾¹$&lt;u, v&gt;$, ä» uçš„å‡ºç‚¹ å‘ vçš„å…¥ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º1,è´¹ç”¨ä¸º0</strong> çš„è¾¹(å¯ç»è¿‡1æ¬¡,å¯¹ç­”æ¡ˆæ— è´¡çŒ®)</li>
</ol>
<p>æ±‚ <strong>æœ€å¤§è´¹ç”¨æœ€å¤§æµ</strong>, æœ€å¤§æµ$maxflow\leq 2$</p>
<ol>
<li>è‹¥æœ€å¤§æµä¸º$2$, åˆ™ä¼šæœ‰ä¸€æ¡é“è·¯, ç»è¿‡çš„åŸå¸‚æ•°ä¸ºæœ€å¤§è´¹ç”¨$maxcost-2$(å‡å»é‡å¤çš„æºç‚¹å’Œæ±‡ç‚¹çš„è´¡çŒ®)<br>æ±‚è·¯å¾„å¯ä»¥<ul>
<li>å…ˆä¸€æ¬¡dfsæ‰¾åˆ°ä»1åˆ°nçš„æ‰€æœ‰æ®‹é‡ä¸º0çš„è·¯å¾„(æ»¡æµ$\mathtt{e.cap == e.flow}$),æ­£åºè¾“å‡º</li>
<li>å†ä¸€æ¬¡dfsæ‰¾åˆ°å¦ä¸€æ¡æ»¡æµè·¯å¾„,å¹¶ç”¨visç¡®ä¿æ²¡æœ‰é‡å¤åŸå¸‚,å€’åºè¾“å‡º(ä¸é‡å¤è¾“å‡ºn)</li>
</ul>
</li>
<li>è‹¥æœ€å¤§æµä¸º$1$, åˆ™ç›´æ¥ä»æºç‚¹åˆ°æ±‡ç‚¹æœ‰ä¸€æ¡é€šè·¯, è¾“å‡º$2$, è·¯å¾„ä¸º$1-&gt;n-&gt;1$</li>
<li>è‹¥æœ€å¤§æµä¸º$0$, åˆ™æ— è§£$\texttt{No Solution!}$</li>
</ol>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">210</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ninf = <span class="number">0xc0c0c0c0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, ansflow;</span><br><span class="line"><span class="keyword">int</span> vis[maxn], d[maxn], p[maxn], a[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> anscost;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> from, to, cap, flow, cost;</span><br><span class="line">	<span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f, <span class="keyword">int</span> w): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f), <span class="built_in">cost</span>(w)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>, w));</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>,-w));</span><br><span class="line">	<span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">	G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">	G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BellmanFord</span><span class="params">(<span class="keyword">int</span>&amp; flow, <span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(d, <span class="number">0xc0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(d));</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	d[s] = <span class="number">0</span>; vis[s] = <span class="number">1</span>; p[s] = <span class="number">0</span>; a[s] = inf;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">	Q.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">		vis[x] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">			Edge&amp; e = edges[G[x][i]];</span><br><span class="line">			<span class="keyword">if</span> (e.cap &gt; e.flow &amp;&amp; d[e.to] &lt; d[x] + e.cost) &#123;</span><br><span class="line">				d[e.to] = d[x] + e.cost;</span><br><span class="line">				p[e.to] = G[x][i];</span><br><span class="line">				a[e.to] = <span class="built_in">min</span>(a[x], e.cap - e.flow);</span><br><span class="line">				<span class="keyword">if</span> (!vis[e.to]) &#123;</span><br><span class="line">					Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">					vis[e.to] = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (d[t] == ninf) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	flow += a[t];</span><br><span class="line">	cost += (<span class="keyword">long</span> <span class="keyword">long</span>)d[t] * (<span class="keyword">long</span> <span class="keyword">long</span>)a[t];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> u = t; u != s; u = edges[p[u]].from) &#123;</span><br><span class="line">		edges[p[u]].flow += a[t];</span><br><span class="line">		edges[p[u] ^ <span class="number">1</span>].flow -= a[t];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MinCostMaxFlow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> flow = <span class="number">0</span>; cost = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">BellmanFord</span>(flow, cost));</span><br><span class="line">	<span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string name[maxn];</span><br><span class="line">map&lt;string, <span class="keyword">int</span>&gt; id;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</span><br><span class="line">    vis[u] = <span class="literal">true</span>;</span><br><span class="line">    cout &lt;&lt; name[u - n] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[u][i]];</span><br><span class="line">        <span class="keyword">if</span> (e.to &lt;= n &amp;&amp; e.cap == e.flow) &#123;</span><br><span class="line">            <span class="built_in">dfs1</span>(e.to + n);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[u][i]];</span><br><span class="line">        <span class="keyword">if</span> (e.to &lt;= n &amp;&amp; e.cap == e.flow &amp;&amp; !vis[e.to + n]) &#123;</span><br><span class="line">            <span class="built_in">dfs2</span>(e.to + n);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; name[u - n] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>();</span><br><span class="line">    s = <span class="number">1</span>; t = <span class="number">2</span> * n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; name[i];</span><br><span class="line">        id[name[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        string str1, str2;</span><br><span class="line">        cin &gt;&gt; str1;</span><br><span class="line">        cin &gt;&gt; str2;</span><br><span class="line">        <span class="keyword">int</span> u = id[str1], v = id[str2];</span><br><span class="line">        <span class="keyword">if</span> (u &gt; v) <span class="built_in">swap</span>(u, v);</span><br><span class="line">        <span class="built_in">add</span>(u + n, v, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">add</span>(i, i + n, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">add</span>(s, s + n, <span class="number">2</span>, <span class="number">1</span>); <span class="built_in">add</span>(n, t, <span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> maxflow = <span class="built_in">MinCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="keyword">if</span> (maxflow == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, anscost - <span class="number">2</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (maxflow == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;2\n&quot;</span>);</span><br><span class="line">        cout &lt;&lt; name[<span class="number">1</span>] &lt;&lt; <span class="string">&quot;\n&quot;</span> &lt;&lt; name[n] &lt;&lt; <span class="string">&quot;\n&quot;</span> &lt;&lt; name[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;No Solution!\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    <span class="built_in">dfs1</span>(<span class="number">1</span> + n);</span><br><span class="line">    <span class="built_in">dfs2</span>(<span class="number">1</span> + n);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€æœ€é•¿ä¸ä¸‹é™å­åºåˆ—é—®é¢˜-é¢˜è§£</title>
    <url>/p/a66cf8af.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P2766">ã€ŒLuogu P2766ã€æœ€é•¿ä¸ä¸‹é™å­åºåˆ—é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å®šæ­£æ•´æ•°åºåˆ—$x_1, x_2, â€¦, x_n$ </p>
<ol>
<li>è®¡ç®—å…¶ <strong>æœ€é•¿ä¸ä¸‹é™å­åºåˆ—</strong> çš„é•¿åº¦$S$</li>
<li>å¦‚æœæ¯ä¸ªå…ƒç´ åªå…è®¸ä½¿ç”¨ä¸€æ¬¡,è®¡ç®—ä»ç»™å®šçš„åºåˆ—ä¸­æœ€å¤šå¯å–å‡ºå¤šå°‘ä¸ªé•¿åº¦ä¸º$S$çš„ä¸ä¸‹é™å­åºåˆ—</li>
<li>å¦‚æœå…è®¸åœ¨å–å‡ºçš„åºåˆ—ä¸­å¤šæ¬¡ä½¿ç”¨$x_1$å’Œ$x_n$,å…¶ä»–å…ƒç´ ä»ç„¶åªå…è®¸ä½¿ç”¨ä¸€æ¬¡,åˆ™ä»ç»™å®šåºåˆ—ä¸­æœ€å¤šå¯å–å‡ºå¤šå°‘ä¸ª <strong>ä¸åŒ</strong> çš„é•¿åº¦ä¸º$S$çš„ä¸ä¸‹é™å­åºåˆ—</li>
</ol>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><h4 id="ç¬¬ä¸€é—®"><a href="#ç¬¬ä¸€é—®" class="headerlink" title="ç¬¬ä¸€é—®"></a>ç¬¬ä¸€é—®</h4><p>åŠ¨æ€è§„åˆ’<br><strong>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</strong>:$\mathtt{f[i]=max_{1â‰¤j&lt;i&amp;&amp;x_jâ‰¤x_i}\{f[j]+1\}}$<br><strong>åˆå€¼</strong>: $\mathtt{f[0]=0}$<br><strong>ç»“æœ</strong>: $\mathtt{max_{1\leq i\leq n}f[i]}$</p>
<h4 id="ç¬¬äºŒé—®"><a href="#ç¬¬äºŒé—®" class="headerlink" title="ç¬¬äºŒé—®"></a>ç¬¬äºŒé—®</h4><p>å°†æ¯ä¸ªç‚¹(ç´¢å¼•)æ‹†æˆä¸¤ä¸ªç‚¹<br>åº”ç”¨äº†åˆ†å±‚å›¾çš„æ€æƒ³, æŠŠå›¾æ¯ä¸ªé¡¶ç‚¹$\mathtt{i}$æŒ‰ç…§$\mathtt{f[i]}$çš„ä¸åŒåˆ†ä¸ºäº†è‹¥å¹²å±‚<br>è¿™æ ·å›¾ä¸­ä»$s$å‡ºå‘åˆ°$t$çš„ä»»ä½•ä¸€æ¡è·¯å¾„éƒ½æ˜¯ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„æœ€é•¿ä¸Šå‡å­åºåˆ—<br>ç”±äºåºåˆ—ä¸­æ¯ä¸ªç‚¹è¦ä¸å¯é‡å¤åœ°å–å‡º,éœ€è¦æŠŠæ¯ä¸ªç‚¹æ‹†åˆ†æˆä¸¤ä¸ªç‚¹<br>å•ä½ç½‘ç»œçš„æœ€å¤§æµå°±æ˜¯å¢å¹¿è·¯çš„æ¡æ•°,æ‰€ä»¥æœ€å¤§æµé‡å°±æ˜¯ç¬¬äºŒé—®ç»“æœã€‚</p>
<ol>
<li>ä» æºç‚¹ å‘ æ¯ä¸ª$\mathtt{f[i]==1}$çš„ç‚¹içš„å·¦ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º1</strong> çš„è¾¹</li>
<li>ä» æ¯ä¸ªç‚¹çš„å·¦ç‚¹ å‘ å…¶å³ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º1</strong> çš„è¾¹</li>
<li>ä» $\mathtt{f[i]==S}$çš„ç‚¹içš„å³ç‚¹ å‘ æ±‡ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º1</strong> çš„è¾¹</li>
<li>å¯¹äº$j&lt;i$,è‹¥$\mathtt{x_j\leq x_i &amp;&amp; f[i] == f[j] + 1}$,åˆ™ä» ç‚¹jçš„å³ç‚¹ å‘ ç‚¹içš„å·¦ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º1</strong> çš„è¾¹</li>
</ol>
<h4 id="ç¬¬ä¸‰é—®"><a href="#ç¬¬ä¸‰é—®" class="headerlink" title="ç¬¬ä¸‰é—®"></a>ç¬¬ä¸‰é—®</h4><p>è¦æ±‚$x_1$å’Œ$x_n$å¯ä»¥é‡å¤ä½¿ç”¨,åªéœ€å–æ¶ˆè¿™ä¸¤ä¸ªç‚¹ç›¸å…³è¾¹çš„æµé‡é™åˆ¶,æ±‚ç½‘ç»œæœ€å¤§æµå³å¯</p>
<ol>
<li>ä» æºç‚¹ å‘ ç‚¹1çš„å·¦ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º$inf$</strong> çš„è¾¹</li>
<li>ä» ç‚¹1çš„å·¦ç‚¹ å‘ ç‚¹1çš„å³ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º$inf$</strong> çš„è¾¹</li>
<li>è‹¥$\mathtt{f[n]==S}$åˆ™ä» ç‚¹nçš„å·¦ç‚¹ å‘ ç‚¹nçš„å³ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º$inf$</strong> çš„è¾¹</li>
<li>è‹¥$\mathtt{f[n]==S}$åˆ™ä» ç‚¹nçš„å³ç‚¹ å‘ æ±‡ç‚¹ å»ºä¸€æ¡ <strong>å®¹é‡ä¸º$inf$</strong> çš„è¾¹</li>
</ol>
<p>æ³¨æ„åˆ¤æ–­å½“$n==1$æ—¶çš„æƒ…å†µ(ç¬¬ä¸‰é—®ç­”æ¡ˆä¼šå‡ºç°$inf$)</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> s, t, d[maxn], cur[maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;from, to, cap, <span class="number">0</span>&#125;);</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;to, from, <span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[from].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[to].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BFS</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(s);</span><br><span class="line">    d[s] = <span class="number">0</span>;</span><br><span class="line">    vis[s] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (!vis[e.to] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                vis[e.to] = <span class="number">1</span>;</span><br><span class="line">                d[e.to] = d[x] + <span class="number">1</span>;</span><br><span class="line">                Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vis[t];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == t || a == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>, f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>&amp; i = cur[x]; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (d[x] + <span class="number">1</span> == d[e.to] &amp;&amp; (f = <span class="built_in">DFS</span>(e.to, <span class="built_in">min</span>(a, e.cap - e.flow))) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            e.flow += f;</span><br><span class="line">            edges[G[x][i] ^ <span class="number">1</span>].flow -= f;</span><br><span class="line">            flow += f;</span><br><span class="line">            a -= f;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">BFS</span>()) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cur, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cur));</span><br><span class="line">        flow += <span class="built_in">DFS</span>(s, inf);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, num[<span class="number">510</span>], dp[<span class="number">510</span>], ans1, ans2, ans3; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        num[i] = <span class="built_in">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Question 1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (num[j] &lt;= num[i] &amp;&amp; dp[j] &gt; dp[i]) dp[i] = dp[j];</span><br><span class="line">        &#125;</span><br><span class="line">        dp[i]++;</span><br><span class="line">        ans1 = <span class="built_in">max</span>(ans1, dp[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Question 2</span></span><br><span class="line">    s = <span class="number">0</span>, t = <span class="number">2</span> * n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="keyword">if</span> (dp[i] == <span class="number">1</span>) <span class="built_in">add</span>(s, i, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">add</span>(i, i + n, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="keyword">if</span> (dp[i] == ans1) <span class="built_in">add</span> (i + n, t, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; ++j) </span><br><span class="line">            <span class="keyword">if</span> (num[j] &lt;= num[i] &amp;&amp; dp[i] == dp[j] + <span class="number">1</span>)</span><br><span class="line">                <span class="built_in">add</span>(j + n, i, <span class="number">1</span>);</span><br><span class="line">    ans2 = <span class="built_in">dinic</span>(s, t);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Question 3</span></span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;1\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">add</span>(s, <span class="number">1</span>, inf); <span class="built_in">add</span>(<span class="number">1</span>, <span class="number">1</span> + n, inf);</span><br><span class="line">    <span class="keyword">if</span> (dp[n] == ans1) &#123;</span><br><span class="line">        <span class="built_in">add</span>(n, n + n, inf);</span><br><span class="line">        <span class="built_in">add</span>(n + n, t, inf);</span><br><span class="line">    &#125;</span><br><span class="line">    ans3 = ans2 + <span class="built_in">dinic</span>(s, t);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans3);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€å¤ªç©ºé£è¡Œè®¡åˆ’é—®é¢˜-é¢˜è§£</title>
    <url>/p/f5a4cbbc.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P2762">ã€ŒLuogu P2762ã€å¤ªç©ºé£è¡Œè®¡åˆ’é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>æœ‰$m$ä¸ªå®éªŒï¼Œæ¯ä¸ªå®éªŒåªå¯ä»¥è¿›è¡Œä¸€æ¬¡ï¼Œä½†ä¼šè·å¾—ç›¸åº”çš„å¥–é‡‘<br>æœ‰$n$ä¸ªä»ªå™¨ï¼Œæ¯ä¸ªå®éªŒéƒ½éœ€è¦ä¸€å®šçš„ä»ªå™¨ï¼Œæ¯ä¸ªä»ªå™¨å¯ä»¥è¿ç”¨äºå¤šä¸ªå®éªŒï¼Œä½†éœ€è¦ä¸€å®šçš„ä»·å€¼</p>
<p>é—®å¥–é‡‘ä¸ä»£ä»·çš„å·®çš„æœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Ÿ</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><ol>
<li>ä»æºç‚¹å‘æ¯ä¸ªå®éªŒå»º <strong>å®¹é‡ä¸ºå®éªŒå¥–é‡‘</strong> çš„è¾¹</li>
<li>ä»æ¯ä¸ªä»ªå™¨å‘æ±‡ç‚¹å»º <strong>å®¹é‡ä¸ºä»ªå™¨è´¹ç”¨</strong> çš„è¾¹</li>
<li>å®éªŒå‘å¯¹åº”ä»ªå™¨å»º <strong>å®¹é‡ä¸º$inf$</strong> çš„è¾¹(ä¿è¯ä¸è¢«å‰²)</li>
</ol>
<p>ç„¶åæ±‚æœ€å°å‰²å³æœ€å¤§æµ,åªä¼šå‰²æ–­ <strong>æº-&gt;å®éªŒ</strong> æˆ–è€… <strong>ä»ªå™¨-&gt;æ±‡</strong> çš„ç‚¹<br>æœ€åä¸€æ¬¡bfså,ä»å’Œæºç›¸è¿çš„å®éªŒ/ä»ªå™¨ä¸ºè¦è¿›è¡Œçš„å®éªŒ/éœ€è¦çš„ä»ªå™¨</p>
<p>æœ€å¤§æ”¶ç›Šä¸ºæ‰€æœ‰æ”¯ä»˜çš„è´¹ç”¨ä¹‹å’Œå‡æœ€å¤§æµ</p>
<p>æ ·ä¾‹çš„å»ºè¾¹è§ä¸‹å›¾:<br><img src="/p/f5a4cbbc/NF24P2762.png"></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> endr = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">if</span> (ch == <span class="string">&#x27;\r&#x27;</span>) endr = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, d[maxn], cur[maxn], tot;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;from, to, cap, <span class="number">0</span>&#125;);</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;to, from, <span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[from].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[to].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BFS</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(s);</span><br><span class="line">    d[s] = <span class="number">0</span>;</span><br><span class="line">    vis[s] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (!vis[e.to] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                vis[e.to] = <span class="number">1</span>;</span><br><span class="line">                d[e.to] = d[x] + <span class="number">1</span>;</span><br><span class="line">                Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vis[t];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == t || a == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>, f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>&amp; i = cur[x]; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (d[x] + <span class="number">1</span> == d[e.to] &amp;&amp; (f = <span class="built_in">DFS</span>(e.to, <span class="built_in">min</span>(a, e.cap - e.flow))) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            e.flow += f;</span><br><span class="line">            edges[G[x][i] ^ <span class="number">1</span>].flow -= f;</span><br><span class="line">            flow += f;</span><br><span class="line">            a -= f;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">BFS</span>()) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cur, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cur));</span><br><span class="line">        flow += <span class="built_in">DFS</span>(s, inf);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m_ = <span class="built_in">read</span>(), n_ = <span class="built_in">read</span>();</span><br><span class="line">    n = m_ + n_ + <span class="number">2</span>; s = <span class="number">0</span>; t = n - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m_; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> p = <span class="built_in">read</span>(); tot += p;</span><br><span class="line">        <span class="built_in">add</span>(s, i, p);</span><br><span class="line">        <span class="keyword">char</span> tools[<span class="number">10000</span>];</span><br><span class="line">        <span class="built_in">memset</span>(tools, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(tools));</span><br><span class="line">        cin.<span class="built_in">getline</span>(tools, <span class="number">10000</span>);</span><br><span class="line">        <span class="keyword">int</span> ulen = <span class="number">0</span>, tool;</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">sscanf</span>(tools + ulen, <span class="string">&quot;%d&quot;</span>, &amp;tool) == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">add</span>(i, tool + m_, inf);</span><br><span class="line">            <span class="keyword">if</span> (tool == <span class="number">0</span>) </span><br><span class="line">                ulen++;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (tool) &#123;</span><br><span class="line">                    tool /= <span class="number">10</span>;</span><br><span class="line">                    ulen++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ulen++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> c = <span class="built_in">read</span>();</span><br><span class="line">        <span class="built_in">add</span>(i + m_, t, c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="built_in">dinic</span>(s, t);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m_; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (vis[i]) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n_; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (vis[i + m_]) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, tot - ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€è½¯ä»¶è¡¥ä¸é—®é¢˜-é¢˜è§£</title>
    <url>/p/2f9adffb.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P2761">ã€ŒLuogu P2761ã€è½¯ä»¶è¡¥ä¸é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>$n$ä¸ªé”™è¯¯,$m$ä¸ªè¡¥ä¸</p>
<p>ç¬¬$i$ä¸ªè¡¥ä¸è€—æ—¶$t_i$<br>ä½¿ç”¨è¯¥è¡¥ä¸éœ€è¦è½¯ä»¶ä¸­åŒ…å«æ‰€æœ‰$B1_i$ä¸­çš„é”™è¯¯,å¹¶ä¸”ä¸åŒ…å«$B2_i$ä¸­çš„ä»»ä½•ä¸€ä¸ªé”™è¯¯<br>è¯¥è¡¥ä¸å¯ä»¥ä¿®å¤é”™è¯¯$F1_i$,ä½†ä¼šæ·»åŠ é”™è¯¯$F2_i$</p>
<p>æ‰¾å‡ºä¿®å¤æ‰€æœ‰é”™è¯¯çš„æœ€çŸ­æ—¶é—´</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>é”™è¯¯è¾ƒå°‘,å¯ä»¥ä½¿ç”¨çŠ¶æ€å‹ç¼©,ç”¨2è¿›åˆ¶è¡¨ç¤ºé”™è¯¯çš„ä¿®å¤æƒ…å†µ(1è¡¨ç¤ºæœªä¿®å¤,0è¡¨ç¤ºå·²ä¿®å¤)<br>èµ·å§‹çŠ¶æ€$\texttt{111â€¦1}$,ç»“æŸçŠ¶æ€$\texttt{000â€¦0}$</p>
<p>æ¯ä¸ªçŠ¶æ€å½“åšå›¾ä¸­çš„èŠ‚ç‚¹,å³æ±‚èµ·å§‹çŠ¶æ€åˆ°ç»“æŸçŠ¶æ€çš„æœ€çŸ­è·¯</p>
<p>ç”±äºè¡¥ä¸è¾ƒå°‘,ä¸ç”¨è¿è¾¹,åœ¨æœ€çŸ­è·¯éœ€è¦éå†è¾¹æ—¶,éå†æ‰€æœ‰è¡¥ä¸,å¹¶åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿè”é€š(å³å½“å‰çŠ¶æ€æ˜¯å¦åŒ…å«è¯¥è¡¥ä¸çš„$B1$,è€Œä¸åŒ…å«$B2$)<br>å¦‚æœèƒ½å¤Ÿè¿æ¥,åˆ™ä¸‹ä¸€ä¸ªçŠ¶æ€ä¸ºå½“å‰çŠ¶æ€æ‰“ä¸Šå½“å‰è¡¥ä¸(å³ä¿®å¤$F1$,æ·»åŠ $F2$)<br>è¾¹æƒä¸ºå½“å‰è¡¥ä¸çš„è€—æ—¶<br>ä½¿ç”¨SPFAè·‘æœ€çŸ­è·¯å³å¯</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read_</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (ch != <span class="string">&#x27;+&#x27;</span> &amp;&amp; ch != <span class="string">&#x27;-&#x27;</span> &amp;&amp; ch != <span class="string">&#x27;0&#x27;</span>) ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">if</span> (ch == <span class="string">&#x27;+&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DLL</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> time;</span><br><span class="line">    <span class="keyword">int</span> b1, b2;</span><br><span class="line">    <span class="keyword">int</span> f1, f2;</span><br><span class="line">&#125;node[<span class="number">110</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t;</span><br><span class="line"><span class="keyword">int</span> dis[<span class="number">1</span> &lt;&lt; <span class="number">21</span>];</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">1</span> &lt;&lt; <span class="number">21</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SPFA</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x3f</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dis));</span><br><span class="line">    dis[s] = <span class="number">0</span>; vis[s] = <span class="literal">true</span>;</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; q; q.<span class="built_in">push</span>(s);</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> u = q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">        vis[u] = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((u &amp; node[i].b1) == node[i].b1 &amp;&amp; (u &amp; node[i].b2) == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> v = ((u | node[i].f1) | node[i].f2) ^ node[i].f1;</span><br><span class="line">                <span class="keyword">if</span> (dis[v] &gt; dis[u] + node[i].time) &#123;</span><br><span class="line">                    dis[v] = dis[u] + node[i].time;</span><br><span class="line">                    <span class="keyword">if</span> (!vis[v]) &#123;</span><br><span class="line">                        q.<span class="built_in">push</span>(v);</span><br><span class="line">                        vis[v] = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>();</span><br><span class="line">    s = (<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>; t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        node[i].time = <span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> sta = <span class="built_in">read_</span>();</span><br><span class="line">            <span class="keyword">if</span> (sta == <span class="number">1</span>) node[i].b1 |= (<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">            <span class="keyword">if</span> (sta == <span class="number">2</span>) node[i].b2 |= (<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> sta = <span class="built_in">read_</span>();</span><br><span class="line">            <span class="keyword">if</span> (sta == <span class="number">2</span>) node[i].f1 |= (<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">            <span class="keyword">if</span> (sta == <span class="number">1</span>) node[i].f2 |= (<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">SPFA</span>(s);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, dis[t] == inf ? <span class="number">0</span> : dis[t]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>æœ€çŸ­è·¯</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€å®¶å›­/æ˜Ÿé™…è½¬ç§»é—®é¢˜-é¢˜è§£</title>
    <url>/p/af442de1.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P2754">ã€ŒLuogu P2754ã€å®¶å›­/æ˜Ÿé™…è½¬ç§»é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>1ä¸ªåœ°çƒ,$n$ä¸ªå¤ªç©ºç«™,1ä¸ªæœˆçƒ,$k$ä¸ªäºº<br>$m$è‰˜èˆ¹,ç¬¬$i$è‰˜å®¹çº³$h_i$ä¸ªäºº,åœé $r_i$ç«™,åˆ†åˆ«ä¸º$S_{i,j}$,æ¯æ¬¡è€—æ—¶1<br>åˆå§‹äººå…¨åœ¨åœ°çƒ,ç»“æŸäººå…¨åœ¨æœˆçƒ</p>
<p>æ±‚æœ€çŸ­æ—¶é—´</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å…ˆæ ¹æ®è¾“å…¥çš„åœé ä½ç½®,å»ºç«‹å¹¶æŸ¥é›†,è‹¥åœ°æœˆä¸è¿é€š,åˆ™æ— è§£,è¾“å‡º$0$</p>
<p>å†æ ¹æ®æ—¶é—´å»ºè¾¹,æ—¶é—´æ¯å¢åŠ 1,å¢åŠ ä¸€å±‚,æ±‚ä¸€æ¬¡æœ€å¤§æµ,æ·»åŠ è¿›ç­”æ¡ˆ<br>å½“ç­”æ¡ˆå¤§äº$k$æ—¶,å³å¯å…¨éƒ¨åˆ°è¾¾æœˆçƒ</p>
<p>æ ·ä¾‹çš„å»ºå›¾æ˜¯è¿™æ ·:<br><img src="/p/af442de1/NF24P2754.png"></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, d[maxn], ans, cur[maxn];</span><br><span class="line"><span class="keyword">int</span> ufs[<span class="number">25</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (ufs[x] == x) ? x : ufs[x] = <span class="built_in">find</span>(ufs[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unionn</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> fx = <span class="built_in">find</span>(x), fy = <span class="built_in">find</span>(y);</span><br><span class="line">    <span class="keyword">if</span> (fx != fy) ufs[fx] = fy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;from, to, cap, <span class="number">0</span>&#125;);</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;to, from, <span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[from].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[to].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BFS</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(s);</span><br><span class="line">    d[s] = <span class="number">0</span>;</span><br><span class="line">    vis[s] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (!vis[e.to] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                vis[e.to] = <span class="number">1</span>;</span><br><span class="line">                d[e.to] = d[x] + <span class="number">1</span>;</span><br><span class="line">                Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vis[t];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == t || a == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>, f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>&amp; i = cur[x]; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (d[x] + <span class="number">1</span> == d[e.to] &amp;&amp; (f = <span class="built_in">DFS</span>(e.to, <span class="built_in">min</span>(a, e.cap - e.flow))) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            e.flow += f;</span><br><span class="line">            edges[G[x][i] ^ <span class="number">1</span>].flow -= f;</span><br><span class="line">            flow += f;</span><br><span class="line">            a -= f;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">BFS</span>()) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cur, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cur));</span><br><span class="line">        flow += <span class="built_in">DFS</span>(s, inf);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> S[<span class="number">25</span>][<span class="number">25</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>(); <span class="keyword">int</span> k = <span class="built_in">read</span>();</span><br><span class="line">    s = <span class="number">0</span>; t = n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + <span class="number">1</span>; ++i) ufs[i] = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        S[<span class="number">0</span>][i] = <span class="built_in">read</span>(); S[i][<span class="number">0</span>] = <span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= S[i][<span class="number">0</span>]; ++j) &#123;</span><br><span class="line">            S[i][j] = <span class="built_in">read</span>();</span><br><span class="line">            <span class="keyword">if</span> (S[i][j] == <span class="number">-1</span>) S[i][j] = n + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (j &gt; <span class="number">1</span>) <span class="built_in">unionn</span>(S[i][j], S[i][j - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">find</span>(s) != <span class="built_in">find</span>(t)) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> time = <span class="number">1</span>; ; ++time) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">add</span>(i + (time - <span class="number">1</span>) * (n + <span class="number">2</span>), i + time * (n + <span class="number">2</span>), inf);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">add</span>(n + <span class="number">1</span> + time * (n + <span class="number">2</span>), n + <span class="number">1</span> + (time - <span class="number">1</span>) * (n + <span class="number">2</span>), inf);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = (time - <span class="number">1</span>) % S[i][<span class="number">0</span>] + <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">add</span>(S[i][tmp] + (time - <span class="number">1</span>) * (n + <span class="number">2</span>), S[i][time % S[i][<span class="number">0</span>] + <span class="number">1</span>] + time * (n + <span class="number">2</span>), S[<span class="number">0</span>][i]);</span><br><span class="line">        &#125;</span><br><span class="line">        ans += <span class="built_in">dinic</span>(s, t);</span><br><span class="line">        <span class="keyword">if</span> (ans &gt;= k) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, time);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€é¤å·¾è®¡åˆ’é—®é¢˜-é¢˜è§£</title>
    <url>/p/93562de2.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.com.cn/problem/P1251">ã€ŒLuogu P1251ã€é¤å·¾è®¡åˆ’é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>åœ¨$N$å¤©é‡Œ,ç¬¬$i$å¤©éœ€è¦$r_i$ä¸ªé¤å·¾</p>
<ol>
<li>å¯ä»¥è´­ä¹°é¤å·¾,æ¯å¼ $p$å…ƒ</li>
<li>å¯ä»¥å°†æ—§é€å¿«æ´—,$m$å¤©,è´¹ç”¨$f$å…ƒ</li>
<li>å¯ä»¥å°†æ—§é€æ…¢æ´—,$n$å¤©,è´¹ç”¨$s$å…ƒ</li>
<li>æ¯å¤©ç»“æŸ,å¯ä»¥é€å¿«æ´—,æ…¢æ´—,ä¿å­˜</li>
</ol>
<p>è®¾è®¡æœ€å°èŠ±è´¹</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å°†æ¯å¤©æ‹†æˆ2ä¸ªç‚¹(æ—©æ™š),æ–°å»ºæºç‚¹æ±‡ç‚¹(æºç‚¹è¡¨ç¤ºè·å¾—,æ±‡ç‚¹è¡¨ç¤ºä½¿ç”¨)</p>
<ol>
<li>æ¯å¤©æ—©ä¸Šçš„ç‚¹,å‘æ±‡ç‚¹è¿ <strong>å®¹é‡ä¸º$r_i$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹,è¡¨ç¤ºå½“æ—¥éœ€è¦ä½¿ç”¨</li>
<li>æºç‚¹å‘æ¯å¤©æ™šä¸Šçš„ç‚¹è¿ <strong>å®¹é‡ä¸º$r_i$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹,æ¯å¤©æ™šä¸Šè·å¾—å¤šå°‘æ—§é¤å·¾</li>
<li>æºç‚¹å‘æ¯å¤©æ—©ä¸Šçš„ç‚¹è¿ <strong>å®¹é‡ä¸º$inf$,è´¹ç”¨ä¸º$p$</strong> çš„è¾¹,è¡¨ç¤ºè´­ä¹°</li>
<li>æ¯å¤©æ™šä¸Šå‘$+m$å¤©çš„æ—©ä¸Šè¿ <strong>å®¹é‡ä¸º$inf$,è´¹ç”¨ä¸º$f$</strong> çš„è¾¹,è¡¨ç¤ºå¿«æ´—</li>
<li>æ¯å¤©æ™šä¸Šå‘$+n$å¤©çš„æ—©ä¸Šè¿ <strong>å®¹é‡ä¸º$inf$,è´¹ç”¨ä¸º$s$</strong> çš„è¾¹,è¡¨ç¤ºå¿«æ´—</li>
<li>æ¯å¤©æ™šä¸Šå‘ç¬¬äºŒå¤©æ™šä¸Šè¿ <strong>å®¹é‡ä¸º$inf$,è´¹ç”¨ä¸º$0$</strong> çš„è¾¹,è¡¨ç¤ºä¿ç•™</li>
</ol>
<p>è·‘æœ€å°è´¹ç”¨æœ€å¤§æµ</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">4010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, ansflow, r[maxn];</span><br><span class="line"><span class="keyword">int</span> vis[maxn], d[maxn], p[maxn], a[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> anscost;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> from, to, cap, flow, cost;</span><br><span class="line">	<span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f, <span class="keyword">int</span> w): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f), <span class="built_in">cost</span>(w)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>, w));</span><br><span class="line">	edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>,-w));</span><br><span class="line">	<span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">	G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">	G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BellmanFord</span><span class="params">(<span class="keyword">int</span>&amp; flow, <span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) d[i] = inf;</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	d[s] = <span class="number">0</span>; vis[s] = <span class="number">1</span>; p[s] = <span class="number">0</span>; a[s] = inf;</span><br><span class="line">	queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">	Q.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">		vis[x] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">			Edge&amp; e = edges[G[x][i]];</span><br><span class="line">			<span class="keyword">if</span> (e.cap &gt; e.flow &amp;&amp; d[e.to] &gt; d[x] + e.cost) &#123;</span><br><span class="line">				d[e.to] = d[x] + e.cost;</span><br><span class="line">				p[e.to] = G[x][i];</span><br><span class="line">				a[e.to] = <span class="built_in">min</span>(a[x], e.cap - e.flow);</span><br><span class="line">				<span class="keyword">if</span> (!vis[e.to]) &#123;</span><br><span class="line">					Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">					vis[e.to] = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (d[t] == inf) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	flow += a[t];</span><br><span class="line">	cost += (<span class="keyword">long</span> <span class="keyword">long</span>)d[t] * (<span class="keyword">long</span> <span class="keyword">long</span>)a[t];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> u = t; u != s; u = edges[p[u]].from) &#123;</span><br><span class="line">		edges[p[u]].flow += a[t];</span><br><span class="line">		edges[p[u] ^ <span class="number">1</span>].flow -= a[t];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MinCostMaxFlow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> flow = <span class="number">0</span>; cost = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">BellmanFord</span>(flow, cost));</span><br><span class="line">	<span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = <span class="built_in">read</span>(); s = <span class="number">0</span>; t = <span class="number">2</span> * N + <span class="number">1</span>;</span><br><span class="line">    n = t + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; ++i) &#123;</span><br><span class="line">        r[i] = <span class="built_in">read</span>();</span><br><span class="line">        <span class="built_in">add</span>(s, i + N, r[i], <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">add</span>(i, t, r[i], <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> pr = <span class="built_in">read</span>(), t1 = <span class="built_in">read</span>(), c1 = <span class="built_in">read</span>(), t2 = <span class="built_in">read</span>(), c2 = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i + <span class="number">1</span> &lt;= N) <span class="built_in">add</span>(i + N, i + N + <span class="number">1</span>, inf, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (i + t1 &lt;= N) <span class="built_in">add</span>(i + N, i + t1, inf, c1);</span><br><span class="line">        <span class="keyword">if</span> (i + t2 &lt;= N) <span class="built_in">add</span>(i + N, i + t2, inf, c2);</span><br><span class="line">        <span class="built_in">add</span>(s, i, inf, pr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">MinCostMaxFlow</span>(anscost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, anscost);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
        <tag>è´¹ç”¨æµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒCSP-S 2019ã€é¢˜è§£</title>
    <url>/p/7d7252b1.html</url>
    <content><![CDATA[<pre><code>~~ä»Šå¹´çš„é¢˜çœŸæ˜¯æ¯’ç˜¤~~,ä¸€ä¸ªè’Ÿè’»è¦æ¥å†™é¢˜è§£äº†
</code></pre>
<p>æ ¡é—¨å¤–æœ‰ä¸¤æ£µæ ‘,ä¸€æ£µå«æ‹¬å·æ ‘ä¸€æ£µå«æ ‘ä¸Šçš„æ•°,è¿™ä¸¤æ£µæ ‘è¦è¢«ä¸€åŒ¹å«æ ¼é›·çš„é©¬åˆ’åˆ†å¼€ä¸ºEmiyaåšé¥­,è¿™ä¸¤æ£µæ ‘é—®:é‚£ä½ çŒœçŒœæˆ‘ä»¬çš„é‡å¿ƒåœ¨å“ªå•Š</p>
<span id="more"></span>

<h2 id="D1T1-æ ¼é›·ç "><a href="#D1T1-æ ¼é›·ç " class="headerlink" title="$D1T1$ æ ¼é›·ç "></a>$D1T1$ <a href="https://www.luogu.org/problem/P5657">æ ¼é›·ç </a></h2><h3 id="æ²™é›•æš´åŠ›dfs-æˆ‘çš„åšæ³•"><a href="#æ²™é›•æš´åŠ›dfs-æˆ‘çš„åšæ³•" class="headerlink" title="æ²™é›•æš´åŠ›dfs(æˆ‘çš„åšæ³•)"></a><del>æ²™é›•</del>æš´åŠ›<code>dfs</code>(æˆ‘çš„åšæ³•)</h3><p>è€ƒåœºä¸ŠçœŸæ˜¯è„‘æ®‹äº†,æ‹¿dfsæ¨¡æ‹Ÿ,å¿˜äº†äºŒåˆ†çš„äº‹äº†,è¿˜ä¼ äº†å››ä¸ªå‚æ•°<br>æ³¨æ„:<strong>ä¸€å®šè¦ç”¨<code>unsigned long long</code></strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ull <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	ull x = <span class="number">0</span>, f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">	<span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123; <span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>(); &#125;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch)) &#123; x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>(); &#125;</span><br><span class="line">	<span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">64</span>;</span><br><span class="line"></span><br><span class="line">ull n, k;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(ull n, ull k, ull rev, ull from)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (rev == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (k == <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (k == <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (k &lt;= (<span class="number">1LL</span> &lt;&lt; (n - <span class="number">1LL</span>)) - <span class="number">1LL</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (rev == <span class="number">0</span> &amp;&amp; from == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">			<span class="built_in">dfs</span>(n - <span class="number">1LL</span>, k, <span class="number">0LL</span>, <span class="number">0LL</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (rev == <span class="number">0</span> &amp;&amp; from == <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">			<span class="built_in">dfs</span>(n - <span class="number">1LL</span>, k, <span class="number">1LL</span>, <span class="number">0LL</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (rev == <span class="number">1</span> &amp;&amp; from == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">			<span class="built_in">dfs</span>(n - <span class="number">1LL</span>, k, <span class="number">0LL</span>, <span class="number">0LL</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">			<span class="built_in">dfs</span>(n - <span class="number">1LL</span>, k, <span class="number">0LL</span>, <span class="number">0LL</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (rev == <span class="number">0</span> &amp;&amp; from == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">			<span class="built_in">dfs</span>(n - <span class="number">1LL</span>, k - (<span class="number">1LL</span> &lt;&lt; (n - <span class="number">1LL</span>)), <span class="number">1LL</span>, <span class="number">1LL</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (rev == <span class="number">1</span> &amp;&amp; from == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">			<span class="built_in">dfs</span>(n - <span class="number">1LL</span>, k - (<span class="number">1LL</span> &lt;&lt; (n - <span class="number">1LL</span>)), <span class="number">0LL</span>, <span class="number">1LL</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (rev == <span class="number">0</span> &amp;&amp; from == <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">			<span class="built_in">dfs</span>(n - <span class="number">1LL</span>, k - (<span class="number">1LL</span> &lt;&lt; (n - <span class="number">1LL</span>)), <span class="number">0LL</span>, <span class="number">1LL</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">			<span class="built_in">dfs</span>(n - <span class="number">1LL</span>, k - (<span class="number">1LL</span> &lt;&lt; (n - <span class="number">1LL</span>)), <span class="number">1LL</span>, <span class="number">1LL</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	n = <span class="built_in">read</span>(); k = <span class="built_in">read</span>();</span><br><span class="line">	<span class="built_in">dfs</span>(n, k, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 55ms 812kB */</span></span><br></pre></td></tr></table></figure>

<h3 id="äºŒåˆ†æ¨¡æ‹Ÿ-lyd-å·¨ä½¬çš„åšæ³•"><a href="#äºŒåˆ†æ¨¡æ‹Ÿ-lyd-å·¨ä½¬çš„åšæ³•" class="headerlink" title="äºŒåˆ†æ¨¡æ‹Ÿ($lyd$å·¨ä½¬çš„åšæ³•)"></a>äºŒåˆ†æ¨¡æ‹Ÿ($lyd$å·¨ä½¬çš„åšæ³•)</h3><p>è€ƒå‰åšè¿‡ä¸€é“ç±»ä¼¼çš„é¢˜,ä½†å¯æƒœæˆ‘å¿˜äº†<br>$lyd$å·¨ä½¬è¯´ä»–è¿™é¢˜åªåšäº†15åˆ†é’Ÿ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> n,k;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> two[<span class="number">65</span>];</span><br><span class="line"><span class="keyword">int</span> change=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	two[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">63</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		two[i]=two[i<span class="number">-1</span>]*<span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">	<span class="keyword">while</span>(n&gt;<span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(k&gt;=two[n<span class="number">-1</span>])</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(!change)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">				change^=<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			k-=two[n<span class="number">-1</span>];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(change)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">				change^=<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		n--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 57ms 928kB */</span></span><br></pre></td></tr></table></figure>

<h3 id="ä½è¿ç®—æ­£è§£"><a href="#ä½è¿ç®—æ­£è§£" class="headerlink" title="ä½è¿ç®—æ­£è§£"></a>ä½è¿ç®—æ­£è§£</h3><p>æ ¼é›·ç çš„è§„å¾‹å°±æ˜¯<br>ç¬¬$i$ä½ä¸º$k\ xor\ \lfloor\frac{k}{2}\rfloor$çš„ç¬¬$i$ä½</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> k;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %llu&quot;</span>, &amp;n, &amp;k);</span><br><span class="line">    k ^= (k &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, (k &gt;&gt; n &amp; <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 54ms 932kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="D1T2-æ‹¬å·æ ‘"><a href="#D1T2-æ‹¬å·æ ‘" class="headerlink" title="$D1T2$ æ‹¬å·æ ‘"></a>$D1T2$ <a href="https://www.luogu.org/problem/P5658">æ‹¬å·æ ‘</a></h2><p>åé¢çš„å…ˆå’•ç€,ç­‰ç€è¡¥</p>
<h2 id="D1T3-æ ‘ä¸Šçš„æ•°"><a href="#D1T3-æ ‘ä¸Šçš„æ•°" class="headerlink" title="$D1T3$ æ ‘ä¸Šçš„æ•°"></a>$D1T3$ <a href="https://www.luogu.org/problem/P5659">æ ‘ä¸Šçš„æ•°</a></h2><h2 id="D2T1-Emiya-å®¶ä»Šå¤©çš„é¥­"><a href="#D2T1-Emiya-å®¶ä»Šå¤©çš„é¥­" class="headerlink" title="$D2T1$ $Emiya$å®¶ä»Šå¤©çš„é¥­"></a>$D2T1$ <a href="https://www.luogu.org/problem/P5664">$Emiya$å®¶ä»Šå¤©çš„é¥­</a></h2><h2 id="D2T2-åˆ’åˆ†"><a href="#D2T2-åˆ’åˆ†" class="headerlink" title="$D2T2$ åˆ’åˆ†"></a>$D2T2$ <a href="https://www.luogu.org/problem/P5665">åˆ’åˆ†</a></h2><h2 id="D2T3-æ ‘çš„é‡å¿ƒ"><a href="#D2T3-æ ‘çš„é‡å¿ƒ" class="headerlink" title="$D2T3$ æ ‘çš„é‡å¿ƒ"></a>$D2T3$ <a href="https://www.luogu.org/problem/P5666">æ ‘çš„é‡å¿ƒ</a></h2>]]></content>
      <categories>
        <category>é¢˜è§£</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>CSP-S</tag>
        <tag>é¢˜è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒCSP-S 2019ã€è‡ªé—­æ¸¸è®°</title>
    <url>/p/1901119c.html</url>
    <content><![CDATA[<p>è¿™æ¬¡å¤§æ¦‚æ˜¯ç¬¬äºŒå¹´å‚åŠ ä¿¡æ¯ç«èµ›äº†(<del>è™½ç„¶å»å¹´ä»€ä¹ˆä¹Ÿä¸ä¼šå°±æ‘¸äº†110åˆ†,çœå››</del>)<br>æŒ‰ç…§æƒ¯ä¾‹,è¯¥å†™ç¯‡æ¸¸è®°(<del>æµæ°´è´¦</del>)äº†</p>
<span id="more"></span>

<h2 id="Day-7-sim-2"><a href="#Day-7-sim-2" class="headerlink" title="$Day\ \  -7\sim -2$"></a>$Day\ \  -7\sim -2$</h2><p>æœ¬æ¥è¿˜æ˜¯æŒºæœ‰ä¿¡å¿ƒçš„,æ ¡å†…å‡ åæ¬¡æ¨¡æ‹Ÿèµ›è€ƒè‡ªé—­äº†,æƒ³æƒ³å¤èµ›ç»“æŸåå‘¨ä¸€å‘¨äºŒå°±è¦æœŸä¸­è€ƒè¯•(<del>å…¶å®æ˜¯â€è´´å¿ƒâ€çš„å¹´çº§ç»„ç‰¹æ„ä¸ºæˆ‘ä»¬OIerè°ƒçš„</del>)æ›´è‡ªé—­äº†<br>æ™šé¥­å›æ¥å,å‡ ä¸ªæ²™é›•æœ‹å‹å¬è¯´æˆ‘è‡ªé—­äº†,å›´äº†ä¸€åœˆç»™æˆ‘æ¥äº†ä¸€é<a href="https://www.bilibili.com/video/av53058902?from=search&seid=3943401388874538351">å¥¥åˆ©ç»™</a>,çœŸçš„æ„ŸåŠ¨<br>å›å®¶å’Œçˆ¶æ¯å•†é‡å¥½,ç­¾äº†ä¸ªç”³è¯·ä¹¦è„±äº†ä¸€å‘¨äº§,è¿˜è¯´è®©æˆ‘ä¸“å¿ƒå­¦ä¿¡æ¯,æœŸä¸­è€ƒè¯•å…ˆæ”¾ä¸‹</p>
<p>è„±äº§çš„æ—¶å…‰è¿˜æ˜¯å¾ˆå¿«ä¹çš„<br>æ—©ä¸Šå…­ç‚¹å¤šåˆ°æ ¡å°±å¼€å§‹æ•´ç†æ¨¡æ¿,åˆ·æ¨¡æ¿é¢˜<br>è€å¸ˆåˆ°äº†ä¹‹åèŠ±ä¸‰ä¸ªåŠå°æ—¶åšæ¨¡æ‹Ÿé¢˜<br>ä¸‹åˆè‡ªä¹ å’Œ$zty$å·¨ä½¬ç ”ç©¶é—®é¢˜<br>å››å¤©å°±è¿™ä¹ˆè¿‡å»äº†,æ‰“äº†ä¸€æœ¬å­æ¨¡æ¿å¸¦å»çœåŸå¤ä¹ </p>
<h2 id="Day-1"><a href="#Day-1" class="headerlink" title="$Day\ \ -1$"></a>$Day\ \ -1$</h2><p>ä¸Šåˆåä¸€ç‚¹å’Œæœºæˆ¿$wjh$,$mjc$,$lyd$(<del>lyd AK IOI</del>)å‡ºå‘å»è½¦ç«™äº†<br>è¿˜æ˜¯å»å¹´çš„æ—¶é—´,è¿˜æ˜¯å»å¹´çš„$KFC$,è¿˜æ˜¯å»å¹´çš„åƒåœ¾ç¬”è®°æœ¬<br>çœ‹çš„æ˜¯ç´¯ç§¯äº†ä¸€å¹´çš„æ•°åƒè¡Œæ¨¡æ¿å’Œç»éªŒ</p>
<p>ä¸­åˆåˆ°äº†å»å¹´åŒæ ·çš„é…’åº—,æ™šä¸Šå»äº†å»å¹´åŒæ ·çš„å‰å¤§æ—¥æ–°æ¥¼åƒé¥­<br>å›åˆ°é…’åº—,$lyd$å·¨ä½¬ç»™åŒå­¦è®²çˆ†æœæŠ€å·§,$zyc$å­¦é•¿åƒå»å¹´ä¸€æ ·æ¥æ¢æœ›<del>è‹¦é€¼çš„</del>$yzOIer$<br>ç¡å‰æ•²äº†ä¸€å †æ¿å­:å¿«è¯»,vimé…ç½®,STè¡¨,æ ‘çŠ¶æ•°ç»„,Trieæ ‘,æ ‘çš„é‡å¿ƒ,æ ‘çš„ç›´å¾„</p>
<h2 id="Day-1-1"><a href="#Day-1-1" class="headerlink" title="$Day\ \ 1$"></a>$Day\ \ 1$</h2><p>è¿˜æ˜¯åœ¨å»å¹´çš„ç­‰å€™å®¤</p>
<p>è¿›è€ƒåœº<br>$???$è¿™é˜²çª¥è†œæ˜¯ä»€ä¹ˆé¬¼,ä»€ä¹ˆéƒ½æŒ¡ä¸äº†çš„å¥½å§,çœ‹ç€è¿˜è¶…éš¾å—<br>å‰æ’çš„ç¯ä¹Ÿæ²¡æœ‰å¼€,æ²¡å¼€è€ƒçœ¼ç›å°±ç”Ÿç–¼</p>
<h3 id="Day1-T1"><a href="#Day1-T1" class="headerlink" title="$Day1\ T1$"></a>$Day1\ T1$</h3><p>çœ‹è§é¢˜ç›®,emmmæ€ä¹ˆåšéƒ½å‘Šè¯‰ä½ äº†,å¼€ä¸ªæ•°ç»„<code>reverse</code>æ¨¡æ‹Ÿå‘—â€¦<br>emmmä¸å¯¹,æ•°ç»„çš„è¯è²Œä¼¼è¦å¼€$2^64$,ä¸è¡Œä¸è¡Œ<br>æ¨è§„å¾‹,å¥½åƒä¹Ÿå°±é‚£ä¹ˆä¸ªæ„æ€,<code>dfs</code>æ¨¡æ‹Ÿ!!<br>ç„¶åä¸€é¡¿ä¹±æ,dfsä¼ å€¼ä»2åˆ°3åˆ°4,å†™äº†å¥½å‡ åè¡Œ<code>dfs</code><br>è·‘ä¸€è¾¹æ ·ä¾‹,æ²¡é—®é¢˜,å¤§æ ·ä¾‹??å¥½åƒçˆ†äº†,æ”¹<code>long long</code>â€¦ç…§æ ·çˆ†<br>çœ‹ä¸€çœ¼æ—¶é—´,è‰¹ä¸€ä¸ªå°æ—¶äº†,å¾—äº†å¾—äº†,ä¸æ”¹äº†</p>
<p>çœ‹å®Œç¬¬äºŒé¢˜,ä¸è¡Œä¸è¡Œ,å¾—æ”¹å®Œ,$2^64$?ä¸æ˜¯<code>unsigned long long</code>å—<br>åˆåŠ äº†å¸¸æ•°çš„è½¬æ¢æ“ä½œ,å¤§æ¦‚å¯ä»¥äº†</p>
<p>æ­¤æ—¶ä¸€ä¸ªåŠå°æ—¶è¿‡å»äº†â€¦</p>
<h3 id="Day1-T2"><a href="#Day1-T2" class="headerlink" title="$Day1\ T2$"></a>$Day1\ T2$</h3><p>emmmæ‹¬å·åŒ¹é…,é å‰çœ‹è¿‡ç±»ä¼¼çš„,å¥½åƒå¾—ç”¨æ ˆ<br>ä¸€é¡¿ä¹±æ,å‘ç°å®¡é”™é¢˜äº†â€¦<br>æ ‘ä¸Š??æˆ‘åº”è¯¥ä¸ä¼š,åšé“¾çš„å°æ•°æ®$35$åˆ†å¾—äº†<br>è‡ªå·±å‡ºäº†å‡ ä¸ªæ ·ä¾‹(å…¶å®æ˜¯æ²¡å‘ç°å¤§æ ·ä¾‹æœ‰é“¾ä¸Šæƒ…å†µ),ç”¨äº†$multiset,stack$ä¹±æ,éƒ½è¿‡äº†,å°±æ‰”ä¸‹å»çœ‹ç¬¬ä¸‰é¢˜äº†</p>
<h3 id="Day1-T3"><a href="#Day1-T3" class="headerlink" title="$Day1\ T3$"></a>$Day1\ T3$</h3><p>é¢˜ç›®ç»•äº†ååˆ†å¤šç§,çœ‹äº†å¥½å‡ éæ ·ä¾‹æ‰æ˜ç™½é¢˜å¹²<br>è¿™å’‹åšå•Š,æ­£è§£è‚¯å®šä¸ä¼š,é“¾å’ŒèŠèŠ±å›¾æƒ³äº†åŠä¸ªå¤šå°æ—¶æ²¡æƒ³å‡ºæ¥</p>
<p>æœ€åå‰©äºŒååˆ†é’Ÿäº†,ä¸è¿˜æ˜¯æœ‰$n!$çš„æš´åŠ›$10$åˆ†å—<br>é£é€Ÿå†™å®Œä»£ç ,ç¼–è¯‘â€¦<code>vector</code>æ²¡æœ‰???ä¸åº”è¯¥å•Š,æ”¹äº†å¥½å¤šéä¹Ÿè¿‡ä¸äº†,æ‹‰å€’,éšæœºæ•°å§â€¦éšæœºæ•°æ¦‚ç‡å¤ªå°,ä»$1\sim n$ä¾æ¬¡è¾“å‡º..</p>
<p><del>å…¶å®ç¼–è¯‘æ²¡è¿‡æ˜¯æ²¡æœ‰åŠ <code>using namespace std;</code></del></p>
<p>ä¸­åˆè€å¸ˆè¯·å®¢å»äº†å»å¹´åŒæ ·çš„é¥­åº—,ä¸‹åˆå»äº†å»å¹´åŒæ ·çš„æ¬¢ä¹åŸæ”¾æ¾<del>è‡ªæš´è‡ªå¼ƒ</del><br>$day1$ä¼°åˆ†$135$,å®Œäº†,æ˜å¤©å¾—è€ƒä¸€ç™¾å¤šåˆ†æ‰ç¨³â€¦</p>
<p>æ™šä¸Šç¡å‰åˆçœ‹äº†çœ‹ä¸€å¤©ä»€ä¹ˆæ²¡ç”¨ä¸Šçš„æ¨¡æ¿</p>
<h2 id="Day-2"><a href="#Day-2" class="headerlink" title="$Day\ \ 2$"></a>$Day\ \ 2$</h2><p>åœ¨ç­‰å€™å®¤çœ‹äº†æ ‘çš„é‡å¿ƒ,æ ‘çš„ç›´å¾„çš„æ¨¡æ¿<br>æˆ‘è·Ÿlydè¯´:æ˜¨å¤©æ²¡è€ƒ,ä»Šå¤©è‚¯å®šæœ‰</p>
<h3 id="Day2-T1"><a href="#Day2-T1" class="headerlink" title="$Day2\ T1$"></a>$Day2\ T1$</h3><p>è®¤çœŸçš„å®¡äº†é¢˜,æƒ³è¦$AC$<br>ç”»äº†æ ·ä¾‹çš„å›¾,wocäºŒåˆ†å›¾,ç½‘ç»œæµ???<br>å®Œäº†å®Œäº†,è€ƒå‰æ²¡çœ‹,æ‰”ä¸‹ä¸€ä¸ª$32$åˆ†$n!$æš´åŠ›æºœäº†</p>
<p><del>å…¶å®å·²ç»èŠ±äº†ä¸€ä¸ªå°æ—¶äº†</del></p>
<h3 id="Day2-T3"><a href="#Day2-T3" class="headerlink" title="$Day2\ T3$"></a>$Day2\ T3$</h3><p>ç¬¬äºŒé¢˜æ²¡çœ‹æ‡‚é¢˜é¢,çœ‹åˆ°ç¬¬ä¸‰é¢˜é¢˜ç›®æˆ‘å°±æ¥äº†<br>$???$è¿™ä¸ªé‡å¿ƒå®šä¹‰å’Œæˆ‘å¤ä¹ çš„ä¸ä¸€æ ·,å¤§ä½“æ€æƒ³å·®ä¸å¤š,å¼€å†™</p>
<p>æ”¹äº†æ¨¡æ¿,å†™äº†ä¸Šå»,å‘ç°åˆ†å‰²æ ‘???ä»¥å‰æ²¡åšè¿‡,åªå¥½é‡æ–°å»ºå›¾,åˆ ä¸€æ¡è¾¹å»ºä¸€æ¬¡å›¾<del>è¾£é¸¡æ•ˆç‡</del><br>è·‘å®Œ???é‡å¿ƒå…¨æ˜¯$2$,æŸ¥äº†åŠå¤©å‘ç°ä¸¤æ£µæ ‘çš„èŠ‚ç‚¹æ•°æ²¡å¤„ç†â€¦<br>æ”¹è¿‡æ¥ä¹‹åå‰å‡ ä¸ªç‚¹$25$åˆ†åº”è¯¥æ˜¯æ²¡é—®é¢˜äº†</p>
<p>ç®€å•æ¨äº†ä¸‹é“¾å’Œå®Œç¾äºŒå‰æ ‘,æ²¡æ¨å‡ºæ¥,æ”¾å¼ƒâ€¦<br>è€ƒè¯•ç»“æŸå‰ä¹Ÿæ²¡æƒ³å‡ºæ¥</p>
<h3 id="Day2-T2"><a href="#Day2-T2" class="headerlink" title="$Day2\ T2$"></a>$Day2\ T2$</h3><p>ç…§ç€æ ·ä¾‹çœ‹äº†ååˆ†é’Ÿæ‰æ˜ç™½é¢˜ç›®å•¥æ„æ€<br>æ„Ÿè§‰åº”è¯¥æ˜¯$DP$,ä½†è’Ÿè’»ä¸ä¼š$DP$å•Š<br>ç®—äº†,çå†™ä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹å§,ä¹±æâ€¦<br>å‘ç°ä¸æ˜¯æœ€ä¼˜è§£,ç„¶åå¤„ç†åˆ†å—è¿˜æœ‰è´ªå¿ƒä»€ä¹ˆçš„<br>æ”¹äº†ä¸€ä¸ªå°æ—¶è¿˜æ˜¯ä¸å¯¹,å¿ƒæƒ³ç®—äº†,çˆ†é›¶äº†,1=æ— ç¼˜äº†,åˆå›å»æ¨é“¾çš„é‡å¿ƒ</p>
<p>è€ƒè¯•ç»“æŸå‰,å‡†å¤‡æäº¤ä»£ç ,æŠŠè¿™é¢˜ä¸­é—´å‡ è¡Œæ²¡ç”¨çš„åˆ äº†åˆ (<del>åˆ å°‘äº†å‡ è¡Œ</del>),å†è·‘ä¸€é,å¥‡è¿¹èˆ¬çš„å¯¹äº†<br>æµ‹äº†ä¸€ä¸‹å‡ ä¸ªæ ·ä¾‹,$0\to 64\ \ ???$</p>
<p>ä¼°åˆ†$100+35+0+32+64+25=256$,æœ‰ç‚¹æ‚¬</p>
<p>ä¸‹åˆåˆ·æ´›è°·,<code>æ©™è“é»‘ç´«é»‘ç´«</code>â€¦ç‚¸äº†(<del>ç°åœ¨æ‰è‰²äº†</del>)<br><img src="https://i0.hdslb.com/bfs/album/cc13d523f06cd8315aed8d91a83f36d030bd0b73.jpg" alt="æ©™è“é»‘ç´«é»‘ç´«"><br>æ™šä¸Šä»è½¦ç«™å›å®¶åœ¨å¤§é›ªé‡Œæ‰“è½¦åŠä¸ªå°æ—¶,åˆ°å®¶é¢“åºŸ,ç¬¬äºŒå¤©çš„æœŸä¸­å½»åº•æ”¾å¼ƒ</p>
<h2 id="Day-3-sim-4"><a href="#Day-3-sim-4" class="headerlink" title="$Day\ \ 3\sim 4$"></a>$Day\ \ 3\sim 4$</h2><p>æœŸä¸­è€ƒè¯•<br>ç¬¬ä¸€å¤©å¼€å¹•é›·å‡»,è¯­æ–‡å¤æ–‡æ²¡èƒŒè¿‡,ä½œæ–‡ä¸»æ—‹å¾‹,ç„¶åä¸‰ç§‘ä¸€ä¸ªæœˆæ²¡å­¦çš„æ–‡ç§‘,è¿˜æœ‰ä»€ä¹ˆéƒ½æ²¡å¤ä¹ çš„è‹±è¯­</p>
<p>å›å®¶,è€å¸ˆä¼ äº†å…¬ç¤ºä»£ç ,å»$luogu$æ°‘é—´æ•°æ®è‡ªæµ‹<br>$Day1\ T2\ \ 35\to 0\ 256\to 221$ 1=æ²¡å¸Œæœ›,å½»åº•è‡ªé—­äº†,è¦$AFO$äº†</p>
<h2 id="Day-5-sim-6"><a href="#Day-5-sim-6" class="headerlink" title="$Day\ \ 5\sim 6$"></a>$Day\ \ 5\sim 6$</h2><p>ä¸­åˆå»æœºæˆ¿æŠŠä¸œè¥¿æ”¶æ‹¾åˆ°å°å±‹é‡Œ,$zty,lyd$å·¨ä½¬å·²ç»å¼€å§‹å‡†å¤‡çœé€‰<br>æœŸä¸­æˆç»©é™†ç»­å‡ºæ¥äº†,æ€»ä½“æ¥è¯´è¿˜å¯ä»¥</p>
<p>ä¸­åˆå’Œ$zty$ç”¨<a href="https://github.com/Sojiv/Project_lemon">lemon</a>æŠŠå…¨çœä»£ç æ‹¿æ°‘é—´æ•°æ®è·‘äº†ä¸€é,æ’åè¿˜å¯ä»¥,è²Œä¼¼è¿˜æœ‰å¸Œæœ›</p>
<h2 id="ç»“"><a href="#ç»“" class="headerlink" title="ç»“"></a>ç»“</h2><p>è™½ç„¶è€ƒçš„å¾ˆæ°´,ä½†å­¦$OI$æˆ‘ç»ä¸åæ‚”<br>æ¥ä¸‹æ¥è¦åŠªåŠ›æ¡èµ·æ–‡åŒ–è¯¾äº†</p>
<blockquote>
<p>æ–‡åŒ–è¯¾è™½è¯´æ¶å¿ƒï¼Œä½†åªæœ‰ä¸€å¹´ï¼Œä¸€å¹´å®Œäº†å°±èƒ½è¯»å¤§å­¦äº†ï¼Œé«˜è€ƒå°±ä¸ä½ æ— å…³äº†ã€‚ â€”$zcysky$</p>
</blockquote>
<p>åŠ æ²¹!å¥¥åˆ©ç»™!!</p>
]]></content>
      <categories>
        <category>æ¸¸è®°</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>æ¸¸è®°</tag>
        <tag>CSP-S</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œå›¾è®ºç®—æ³•ã€æ ‘ä¸Šå¹¶æŸ¥é›† dsu on tree</title>
    <url>/p/da7e0a9d.html</url>
    <content><![CDATA[<p>$dsu\ on\ tree$($disjoint\ set\ union\ \text{on tree}$)ç®—æ³•ï¼Œä¹Ÿç§° __æ ‘ä¸Šå¹¶æŸ¥é›†__ã€‚ä½¿ç”¨äº†å¹¶æŸ¥é›†çš„<em>æŒ‰ç§©åˆå¹¶</em>(<strong>å¯å‘å¼åˆå¹¶</strong>)çš„æ–¹æ³•ï¼Œç»“åˆ <em>æ ‘é“¾å‰–åˆ†</em> ä¸­çš„ <strong>è½»é‡å„¿å­åˆ’åˆ†</strong> ï¼Œå¯¹ <strong>æ ‘ä¸Šæš´åŠ›ç»Ÿè®¡</strong> è¿›è¡Œäº†ä¼˜åŒ–ã€‚ä½¿ç”¨è¿™ä¸ªç®—æ³•éœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š</p>
<span id="more"></span>

<ul>
<li>æ¯æ¬¡åªå¯¹å­æ ‘è¿›è¡ŒæŸ¥è¯¢</li>
<li>è¿‡ç¨‹ä¸­æ²¡æœ‰å¯¹æ ‘çš„ä¿®æ”¹</li>
</ul>
<p>å¯ä»¥å°†$O(n^2)$çš„æš´åŠ›æ“ä½œä¼˜åŒ–åˆ°$O(n\log_2n)$</p>
<h2 id="pre-æ ‘é“¾å‰–åˆ†-è½»é‡é“¾åˆ’åˆ†"><a href="#pre-æ ‘é“¾å‰–åˆ†-è½»é‡é“¾åˆ’åˆ†" class="headerlink" title="$pre.\ $æ ‘é“¾å‰–åˆ† - è½»é‡é“¾åˆ’åˆ†"></a>$pre.\ $æ ‘é“¾å‰–åˆ† - è½»é‡é“¾åˆ’åˆ†</h2><p>åœ¨$dsu\ on\ tree$ç®—æ³•ä¸­ï¼Œåªéœ€è¦ç»Ÿè®¡å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„<em>è½»é‡å„¿å­</em>ï¼Œè€Œä¸éœ€è¦åˆ’åˆ†è½»é‡é“¾ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ ‘é“¾å‰–åˆ†ä¸­çš„$\texttt{dfs1()}$ï¼Œå¹¶ä¸”åªä¿ç•™å’Œè½»é‡å„¿å­æœ‰å…³çš„æ“ä½œå³å¯</p>
<blockquote>
<p>å…³äº <strong>è½»é‡å„¿å­</strong> ï¼š</p>
<ul>
<li>ä¸€ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ä¸­ï¼Œå­æ ‘æ‰€å«èŠ‚ç‚¹ä¸ªæ•°æœ€å¤šçš„å­èŠ‚ç‚¹ç§°ä¸º <strong>é‡å„¿å­</strong></li>
<li>é™¤é‡å„¿å­å¤–ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„å…¶ä½™å„¿å­å‡ä¸º <strong>è½»å„¿å­</strong></li>
</ul>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">    siz[x] = <span class="number">1</span>; <span class="comment">// ä»¥xä¸ºæ ¹çš„å­æ ‘å¤§å°åˆå§‹åŒ–ä¸º1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (e.to == fa) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs1</span>(e.to, x);</span><br><span class="line">        siz[x] += siz[e.to]; <span class="comment">// åŠ ä¸Šå­èŠ‚ç‚¹çš„å¤§å°</span></span><br><span class="line">        <span class="keyword">if</span> (siz[e.to] &gt; siz[son[x]]) &#123;</span><br><span class="line">            son[x] = e.to; <span class="comment">// æ›´æ–°é‡å„¿å­</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="I-ç®—æ³•æµç¨‹"><a href="#I-ç®—æ³•æµç¨‹" class="headerlink" title="$I.\ $ç®—æ³•æµç¨‹"></a>$I.\ $ç®—æ³•æµç¨‹</h2><p>å¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹$x$:</p>
<ul>
<li>éå†æ‰€æœ‰å­èŠ‚ç‚¹<ul>
<li>é€’å½’è®¡ç®—æ‰€æœ‰è½»å„¿å­çš„å­æ ‘ï¼Œå¹¶åˆ é™¤å…¶å¯¹ç­”æ¡ˆçš„è´¡çŒ®</li>
</ul>
</li>
<li>é€’å½’è®¡ç®—é‡å„¿å­ï¼Œä¿ç•™å¯¹ç­”æ¡ˆçš„è´¡çŒ®</li>
<li>ç»Ÿè®¡æ‰€æœ‰è½»å„¿å­å¯¹ç­”æ¡ˆçš„è´¡çŒ®</li>
<li>æ›´æ–°èŠ‚ç‚¹ç­”æ¡ˆ</li>
</ul>
<p>ä¼ªä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> fa, <span class="keyword">int</span> opt)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (all edge from x) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.to == fa || e.to == son[x]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(e.to, x, <span class="number">0</span>); <span class="comment">// æš´åŠ›ç»Ÿè®¡è½»å„¿å­çš„å­æ ‘çš„è´¡çŒ®ï¼Œå¹¶åˆ é™¤(opt=0)</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (son[x]) <span class="built_in">dfs</span>(son[x], x, <span class="number">1</span>); <span class="comment">// ç»Ÿè®¡é‡å„¿å­çš„è´¡çŒ®ï¼Œä¸åˆ é™¤</span></span><br><span class="line">    <span class="built_in">upd</span>(x); <span class="comment">// æš´åŠ›ç»Ÿè®¡è¯¥èŠ‚ç‚¹æ‰€æœ‰è½»å„¿å­çš„è´¡çŒ®</span></span><br><span class="line">    ans[x] = now; <span class="comment">// æ›´æ–°ç­”æ¡ˆ</span></span><br><span class="line">    <span class="keyword">if</span> (!opt) &#123;</span><br><span class="line">        <span class="built_in">del</span>(x); <span class="comment">// åˆ é™¤éœ€è¦åˆ é™¤çš„è´¡çŒ®</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">upd</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> fa, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">solve</span>(x); <span class="comment">// è®¡ç®—å½“å‰ç­”æ¡ˆ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (e.to == fa || e.to == Son) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">upd</span>(e.to, x, val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äºæš´åŠ›ç»Ÿè®¡çš„åªæ˜¯è½»å„¿å­ï¼Œè€Œæ¯ä¸ªèŠ‚ç‚¹çš„è½»å„¿å­ä¸è¶…è¿‡$\log_2n$ä¸ªï¼Œæ‰€ä»¥æ•´ä¸ªç®—æ³•å¤æ‚åº¦ä¿è¯åœ¨äº†$O(n\log_2n)$</p>
<h2 id="II-æ¨¡æ¿é¢˜"><a href="#II-æ¨¡æ¿é¢˜" class="headerlink" title="$II.\ $æ¨¡æ¿é¢˜"></a>$II.\ $æ¨¡æ¿é¢˜</h2><p><a href="https://www.luogu.org/problemnew/solution/CF600E">$CodeForces\ 600E\ \ Lomsat\ gelral$</a> </p>
 <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to;</span><br><span class="line">    <span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v));</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[u].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, Mx, Son, col[maxn], son[maxn], siz[maxn], cnt[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> sum = <span class="number">0</span>, ans[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">    siz[x] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (e.to == fa) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs1</span>(e.to, x);</span><br><span class="line">        siz[x] += siz[e.to];</span><br><span class="line">        <span class="keyword">if</span> (siz[e.to] &gt; siz[son[x]]) &#123;</span><br><span class="line">            son[x] = e.to;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> fa, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    cnt[col[x]] += val;</span><br><span class="line">    <span class="keyword">if</span> (cnt[col[x]] &gt; Mx) &#123;</span><br><span class="line">        Mx = cnt[col[x]];</span><br><span class="line">        sum = col[x];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cnt[col[x]] == Mx) &#123;</span><br><span class="line">        sum += (<span class="keyword">long</span> <span class="keyword">long</span>)col[x];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (e.to == fa || e.to == Son) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">Add</span>(e.to, x, val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> fa, <span class="keyword">int</span> opt)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (e.to == fa) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span> (e.to != son[x]) <span class="built_in">dfs2</span>(e.to, x, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (son[x]) &#123;</span><br><span class="line">        <span class="built_in">dfs2</span>(son[x], x, <span class="number">1</span>);</span><br><span class="line">        Son = son[x];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Add</span>(x, fa, <span class="number">1</span>); Son = <span class="number">0</span>;</span><br><span class="line">    ans[x] = sum;</span><br><span class="line">    <span class="keyword">if</span> (!opt) &#123;</span><br><span class="line">        <span class="built_in">Add</span>(x, fa, <span class="number">-1</span>);</span><br><span class="line">        sum = <span class="number">0</span>, Mx = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        col[i] = <span class="built_in">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> u = <span class="built_in">read</span>(), v = <span class="built_in">read</span>();</span><br><span class="line">        <span class="built_in">add</span>(u, v); <span class="built_in">add</span>(v, u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs1</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">dfs2</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld &quot;</span>, ans[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
        <category>ç¬”è®°</category>
        <category>å›¾è®º</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
        <tag>ç¬”è®°</tag>
        <tag>å›¾è®º</tag>
        <tag>dsu on tree</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLuogu P1993ã€å°Kçš„å†œåœº-é¢˜è§£ &amp; å·®åˆ†çº¦æŸç³»ç»Ÿ</title>
    <url>/p/6dcf876e.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.org/problem/P1993">ã€ŒLuogu P1993ã€å°Kçš„å†œåœº</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å‡º$m$ä¸ªçº¦æŸæ¡ä»¶,$n$ä¸ªå†œåœº<br>æœ‰ä¸‰ç§æ¡ä»¶,å…¶ä¸­$a,b$è¡¨ç¤ºç¼–å·ä¸º$a,b$çš„å†œåœºçš„æ¤ç‰©ä¸ªæ•°</p>
<ol>
<li>$a-bâ‰¥c$</li>
<li>$a-bâ‰¤c$</li>
<li>$a=b$<br>æ±‚æ˜¯å¦å­˜åœ¨ä¸€ç§æ–¹æ¡ˆ,ä½¿å†œåœºä¸­çš„æ¤ç‰©æ•°æ»¡è¶³çº¦æŸè¦æ±‚</li>
</ol>
<h3 id="I-å·®åˆ†çº¦æŸç³»ç»Ÿ"><a href="#I-å·®åˆ†çº¦æŸç³»ç»Ÿ" class="headerlink" title="$I.$ å·®åˆ†çº¦æŸç³»ç»Ÿ"></a>$I.$ å·®åˆ†çº¦æŸç³»ç»Ÿ</h3><p>ä»¥ç¬¬$1$ç§çº¦æŸä¸ºä¾‹:<br>$$a-b\ge c\Rightarrow b\le a+(-c)$$<br>ä¸æ±‚æœ€çŸ­è·¯å¾„ä¸­çš„ä¸‰è§’å½¢ä¸ç­‰å¼$dis[e.to]\le dis[u] + e.val$ç±»ä¼¼<br>æ‰€ä»¥æˆ‘ä»¬å¯¹äºçº¦æŸæ¡ä»¶$a-b\ge c$,ä»$a$åˆ°$b$å»ºä¸€æ¡è¾¹æƒä¸º$-c$çš„è¾¹<br>åŒç†ä¸‰ç§çº¦æŸæ¡ä»¶ä¾æ¬¡ä¸º</p>
<ol>
<li>$a-b\ge c$, ä»$a$åˆ°$b$å»º$-c$å•å‘è¾¹</li>
<li>$a-b\le c$, ä»$b$åˆ°$a$å»º$c$å•å‘è¾¹</li>
<li>$a=b$, ä»$a$åˆ°$b$å»ºæƒå€¼ä¸º$0$çš„åŒå‘è¾¹</li>
</ol>
<p>å¦‚æœå­˜åœ¨ä¸€ç»„è§£${x_1, x_2, \ldots, x_n}$,åˆ™å¯¹ä»»æ„å¸¸æ•°$\Delta$, ${x_1+\Delta, x_2+\Delta, \ldots, x_n+\Delta}$ä¹Ÿæ˜¯ä¸€ç»„è§£<br>ä¸å¦¨å…ˆæ±‚ä¸€ç»„è´Ÿæ•°è§£,äºæ˜¯å°±æœ‰äº†æ¡ä»¶$x_i-x_0\le 0$<br>å³,ä»$0$å‘æ‰€æœ‰èŠ‚ç‚¹å»ºä¸€æ¡è¾¹æƒä¸º$0$çš„å•å‘è¾¹</p>
<p>æ±‚è§£æ—¶,è®¾$\mathtt{dis[0]=0}$,ç„¶åä»¥$0$ä¸ºæºç‚¹æ±‚å•æºæœ€çŸ­è·¯<br>å¦‚æœå­˜åœ¨è´Ÿç¯,åˆ™ç³»ç»Ÿæ— è§£<br>ä¸å­˜åœ¨è´Ÿç¯,åˆ™$\mathtt{dis[i]}$ä¸ºç³»ç»Ÿçš„ä¸€ç»„è§£</p>
<h3 id="II-è´Ÿç¯"><a href="#II-è´Ÿç¯" class="headerlink" title="$II.$ è´Ÿç¯"></a>$II.$ è´Ÿç¯</h3><p>å¦‚æœä»»æ„ä¸€æ¡è¾¹è¢«ä¿®æ”¹å¤§äº$n$æ¬¡(æ‰§è¡Œ$n$æ¬¡æ¾å¼›æ“ä½œ),è¿™ä¸ªå›¾å†…ä¸€å®šå­˜åœ¨è‡³å°‘ä¸€ä¸ªè´Ÿç¯<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ•°ç»„$cnt$æ¥è®°å½•æ¯æ¡è¾¹æ‰§è¡Œæ¾å¼›æ“ä½œçš„æ¬¡æ•°<br>å½“å‘é˜Ÿåˆ—ä¸­æ·»åŠ èŠ‚ç‚¹$\mathtt{e.to}$æ—¶,$\mathtt{cnt[e.to]++}$<br>ç„¶åå†åˆ¤æ–­$\mathtt{cnt[e.to]&gt;n}$,å¦‚æœè¿”å›$\mathtt{true}$åˆ™å­˜åœ¨è´Ÿç¯</p>
<h3 id="III-SPFA-çš„-SLF-ä¼˜åŒ–"><a href="#III-SPFA-çš„-SLF-ä¼˜åŒ–" class="headerlink" title="$III.$ $SPFA$çš„$SLF$ä¼˜åŒ–"></a>$III.$ $SPFA$çš„$SLF$ä¼˜åŒ–</h3><p>æœ¬é¢˜å¦‚æœç›´æ¥è·‘$SPFA$çš„è¯,ä¼š$TLE\ 3$ä¸ªç‚¹,å³ä½¿æ‰‹åŠ¨å¼€äº†$O3$ä¼˜åŒ–,è¿˜æ˜¯ä¼š$TLE\ 1$ä¸ªç‚¹<br>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨$SLF(Small\ Label\ First)$ä¼˜åŒ–</p>
<p>$SLF:$<br>å½“åŠ å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹$v$çš„æ—¶å€™</p>
<ul>
<li>å¦‚æœæ­¤æ—¶çš„$\mathtt{dis[v]}$æ¯”é˜Ÿé¦–$\mathtt{dis[q.front()]}$å°çš„è¯ï¼Œå°±æŠŠ$v$ç‚¹åŠ å…¥åˆ°é˜Ÿé¦–</li>
<li>å¦åˆ™æŠŠä»–åŠ å…¥åˆ°é˜Ÿå°¾</li>
</ul>
<p>å› ä¸ºå…ˆæ‰©å±•æœ€å°çš„ç‚¹å¯ä»¥å°½é‡ä½¿ç¨‹åºå°½æ—©çš„ç»“æŸ</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>; <span class="keyword">int</span> f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, val;</span><br><span class="line">    <span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> w): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">val</span>(w) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, w));</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[u].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> dis[maxn], vis[maxn], cnt[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SPFA</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line">    deque&lt;<span class="keyword">int</span>&gt; q; q.<span class="built_in">push_back</span>(s);</span><br><span class="line">    dis[s] = <span class="number">0</span>; vis[s] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> u = q.<span class="built_in">front</span>(); q.<span class="built_in">pop_front</span>(); vis[u] = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[u][i]];</span><br><span class="line">            <span class="keyword">if</span> (dis[e.to] &gt; dis[u] + e.val) &#123;</span><br><span class="line">                dis[e.to] = dis[u] + e.val;</span><br><span class="line">                <span class="keyword">if</span> (!vis[e.to]) &#123;</span><br><span class="line">                    vis[e.to] = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">if</span> (!q.<span class="built_in">empty</span>() &amp;&amp; dis[e.to] &lt; dis[q.<span class="built_in">front</span>()]) &#123;</span><br><span class="line">                        q.<span class="built_in">push_front</span>(e.to);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        q.<span class="built_in">push_back</span>(e.to);</span><br><span class="line">                    &#125;</span><br><span class="line">                    cnt[e.to]++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (cnt[e.to] &gt; n) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> opt = <span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> a = <span class="built_in">read</span>(), b = <span class="built_in">read</span>(), c = <span class="built_in">read</span>();</span><br><span class="line">            <span class="built_in">add</span>(a, b, -c);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (opt == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> a = <span class="built_in">read</span>(), b = <span class="built_in">read</span>(), c = <span class="built_in">read</span>();</span><br><span class="line">            <span class="built_in">add</span>(b, a, c);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> a = <span class="built_in">read</span>(), b = <span class="built_in">read</span>();</span><br><span class="line">            <span class="built_in">add</span>(a, b, <span class="number">0</span>); <span class="built_in">add</span>(b, a, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">add</span>(<span class="number">0</span>, i, <span class="number">0</span>);</span><br><span class="line">        dis[i] = inf;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="built_in">SPFA</span>(<span class="number">0</span>) ? <span class="string">&quot;Yes\n&quot;</span> : <span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 1.94s 1.61MB */</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>é¢˜è§£</tag>
        <tag>Luogu</tag>
        <tag>å›¾è®º</tag>
        <tag>å·®åˆ†çº¦æŸ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œæ•°æ®ç»“æ„ã€çº¿æ®µæ ‘</title>
    <url>/p/d1cf0d36.html</url>
    <content><![CDATA[<p>çº¿æ®µæ ‘($Segment\ Tree$)æ˜¯ä¸€ç§åŸºäºåˆ†æ²»æ€æƒ³çš„__äºŒå‰æ ‘__å½¢æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç”¨äº__åŒºé—´__ä¸Šçš„æ•°æ®ç»´æŠ¤ï¼Œå®ƒå¯ä»¥ç»´æŠ¤ä»¥ä¸‹å€¼</p>
<span id="more"></span>

<ul>
<li>$maxn\ minn$ï¼ŒåŒºé—´ä¸Šæœ€å¤§æœ€å°å€¼</li>
<li>$sum$ï¼ŒåŒºé—´å’Œ</li>
<li>$lmax$ï¼Œæ¯æ®µä¸Šæœ€å¤§å‰ç¼€å’Œ</li>
<li>$rmax$ï¼Œæ¯æ®µä¸Šæœ€å¤§åç¼€å’Œ</li>
<li>$â€¦â€¦$</li>
</ul>
<p>å’Œä»¥ä¸‹æ“ä½œ</p>
<ul>
<li>$Add\ x\ y\ k$ï¼ŒæŠŠåŒºé—´$[x,y]$å†…å…ƒç´ å€¼å…¨åŠ $k$</li>
<li>$Query\ x\ y$ï¼ŒæŸ¥è¯¢åŒºé—´$[x,y]$å†…çš„æŸä¸ªå€¼</li>
</ul>
<p>ç”±äºçº¿æ®µæ ‘ä¼šç»´æŠ¤ä¸€ç§æ•°æ®ï¼Œå…¶ä»–ä¹Ÿå¾ˆå¥½å†™ï¼Œæ‰€ä»¥æœ¬ç¯‡ä»¥__åŒºé—´å’Œ__ä¸ºä¾‹</p>
<h2 id="åŒºé—´å’Œ"><a href="#åŒºé—´å’Œ" class="headerlink" title="åŒºé—´å’Œ"></a>åŒºé—´å’Œ</h2><p>åœ¨æ¯æ¬¡$Add$æ“ä½œä¸­ï¼Œå¦‚æœå°†ç›¸å…³åŒºé—´çš„å€¼å…¨éƒ¨æ›´æ–°ï¼Œåˆ™ä¼šæŠŠæ—¶é—´å¤æ‚åº¦æé«˜åˆ°$O(n)$</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡‡å–ä¸€ç§__<em>å»¶è¿Ÿæ ‡è®°</em>__($lazy-tag$)çš„æŠ€å·§ï¼Œå¦‚æœè¢«æ ‡è®°ï¼Œåˆ™è¯´æ˜æœ¬åŒºé—´å†…çš„å€¼è¢«æ•´ä½“åŠ ä¸ŠæŸä¸ªå€¼äº†</p>
<p>è¯¦ç»†æ–¹æ³•è§ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SegmentTree</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">SegmentTreeNode</span> &#123;</span> <span class="comment">//æ ‘ä¸Šçš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">int</span> l, r;                   <span class="comment">//èŠ‚ç‚¹è¡¨ç¤ºåŒºé—´çš„å·¦å³ç«¯ç‚¹</span></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> sum, add;         <span class="comment">//åŒºé—´å’Œå’Œaddçš„å»¶è¿Ÿæ ‡è®°</span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">define</span> l(x) tree[x].l      <span class="comment">//æ–¹ä¾¿è®¿é—®</span></span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">define</span> r(x) tree[x].r</span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">define</span> sum(x) tree[x].sum</span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">define</span> add(x) tree[x].add</span></span><br><span class="line">    &#125; tree[maxn &lt;&lt; <span class="number">2</span>];</span><br><span class="line">    <span class="keyword">int</span> a[maxn], n, m;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123; <span class="comment">//å»ºæ ‘</span></span><br><span class="line">        <span class="built_in">l</span>(p) = l, <span class="built_in">r</span>(p) = r;           <span class="comment">//è®¾ç½®å·¦å³ç«¯ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (l == r) &#123; <span class="built_in">sum</span>(p) = a[l]; <span class="keyword">return</span>; &#125; <span class="comment">//åˆ°è¾¾å¶å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">build</span>(p * <span class="number">2</span>, l, mid);         <span class="comment">//é€’å½’æ„å»ºå·¦å³æ ‘</span></span><br><span class="line">        <span class="built_in">build</span>(p * <span class="number">2</span> + <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">        <span class="built_in">sum</span>(p) = <span class="built_in">sum</span>(p * <span class="number">2</span>) + <span class="built_in">sum</span>(p * <span class="number">2</span> + <span class="number">1</span>); <span class="comment">//æ›´æ–°æ•°æ®ï¼Œå¯æ”¹ä¸ºéœ€è¦ç»´æŠ¤çš„å¤šä¸ªå€¼çš„ç»´æŠ¤æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123; <span class="comment">//ä¸‹ä¼ å»¶è¿Ÿæ ‡è®°</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">add</span>(p)) &#123; <span class="comment">//å¦‚æœæœ‰æ ‡è®°</span></span><br><span class="line">            <span class="built_in">sum</span>(p * <span class="number">2</span>) += <span class="built_in">add</span>(p) * (<span class="built_in">r</span>(p * <span class="number">2</span>) - <span class="built_in">l</span>(p * <span class="number">2</span>) + <span class="number">1</span>); <span class="comment">//sumä¼ è‡³å·¦å„¿å­</span></span><br><span class="line">            <span class="built_in">sum</span>(p * <span class="number">2</span> + <span class="number">1</span>) += <span class="built_in">add</span>(p) * (<span class="built_in">r</span>(p * <span class="number">2</span> + <span class="number">1</span>) - <span class="built_in">l</span>(p * <span class="number">2</span> + <span class="number">1</span>) + <span class="number">1</span>); <span class="comment">//å³å„¿å­</span></span><br><span class="line">            <span class="built_in">add</span>(p * <span class="number">2</span>) += <span class="built_in">add</span>(p);      <span class="comment">//å»¶è¿Ÿæ ‡è®°ä¼ è‡³å·¦å„¿å­</span></span><br><span class="line">            <span class="built_in">add</span>(p * <span class="number">2</span> + <span class="number">1</span>) += <span class="built_in">add</span>(p);  <span class="comment">//å³å„¿å­</span></span><br><span class="line">            <span class="built_in">add</span>(p) = <span class="number">0</span>; <span class="comment">//æœ¬èŠ‚ç‚¹å»¶è¿Ÿæ ‡è®°æ¸…é›¶</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> d)</span> </span>&#123; <span class="comment">//æ›´æ–°åŒºé—´å†…å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (l &lt;= <span class="built_in">l</span>(p) &amp;&amp; r &gt;= <span class="built_in">r</span>(p)) &#123; <span class="comment">//å®Œå…¨è¦†ç›–</span></span><br><span class="line">            <span class="built_in">sum</span>(p) += (<span class="keyword">long</span> <span class="keyword">long</span>)d * (<span class="built_in">r</span>(p) - <span class="built_in">l</span>(p) + <span class="number">1</span>); <span class="comment">//æ›´æ–°èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line">            <span class="built_in">add</span>(p) += d; <span class="comment">//æ‰“ä¸Šå»¶è¿Ÿæ ‡è®°</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">pushdown</span>(p); <span class="comment">//ä¸‹ä¼ æ ‡è®°</span></span><br><span class="line">        <span class="keyword">int</span> mid = (<span class="built_in">l</span>(p) + <span class="built_in">r</span>(p)) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= mid) <span class="built_in">update</span>(p * <span class="number">2</span>, l, r, d);      <span class="comment">//é€’å½’æ›´æ–°å·¦å³</span></span><br><span class="line">        <span class="keyword">if</span> (r &gt;  mid) <span class="built_in">update</span>(p * <span class="number">2</span> + <span class="number">1</span>, l, r, d);</span><br><span class="line">        <span class="built_in">sum</span>(p) = <span class="built_in">sum</span>(p * <span class="number">2</span>) + <span class="built_in">sum</span>(p * <span class="number">2</span> + <span class="number">1</span>);      <span class="comment">//ç»´æŠ¤æ•°æ®</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123; <span class="comment">//æŸ¥è¯¢æ“ä½œ</span></span><br><span class="line">        <span class="keyword">if</span> (l &lt;= <span class="built_in">l</span>(p) &amp;&amp; r &gt;= <span class="built_in">r</span>(p)) <span class="keyword">return</span> <span class="built_in">sum</span>(p); <span class="comment">//å®Œå…¨è¦†ç›–</span></span><br><span class="line">        <span class="built_in">pushdown</span>(p); <span class="comment">//ä¸‹ä¼ æ ‡è®°</span></span><br><span class="line">        <span class="keyword">int</span> mid = (<span class="built_in">l</span>(p) + <span class="built_in">r</span>(p)) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= mid) ans += <span class="built_in">query</span>(p * <span class="number">2</span>, l, r);     <span class="comment">//åŠ ä¸Šå·¦å³éƒ¨åˆ†å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (r &gt;  mid) ans += <span class="built_in">query</span>(p * <span class="number">2</span> + <span class="number">1</span>, l, r);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">undef</span> add   <span class="comment">//é˜²æ­¢åç»­ä½¿ç”¨addç­‰å‡ºç°é”™è¯¯</span></span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">undef</span> sum</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">undef</span> l</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">undef</span> r</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†ä½¿ä»£ç ç®€æ´ï¼Œè¿˜å¯ä»¥å®å®šä¹‰ä¸€äº›åç§°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lt p&lt;&lt;1     <span class="comment">//å·¦å­©å­</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rt p&lt;&lt;1|1   <span class="comment">//å³å­©å­</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lson lt,l,mid    <span class="comment">//å·¦å­æ ‘</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rson rt,mid+1,r  <span class="comment">//å³å­æ ‘</span></span></span><br></pre></td></tr></table></figure>

<h2 id="Luogu-æ¨¡æ¿é¢˜ç›®"><a href="#Luogu-æ¨¡æ¿é¢˜ç›®" class="headerlink" title="$Luogu$æ¨¡æ¿é¢˜ç›®"></a>$Luogu$æ¨¡æ¿é¢˜ç›®</h2><p><a href="https://www.luogu.org/problemnew/show/P3372">Luogu P3372 çº¿æ®µæ ‘1 (åŒºé—´å¢åŠ ï¼ŒåŒºé—´æŸ¥è¯¢å’Œ)</a></p>
<p><a href="https://www.luogu.org/problemnew/show/P3373">Luogu P3373 çº¿æ®µæ ‘2 (åŒºé—´å¢åŠ ï¼ŒåŒºé—´ä¹˜æ•°ï¼ŒåŒºé—´æŸ¥è¯¢å’Œ)</a></p>
<p>$SPOJ$çš„$GSS$ç³»åˆ—</p>
<ol>
<li><a href="https://www.luogu.org/problemnew/show/SP1043">SP1043 GSS1 - Can you answer these queries I</a></li>
<li><a href="https://www.luogu.org/problemnew/show/SP1557">SP1557 GSS2 - Can you answer these queries II</a></li>
<li><a href="https://www.luogu.org/problemnew/show/SP1716">SP1716 GSS3 - Can you answer these queries III</a></li>
<li><a href="https://www.luogu.org/problemnew/show/SP2713">SP2713 GSS4 - Can you answer these queries IV</a></li>
<li><a href="https://www.luogu.org/problemnew/show/SP2916">SP2916 GSS5 - Can you answer these queries V</a></li>
<li><a href="https://www.luogu.org/problemnew/show/SP4487">SP4487 GSS6 - Can you answer these queries VI</a></li>
<li><a href="https://www.luogu.org/problemnew/show/SP6779">SP6779 GSS7 - Can you answer these queries VII</a></li>
</ol>
]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
        <category>ç¬”è®°</category>
        <category>æ•°æ®ç»“æ„</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
        <tag>ç¬”è®°</tag>
        <tag>æ•°æ®ç»“æ„</tag>
        <tag>çº¿æ®µæ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œæ•°æ®ç»“æ„ã€å·¦åæ ‘(å¯å¹¶å †)</title>
    <url>/p/7ab0d731.html</url>
    <content><![CDATA[<p>å·¦åæ ‘($Leftist\ Tree$)ï¼Œæ˜¯ä¸€ç§ __å¯ä»¥åˆå¹¶çš„å †çŠ¶ç»“æ„__ï¼Œæ”¯æŒä»¥ä¸‹æ“ä½œ</p>
<span id="more"></span>

<ul>
<li>$Pop\ x$ï¼Œåˆ é™¤èŠ‚ç‚¹$x$</li>
<li>$Merge\ x\ y$ï¼Œåˆå¹¶ä¸¤æ£µå·¦åæ ‘</li>
</ul>
<p>å¯¹äºä¸€ä¸ªå·¦åæ ‘çš„èŠ‚ç‚¹ï¼Œéœ€è¦ç»´æŠ¤ä»¥ä¸‹å€¼</p>
<ul>
<li>$dist$ï¼Œè®°å½•è¿™ä¸ªèŠ‚ç‚¹åˆ°å®ƒå­æ ‘é‡Œé¢æœ€è¿‘çš„å¶å­èŠ‚ç‚¹çš„è·ç¦»</li>
<li>$value$ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«çš„å€¼</li>
</ul>
<h2 id="æ€§è´¨"><a href="#æ€§è´¨" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h2><ul>
<li>ä¸€ä¸ªèŠ‚ç‚¹çš„$value$å¤§äº(æˆ–å°äº)å·¦å³å­©å­çš„$value$<strong><em>(å †æ€§è´¨)</em></strong> </li>
<li>ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å­©å­çš„$dist$ä¸å°äºå³å­©å­çš„$dist$<strong><em>(å·¦åæ€§è´¨)</em></strong></li>
<li>ä¸€ä¸ªèŠ‚ç‚¹çš„è·ç¦»å§‹ç»ˆç­‰äºå³å­©å­+1</li>
</ul>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="Merge-æ“ä½œ"><a href="#Merge-æ“ä½œ" class="headerlink" title="$Merge$æ“ä½œ"></a>$Merge$æ“ä½œ</h3><p>é¦–å…ˆæˆ‘ä»¬è®¾ä¸¤ä¸ªèŠ‚ç‚¹$x,y$ï¼Œ$x$çš„æ ¹èŠ‚ç‚¹çš„æƒå€¼å°äºç­‰äº$y$çš„æ ¹èŠ‚ç‚¹ï¼ˆå¦åˆ™$swap(x,y)$ï¼‰ï¼ŒæŠŠ$x$çš„æ ¹èŠ‚ç‚¹ä½œä¸ºæ–°æ ‘$Z$çš„æ ¹èŠ‚ç‚¹ï¼Œå‰©ä¸‹çš„äº‹å°±æ˜¯åˆå¹¶$x$çš„å³å­æ ‘å’Œ$y$äº†</p>
<p>åˆå¹¶äº†$x$çš„å³å­æ ‘å’Œ$y$åï¼Œ$x$å½“$x$çš„å³å­æ ‘çš„è·ç¦»å¤§äº$x$çš„å·¦å­æ ‘çš„è·ç¦»æ—¶ï¼Œä¸ºäº†ç»´æŠ¤å·¦åæ€§è´¨ï¼Œæˆ‘ä»¬è¦äº¤æ¢$x$çš„å³å­æ ‘å’Œå·¦å­æ ‘ã€‚é¡ºä¾¿ç»´æŠ¤æ€§è´¨ä¸‰ï¼Œæ‰€ä»¥ç›´æ¥$dist_x=dist_{rson(x)}+1$</p>
<h3 id="Pop-æ“ä½œ"><a href="#Pop-æ“ä½œ" class="headerlink" title="$Pop$æ“ä½œ"></a>$Pop$æ“ä½œ</h3><p>ç•¥$â€¦$</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LeftistTree</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">LeftistTreeNode</span> &#123;</span></span><br><span class="line">        <span class="keyword">int</span> dis, val, rt;</span><br><span class="line">        <span class="keyword">int</span> ls, rs;</span><br><span class="line">        <span class="meta">#<span class="meta-keyword">define</span> ls(x)  tree[x].ls</span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">define</span> rs(x)  tree[x].rs</span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">define</span> dis(x) tree[x].dis</span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">define</span> val(x) tree[x].val</span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">define</span> rt(x)  tree[x].rt</span></span><br><span class="line">    &#125;tree[maxn];</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!x || !y) <span class="keyword">return</span> x + y;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">val</span>(x) &gt; <span class="built_in">val</span>(y) || (<span class="built_in">val</span>(x) == <span class="built_in">val</span>(y) &amp;&amp; x &gt; y)) &#123;</span><br><span class="line">            <span class="built_in">swap</span>(x, y);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">rs</span>(x) = <span class="built_in">merge</span>(<span class="built_in">rs</span>(x), y);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">dis</span>(<span class="built_in">ls</span>(x)) &lt; <span class="built_in">dis</span>(<span class="built_in">rs</span>(x))) <span class="built_in">swap</span>(<span class="built_in">ls</span>(x), <span class="built_in">rs</span>(x));</span><br><span class="line">        <span class="built_in">rt</span>(<span class="built_in">ls</span>(x)) = <span class="built_in">rt</span>(<span class="built_in">rs</span>(x)) = <span class="built_in">rt</span>(x) = x;</span><br><span class="line">        <span class="built_in">dis</span>(x) = <span class="built_in">dis</span>(<span class="built_in">rs</span>(x)) + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="comment">//è·¯å¾„å‹ç¼©</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">rt</span>(x) == x ? x : <span class="built_in">rt</span>(x) = <span class="built_in">get</span>(<span class="built_in">rt</span>(x));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">val</span>(x) = <span class="number">-1</span>;</span><br><span class="line">        <span class="built_in">rt</span>(<span class="built_in">ls</span>(x)) = <span class="built_in">ls</span>(x); <span class="built_in">rt</span>(<span class="built_in">rs</span>(x)) = <span class="built_in">rs</span>(x);</span><br><span class="line">        <span class="built_in">rt</span>(x) = <span class="built_in">merge</span>(<span class="built_in">ls</span>(x), <span class="built_in">rs</span>(x));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">dis</span>(<span class="number">0</span>) = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">rt</span>(i) = i;</span><br><span class="line">            <span class="built_in">val</span>(i) = <span class="built_in">read</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SolveMerge</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">val</span>(x) == <span class="number">-1</span> || <span class="built_in">val</span>(y) == <span class="number">-1</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> fx = <span class="built_in">get</span>(x), fy = <span class="built_in">get</span>(y);</span><br><span class="line">        <span class="keyword">if</span> (fx != fy) &#123;</span><br><span class="line">            <span class="built_in">rt</span>(fx) = <span class="built_in">rt</span>(fy) = <span class="built_in">merge</span>(fx, fy);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SolvePop</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">val</span>(x) == <span class="number">-1</span>) <span class="built_in">puts</span>(<span class="string">&quot;-1&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">val</span>(<span class="built_in">get</span>(x))), <span class="built_in">pop</span>(<span class="built_in">get</span>(x));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="Luogu-æ¨¡æ¿é¢˜ç›®"><a href="#Luogu-æ¨¡æ¿é¢˜ç›®" class="headerlink" title="$Luogu$æ¨¡æ¿é¢˜ç›®"></a>$Luogu$æ¨¡æ¿é¢˜ç›®</h2><p><a href="https://www.luogu.org/problemnew/show/P3377">Luogu P3377 å·¦åæ ‘(å¯å¹¶å †)</a></p>
]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
        <category>ç¬”è®°</category>
        <category>æ•°æ®ç»“æ„</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
        <tag>ç¬”è®°</tag>
        <tag>æ•°æ®ç»“æ„</tag>
        <tag>å·¦åæ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œæ•°æ®ç»“æ„ã€æ ‘çŠ¶æ•°ç»„</title>
    <url>/p/8c13697e.html</url>
    <content><![CDATA[<p>æ ‘çŠ¶æ•°ç»„($Binary\ Indexed\ Trees$)æ˜¯ä¸€ä¸ªç»´æŠ¤__å‰ç¼€å’Œ__çš„æ•°æ®ç»“æ„ï¼Œéœ€è¦æ”¯æŒä»¥ä¸‹æ“ä½œ</p>
<span id="more"></span>

<ul>
<li>$Add\ x\ y$ï¼Œå•ç‚¹å¢åŠ ï¼Œ<code>a[x] += y</code></li>
<li>$Query\ x$ï¼ŒæŸ¥è¯¢å‰ç¼€å’Œ</li>
</ul>
<h2 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h2><h3 id="lowbit-è¿ç®—"><a href="#lowbit-è¿ç®—" class="headerlink" title="$lowbit$è¿ç®—"></a>$lowbit$è¿ç®—</h3><p>$lowbit(n)$è¡¨ç¤ºéè´Ÿæ•´æ•°$n$åœ¨äºŒè¿›åˆ¶è¡¨ç¤ºä¸‹__æœ€ä½ä½çš„1åŠå…¶åè¾¹æ‰€æœ‰çš„0æ„æˆçš„æ•°å€¼__</p>
<p>ä¸ºäº†å®ç°$lowbit$è¿ç®—ï¼Œå…ˆæŠŠ$n$å–åï¼Œæ­¤æ—¶ç¬¬$k$ä½å˜ä¸º$0$(è®¾ç¬¬$k$ä½æ˜¯$1$ï¼Œå…¶åå‡ä¸º$0$)ï¼Œç¬¬$0\sim k-1$ä½å˜ä¸º$1$ï¼Œå†æ•´ä½“åŠ ä¸€ï¼Œæ‰€ä»¥ç¬¬$k$ä½å˜ä¸º$1$ï¼Œå…¶åä¸º$0$ï¼Œå…¶å‰æ¯ä½æ°å¥½ä¸åŸæ•°ç›¸åï¼Œå†æŒ‰ä½æ±‚ä¸($&amp;$)å³å¯å¾—åˆ°ã€‚ç”±äºåœ¨è¡¥ç ä¸‹ï¼Œ$\sim n=-1-n$ï¼Œæ‰€ä»¥</p>
<p>$$lowbit(n)=n\ &amp;\  (\sim n+1)=n\ &amp;\ -n$$</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123; <span class="keyword">return</span> n &amp; -n; &#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h2><p>å¯¹äºä¸€ä¸ªåŸåºåˆ—$a[]$ï¼Œå¯ä»¥å»ºç«‹ä¸€ä¸ªæ•°ç»„$tree[]$ï¼Œæ¥ä¿å­˜$a$çš„åŒºé—´$[x-lowbit(x)+1, x]$å†…å€¼çš„å’Œï¼Œå³</p>
<p>$$tree[x] = \sum_{i=x-lowbit(x)+1}^x{a[i]}$$</p>
<p>åŒæ—¶$tree$æ•°ç»„å¯ä»¥çœ‹æˆä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œå¹¶æ»¡è¶³ä»¥ä¸‹æ€§è´¨</p>
<ul>
<li>æ¯ä¸ªèŠ‚ç‚¹$tree[x]$ä¿å­˜ä»¥$x$ä¸ºæ ¹çš„å­æ ‘ä¸­æ‰€æœ‰å¶èŠ‚ç‚¹çš„å’Œ</li>
<li>æ¯ä¸ªèŠ‚ç‚¹$tree[x]$çš„å­èŠ‚ç‚¹ä¸ªæ•°ç­‰äº$lowbit(x)$çš„ä½æ•°</li>
<li>é™¤æ ‘æ ¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹$tree[x]$çš„çˆ¶äº²èŠ‚ç‚¹ä¸º$tree[x+lowbit(x)]$</li>
<li>æ ‘çš„æ·±åº¦ä¸º$\log_2n$</li>
</ul>
<p>æ ¹æ®è¿™äº›æ€§è´¨ï¼Œå°±<del>å¾ˆå®¹æ˜“åœ°</del>å†™å‡ºä»£ç </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BIT</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> tree[maxn], n, m;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123; <span class="keyword">return</span> k &amp; -k; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (; x &lt;= maxn; x += x &amp; -x) tree[x] += y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (; x; x -= x &amp; -x) ans += tree[x];</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">			<span class="built_in">add</span>(i, a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å®é™…ä¸Šï¼Œæ ‘çŠ¶æ•°ç»„å¯ä»¥åµŒå¥—ç»´æŠ¤ï¼Œæ¥è§£å†³æ›´å¤šé—®é¢˜ï¼Œä¾‹å¦‚åŒºé—´ä¿®æ”¹</p>
<h2 id="Luogu-æ¨¡æ¿é¢˜ç›®"><a href="#Luogu-æ¨¡æ¿é¢˜ç›®" class="headerlink" title="$Luogu$æ¨¡æ¿é¢˜ç›®"></a>$Luogu$æ¨¡æ¿é¢˜ç›®</h2><p><a href="https://www.luogu.org/problemnew/show/P3374">Luogu P3374 æ ‘çŠ¶æ•°ç»„1 (å•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢)</a></p>
<p><a href="https://www.luogu.org/problemnew/show/P3368">Luogu P3368 æ ‘çŠ¶æ•°ç»„2 (åŒºé—´ä¿®æ”¹ï¼Œå•ç‚¹æŸ¥è¯¢)</a></p>
<p><a href="https://www.luogu.org/problemnew/show/P3372">Luogu P3372 çº¿æ®µæ ‘1 (åŒºé—´ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢)</a></p>
]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
        <category>ç¬”è®°</category>
        <category>æ•°æ®ç»“æ„</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
        <tag>ç¬”è®°</tag>
        <tag>æ•°æ®ç»“æ„</tag>
        <tag>æ ‘çŠ¶æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œæ•°æ®ç»“æ„ã€å¹¶æŸ¥é›†</title>
    <url>/p/9c4b8ceb.html</url>
    <content><![CDATA[<p>å¹¶æŸ¥é›†($union-find\ \ set$)æ˜¯ä¸€ç§å¯ä»¥__åŠ¨æ€ç»´æŠ¤__è‹¥å¹²ä¸ªä¸é‡å çš„__é›†åˆ__ï¼Œå¹¶æ”¯æŒ__åˆå¹¶ä¸æŸ¥è¯¢__çš„æ•°æ®ç»“æ„ï¼Œæ”¯æŒä»¥ä¸‹ä¸¤ç§åŸºæœ¬æ“ä½œï¼š</p>
<span id="more"></span>

<ul>
<li>$Find$ï¼ŒæŸ¥è¯¢ä¸€ä¸ªå…ƒç´ å±äºå“ªä¸ªé›†åˆ(å³æŸ¥æ‰¾æ ¹)</li>
<li>$Union$ï¼ŒæŠŠä¸¤ä¸ªé›†åˆåˆå¹¶æˆä¸€ä¸ªé›†åˆ</li>
</ul>
<h2 id="åŸºæœ¬å®ç°"><a href="#åŸºæœ¬å®ç°" class="headerlink" title="åŸºæœ¬å®ç°"></a>åŸºæœ¬å®ç°</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ ‘å½¢ç»“æ„å­˜å‚¨é›†åˆï¼Œæ ‘ä¸Šæ¯ä¸ªç‚¹è¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼Œæ ‘æ ¹å¯ä»¥ä»£è¡¨è¿™ä¸ªé›†åˆ</p>
<p>ä½¿ç”¨ä¸€ä¸ªæ•°ç»„<code>ufs[]</code>æ¥ä¿å­˜æ¯ä¸ªèŠ‚ç‚¹çš„çˆ¶äº²èŠ‚ç‚¹</p>
<p>åˆ™åˆå¹¶$x,y$æ‰€åœ¨çš„é›†åˆå¯ä»¥è¡¨ç¤ºä¸º$ufs[root_x]=root_y$</p>
<p>æŸ¥æ‰¾æ ¹èŠ‚ç‚¹å¯ä»¥ä¸€ç›´æ²¿ç€æ•°ç»„å‘ä¸ŠæŸ¥æ‰¾</p>
<h3 id="è·¯å¾„å‹ç¼©"><a href="#è·¯å¾„å‹ç¼©" class="headerlink" title="è·¯å¾„å‹ç¼©"></a>è·¯å¾„å‹ç¼©</h3><p>é˜²æ­¢æ•´æ£µæ ‘çš„é“¾éå¸¸é•¿ï¼Œå¯¼è‡´æ¯æ¬¡æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦æé«˜ï¼Œå¯ä»¥åœ¨__æ¯æ¬¡æ‰§è¡Œ$Find$æ“ä½œæ—¶ï¼ŒæŠŠè®¿é—®çš„èŠ‚ç‚¹æŒ‡å‘æ ¹èŠ‚ç‚¹__ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸º__<em>è·¯å¾„å‹ç¼©</em>__ï¼Œ$Find$æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º$O(log_2n)$</p>
<p>$Code\ Below:$</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> ufs[maxn];</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–ï¼Œæ¯ä¸ªç‚¹ç‹¬ç«‹(è‡ªå·±æ˜¯è‡ªå·±çš„æ ¹)</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) ufs[i] = i;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Findæ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x == ufs[x] ? x : ufs[x] = <span class="built_in">find</span>(ufs[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//unionæ“ä½œ(æ³¨æ„unionæ˜¯C++å…³é”®å­—)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unionn</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">	ufs[<span class="built_in">get</span>(x)] = <span class="built_in">get</span>(y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¸¦æƒå¹¶æŸ¥é›†"><a href="#å¸¦æƒå¹¶æŸ¥é›†" class="headerlink" title="å¸¦æƒå¹¶æŸ¥é›†"></a>å¸¦æƒå¹¶æŸ¥é›†</h2><p>æœ‰æ—¶ï¼Œéœ€è¦ç»´æŠ¤çš„æ¯ä¸ªèŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„è¾¹æƒå€¼ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªæ•°ç»„<code>d[]</code>æ¥ä¿å­˜æƒå€¼ï¼Œå¯¹äºä¸¤ä¸ªæ“ä½œä¹Ÿæœ‰æ‰€æ›´æ”¹</p>
<p>å†å¢åŠ ä¸€ä¸ªæ•°ç»„<code>size[]</code>è®°å½•æ¯ä¸ªæ ‘æ ¹ä¸Šé›†åˆå¤§å°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Find</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (ufs[x] == x) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">int</span> fx = <span class="built_in">find</span>(ufs[x]);</span><br><span class="line">    d[x] += d[ufs[x]];</span><br><span class="line">    <span class="keyword">return</span> ufs[x] = fx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//union</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> fx = <span class="built_in">find</span>(x), fy = <span class="built_in">find</span>(y);</span><br><span class="line">    ufs[fx] = fy; d[fx] = size[fy];</span><br><span class="line">    size[fy] += size[fx];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¯æ’¤é”€å¹¶æŸ¥é›†"><a href="#å¯æ’¤é”€å¹¶æŸ¥é›†" class="headerlink" title="å¯æ’¤é”€å¹¶æŸ¥é›†"></a>å¯æ’¤é”€å¹¶æŸ¥é›†</h2><p>å¯èƒ½éœ€è¦ç»´æŠ¤ä¸€ä¸ªå¹¶æŸ¥é›†å¹¶è¦æ±‚å¯ä»¥__æ’¤é”€__ä¸¤èŠ‚ç‚¹çš„è¿æ¥å…³ç³»</p>
<p>æˆ‘ä»¬å¯ä»¥å¯¹æ¯ä¸ªæ“ä½œ$(u, v)$æ‰§è¡Œå‰ï¼ŒæŠŠèŠ‚ç‚¹$u$æ¢ä¸ºæ ‘æ ¹(<del>ä¸éš¾å‘ç°</del>ï¼Œ$ufs[]$å˜åŒ–çš„åªæœ‰ä»$u$åˆ°åŸèŠ‚ç‚¹çš„ä¸€æ¡é“¾ä¸Š)</p>
<p>ç„¶åå¯¹äºæ“ä½œ</p>
<ul>
<li>$Connect\ u\ v$ï¼Œéœ€è¦æŠŠ$u$çš„çˆ¶äº²èŠ‚ç‚¹è®¾ä¸º$v$</li>
<li>$Delete\ u\ v$ï¼Œå¯ä»¥æŠŠ$v$çš„çˆ¶äº²èŠ‚ç‚¹è®¾ä¸º$0$</li>
<li>$Query\ u\ v$ï¼Œç›´æ¥æš´åŠ›æœç´¢$v$æ‰€åœ¨çš„é“¾å³å¯</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">UnionFindSet</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> ufs[maxn];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            ufs[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">sroot</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123; <span class="comment">//æ¢uä¸ºæ ¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, fa = ufs[u]; u; fa = ufs[u]) &#123;</span><br><span class="line">            ufs[u] = i; i = u; u = fa;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">        ufs[u] = v;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteuv</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">        ufs[v] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (; v != u &amp;&amp; v; v = ufs[v]);</span><br><span class="line">        <span class="built_in">puts</span>(v == u ? <span class="string">&quot;Yes&quot;</span> : <span class="string">&quot;No&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="Luogu-æ¨¡æ¿é¢˜ç›®"><a href="#Luogu-æ¨¡æ¿é¢˜ç›®" class="headerlink" title="$Luogu$æ¨¡æ¿é¢˜ç›®"></a>$Luogu$æ¨¡æ¿é¢˜ç›®</h2><p><a href="https://www.luogu.org/problemnew/show/P3367">Luogu P3367 å¹¶æŸ¥é›† (æ™®é€šå¹¶æŸ¥é›†)</a></p>
<p><a href="https://www.luogu.org/problemnew/show/P1196">Luogu P1196 é“¶æ²³è‹±é›„ä¼ è¯´ (å¸¦æƒå¹¶æŸ¥é›†)</a></p>
<p><a href="https://www.luogu.org/problemnew/show/P2147">Luogu P2147 æ´ç©´å‹˜æ¢ (å¯æ’¤é”€å¹¶æŸ¥é›†)</a></p>
]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
        <category>ç¬”è®°</category>
        <category>æ•°æ®ç»“æ„</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
        <tag>ç¬”è®°</tag>
        <tag>æ•°æ®ç»“æ„</tag>
        <tag>å¹¶æŸ¥é›†</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLuogu P2723 P1631 P2850ã€å°ç»ƒä¹ -é¢˜è§£</title>
    <url>/p/1faf5003.html</url>
    <content><![CDATA[<p>æˆ˜ç¥ç•™çš„è¿˜æœ‰ä¸€é“<a href="https://www.luogu.org/problemnew/show/P3378">ã€ŒP3378ã€å †</a>,ä½†æ˜¯æ˜¯æ¨¡æ¿,å°±ä¸ç”¨å¤šè¯´äº†å§</p>
<span id="more"></span>

<h2 id="mathcal-ã€ŒP2723ã€-ä¸‘æ•°"><a href="#mathcal-ã€ŒP2723ã€-ä¸‘æ•°" class="headerlink" title="$\mathcal{ã€ŒP2723ã€}$ ä¸‘æ•°"></a>$\mathcal{ã€ŒP2723ã€}$ <a href="https://www.luogu.org/problemnew/show/P2723">ä¸‘æ•°</a></h2><h3 id="92-åˆ†-STL-åšæ³•"><a href="#92-åˆ†-STL-åšæ³•" class="headerlink" title="$92$åˆ†$STL$åšæ³•"></a>$92$åˆ†$STL$åšæ³•</h3><p>æ€è·¯å¾ˆç®€å•,æ¯æ¬¡å¼¹å‡ºå †é¡¶,ä¾æ¬¡ä¹˜$S$é›†åˆå†…çš„æ•°,å†å‹å…¥ä¼˜å…ˆé˜Ÿåˆ—($priority\_queue$)å’Œé›†åˆ($set$,ç›®çš„æ˜¯å»é‡)ä¸­,è¾“å‡ºæœ€åä¸€ä¸ªå †é¡¶å³å¯<br>ç„¶è€Œç¬¬$4$ä¸ªç‚¹å¡äº†åå¤šç§’,$92$åˆ†</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxk = <span class="number">110</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> k, n, a[maxk], i, t;</span><br><span class="line">priority_queue&lt;<span class="keyword">long</span> <span class="keyword">long</span>, vector&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;, greater&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; &gt; q;</span><br><span class="line">set&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld %lld&quot;</span>, &amp;k, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">1</span>; i &lt;= k; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    q.<span class="built_in">push</span>(<span class="number">1</span>); s.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span> (i++ &lt;= n) &#123;</span><br><span class="line">        t = q.<span class="built_in">top</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> j = <span class="number">1</span>; j &lt;= k; ++j) &#123;</span><br><span class="line">            <span class="keyword">long</span> <span class="keyword">long</span> num = t * a[j];</span><br><span class="line">            <span class="keyword">if</span> (!s.<span class="built_in">count</span>(num)) &#123;</span><br><span class="line">                s.<span class="built_in">insert</span>(num);</span><br><span class="line">                q.<span class="built_in">push</span>(num);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, t);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 92points TLE with O2 */</span></span><br></pre></td></tr></table></figure>

<h3 id="100-åˆ†å¾ªç¯åšæ³•"><a href="#100-åˆ†å¾ªç¯åšæ³•" class="headerlink" title="$100$åˆ†å¾ªç¯åšæ³•"></a>$100$åˆ†å¾ªç¯åšæ³•</h3><h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>ç”±é¢˜å¯çŸ¥,å½“å‰äº§ç”Ÿçš„ç¬¬$i$ä¸ªä¸‘æ•°$s[i]$,æ˜¯ä¹‹å‰çš„æŸä¸ªä¸‘æ•°$\times a[j]$<br>æŸä¸ªä¸‘æ•°$\times a[j]$éœ€è¦å¤§äº$s[i-1]$,è€Œä¸”è¦å°½å¯èƒ½çš„å°<br>äºæ˜¯æˆ‘ä»¬å¯ä»¥æšä¸¾$j$,ç„¶åæ‰¾åˆ°æœ€å°çš„ä¸€ä¸ªä¸‘æ•°$minn$ä½¿$minn\times a[j]&gt;s[i-1]$</p>
<p><strong>ä½†æ˜¯..ä¸‰é‡å¾ªç¯å¯èƒ½è¿˜ä¼š$TLE$</strong></p>
<p>å¾ˆå®¹æ˜“å‘ç°æ»¡è¶³æ¡ä»¶çš„ä¸‘æ•°$x\times a[j]&gt;s[i-1]$,ä¸€å®šæ»¡è¶³æ¡ä»¶$x\times a[j]&gt;s[i-2]$<br>äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥ä»æ»¡è¶³$x\times a[j]&gt;s[i-2]$çš„ä¸‘æ•°$x$çš„ä½ç½®å¾€åæšä¸¾,æ‰¾åˆ°æ»¡è¶³æ¡ä»¶$x\times a[j]&gt;s[i-1]$çš„ä¸‘æ•°<br>ä»£ç é‡Œ$b[j]$è¡¨ç¤º$a[j]$è‡³å°‘ä¸ç¬¬å‡ å°ä¸‘æ•°ç›¸ä¹˜æ‰èƒ½å¾—åˆ°ä¸€ä¸ªæ¯”$s[i-1]$å¤§çš„ä¸‘æ•°</p>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxk = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> k, n, a[maxk], i, t, s[maxn], b[maxk];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld %lld&quot;</span>, &amp;k, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">1</span>; i &lt;= k; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    s[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> minn = (<span class="keyword">long</span> <span class="keyword">long</span>)<span class="number">1</span> &lt;&lt; <span class="number">61</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> j = <span class="number">1</span>; j &lt;= k; ++j) &#123;</span><br><span class="line">            <span class="keyword">while</span> (a[j] * s[b[j]] &lt;= s[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                b[j]++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (a[j] * s[b[j]] &lt; minn) &#123;</span><br><span class="line">                minn = a[j] * s[b[j]];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        s[i] = minn;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, s[n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 101ms 1584kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="mathcal-ã€ŒP1631ã€-åºåˆ—åˆå¹¶"><a href="#mathcal-ã€ŒP1631ã€-åºåˆ—åˆå¹¶" class="headerlink" title="$\mathcal{ã€ŒP1631ã€}$ åºåˆ—åˆå¹¶"></a>$\mathcal{ã€ŒP1631ã€}$ <a href="https://www.luogu.org/problemnew/show/P1631">åºåˆ—åˆå¹¶</a></h2><h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å‚è€ƒ<a href="https://www.luogu.org/blog/user23845/solution-p1631">Red_w1nE</a></p>
<p>æŠŠ$A$å’Œ$B$ä¸¤ä¸ªåºåˆ—åˆ†åˆ«ä»å°åˆ°å¤§æ’åº<br>è¿™æ ·,ä»$A$å’Œ$B$ä¸­å„ä»»å–ä¸€ä¸ªæ•°ç›¸åŠ å¾—åˆ°$n^2$ä¸ªå’Œ,å¯ä»¥æŠŠè¿™äº›å’Œçœ‹æˆå½¢æˆäº†$n$ä¸ªé˜Ÿåˆ—:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">a[<span class="number">1</span>] + b[<span class="number">1</span>] &lt;= a[<span class="number">1</span>] + b[<span class="number">2</span>] &lt;= ... &lt;= a[<span class="number">1</span>] + B[n]</span><br><span class="line">a[<span class="number">2</span>] + b[<span class="number">1</span>] &lt;= a[<span class="number">2</span>] + b[<span class="number">2</span>] &lt;= ... &lt;= a[<span class="number">2</span>] + B[n]</span><br><span class="line">    ...            ...        ...        ...</span><br><span class="line">a[n] + b[<span class="number">1</span>] &lt;= a[n] + b[<span class="number">2</span>] &lt;= ... &lt;= a[n] + B[n]</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥,å°†è¿™$n$ä¸ªé˜Ÿåˆ—è¿›è¡Œåˆå¹¶:</p>
<ul>
<li>å°†è¿™$n$ä¸ªé˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ”¾å…¥ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼›</li>
<li>æ¯æ¬¡å–å‡ºä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„æœ€å°å€¼,è‹¥è¿™ä¸ªæœ€å°å€¼æ¥è‡ªäºç¬¬$k$ä¸ªé˜Ÿåˆ—,é‚£ä¹ˆ,å°±å°†ç¬¬$k$ä¸ªé˜Ÿåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ æ”¾å…¥ä¼˜å…ˆé˜Ÿåˆ—ä¸­ã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç»“æ„ä½“æ¥è®°å½•é˜Ÿåˆ—ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼<code>val</code>,é˜Ÿåˆ—å·<code>id</code>,ä¸‹ä¸€ä¸ªå…ƒç´ <code>nxt</code></li>
</ul>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> val, id, nxt;</span><br><span class="line">    <span class="built_in">Node</span>(<span class="keyword">int</span> v, <span class="keyword">int</span> i, <span class="keyword">int</span> n): <span class="built_in">val</span>(v), <span class="built_in">id</span>(i), <span class="built_in">nxt</span>(n) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node&amp; a, <span class="keyword">const</span> Node&amp; b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a.val &gt; b.val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, a[maxn], b[maxn];</span><br><span class="line">priority_queue&lt;Node&gt; q;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;b[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        q.<span class="built_in">push</span>(<span class="built_in">Node</span>( a[i] + b[<span class="number">0</span>], i, <span class="number">1</span> ));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        Node t = q.<span class="built_in">top</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, t.val);</span><br><span class="line">        q.<span class="built_in">push</span>(<span class="built_in">Node</span>( a[t.id] + b[t.nxt], t.id, t.nxt + <span class="number">1</span> ));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 402ms 3196kB */</span></span><br></pre></td></tr></table></figure>


<h2 id="mathcal-ã€ŒP2850ã€-è™«æ´"><a href="#mathcal-ã€ŒP2850ã€-è™«æ´" class="headerlink" title="$\mathcal{ã€ŒP2850ã€}$ è™«æ´"></a>$\mathcal{ã€ŒP2850ã€}$ <a href="https://www.luogu.org/problemnew/show/P2850">è™«æ´</a></h2><h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>åˆ¤æ–­__<em>è´Ÿç¯</em>__çš„æ¨¡æ¿é¢˜</p>
<p>æ¯æ¡å°è·¯è¿æ¥è¾¹æƒä¸ºæ­£çš„æ— å‘è¾¹,æ¯ä¸ªè™«æ´è¿æ¥è¾¹æƒä¸ºè´Ÿçš„æ— å‘è¾¹<br>å­˜åœ¨è´Ÿç¯,åˆ™å¯ä»¥å›åˆ°è¿‡å»<br>ä½¿ç”¨$SPFA$ç®—æ³•åˆ¤æ–­è´Ÿç¯($Floyd$ä¹Ÿå¯ä»¥,ä½†ä¸å¼€O2ä¼˜åŒ–ä¼š$TLE$)</p>
<p>$SPFA$åˆ¤æ–­è´Ÿç¯:<strong>å¦‚æœä»»æ„ä¸€æ¡è¾¹è¢«ä¿®æ”¹å¤§äº$n$æ¬¡,è¿™ä¸ªå›¾å†…ä¸€å®šå­˜åœ¨è‡³å°‘ä¸€ä¸ªè´Ÿç¯</strong></p>
<h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>ä½¿ç”¨<code>vector</code>å»ºè¾¹,é‚»æ¥è¡¨ä¹Ÿå¯ä»¥</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">510</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, val;</span><br><span class="line">    <span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> w): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">val</span>(w) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, w));</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[u].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dist[maxn], vis[maxn], cnt[maxn];</span><br><span class="line"><span class="keyword">int</span> n, m, w;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SPFA</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(s);</span><br><span class="line">    dist[s] = <span class="number">0</span>; vis[s] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> u = q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">        vis[u] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[u][i]];</span><br><span class="line">            <span class="keyword">if</span> (dist[e.to] &gt; dist[u] + e.val) &#123;</span><br><span class="line">                dist[e.to] = dist[u] + e.val;</span><br><span class="line">                <span class="keyword">if</span> (!vis[e.to]) &#123;</span><br><span class="line">                    vis[e.to] = <span class="number">1</span>;</span><br><span class="line">                    q.<span class="built_in">push</span>(e.to);</span><br><span class="line">                    cnt[e.to]++;  <span class="comment">//ç»Ÿè®¡ä¿®æ”¹æ¬¡æ•°</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (cnt[e.to] &gt; n) &#123; <span class="comment">//ä¿®æ”¹å¤§äºnæ¬¡</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;     <span class="comment">//å­˜åœ¨è´Ÿç¯</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn - <span class="number">5</span>; ++i) &#123;</span><br><span class="line">        G[i].<span class="built_in">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(cnt, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cnt));</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x7f</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dist));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="built_in">clear</span>();</span><br><span class="line">        n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>(); w = <span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> u = <span class="built_in">read</span>(), v = <span class="built_in">read</span>(), d = <span class="built_in">read</span>();</span><br><span class="line">            <span class="built_in">add</span>(u, v, d); <span class="built_in">add</span>(v, u, d);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; w; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> u = <span class="built_in">read</span>(), v = <span class="built_in">read</span>(), d = <span class="built_in">read</span>();</span><br><span class="line">            <span class="built_in">add</span>(u, v, -d);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">SPFA</span>(<span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;YES\n&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;NO\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 164ms 1024kB */</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong><em>å¦‚æœ‰ç–‘é—®,å¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€</em></strong></p>
]]></content>
      <categories>
        <category>é¢˜è§£</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>é¢˜è§£</tag>
        <tag>Luogu</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®—æ³•ç¬”è®°-æ•°è®º</title>
    <url>/p/da9a11f.html</url>
    <content><![CDATA[<p>æ¨¡æ¿åœ°å€: <a href="https://github.com/Tony031218/luogu/blob/master/Mathematics.cpp">GitHub</a></p>
<h2 id="æ¬§å‡ é‡Œå¾—ç®—æ³•-Euclid-algorithm"><a href="#æ¬§å‡ é‡Œå¾—ç®—æ³•-Euclid-algorithm" class="headerlink" title="æ¬§å‡ é‡Œå¾—ç®—æ³•(Euclid algorithm)"></a>æ¬§å‡ é‡Œå¾—ç®—æ³•(Euclid algorithm)</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">LL <span class="title">gcd</span><span class="params">(LL a, LL b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b == <span class="number">0</span> ? a : <span class="built_in">gcd</span>(b, a % b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>lcm(a, b) = a / gcd(a, b) * b</code></p>
<h3 id="æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•-exGCD"><a href="#æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•-exGCD" class="headerlink" title="æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•(exGCD)"></a>æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•(exGCD)</h3><p><strong><em>ç›®æ ‡</em></strong>: å¯»æ‰¾ä¸€å¯¹æ•´æ•°$(x, y)$,ä½¿$ax+by=gcd(a,b)$</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exgcd</span><span class="params">(LL a, LL b, LL&amp; d, LL&amp; x, LL&amp; y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!b) &#123; d = a; x = <span class="number">1</span>; y = <span class="number">0</span>; &#125;  <span class="comment">//dä¸ºgcd(a, b)</span></span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="built_in">exgcd</span>(b, a % b, d, y, x); y -= x * (a / b); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è£´èœ€å®šç†"><a href="#è£´èœ€å®šç†" class="headerlink" title="è£´èœ€å®šç†"></a>è£´èœ€å®šç†</h4><p>$ax+by=c$ä¸”$x,y$å…¨ä¸ºæ­£æ•´æ•°,åˆ™å½“ä¸”ä»…å½“$gcd(a, b)|c$</p>
<h2 id="ç´ æ•°ç›¸å…³"><a href="#ç´ æ•°ç›¸å…³" class="headerlink" title="ç´ æ•°ç›¸å…³"></a>ç´ æ•°ç›¸å…³</h2><h3 id="Eratosthenesç­›æ³•"><a href="#Eratosthenesç­›æ³•" class="headerlink" title="Eratosthenesç­›æ³•"></a>Eratosthenesç­›æ³•</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="keyword">int</span> prime[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getprime</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m = (<span class="keyword">int</span>)<span class="built_in">sqrt</span>(n + <span class="number">0.5</span>), num = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    vis[<span class="number">0</span>] = vis[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= m; ++i) <span class="keyword">if</span> (!vis[i]) &#123;</span><br><span class="line">        prime[++num] = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i * i; j &lt;= n; j += i) vis[j] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ¬§æ‹‰çº¿æ€§ç­›"><a href="#æ¬§æ‹‰çº¿æ€§ç­›" class="headerlink" title="æ¬§æ‹‰çº¿æ€§ç­›"></a>æ¬§æ‹‰çº¿æ€§ç­›</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getprime</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    vis[<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!vis[i]) &#123;</span><br><span class="line">            prime[++cnt] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cnt; j++) &#123;</span><br><span class="line">            <span class="keyword">int</span> v = i * prime[j];</span><br><span class="line">            <span class="keyword">if</span> (v &gt; n) <span class="keyword">break</span>;</span><br><span class="line">            vis[v] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç´ æ•°å®šç†"><a href="#ç´ æ•°å®šç†" class="headerlink" title="ç´ æ•°å®šç†"></a>ç´ æ•°å®šç†</h3><p>$$<br>\pi(x) \sim \frac{x}{\ln x}<br>$$</p>
<h3 id="Miller-Rabin-ç´ æ•°æµ‹è¯•"><a href="#Miller-Rabin-ç´ æ•°æµ‹è¯•" class="headerlink" title="$Miller-Rabin$ç´ æ•°æµ‹è¯•"></a>$Miller-Rabin$ç´ æ•°æµ‹è¯•</h3><p><strong><em>åŸç†</em></strong>:è´¹é©¬å°å®šç†<br>è‹¥$a^{n-1}\equiv 1\pmod n$,$a$å–å€¼è¶Šå¤š,å¯ä»¥è¿‘ä¼¼è®¤ä¸º$n$ä¸ºè´¨æ•°<br>ä½¿ç”¨äºŒæ¬¡æ¢æµ‹å®šç†æ”¹è¿›å¡å¡è¿ˆå°”æ•°(åˆæ•°$n$å¯¹äºä»»ä½•æ­£æ•´æ•°$b$,éƒ½æ»¡è¶³$gcd(b, n)=1\ \ b^{n-1}\equiv 1\pmod n$)çš„bug</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">LL <span class="title">Random</span><span class="params">(LL n)</span> </span>&#123; <span class="keyword">return</span> (LL)((<span class="keyword">double</span>)<span class="built_in">rand</span>() / RAND_MAX * n + <span class="number">0.5</span>); &#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Witness</span><span class="params">(LL a, LL n)</span> </span>&#123;</span><br><span class="line">    LL m = n - <span class="number">1</span>; <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!(m &amp; <span class="number">1</span>)) &#123; j++; m &gt;&gt;= <span class="number">1</span>; &#125;</span><br><span class="line">    LL x = <span class="built_in">pow_mod</span>(a, m, n);</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="number">1</span> || x == n - <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">while</span> (j--) &#123; x = x * x % n; <span class="keyword">if</span> (x == n - <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>; &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Miller_Rabin</span><span class="params">(LL n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="keyword">if</span> (n == <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (!(n &amp; <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">30</span>; ++i) &#123;</span><br><span class="line">        LL a = <span class="built_in">Random</span>(n - <span class="number">2</span>) + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Witness</span>(a, n)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="æ¨¡ç®—æœ¯"><a href="#æ¨¡ç®—æœ¯" class="headerlink" title="æ¨¡ç®—æœ¯"></a>æ¨¡ç®—æœ¯</h2><p>$$<br>(a + b)\bmod n = ((a\bmod n) + (b\bmod n))\bmod n\\<br>(a - b)\bmod n = ((a\bmod n) - (b\bmod n) + n)\bmod n\\<br>ab\mod n = (a\bmod n)(b\bmod n)\bmod n<br>$$</p>
<h3 id="å¿«é€Ÿä¹˜-ab-bmod-n"><a href="#å¿«é€Ÿä¹˜-ab-bmod-n" class="headerlink" title="å¿«é€Ÿä¹˜ $ab\bmod n$"></a>å¿«é€Ÿä¹˜ $ab\bmod n$</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">LL <span class="title">mul_mod</span><span class="params">(LL a, LL b, LL n)</span></span>&#123;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (b &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b &amp; <span class="number">1</span>) res = (res + a) % n;</span><br><span class="line">        a = (a + a) % n;</span><br><span class="line">        b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¿«é€Ÿå¹‚-a-p-bmod-n"><a href="#å¿«é€Ÿå¹‚-a-p-bmod-n" class="headerlink" title="å¿«é€Ÿå¹‚ $a^p\bmod n$"></a>å¿«é€Ÿå¹‚ $a^p\bmod n$</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">LL <span class="title">pow_mod</span><span class="params">(LL a, LL p, LL n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="number">0</span> &amp;&amp; n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    LL ans = <span class="built_in">pow_mod</span>(a, p / <span class="number">2</span>, n); ans = ans * ans % n;</span><br><span class="line">    <span class="keyword">if</span> (p % <span class="number">2</span> == <span class="number">1</span>) ans = ans * a % n;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ä½è¿ç®—:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">LL <span class="title">pow_mod</span><span class="params">(LL a, LL p, LL n)</span> </span>&#123;</span><br><span class="line">    a %= n; LL ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (; p; p &gt;&gt;= <span class="number">1</span>, a *= a, a %= n) <span class="keyword">if</span>(p &amp; <span class="number">1</span>) ans = ans * a % n;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¬§æ‹‰-varphi-å‡½æ•°"><a href="#æ¬§æ‹‰-varphi-å‡½æ•°" class="headerlink" title="æ¬§æ‹‰$\varphi$å‡½æ•°"></a>æ¬§æ‹‰$\varphi$å‡½æ•°</h2><p>$$\varphi(n)=n(1-\frac{1}{p_1})(1-\frac{1}{p_2})â€¦(1-\frac{1}{p_k})$$<br>$\varphi(n)$è¡¨ç¤ºä¸è¶…è¿‡$n$ä¸”ä¸$n$äº’è´¨çš„æ•´æ•°ä¸ªæ•°</p>
<h3 id="æ±‚å€¼"><a href="#æ±‚å€¼" class="headerlink" title="æ±‚å€¼"></a>æ±‚å€¼</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">euler_phi</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m = (<span class="keyword">int</span>)<span class="built_in">sqrt</span>(n + <span class="number">0.5</span>); <span class="keyword">int</span> ans = n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= m; ++i) <span class="keyword">if</span> (n % i == <span class="number">0</span>) &#123;</span><br><span class="line">        ans = ans / i * (i - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">while</span> (n % i == <span class="number">0</span>) n /= i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n &gt; <span class="number">1</span>) ans = ans / n * (n - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç­›æ¬§æ‹‰å‡½æ•°è¡¨"><a href="#ç­›æ¬§æ‹‰å‡½æ•°è¡¨" class="headerlink" title="ç­›æ¬§æ‹‰å‡½æ•°è¡¨"></a>ç­›æ¬§æ‹‰å‡½æ•°è¡¨</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> phi[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">phi_table</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) phi[i] = <span class="number">0</span>; phi[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) <span class="keyword">if</span> (!phi[i])</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt;= n; j += i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!phi[j]) phi[j] = j;</span><br><span class="line">            phi[j] = phi[j] / i * (i - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åŒä½™å¼å®šç†"><a href="#åŒä½™å¼å®šç†" class="headerlink" title="åŒä½™å¼å®šç†"></a>åŒä½™å¼å®šç†</h2><h3 id="æ¬§æ‹‰å®šç†"><a href="#æ¬§æ‹‰å®šç†" class="headerlink" title="æ¬§æ‹‰å®šç†"></a>æ¬§æ‹‰å®šç†</h3><p>è‹¥$gcd(a, n) = 1$,åˆ™$a^{\varphi(n)}\equiv 1\pmod n$</p>
<h3 id="è´¹é©¬å°å®šç†"><a href="#è´¹é©¬å°å®šç†" class="headerlink" title="è´¹é©¬å°å®šç†"></a>è´¹é©¬å°å®šç†</h3><p>è‹¥$p$ä¸ºè´¨æ•°,åˆ™$a^{p-1}\equiv 1\pmod p$</p>
<h3 id="å¨å°”é€Šå®šç†"><a href="#å¨å°”é€Šå®šç†" class="headerlink" title="å¨å°”é€Šå®šç†"></a>å¨å°”é€Šå®šç†</h3><p>è‹¥$p$ä¸ºè´¨æ•°,åˆ™$(p-1)!\equiv -1\pmod p$</p>
<h2 id="ä¹˜æ³•é€†å…ƒ"><a href="#ä¹˜æ³•é€†å…ƒ" class="headerlink" title="ä¹˜æ³•é€†å…ƒ"></a>ä¹˜æ³•é€†å…ƒ</h2><p>$$a\div b\bmod n = a\times b^{-1}\bmod n$$<br>$b^{-1}$ç§°ä¸º$b$åœ¨æ¨¡$n$æ„ä¹‰ä¸‹çš„é€†å…ƒ</p>
<h3 id="n-ä¸ºè´¨æ•°"><a href="#n-ä¸ºè´¨æ•°" class="headerlink" title="$n$ä¸ºè´¨æ•°"></a>$n$ä¸ºè´¨æ•°</h3><p>ä½¿ç”¨è´¹é©¬å°å®šç†, $a^{-1} = a^{n - 2}$</p>
<h3 id="n-ä¸ä¸ºè´¨æ•°"><a href="#n-ä¸ä¸ºè´¨æ•°" class="headerlink" title="$n$ä¸ä¸ºè´¨æ•°"></a>$n$ä¸ä¸ºè´¨æ•°</h3><p>é€’å½’æ±‚è§£</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">LL <span class="title">inv</span><span class="params">(LL a, LL n)</span> </span>&#123;</span><br><span class="line">    LL d, x, y;</span><br><span class="line">    <span class="built_in">exgcd</span>(a, n, d, x, y);</span><br><span class="line">    <span class="keyword">return</span> d == <span class="number">1</span> ? (x + n) % n : <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç­›é€†å…ƒè¡¨"><a href="#ç­›é€†å…ƒè¡¨" class="headerlink" title="ç­›é€†å…ƒè¡¨"></a>ç­›é€†å…ƒè¡¨</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> inv_table[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getinv</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">    inv_table[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        inv_table[i] = (LL)(p - p / i) * inv_table[p % i] % p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åŒä½™æ–¹ç¨‹"><a href="#åŒä½™æ–¹ç¨‹" class="headerlink" title="åŒä½™æ–¹ç¨‹"></a>åŒä½™æ–¹ç¨‹</h2><p>$ax\equiv b\pmod n$å¯ä»¥åŒ–ä¸º$ax+ny=b$ä½¿ç”¨æ‰©å±•æ¬§æ‹‰å®šç†è§£å†³</p>
<h3 id="ä¸­å›½å‰©ä½™å®šç†-China-Remainder-Theorem"><a href="#ä¸­å›½å‰©ä½™å®šç†-China-Remainder-Theorem" class="headerlink" title="ä¸­å›½å‰©ä½™å®šç†(China Remainder Theorem)"></a>ä¸­å›½å‰©ä½™å®šç†(China Remainder Theorem)</h3><p>æ±‚è§£$x\equiv a_i\pmod {m_i}$æ»¡è¶³$m_i$ä¸¤ä¸¤äº’è´¨</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">LL <span class="title">crt</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* a, <span class="keyword">int</span>* m)</span> </span>&#123;</span><br><span class="line">    LL M = <span class="number">1</span>, d, y, x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) M *= m[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        LL w = M / m[i];</span><br><span class="line">        <span class="built_in">exgcd</span>(m[i], w, d, d, y);</span><br><span class="line">        x = (x + y * w * a[i]) % M;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (x + M) % M;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ‰©å±•ä¸­å›½å‰©ä½™å®šç†-exCRT"><a href="#æ‰©å±•ä¸­å›½å‰©ä½™å®šç†-exCRT" class="headerlink" title="æ‰©å±•ä¸­å›½å‰©ä½™å®šç†(exCRT)"></a>æ‰©å±•ä¸­å›½å‰©ä½™å®šç†(exCRT)</h4><p>$m_i$ä¸ä¸€å®šä¸¤ä¸¤äº’è´¨</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">LL <span class="title">excrt</span><span class="params">(LL n, LL* a, LL* m)</span> </span>&#123;</span><br><span class="line">    LL x, y, k, M = m[<span class="number">0</span>], ans = a[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        LL A = M, B = m[i], C = (a[i] - ans % B + B) % B, gcd;</span><br><span class="line">        <span class="built_in">exgcd</span>(A, B, gcd, x, y);</span><br><span class="line">        LL bg = B / gcd;</span><br><span class="line">        <span class="keyword">if</span> (C % gcd != <span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        x = <span class="built_in">mul_mod</span>(x, C / gcd, bg);</span><br><span class="line">        ans += x * M; M *= bg;</span><br><span class="line">        ans = (ans % M + M) % M;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (ans % M + M) % M;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¦»æ•£å¯¹æ•°-BSGS"><a href="#ç¦»æ•£å¯¹æ•°-BSGS" class="headerlink" title="ç¦»æ•£å¯¹æ•°(BSGS)"></a>ç¦»æ•£å¯¹æ•°(BSGS)</h3><p>æ±‚è§£$a^x\equiv b\pmod n$æ»¡è¶³$n$ä¸ºè´¨æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">log_mod</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m, v, e = <span class="number">1</span>, i;</span><br><span class="line">    m = (<span class="keyword">int</span>)<span class="built_in">sqrt</span>(n + <span class="number">0.5</span>);</span><br><span class="line">    v = <span class="built_in">inv</span>(<span class="built_in">pow_mod</span>(a, m, n), n);</span><br><span class="line">    map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; x;</span><br><span class="line">    x[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        e = <span class="built_in">mul_mod</span>(e, a, n);</span><br><span class="line">        <span class="keyword">if</span> (!x.<span class="built_in">count</span>(e)) x[e] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (x.<span class="built_in">count</span>(b)) <span class="keyword">return</span> i * m + x[b];</span><br><span class="line">        b = <span class="built_in">mul_mod</span>(b, v, n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è«æ¯”ä¹Œæ–¯åæ¼”"><a href="#è«æ¯”ä¹Œæ–¯åæ¼”" class="headerlink" title="è«æ¯”ä¹Œæ–¯åæ¼”"></a>è«æ¯”ä¹Œæ–¯åæ¼”</h2><h3 id="æ•´é™¤åˆ†å—"><a href="#æ•´é™¤åˆ†å—" class="headerlink" title="æ•´é™¤åˆ†å—"></a>æ•´é™¤åˆ†å—</h3><p>æ•´é™¤åˆ†å—å¯ä»¥å¯¹åé¢çš„è«æ¯”ä¹Œæ–¯åæ¼”æä¾›å¾ˆå¤§çš„ä¼˜åŒ–<br>é€šè¿‡<del>æšä¸¾</del>å¯ä»¥å‘ç°$\lfloor \frac{n}{i} \rfloor$çš„ç»“æœä¼šå‡ºç°åˆ†å—ç°è±¡<br>ä¾‹å¦‚$n=10$æ—¶<br>$\ \ \ i\ \ \ \ 1\ \ 2\ 3\ 4\ 5\ 6\ 7\ 8\ 9\ 10\ 11\ 12\ 13\ â€¦$<br>$\lfloor \frac{n}{i} \rfloor\ 10\ 5\ 3\ 2\ 2\ 1\ 1\ 1\ 1\ 1\ \ \ 0\ \ \ 0\ \ \ 0\ \ \ â€¦$<br><del>ä¸éš¾å‘ç°</del>,æ¯ä¸ªå—çš„å³ç«¯ç‚¹ä¸º$r=\lfloor \frac{n}{t}\rfloor (t=\lfloor \frac{n}{i}\rfloor)$</p>
<h3 id="è«æ¯”ä¹Œæ–¯å‡½æ•°"><a href="#è«æ¯”ä¹Œæ–¯å‡½æ•°" class="headerlink" title="è«æ¯”ä¹Œæ–¯å‡½æ•°"></a>è«æ¯”ä¹Œæ–¯å‡½æ•°</h3><p>$$<br>\mu(n) =<br>\begin{cases}<br>1,  &amp; n=1 \\<br>(-1)^r, &amp; n=p_1p_2p_3â€¦p_r(\text{$p_i$ä¸ºäº’ä¸ç›¸åŒçš„è´¨æ•°}) \\<br>0,  &amp; else<br>\end{cases}<br>$$<br><strong><em>æ€§è´¨</em></strong>:<br>$$\sum_{d|n}{\mu(d)}=[n=1]$$<br>$$\sum_{d|n}{\frac{\mu(d)}{d}}=\frac{\varphi(n)}{n}$$<br><strong><em>çº¿æ€§ç­›</em></strong>:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> mu[maxn], vis[maxn];</span><br><span class="line"><span class="keyword">int</span> primes[maxn], cnt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">get_mu</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">	<span class="built_in">memset</span>(mu, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(mu));</span><br><span class="line">	cnt = <span class="number">0</span>; mu[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">		<span class="keyword">if</span> (!vis[i]) &#123; primes[cnt++] = i; mu[i] = <span class="number">-1</span>; &#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; cnt &amp;&amp; primes[j] * i &lt;= n; ++j) &#123;</span><br><span class="line">			vis[primes[j] * i] = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">if</span> (i % primes[j] == <span class="number">0</span>)<span class="keyword">break</span>;</span><br><span class="line">			mu[i * primes[j]] = -mu[i];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
        <tag>ç¬”è®°</tag>
        <tag>æ•°è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLuogu P1516ã€é’è›™çš„çº¦ä¼š-é¢˜è§£</title>
    <url>/p/1f4bfad8.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.org/problemnew/show/P1516">ã€ŒLuogu P1516ã€é’è›™çš„çº¦ä¼š</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>(è§„å®šçº¬åº¦çº¿ä¸Šä¸œç»0åº¦å¤„ä¸ºåŸç‚¹ï¼Œç”±ä¸œå¾€è¥¿ä¸ºæ­£æ–¹å‘ï¼Œå•ä½é•¿åº¦1ç±³ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€æ¡é¦–å°¾ç›¸æ¥çš„æ•°è½´)<br>ç°æœ‰ä¸¤åªé’è›™$A,B$<br>è®¾é’è›™$A$çš„å‡ºå‘ç‚¹åæ ‡æ˜¯$x$ï¼Œé’è›™$B$çš„å‡ºå‘ç‚¹åæ ‡æ˜¯$y$<br>é’è›™$A$ä¸€æ¬¡èƒ½è·³$m$ç±³ï¼Œé’è›™$B$ä¸€æ¬¡èƒ½è·³$n$ç±³ï¼Œä¸¤åªé’è›™è·³ä¸€æ¬¡æ‰€èŠ±è´¹çš„æ—¶é—´ç›¸åŒ<br>çº¬åº¦çº¿æ€»é•¿$l$ç±³<br>æ±‚ä¸¤åªé’è›™è·³äº†å‡ æ¬¡ä»¥åæ‰ä¼šç¢°é¢</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>__<em>åŒä½™æ–¹ç¨‹</em>__æ¨¡æ¿é¢˜<br>æ±‚è§£$x + km\equiv y + kn \pmod l$</p>
<p>$Solve:$<br>$$<br>x+kmâˆ’(y+kn)=lz,\ \ z\in Z\\<br>(x-y)+k(m-n)-lz=0\\<br>k(n-m)+lz=(x-y)<br>$$<br>ä»¤$a=x-y,b=n-m$<br>ä¸Šå¼å¯åŒ–ä¸º:<br>$$<br>kb+lz=a<br>$$<br>æ±‚è¿™ä¸ªæ–¹ç¨‹çš„æœ€å°æ•´æ•°è§£<br>åŒ–ä¸ºæ±‚æ­¤ä¸å®šæ–¹ç¨‹æœ€å°æ•´æ•°è§£<br>$$kâ€™b+lzâ€™=gcd(b,l)$$<br>ä½¿ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•å¯å¾—ä¸€ç»„ç‰¹è§£$(kâ€™,bâ€™)$<br>æœ€å°è§£ä¸º$k_{min} = kâ€™\bmod \frac{l}{gcd(b,l)}$<br>ä»¥ä¸Šè§£$k_{min}$çš„æ–¹ç¨‹å³è¾¹æ˜¯$gcd(b,l)$è€Œä¸æ˜¯$a$<br>æ‰€ä»¥ç»“æœä¸º<br>$$\boxed{ (kâ€™\times \frac{a}{gcd(b,l)})\bmod \frac{l}{gcd(b,l)} }$$</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exgcd</span><span class="params">(LL a, LL b, LL&amp; d, LL&amp; x, LL&amp; y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!b) &#123; d = a; x = <span class="number">1</span>; y = <span class="number">0</span>; &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="built_in">exgcd</span>(b, a % b, d, y, x); y -= x * (a / b); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    LL n, m, x, y, l, gcd, x1, y1;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld %lld %lld %lld %lld&quot;</span>, &amp;x, &amp;y, &amp;m, &amp;n, &amp;l);</span><br><span class="line">    LL b = n - m, a = x - y;</span><br><span class="line">    <span class="keyword">if</span> (b &lt; <span class="number">0</span>) &#123; b = -b, a = -a; &#125;</span><br><span class="line">    <span class="built_in">exgcd</span>(b, l, gcd, x1, y1);</span><br><span class="line">    <span class="keyword">if</span> (a % gcd) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Impossible\n&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        LL ans = ((x1 * (a / gcd)) % (l / gcd) + (l / gcd)) % (l / gcd);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 26ms 916kB */</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>é¢˜è§£</tag>
        <tag>æ•°è®º</tag>
        <tag>Luogu</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒNOIp2016ã€é¢˜è§£</title>
    <url>/p/2a6e5fce.html</url>
    <content><![CDATA[<p>$???$å°±ä¸€é“ç´«é¢˜$???$,è¿˜æ˜¯$D1T2\ ???$</p>
<span id="more"></span>

<h2 id="D1T1-ç©å…·è¿·é¢˜"><a href="#D1T1-ç©å…·è¿·é¢˜" class="headerlink" title="$D1T1$ ç©å…·è¿·é¢˜"></a>$D1T1$ <a href="https://www.luogu.org/problemnew/show/P1563">ç©å…·è¿·é¢˜</a></h2><p>ç®€å•çš„__<em>æ¨¡æ‹Ÿ</em>__,æ²¡çš„è¯´</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> towards;</span><br><span class="line">    string name;</span><br><span class="line">&#125; a[<span class="number">100001</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, ai, si;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; a[i].towards &gt;&gt; a[i].name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> peo = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; ai &gt;&gt; si;</span><br><span class="line">        <span class="keyword">if</span> (ai == <span class="number">0</span> &amp;&amp; a[peo].towards == <span class="number">0</span>) peo = (peo + n - si) % n;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ai == <span class="number">0</span> &amp;&amp; a[peo].towards == <span class="number">1</span>) peo = (peo + si) % n;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ai == <span class="number">1</span> &amp;&amp; a[peo].towards == <span class="number">0</span>) peo = (peo + si) % n;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ai == <span class="number">1</span> &amp;&amp; a[peo].towards == <span class="number">1</span>) peo = (peo + n - si) % n;</span><br><span class="line">    &#125; </span><br><span class="line">    cout &lt;&lt; a[peo].name &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">/* 430ms 4760kB */</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒNOIp2017ã€é¢˜è§£</title>
    <url>/p/c5ac34f0.html</url>
    <content><![CDATA[<pre><code>NOIp2017çš„é¢˜æ¯”NOIp2018çš„é¢˜å¥½åšä¸€ç‚¹
</code></pre>
<span id="more"></span>

<h2 id="D1T1-å°å‡¯çš„ç–‘æƒ‘"><a href="#D1T1-å°å‡¯çš„ç–‘æƒ‘" class="headerlink" title="$D1T1$ å°å‡¯çš„ç–‘æƒ‘"></a>$D1T1$ <a href="https://www.luogu.org/problemnew/show/P3951">å°å‡¯çš„ç–‘æƒ‘</a></h2><h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>æ¨æŸ¿å­(<del>æ­£ç¡®æ€§æœªçŸ¥</del>)<br>è®¾$a &lt; b$ ç­”æ¡ˆä¸º$x$<br>æ‰€ä»¥:<br>$$x \equiv ma \pmod b (1 \leq m \leq b - 1)$$<br>å³$x = ma + nb (1 \leq m \leq b - 1)$<br>æ˜¾ç„¶å½“$ n \geq 0$æ—¶ $x$å¯ä»¥ç”¨$a, b$è¡¨ç¤ºå‡ºæ¥ï¼Œä¸åˆé¢˜æ„<br>å› æ­¤å½“$n = -1$æ—¶$x$å–å¾—æœ€å¤§å€¼ï¼Œæ­¤æ—¶$x = ma - b$<br>æ˜¾ç„¶å½“$m$å–å¾—æœ€å¤§å€¼$b - 1$æ—¶$x$æœ€å¤§ï¼Œæ­¤æ—¶$x = (b - 1)a - b = ab - a - b$<br>å› æ­¤$a, b$æ‰€è¡¨ç¤ºä¸å‡ºçš„æœ€å¤§çš„æ•°æ˜¯<br>$$\boxed{ab - a - b}$$</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> a, b;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld %lld&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, a * b - a - b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 60ms 948kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="D1T2-æ—¶é—´å¤æ‚åº¦"><a href="#D1T2-æ—¶é—´å¤æ‚åº¦" class="headerlink" title="$D1T2$ æ—¶é—´å¤æ‚åº¦"></a>$D1T2$ <a href="https://www.luogu.org/problemnew/show/P3952">æ—¶é—´å¤æ‚åº¦</a></h2><p><del>æ¯’ç˜¤</del>å¤§æ¨¡æ‹Ÿ<br>æ²¡ä»€ä¹ˆå¥½è¯´çš„,ç›´æ¥ä¸Šä»£ç </p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">string str1, str2;      </span><br><span class="line"><span class="keyword">int</span> cal, O, NumOfLoop, vis[<span class="number">27</span>], var[<span class="number">27</span>], Onow, Kill, AddO[<span class="number">100</span>], Omax, WhereKill, T;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        T--;</span><br><span class="line">        cal = <span class="number">0</span>; O = <span class="number">0</span>; Omax = <span class="number">0</span>; WhereKill = <span class="number">0</span>; NumOfLoop = <span class="number">0</span>; Onow = <span class="number">0</span>; Kill = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">        <span class="built_in">memset</span>(AddO, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(AddO));</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            str1 = str2;</span><br><span class="line">            cin &gt;&gt; str2;</span><br><span class="line">        &#125; <span class="keyword">while</span>(str2[<span class="number">0</span>] != <span class="string">&#x27;O&#x27;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str1.<span class="built_in">length</span>(); i++) cal = cal * <span class="number">10</span> + str1[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">4</span>; i &lt; str2.<span class="built_in">length</span>() - <span class="number">1</span>; i++) O = O * <span class="number">10</span> + str2[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        <span class="keyword">while</span> (cal &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            cal--;</span><br><span class="line">            cin &gt;&gt; str1;</span><br><span class="line">            <span class="keyword">if</span> (str1[<span class="number">0</span>] == <span class="string">&#x27;F&#x27;</span>) &#123;</span><br><span class="line">                NumOfLoop++;</span><br><span class="line">                cin &gt;&gt; str1;</span><br><span class="line">                <span class="keyword">if</span> (vis[str1[<span class="number">0</span>] - <span class="number">96</span>]) &#123;</span><br><span class="line">                    NumOfLoop = <span class="number">-1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">                	vis[str1[<span class="number">0</span>] - <span class="number">96</span>] = <span class="number">1</span>;</span><br><span class="line">                    var[NumOfLoop] = str1[<span class="number">0</span>] - <span class="number">96</span>;</span><br><span class="line">                &#125; </span><br><span class="line">                cin &gt;&gt; str1 &gt;&gt; str2;</span><br><span class="line">                <span class="keyword">if</span> (str1[<span class="number">0</span>] != <span class="string">&#x27;n&#x27;</span> &amp;&amp; str2[<span class="number">0</span>] == <span class="string">&#x27;n&#x27;</span> &amp;&amp; Kill == <span class="number">0</span>) &#123;</span><br><span class="line">                    Onow++;</span><br><span class="line">                    AddO[NumOfLoop] = <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (((str1.<span class="built_in">length</span>() == str2.<span class="built_in">length</span>() &amp;&amp; str1 &gt; str2) || (str1.<span class="built_in">length</span>() &gt; str2.<span class="built_in">length</span>()) || (str1[<span class="number">0</span>] == <span class="string">&#x27;n&#x27;</span> &amp;&amp; str2[<span class="number">0</span>] != <span class="string">&#x27;n&#x27;</span>)) &amp;&amp; Kill == <span class="number">0</span>) &#123;</span><br><span class="line">                    Kill = <span class="number">1</span>;</span><br><span class="line">                    WhereKill = NumOfLoop;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">                Omax = <span class="built_in">max</span>(Omax, Onow);</span><br><span class="line">                vis[var[NumOfLoop]] = <span class="number">0</span>; </span><br><span class="line">                <span class="keyword">if</span> (AddO[NumOfLoop] == <span class="number">1</span>) &#123;</span><br><span class="line">                    Onow--;</span><br><span class="line">                    AddO[NumOfLoop] = <span class="number">0</span>;</span><br><span class="line">                &#125; </span><br><span class="line">                NumOfLoop--; </span><br><span class="line">                <span class="keyword">if</span> (WhereKill &gt; <span class="number">0</span> &amp;&amp; NumOfLoop &lt; WhereKill) &#123;</span><br><span class="line">                    Kill = <span class="number">0</span>; WhereKill = <span class="number">0</span>;</span><br><span class="line">                &#125; </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(NumOfLoop == <span class="number">-1</span>) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;ERR\n&quot;</span>);</span><br><span class="line">                cal = <span class="number">-1</span>;</span><br><span class="line">            &#125; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (NumOfLoop &gt; <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;ERR\n&quot;</span>); </span><br><span class="line">        <span class="keyword">if</span> (NumOfLoop == <span class="number">0</span> &amp;&amp; Omax == O) <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (NumOfLoop == <span class="number">0</span> &amp;&amp; Omax != O) <span class="built_in">printf</span>(<span class="string">&quot;No\n&quot;</span>); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 34ms 756kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="D1T3-é€›å…¬å›­"><a href="#D1T3-é€›å…¬å›­" class="headerlink" title="$D1T3$ é€›å…¬å›­"></a>$D1T3$ <a href="https://www.luogu.org/problemnew/show/P3953">é€›å…¬å›­</a></h2><p>æœ¬é¢˜æ€è·¯æ¥è‡ª<a href="https://www.luogu.org/blog/Annie-007/ti-xie-p3953-guang-gong-yuan">å®‰å¦®007çš„é¢˜è§£</a></p>
<h3 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><ol>
<li>å…ˆSPFAæ±‚æœ€çŸ­è·¯</li>
<li>å†åå‘SPFAæ’é™¤æ— æ³•åˆ°è¾¾çš„è¾¹</li>
<li>å†è®°å¿†åŒ–æœç´¢èµ°å†¤æ‰è·¯çš„æœ€ä¼˜æ–¹æ¡ˆ</li>
</ol>
<p>è¯¦ç»†è§<a href="https://www.luogu.org/blog/Annie-007/ti-xie-p3953-guang-gong-yuan">å®‰å¦®007çš„é¢˜è§£</a></p>
<h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="built_in">Node</span>(<span class="keyword">int</span> x, <span class="keyword">int</span> y): <span class="built_in">x</span>(x), <span class="built_in">y</span>(y) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, k, p, T;</span><br><span class="line">vector&lt;Node&gt; v[maxn], s[maxn];</span><br><span class="line"><span class="keyword">int</span> d[maxn], ans[maxn][<span class="number">60</span>];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn][<span class="number">60</span>], alive[maxn];</span><br><span class="line">queue&lt;<span class="keyword">int</span>&gt; q, f;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123; <span class="comment">//aå½“å‰ç‚¹,bå…è®¸èµ°çš„å†¤æ‰è·¯é•¿åº¦</span></span><br><span class="line">    <span class="keyword">if</span> (b &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (vis[a][b] == <span class="number">1</span>) &#123;  <span class="comment">//åˆå›æ¥äº†</span></span><br><span class="line">        <span class="keyword">return</span> -inf;              <span class="comment">//æ— ç©·å¤šç§(-infç”¨äºåˆ¤æ–­)</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ans[a][b] != <span class="number">-1</span>) &#123; <span class="comment">//ç®—è¿‡äº†</span></span><br><span class="line">        <span class="keyword">return</span> ans[a][b];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        vis[a][b] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">int</span> key = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (a == n) &#123; <span class="comment">//åˆ°ç›®çš„åœ°</span></span><br><span class="line">            key++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v[a].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> g = v[a][i].x, y = v[a][i].y; <span class="comment">//gæœ¬æ¡è¾¹ç»ˆç‚¹,yæƒå€¼</span></span><br><span class="line">            <span class="keyword">int</span> u = d[g] - d[a];</span><br><span class="line">            <span class="keyword">if</span> (alive[g] == <span class="number">0</span>) &#123; <span class="comment">//ä¸èƒ½åˆ°ç»ˆç‚¹</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> w = <span class="built_in">dfs</span>(g, b - (y - u));</span><br><span class="line">            <span class="keyword">if</span> (w == -inf) &#123;</span><br><span class="line">                <span class="keyword">return</span> -inf;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                key = (key + w) % p;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ans[a][b] = key % p;</span><br><span class="line">        vis[a][b] = <span class="literal">false</span>; <span class="comment">//å›æº¯</span></span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">safe</span><span class="params">()</span> </span>&#123; <span class="comment">//æ’é™¤æ— æ³•åˆ°ç»ˆç‚¹çš„ç‚¹(åå‘SPFA)</span></span><br><span class="line">    f.<span class="built_in">push</span>(n);</span><br><span class="line">    alive[n] = <span class="number">1</span>;  <span class="comment">//ç‚¹nè‡ªèº«å¯ä»¥åˆ°è¾¾</span></span><br><span class="line">    <span class="keyword">while</span> (!f.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> h = f.<span class="built_in">front</span>(); f.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s[h].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> g = s[h][i].x;</span><br><span class="line">            <span class="keyword">if</span> (alive[g] == <span class="number">0</span>) &#123;</span><br><span class="line">                alive[g] = <span class="number">1</span>;</span><br><span class="line">                f.<span class="built_in">push</span>(g);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">()</span> </span>&#123; <span class="comment">//SPFAæ±‚æœ€çŸ­è·¯</span></span><br><span class="line">    q.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line">    d[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> h = q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v[h].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> g = v[h][i].x, y = v[h][i].y;</span><br><span class="line">            <span class="keyword">if</span> (d[h] + y &lt; d[g]) &#123;</span><br><span class="line">                d[g] = d[h] + y;</span><br><span class="line">                q.<span class="built_in">push</span>(g);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;n, &amp;m, &amp;k, &amp;p);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            v[i].<span class="built_in">clear</span>();</span><br><span class="line">            s[i].<span class="built_in">clear</span>();</span><br><span class="line">            alive[i] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= k; ++j) &#123;</span><br><span class="line">                ans[i][j] = <span class="number">-1</span>;</span><br><span class="line">                vis[i][j] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> a, b, c;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">            v[a].<span class="built_in">push_back</span>(<span class="built_in">Node</span>(b, c));     <span class="comment">//æ­£å‘è¾¹</span></span><br><span class="line">            s[b].<span class="built_in">push_back</span>(<span class="built_in">Node</span>(a, c));     <span class="comment">//åå‘è¾¹</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            d[i] = inf;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">spfa</span>();  <span class="comment">//SPFAæ±‚æœ€çŸ­è·¯</span></span><br><span class="line">        <span class="built_in">safe</span>();</span><br><span class="line">        <span class="keyword">int</span> z = <span class="built_in">dfs</span>(<span class="number">1</span>, k);</span><br><span class="line">        <span class="keyword">if</span> (z == -inf) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-1\n&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, z);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 6488ms 44632kB with O2 */</span></span><br></pre></td></tr></table></figure>

<h2 id="D2T1-å¥¶é…ª"><a href="#D2T1-å¥¶é…ª" class="headerlink" title="$D2T1$ å¥¶é…ª"></a>$D2T1$ <a href="https://www.luogu.org/problemnew/show/P3958">å¥¶é…ª</a></h2><h3 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>æ²¡ä»€ä¹ˆå¥½è¯´çš„,ç›´æ¥__<em>æœç´¢</em>__<br>å­˜å¥½æ¯ä¸ªç‚¹,æ’åº,ä»ä¸‹å‘ä¸Šæœ</p>
<h3 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> fini = <span class="literal">false</span>, vis[maxn];</span><br><span class="line"><span class="keyword">int</span> T, n, h, r;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">double</span> x, y, z;</span><br><span class="line">&#125; node[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Node a, Node b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.z &gt; b.z;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dist</span><span class="params">(Node a, Node b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>(<span class="built_in">pow</span>(a.x - b.x, <span class="number">2</span>) + <span class="built_in">pow</span>(a.y - b.y, <span class="number">2</span>) + <span class="built_in">pow</span>(a.z - b.z, <span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(Node now, <span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (now.z + r &gt;= h) &#123;</span><br><span class="line">        fini = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    vis[num] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (fini) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!vis[i] &amp;&amp; <span class="built_in">dist</span>(node[i], now) &lt;= r * <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="built_in">dfs</span>(node[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        fini = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">memset</span>(node, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(node));</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;n, &amp;h, &amp;r);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lf %lf %lf&quot;</span>, &amp;node[i].x, &amp;node[i].y, &amp;node[i].z);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(node + <span class="number">1</span>, node + <span class="number">1</span> + n, cmp);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node[i].z - r &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">dfs</span>(node[i], i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(fini ? <span class="string">&quot;Yes\n&quot;</span> : <span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 157ms 832kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="D2T2-å®è—"><a href="#D2T2-å®è—" class="headerlink" title="$D2T2$ å®è—"></a>$D2T2$ <a href="https://www.luogu.org/problemnew/show/P3959">å®è—</a></h2><h3 id="é¢˜è§£-3"><a href="#é¢˜è§£-3" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>çŠ¶å‹?? æ¨¡æ‹Ÿé€€ç«?? <del>ä¸å­˜åœ¨çš„</del> è’Ÿè’»ä¸ä¼š<br>__<em>æœç´¢+å‰ªæ</em>__èƒ½å¾ˆå¿«ACæ‰è¿™é“ç´«é¢˜<br>ä¸è§£é‡Šäº†</p>
<h3 id="ä»£ç -4"><a href="#ä»£ç -4" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> vis[<span class="number">20</span>], dis[<span class="number">20</span>], num[<span class="number">20</span>]; <span class="comment">//å·²è®¿é—®çš„ç‚¹,è·1çš„è·ç¦»,å¯ä»¥åˆ°è¾¾çš„ç‚¹æ•°</span></span><br><span class="line"><span class="keyword">int</span> c[<span class="number">20</span>][<span class="number">20</span>], G[<span class="number">20</span>][<span class="number">20</span>]; <span class="comment">//è´¹ç”¨,å›¾</span></span><br><span class="line"><span class="keyword">int</span> ans = inf, tmp, tot, cnt, n, m, p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> c[p][a] &lt; c[p][b];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> node)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = u; i &lt;= cnt; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(tot + tmp * dis[vis[i]] &gt;= ans) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = node; j &lt;= num[vis[i]]; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!dis[G[vis[i]][j]]) &#123;</span><br><span class="line">                cnt++;</span><br><span class="line">                vis[cnt] = G[vis[i]][j];</span><br><span class="line">                tmp -= c[vis[cnt]][G[vis[cnt]][<span class="number">1</span>]];</span><br><span class="line">                tot += c[vis[i]][vis[cnt]] * dis[vis[i]];</span><br><span class="line">                dis[vis[cnt]] = dis[vis[i]] + <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">dfs</span>(i, j + <span class="number">1</span>);</span><br><span class="line">                tot -= c[vis[i]][vis[cnt]] * dis[vis[i]];</span><br><span class="line">                dis[vis[cnt]] = <span class="number">0</span>;</span><br><span class="line">                tmp += c[vis[cnt]][G[vis[cnt]][<span class="number">1</span>]];</span><br><span class="line">                cnt--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        node = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt == n) &#123;</span><br><span class="line">        <span class="keyword">if</span>(tot &lt; ans) ans = tot;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> u, v, w;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            c[i][j] = inf;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;u, &amp;v, &amp;w);</span><br><span class="line">        <span class="keyword">if</span>(c[u][v] &lt; w) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(c[u][v] == inf) &#123;</span><br><span class="line">            G[u][++num[u]] = v;</span><br><span class="line">            G[v][++num[v]] = u;</span><br><span class="line">        &#125;</span><br><span class="line">        c[u][v] = c[v][u] = w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        p = i;</span><br><span class="line">        <span class="built_in">sort</span>(G[i] + <span class="number">1</span>, G[i] + <span class="number">1</span> + num[i], cmp);</span><br><span class="line">        tmp += c[i][G[i][<span class="number">1</span>]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        tot = <span class="number">0</span>; cnt = <span class="number">1</span>;</span><br><span class="line">        vis[<span class="number">1</span>] = i;</span><br><span class="line">        tmp -= c[i][G[i][<span class="number">1</span>]];</span><br><span class="line">        dis[i] = <span class="number">1</span>; </span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        dis[i] = <span class="number">0</span>;</span><br><span class="line">        tmp += c[i][G[i][<span class="number">1</span>]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 65ms 808kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="D2T3-åˆ—é˜Ÿ"><a href="#D2T3-åˆ—é˜Ÿ" class="headerlink" title="$D2T3$ åˆ—é˜Ÿ"></a>$D2T3$ <a href="https://www.luogu.org/problemnew/show/P3960">åˆ—é˜Ÿ</a></h2><p>å¹³è¡¡æ ‘?? $Splay$?? $FHQ\_Treap$?? <del>ä¸ä¼š</del><br>æ¨¡æ‹Ÿæ‹¿ä¸‹$50$åˆ†,ä»¥åå†è¯´,<del>é€ƒ</del></p>
<h3 id="ä»£ç -5"><a href="#ä»£ç -5" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">300010</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">&#125; a[maxn];</span><br><span class="line"><span class="keyword">int</span> n, m, q, tot;</span><br><span class="line">LL last[maxn], h[maxn], pos[<span class="number">510</span>][<span class="number">50010</span>], ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>(); q = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; ++i) &#123;</span><br><span class="line">        a[i].x = <span class="built_in">read</span>();</span><br><span class="line">        a[i].y = <span class="built_in">read</span>();</span><br><span class="line">        h[i] = a[i].x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        last[i] = last[i - <span class="number">1</span>] + m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(h + <span class="number">1</span>, h + q + <span class="number">1</span>);                 <span class="comment">//æ’åº</span></span><br><span class="line">    tot = <span class="built_in">unique</span>(h + <span class="number">1</span>, h + q + <span class="number">1</span>) - h - <span class="number">1</span>; <span class="comment">//å»é‡</span></span><br><span class="line">    LL t;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= tot; ++i) &#123; <span class="comment">//ç¼–å·</span></span><br><span class="line">        t = (LL)(h[i] - <span class="number">1</span>) * m;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            pos[i][j] = ++t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> where; <span class="comment">//a[i].xåœ¨hæ•°ç»„ä¸­çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; ++i) &#123; <span class="comment">//æ¨¡æ‹Ÿ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= tot; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (h[j] == a[i].x) &#123;</span><br><span class="line">                where = j;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (a[i].y == m) &#123; <span class="comment">//åœ¨æœ€åä¸€åˆ—</span></span><br><span class="line">            ans = last[h[where]];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ans = pos[where][a[i].y];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">        <span class="keyword">if</span> (a[i].y != m) &#123; <span class="comment">//å‘å·¦çœ‹é½</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = a[i].y; j &lt; m - <span class="number">1</span>; ++j) &#123;</span><br><span class="line">                pos[where][j] = pos[where][j + <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            pos[where][m - <span class="number">1</span>] = last[h[where]];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = h[where]; j &lt; n; ++j) &#123; <span class="comment">//å‘å‰çœ‹é½</span></span><br><span class="line">            last[j] = last[j + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        last[n] = ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 50Points 13662ms 67344kB */</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong><em>å¦‚æœ‰ç–‘é—®,å¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€</em></strong></p>
]]></content>
      <categories>
        <category>é¢˜è§£</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€é­”æœ¯çƒé—®é¢˜-é¢˜è§£</title>
    <url>/p/f2e850c0.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.org/problemnew/show/P2765">ã€ŒLuogu P2765ã€é­”æœ¯çƒé—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>è¾“å…¥æŸ±å­æ•°$n$<br>æ»¡è¶³å¦‚ä¸‹è§„åˆ™</p>
<ul>
<li>æ¯æ¬¡åªèƒ½åœ¨æŸæ ¹æŸ±å­çš„æœ€ä¸Šé¢æ”¾çƒã€‚</li>
<li>åœ¨åŒä¸€æ ¹æŸ±å­ä¸­ï¼Œä»»ä½•2ä¸ªç›¸é‚»çƒçš„ç¼–å·ä¹‹å’Œä¸ºå®Œå…¨å¹³æ–¹æ•°ã€‚<br>è¾“å‡ºåœ¨ç¬¬$n$æ ¹æŸ±å­ä¸Šæœ€å¤šèƒ½æ”¾å¤šå°‘çƒå’Œæ”¾ç½®æ–¹æ¡ˆ</li>
</ul>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å¹¶ä¸æ‰“ç®—ä½¿ç”¨ç½‘ç»œæµ,ç”¨è´ªå¿ƒå³å¯<br><em>è´ªå¿ƒç­–ç•¥</em>: <strong>å¦‚æœå¯ä»¥çš„è¯å°½å¯èƒ½æ”¾åœ¨å·²æœ‰çš„æŸ±å­ä¸Š</strong></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; a[<span class="number">110</span>];</span><br><span class="line"><span class="keyword">bool</span> can[<span class="number">4010</span>];</span><br><span class="line"><span class="keyword">int</span> n, ans = <span class="number">1</span>, cnt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i * i &lt;= <span class="number">4000</span>; ++i) &#123;</span><br><span class="line">        can[i * i] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (can[ ans + a[ i ][ a[i].<span class="built_in">size</span>() - <span class="number">1</span> ] ]) &#123;</span><br><span class="line">                a[i].<span class="built_in">push_back</span>(ans++);</span><br><span class="line">                i = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cnt &lt; n) &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">            a[cnt].<span class="built_in">push_back</span>(ans++);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; a[i].<span class="built_in">size</span>(); ++j) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, a[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€æœ€å°è·¯å¾„è¦†ç›–é—®é¢˜-é¢˜è§£</title>
    <url>/p/7973b062.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.org/problemnew/show/P2764">ã€ŒLuogu P2764ã€æœ€å°è·¯å¾„è¦†ç›–é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>é¢˜ç›®æè¿°ç»™çš„å¾ˆç›´ç™½,è¾“å…¥ç‚¹æ•°è¾¹æ•°å’Œæœ‰å‘è¾¹,è¾“å‡ºæœ€å°‘è·¯å¾„æ•°å’Œè·¯å¾„</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>æ­£å¸¸å»ºå›¾<br>å¦‚æœä¸€æ¡è·¯å¾„çš„ç»ˆç‚¹å’Œå¦ä¸€æ¡è·¯å¾„çš„èµ·ç‚¹æœ‰è¿è¾¹ï¼Œé‚£ä¹ˆè¿™ä¸¤æ¡è·¯å¾„æ˜¯å¯ä»¥åˆå¹¶çš„ã€‚<br>ä½†æ˜¯ä¸€ä¸ªç»ˆç‚¹æˆ–èµ·ç‚¹åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚æ¯”å¦‚ä¸‰æ¡è·¯å¾„$1 \rightarrow 3, 2 \rightarrow 3, 3 \rightarrow 4$ï¼Œä½ åªèƒ½åˆå¹¶ä¸¤æ¡ã€‚<br>é‚£ä¹ˆè¿™é“é¢˜å°±è½¬åŒ–ä¸ºäº†ï¼šæœ€å¤§åŒ–ä¸€ä¸ªè¾¹é›†ï¼Œä½¿å¾—è¾¹é›†ä¸­æ¯ä¸ªèµ·ç‚¹å’Œç»ˆç‚¹éƒ½åªä½¿ç”¨è¿‡ä¸€æ¬¡ã€‚å³__æœ€å¤§ç‹¬ç«‹è¾¹é›†__ã€‚<br>æŠŠæ¯ä¸ªç‚¹æ‹†æˆå…¥ç‚¹$x$å’Œå‡ºç‚¹$xâ€™$,ä»æºç‚¹åˆ°$xâ€™$è¿ä¸€æ¡å®¹é‡ä¸º$1$çš„è¾¹ï¼Œä»$x$åˆ°æ±‡ç‚¹è¿ä¸€æ¡å®¹é‡ä¸º$1$çš„è¾¹ã€‚è¾¹æƒç”¨æ¥é™åˆ¶æ¯ä¸ªèµ·ç‚¹æˆ–ç»ˆç‚¹çš„ä½¿ç”¨æ¬¡æ•°ã€‚<br>å¯¹äºæ¯æ¡è¾¹$x \rightarrow y$ï¼Œè¿æ¥$xâ€™ \rightarrow y$<br>ç­”æ¡ˆæ˜¯$n-æœ€å¤§æµ$</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[maxn], vst[maxn];</span><br><span class="line"><span class="keyword">int</span> n, m, s, t;</span><br><span class="line"><span class="keyword">int</span> d[maxn], cur[maxn], to[maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">    <span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f) : <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>));</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(s);</span><br><span class="line">    d[s] = <span class="number">0</span>;</span><br><span class="line">    vis[s] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (!vis[e.to] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                vis[e.to] = <span class="literal">true</span>;</span><br><span class="line">                d[e.to] = d[x] + <span class="number">1</span>;</span><br><span class="line">                Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vis[t];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == t || a == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>, f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>&amp; i = cur[x]; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (d[x] + <span class="number">1</span> == d[e.to] &amp;&amp; (f = <span class="built_in">dfs</span>(e.to, <span class="built_in">min</span>(a, e.cap - e.flow))) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            to[x] = e.to;</span><br><span class="line">            e.flow += f;</span><br><span class="line">            edges[G[x][i] ^ <span class="number">1</span>].flow -= f;</span><br><span class="line">            flow += f;</span><br><span class="line">            a -= f;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxflow</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">bfs</span>()) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cur, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cur));</span><br><span class="line">        flow += <span class="built_in">dfs</span>(s, inf);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    s = <span class="number">0</span>; t = <span class="number">2</span> * n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">        <span class="built_in">add</span>(u, v + n, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">add</span>(s, i, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">add</span>(i + n, t, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="built_in">maxflow</span>(s, t);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!vst[i]) &#123;</span><br><span class="line">            <span class="keyword">int</span> x = i; vst[x] = <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, x);</span><br><span class="line">            <span class="keyword">while</span> (to[x] &amp;&amp; to[x] != t) &#123;</span><br><span class="line">                x = to[x] - n;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, x);</span><br><span class="line">                vst[x] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, n - ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€è¯•é¢˜åº“é—®é¢˜-é¢˜è§£</title>
    <url>/p/5a8ce31f.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.org/problemnew/show/P2763">ã€ŒLuogu P2763ã€è¯•é¢˜åº“é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>å‡è®¾ä¸€ä¸ªè¯•é¢˜åº“ä¸­æœ‰$n$é“è¯•é¢˜,æ¯é“è¯•é¢˜éƒ½æ ‡æ˜äº†æ‰€å±ç±»åˆ«,åŒä¸€é“é¢˜å¯èƒ½æœ‰å¤šä¸ªç±»åˆ«å±æ€§,ç°è¦ä»é¢˜åº“ä¸­æŠ½å–$m$é“é¢˜ç»„æˆè¯•å·,å¹¶è¦æ±‚è¯•å·åŒ…å«æŒ‡å®šç±»å‹çš„è¯•é¢˜,è¾“å‡ºå‡ºé¢˜æ–¹æ¡ˆ</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p><strong>å»ºå›¾</strong>: ç±»å‹ä¸æ±‡ç‚¹è¿å®¹é‡ä¸ºé¢˜ç›®æ•°çš„è¾¹;é¢˜ç›®ä¸æºç‚¹è¿å®¹é‡ä¸º$1$çš„è¾¹;é¢˜ç›®ä¸æ‰€å±ç±»å‹è¿å®¹é‡ä¸º$1$çš„è¾¹<br><strong>ç»“æœ</strong>: å¦‚æœæ»¡æµåˆ™å¯ä»¥å®ç°(æ²¿æ»¡æµè¾“å‡ºå³å¯),æ²¡æœ‰æ»¡æµè¾“å‡º<code>No Solution!</code></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2020</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="keyword">int</span> k, n, s, t, sum, d[maxn], cur[maxn];</span><br><span class="line"><span class="keyword">int</span> ans[maxn], ansi;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">    <span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>));</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(s);</span><br><span class="line">    d[s] = <span class="number">0</span>; vis[s] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (!vis[e.to] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                vis[e.to] = <span class="number">1</span>;</span><br><span class="line">                d[e.to] = d[x] + <span class="number">1</span>;</span><br><span class="line">                Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vis[t];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == t || a == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>, f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>&amp; i = cur[x]; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (d[x] + <span class="number">1</span> == d[e.to] &amp;&amp; (f = <span class="built_in">dfs</span>(e.to, <span class="built_in">min</span>(a, e.cap - e.flow))) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            e.flow += f;</span><br><span class="line">            edges[G[x][i] ^ <span class="number">1</span>].flow -= f;</span><br><span class="line">            flow += f;</span><br><span class="line">            a -= f;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxFlow</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">bfs</span>()) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cur, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cur));</span><br><span class="line">        flow += <span class="built_in">dfs</span>(s, inf);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;k, &amp;n);</span><br><span class="line">    s = <span class="number">0</span>; t = n + k + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> type;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;type);</span><br><span class="line">        sum += type; <span class="built_in">add</span>(n + i, t, type);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">add</span>(s, i, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> p, type;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;p);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= p; ++j) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;type);</span><br><span class="line">            <span class="built_in">add</span>(i, type + n, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> maxflow = <span class="built_in">MaxFlow</span>(s, t);</span><br><span class="line">    <span class="keyword">if</span> (maxflow == sum) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n + <span class="number">1</span>; i &lt;= n + k; ++i) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d: &quot;</span>, i - n);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; G[i].<span class="built_in">size</span>(); ++j) &#123;</span><br><span class="line">                Edge&amp; e = edges[G[i][j]];</span><br><span class="line">                <span class="keyword">if</span> (e.cap == <span class="number">0</span> &amp;&amp; e.flow != <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, e.to);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;No Solution!\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLuogu P5020 P1621 P4942ã€å°ç»ƒä¹ -é¢˜è§£</title>
    <url>/p/eb0c7a6c.html</url>
    <content><![CDATA[<h2 id="mathcal-ã€ŒP5020ã€-è´§å¸ç³»ç»Ÿ"><a href="#mathcal-ã€ŒP5020ã€-è´§å¸ç³»ç»Ÿ" class="headerlink" title="$\mathcal{ã€ŒP5020ã€}$ è´§å¸ç³»ç»Ÿ"></a>$\mathcal{ã€ŒP5020ã€}$ <a href="https://www.luogu.org/problemnew/show/P5020">è´§å¸ç³»ç»Ÿ</a></h2><p>è¡¨é¢ä¸Šæ˜¯æ•°è®ºï¼Œå…¶å®å°±æ˜¯ä¸ª__<em>åŠ¨æ€è§„åˆ’</em>__</p>
<p>é¦–å…ˆè®¾$A = (n, a) \ \ B = (m, b)$<br>å¯ä»¥è¯æ˜$B \subseteq A$<br>$proof:$<br>    æˆ‘ä»¬è®¾$x\in A$ä¸”$x$ä¸èƒ½è¢«$A$é›†åˆå†…é™¤å®ƒä»¥å¤–çš„å…ƒç´ ç»„æˆã€‚<br>    ç„¶åæˆ‘ä»¬å‡è®¾$x \notin B$ï¼Œé‚£ä¹ˆå°±è¯´æ˜$B$é›†åˆä¸­å¿…ç„¶å­˜åœ¨ä¸€äº›å…ƒç´ èƒ½å¤Ÿç»„æˆ$x$ã€‚<br>    é‚£ä¹ˆè¿™äº›å…ƒç´ è‡³å°‘å­˜åœ¨ä¸€ä¸ªä¸åœ¨é›†åˆ$A$å†…å¹¶ä¸”ä¸èƒ½è¢«é›†åˆ$A$é‡Œçš„å…ƒç´ ç»„æˆçš„æ•°ï¼ˆå› ä¸ºå¦‚æœä¸å­˜åœ¨çš„è¯é›†åˆ$A$å†…çš„å…ƒç´ å°±å¯ä»¥ç»„æˆ$x$äº†ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸é›†åˆ$B$çš„å®šä¹‰äº§ç”Ÿäº†çŸ›ç›¾ã€‚<br>    ç»¼ä¸Šæ‰€è¿°ï¼Œ$A$é›†åˆå†…ä¸èƒ½è¢«å…¶å®ƒæ•°ç»„æˆçš„æ•°å¿…ç„¶å­˜åœ¨äº$B$é›†åˆå†…<br>$Q.E.D$</p>
<p>ç„¶ååŠ¨æ€è§„åˆ’<br><code>dp[i]</code>è¡¨ç¤º$i$é¢å€¼æœ€å¤šèƒ½è¢«å‡ å¼ é’±è¡¨ç¤º<br>åˆ™è‹¥å…¶ä¸èƒ½è¢«è¡¨ç¤º<code>dp[i] = -inf</code><br>èƒ½è¡¨ç¤ºä¸”åªæœ‰å®ƒè‡ªå·±åˆ™<code>dp[i] = 1</code><br>åˆå§‹åŒ–<code>dp[] = -inf; dp[0] = 0</code><br>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º<code>dp[j] = max(dp[j], dp[j - a[i]] + 1)</code></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, T, ans, a[<span class="number">1010</span>], dp[<span class="number">30010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">-0x3f</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(a));</span><br><span class="line">        ans = <span class="number">0</span>; dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = a[i]; j &lt;= <span class="number">25010</span>; ++j) &#123;</span><br><span class="line">                dp[j] = <span class="built_in">max</span>(dp[j], dp[j - a[i]] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dp[a[i]] == <span class="number">1</span>) &#123;</span><br><span class="line">                ans++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 862ms 944kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="mathcal-ã€ŒP1621ã€-é›†åˆ"><a href="#mathcal-ã€ŒP1621ã€-é›†åˆ" class="headerlink" title="$\mathcal{ã€ŒP1621ã€}$ é›†åˆ"></a>$\mathcal{ã€ŒP1621ã€}$ <a href="https://www.luogu.org/problemnew/show/P1621">é›†åˆ</a></h2><p>ä½¿ç”¨__<em>å¹¶æŸ¥é›†</em><strong>å’Œ</strong><em>åŸƒæ°ç­›æ³•</em>__(åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•)å³å¯<br>å…·ä½“æ“ä½œæ˜¯è¾¹ç­›è¾¹åˆå¹¶é›†åˆ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ufs[maxn], a, b, p, ans;</span><br><span class="line"><span class="keyword">bool</span> isprime[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ufs[x] == x ? x : ufs[x] = <span class="built_in">find</span>(ufs[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;a, &amp;b, &amp;p);</span><br><span class="line">    ans = b - a + <span class="number">1</span>;               <span class="comment">//åˆå§‹ä¸ªæ•°ä¸ºåŒºé—´å†…æ•°çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = a; i &lt;= b; ++i) &#123; <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">        ufs[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= b; ++i) &#123; <span class="comment">//åŸƒæ°ç­›</span></span><br><span class="line">        <span class="keyword">if</span> (!isprime[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= p) &#123;          <span class="comment">//å¤§äºpæ‰åˆå¹¶</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = i * <span class="number">2</span>; j &lt;= b; j += i) &#123;</span><br><span class="line">                    isprime[j] = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">if</span> (j - i &gt;= a &amp;&amp; <span class="built_in">find</span>(j) != <span class="built_in">find</span>(j - i)) &#123; <span class="comment">//åˆå¹¶</span></span><br><span class="line">                        ufs[<span class="built_in">find</span>(j)] = <span class="built_in">find</span>(j - i);</span><br><span class="line">                        --ans;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;               <span class="comment">//ä¸å¤§äºpä½†è¦æ ‡è®°</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = i * <span class="number">2</span>; j &lt;= b; j += i) &#123;</span><br><span class="line">                    isprime[j] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 38ms 1312kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="mathcal-ã€ŒP4942ã€-å°å‡¯çš„æ•°å­—"><a href="#mathcal-ã€ŒP4942ã€-å°å‡¯çš„æ•°å­—" class="headerlink" title="$\mathcal{ã€ŒP4942ã€}$ å°å‡¯çš„æ•°å­—"></a>$\mathcal{ã€ŒP4942ã€}$ <a href="https://www.luogu.org/problemnew/show/P4942">å°å‡¯çš„æ•°å­—</a></h2><p>ç±»ä¼¼äº$NOIp2017\ D1T1$ <a href="https://www.luogu.org/problemnew/show/P3951">å°å‡¯çš„ç–‘æƒ‘</a>,æ¨æŸ¿å­å³å¯</p>
<p>é¦–å…ˆ$l(l+1)(l+2)â€¦(r-1)r$å¯ä»¥è¡¨ç¤ºä¸º$l\times 10^? + (l + 1)\times 10^? + â€¦ + r\times 10^?$<br>åŒæ—¶æˆ‘ä»¬çŸ¥é“$10$çš„è‹¥å¹²æ¬¡æ–¹é™¤ä»¥$9$çš„ä½™æ•°__æ’ä¸º__$1$<br>æ‰€ä»¥$l(l+1)(l+2)â€¦(r-1)r$é™¤ä»¥$9$çš„ä½™æ•°å°±ç­‰äº$l + (l + 1) + â€¦ + (r - 1) + r$çš„ä½™æ•°<br>å¹¶ä¸”$l,l+1,â€¦,r$ä¸ºç­‰å·®æ•°åˆ—,å…¬å·®ä¸º$1$<br>è¿ç”¨ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼å³å¯æ±‚è§£</p>
<p>$a_1 = l\ d = 1$<br>$n = r - l + 1$<br>$S_n = n\times a_1 + n\times (n - 1)\times \frac{d}{2}$<br>æ‰€ä»¥<br>$$<br>\boxed{Ans = n\times l + n\times (n - 1) \div 2}<br>$$</p>
<p>å¦å¤–è¦è¾¹ç®—è¾¹å–æ¨¡,é™¤ä»¥$2$è¦å˜æˆä¹˜æ¨¡$9$ä¸‹çš„é€†å…ƒ$5$<br>æ‰€ä»¥å…¬å¼å¦‚ä¸‹<br><code>ans = (n * (l % 9) % 9 + n * (n - 1) % 9 * 5 % 9) % 9;</code></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> l, r, n, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld %lld&quot;</span>, &amp;l, &amp;r);</span><br><span class="line">        n = (r - l + <span class="number">1</span>) % <span class="number">9</span>;</span><br><span class="line">        ans = (n * (l % <span class="number">9</span>) % <span class="number">9</span> + n * (n - <span class="number">1</span>) % <span class="number">9</span> * <span class="number">5</span> % <span class="number">9</span>) % <span class="number">9</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 32ms 888kB */</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong><em>å¦‚æœ‰ç–‘é—®,å¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€</em></strong></p>
]]></content>
      <categories>
        <category>é¢˜è§£</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>é¢˜è§£</tag>
        <tag>Luogu</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Œç½‘ç»œæµ24é¢˜ã€é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆé—®é¢˜-é¢˜è§£</title>
    <url>/p/154ff24f.html</url>
    <content><![CDATA[<p>é¢˜ç›®ä¼ é€é—¨: <a href="https://www.luogu.org/problemnew/show/P2756">ã€ŒLuogu P2756ã€é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆæ•°é—®é¢˜</a></p>
<span id="more"></span>

<h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>è¾“å…¥ä¸¤æ–¹é£è¡Œå‘˜ä¸ªæ•°$m,n$,å†ç»™å®šä¸¤æ–¹é£è¡Œå‘˜å¯ä»¥é…åˆçš„äººç¼–å·$i,j$(ä»¥$-1,-1$ç»“æŸ)<br>è¾“å‡ºæœ€å¤šé…å¯¹æ•°å’Œé…å¯¹æ–¹æ¡ˆ</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>ä¸»è¦åœ¨å»ºå›¾<br>çš‡å®¶ç©ºå†›ä¸æºç‚¹$s$è¿å®¹é‡$1$çš„è¾¹,å¤–ç±ä¸æ±‡ç‚¹$t$è¿å®¹é‡$1$çš„è¾¹,å¯é…åˆçš„ä¸¤ç‚¹é—´è¿å®¹é‡ä¸º$1$çš„è¾¹<br>è¾“å‡ºæœ€å¤§æµå³å¯(è¦æ‰¾é…å¯¹æ–¹æ¡ˆ)</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨åŒˆç‰™åˆ©ç®—æ³•(æœ¬æ–‡ä¸ç»™å‡º)</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">120</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t;</span><br><span class="line"><span class="keyword">int</span> d[maxn], cur[maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">    <span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f)&#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>));</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(s);</span><br><span class="line">    d[s] = <span class="number">0</span>;</span><br><span class="line">    vis[s] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">             Edge&amp; e = edges[G[x][i]];</span><br><span class="line">             <span class="keyword">if</span> (!vis[e.to] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                 vis[e.to] = <span class="number">1</span>;</span><br><span class="line">                 d[e.to] = d[x] + <span class="number">1</span>;</span><br><span class="line">                 Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">             &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vis[t];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == t || a == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>, f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>&amp; i = cur[x]; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (d[x] + <span class="number">1</span> == d[e.to] &amp;&amp; (f = <span class="built_in">dfs</span>(e.to, <span class="built_in">min</span>(a, e.cap - e.flow))) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            e.flow += f;</span><br><span class="line">            edges[G[x][i] ^ <span class="number">1</span>].flow -= f;</span><br><span class="line">            flow += f;</span><br><span class="line">            a -= f;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxFlow</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">bfs</span>()) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cur, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cur));</span><br><span class="line">        flow += <span class="built_in">dfs</span>(s, inf);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;m, &amp;n);</span><br><span class="line">    s = <span class="number">0</span>; t = n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> u, v;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;u, &amp;v) == <span class="number">2</span> &amp;&amp; u != <span class="number">-1</span> &amp;&amp; v != <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="built_in">add</span>(u, v, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="built_in">add</span>(s, i, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = m + <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">add</span>(i, t, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="built_in">MaxFlow</span>(s, t);</span><br><span class="line">    <span class="keyword">if</span> (flow == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;No Solution!\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, flow);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.<span class="built_in">size</span>(); i = i + <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (edges[i].from != s &amp;&amp; edges[i].to != t) &#123;</span><br><span class="line">            <span class="keyword">if</span> (edges[i].flow != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, edges[i].from, edges[i].to);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>é¢˜è§£</category>
        <category>ç½‘ç»œæµ24é¢˜</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç½‘ç»œæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-ç½‘ç»œæµç›¸å…³</title>
    <url>/p/c3cdab79.html</url>
    <content><![CDATA[<p>ç½‘ç»œæµç®—æ³•ç›¸å…³æ¨¡æ¿,è®²è§£__ä»¥åå†è¯´å§__,å’•å’•å’•</p>
<span id="more"></span>

<p>æ³¨:æœ¬æ–‡ä½¿ç”¨<code>vector</code>å»ºå›¾</p>
<h2 id="ç½‘ç»œæœ€å¤§æµ"><a href="#ç½‘ç»œæœ€å¤§æµ" class="headerlink" title="ç½‘ç»œæœ€å¤§æµ"></a>ç½‘ç»œæœ€å¤§æµ</h2><h3 id="Edmonds-Karpç®—æ³•"><a href="#Edmonds-Karpç®—æ³•" class="headerlink" title="Edmonds-Karpç®—æ³•"></a>Edmonds-Karpç®—æ³•</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> n, m, s, t, ans;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">    <span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="keyword">int</span> a[maxn], p[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(from, to, cap, <span class="number">0</span>));</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(to, from, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[from].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[to].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">EdmondsKarp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(a));</span><br><span class="line">        queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">        Q.<span class="built_in">push</span>(s);</span><br><span class="line">        a[s] = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">        <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">                Edge&amp; e = edges[G[x][i]];</span><br><span class="line">                <span class="keyword">if</span> (!a[e.to] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                    p[e.to] = G[x][i];</span><br><span class="line">                    a[e.to] = <span class="built_in">min</span>(a[x], e.cap - e.flow);</span><br><span class="line">                    Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (a[t]) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!a[t]) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> u = t; u != s; u = edges[p[u]].from) &#123;</span><br><span class="line">            edges[p[u]].flow += a[t];</span><br><span class="line">            edges[p[u] ^ <span class="number">1</span>].flow -= a[t];</span><br><span class="line">        &#125;</span><br><span class="line">        ans += a[t];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Dinicç®—æ³•-å¸¸ç”¨"><a href="#Dinicç®—æ³•-å¸¸ç”¨" class="headerlink" title="Dinicç®—æ³•(å¸¸ç”¨)"></a>Dinicç®—æ³•(å¸¸ç”¨)</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">10010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, d[maxn], cur[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;from, to, cap, <span class="number">0</span>&#125;);</span><br><span class="line">    edges.<span class="built_in">push_back</span>((Edge) &#123;to, from, <span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[from].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[to].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BFS</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(s);</span><br><span class="line">    d[s] = <span class="number">0</span>;</span><br><span class="line">    vis[s] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (!vis[e.to] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                vis[e.to] = <span class="number">1</span>;</span><br><span class="line">                d[e.to] = d[x] + <span class="number">1</span>;</span><br><span class="line">                Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vis[t];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == t || a == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>, f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>&amp; i = cur[x]; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        Edge&amp; e = edges[G[x][i]];</span><br><span class="line">        <span class="keyword">if</span> (d[x] + <span class="number">1</span> == d[e.to] &amp;&amp; (f = <span class="built_in">DFS</span>(e.to, <span class="built_in">min</span>(a, e.cap - e.flow))) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            e.flow += f;</span><br><span class="line">            edges[G[x][i] ^ <span class="number">1</span>].flow -= f;</span><br><span class="line">            flow += f;</span><br><span class="line">            a -= f;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxFlow</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">BFS</span>()) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cur, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cur));</span><br><span class="line">        flow += <span class="built_in">DFS</span>(s, <span class="number">0x3f3f3f3f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ISAPç®—æ³•"><a href="#ISAPç®—æ³•" class="headerlink" title="ISAPç®—æ³•"></a>ISAPç®—æ³•</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t;</span><br><span class="line"><span class="keyword">int</span> d[maxn], p[maxn], num[maxn], cur[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow;</span><br><span class="line">    <span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(from, to, cap, <span class="number">0</span>));</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(to, from, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[from].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[to].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(t);</span><br><span class="line">    d[t] = <span class="number">0</span>; vis[t] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (!vis[e.from] &amp;&amp; e.cap &gt; e.flow) &#123;</span><br><span class="line">                vis[e.from] = <span class="number">1</span>;</span><br><span class="line">                d[e.from] = d[x] + <span class="number">1</span>;</span><br><span class="line">                Q.<span class="built_in">push</span>(e.from);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Augment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = t, a = inf;</span><br><span class="line">    <span class="keyword">while</span> (x != s) &#123;</span><br><span class="line">        Edge&amp; e = edges[p[x]];</span><br><span class="line">        a = <span class="built_in">min</span>(a, e.cap - e.flow);</span><br><span class="line">        x = edges[p[x]].from;</span><br><span class="line">    &#125;</span><br><span class="line">    x = t;</span><br><span class="line">    <span class="keyword">while</span> (x != s) &#123;</span><br><span class="line">        edges[p[x]].flow += a;</span><br><span class="line">        edges[p[x] ^ <span class="number">1</span>].flow -= a;</span><br><span class="line">        x = edges[p[x]].from;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ISAP</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">bfs</span>();</span><br><span class="line">    <span class="built_in">memset</span>(num, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(num));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) num[d[i]]++;</span><br><span class="line">    <span class="keyword">int</span> x = s;</span><br><span class="line">    <span class="built_in">memset</span>(cur, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cur));</span><br><span class="line">    <span class="keyword">while</span> (d[s] &lt; n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (x == t) &#123;</span><br><span class="line">            flow += <span class="built_in">Augment</span>();</span><br><span class="line">            x = s;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ok = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = cur[x]; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (e.cap &gt; e.flow &amp;&amp; d[x] == d[e.to] + <span class="number">1</span>) &#123;</span><br><span class="line">                ok = <span class="number">1</span>;</span><br><span class="line">                p[e.to] = G[x][i];</span><br><span class="line">                cur[x] = i;</span><br><span class="line">                x = e.to;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!ok) &#123;</span><br><span class="line">            <span class="keyword">int</span> mm = n - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">                Edge&amp; e = edges[G[x][i]];</span><br><span class="line">                <span class="keyword">if</span> (e.cap &gt; e.flow) mm = <span class="built_in">min</span>(mm, d[e.to]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (--num[d[x]] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            num[d[x] = mm + <span class="number">1</span>]++;</span><br><span class="line">            cur[x] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (x != s) x = edges[p[x]].from;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æœ€å°è´¹ç”¨æœ€å¤§æµ"><a href="#æœ€å°è´¹ç”¨æœ€å¤§æµ" class="headerlink" title="æœ€å°è´¹ç”¨æœ€å¤§æµ"></a>æœ€å°è´¹ç”¨æœ€å¤§æµ</h2><h3 id="Bellman-Fordç®—æ³•"><a href="#Bellman-Fordç®—æ³•" class="headerlink" title="Bellman-Fordç®—æ³•"></a>Bellman-Fordç®—æ³•</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t, ansflow;</span><br><span class="line"><span class="keyword">int</span> vis[maxn], d[maxn], p[maxn], a[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> anscost;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, cap, flow, cost;</span><br><span class="line">    <span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> f, <span class="keyword">int</span> w): <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">cap</span>(c), <span class="built_in">flow</span>(f), <span class="built_in">cost</span>(w)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; edges;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> c, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, c, <span class="number">0</span>, w));</span><br><span class="line">    edges.<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, <span class="number">0</span>, <span class="number">0</span>,-w));</span><br><span class="line">    <span class="keyword">int</span> mm = edges.<span class="built_in">size</span>();</span><br><span class="line">    G[u].<span class="built_in">push_back</span>(mm - <span class="number">2</span>);</span><br><span class="line">    G[v].<span class="built_in">push_back</span>(mm - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">BellmanFord</span><span class="params">(<span class="keyword">int</span>&amp; flow, <span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) d[i] = inf;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    d[s] = <span class="number">0</span>; vis[s] = <span class="number">1</span>; p[s] = <span class="number">0</span>; a[s] = inf;</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.<span class="built_in">push</span>(s);</span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = Q.<span class="built_in">front</span>(); Q.<span class="built_in">pop</span>();</span><br><span class="line">        vis[x] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[x].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            Edge&amp; e = edges[G[x][i]];</span><br><span class="line">            <span class="keyword">if</span> (e.cap &gt; e.flow &amp;&amp; d[e.to] &gt; d[x] + e.cost) &#123;</span><br><span class="line">                d[e.to] = d[x] + e.cost;</span><br><span class="line">                p[e.to] = G[x][i];</span><br><span class="line">                a[e.to] = <span class="built_in">min</span>(a[x], e.cap - e.flow);</span><br><span class="line">                <span class="keyword">if</span> (!vis[e.to]) &#123;</span><br><span class="line">                    Q.<span class="built_in">push</span>(e.to);</span><br><span class="line">                    vis[e.to] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (d[t] == inf) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    flow += a[t];</span><br><span class="line">    cost += (<span class="keyword">long</span> <span class="keyword">long</span>)d[t] * (<span class="keyword">long</span> <span class="keyword">long</span>)a[t];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> u = t; u != s; u = edges[p[u]].from) &#123;</span><br><span class="line">        edges[p[u]].flow += a[t];</span><br><span class="line">        edges[p[u] ^ <span class="number">1</span>].flow -= a[t];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MinCostMaxFlow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>&amp; cost)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flow = <span class="number">0</span>; cost = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">BellmanFord</span>(flow, cost));</span><br><span class="line">    <span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®—æ³•ç¬”è®°-è®¡ç®—å‡ ä½•</title>
    <url>/p/1aba30fe.html</url>
    <content><![CDATA[<p>å•¥ä¹Ÿä¸è¯´äº†,ç›´æ¥ä¸Šä»£ç ,æ¯ä¸ªå‡½æ•°åŠŸèƒ½å·²ç»ä»¥æ³¨é‡Šæ–¹å¼ç»™å‡º</p>
<span id="more"></span>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*************************************************************</span></span><br><span class="line"><span class="comment"> *  &gt; Description      : è®¡ç®—å‡ ä½•æ¨¡æ¿</span></span><br><span class="line"><span class="comment"> *  &gt; Copyright (C) 2019 Tony</span></span><br><span class="line"><span class="comment">**************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-10</span>;     <span class="comment">//ç²¾åº¦</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI  = <span class="built_in">acos</span>(<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ç‚¹(å‘é‡)</span></span><br><span class="line"><span class="comment"> * @param x æ¨ªåæ ‡</span></span><br><span class="line"><span class="comment"> * @param y çºµåæ ‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> &#123;</span></span><br><span class="line">    <span class="keyword">double</span> x, y;</span><br><span class="line">    <span class="built_in">Point</span>(<span class="keyword">double</span> x = <span class="number">0</span>, <span class="keyword">double</span> y = <span class="number">0</span>): <span class="built_in">x</span>(x), <span class="built_in">y</span>(y) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> Point Vector;</span><br><span class="line">Vector <span class="keyword">operator</span> + (Vector a, Vector b) &#123; <span class="keyword">return</span> <span class="built_in">Vector</span>(a.x + b.x, a.y + b.y); &#125;</span><br><span class="line">Vector <span class="keyword">operator</span> - (Vector a, Vector b) &#123; <span class="keyword">return</span> <span class="built_in">Vector</span>(a.x - b.x, a.y - b.y); &#125;</span><br><span class="line">Vector <span class="keyword">operator</span> * (Vector a, <span class="keyword">double</span> p) &#123; <span class="keyword">return</span> <span class="built_in">Vector</span>(a.x * p, a.y * p); &#125;</span><br><span class="line">Vector <span class="keyword">operator</span> / (Vector a, <span class="keyword">double</span> p) &#123; <span class="keyword">return</span> <span class="built_in">Vector</span>(a.x / p, a.y / p); &#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief å¸¦ç²¾åº¦æ¯”è¾ƒ(ä¸‰æ€å‡½æ•°)</span></span><br><span class="line"><span class="comment"> * @param[in]  x  è¾“å…¥</span></span><br><span class="line"><span class="comment"> * @return å¤§å°å…³ç³»ï¼šç­‰äº0(0), å°äºé›¶(-1), å¤§äºé›¶(1)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dcmp</span><span class="params">(<span class="keyword">double</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fabs</span>(x) &lt; eps) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> x &lt; <span class="number">0</span> ? <span class="number">-1</span> : <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Point&amp; a, <span class="keyword">const</span> Point&amp; b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a.x &lt; b.x || (a.x == b.x &amp;&amp; a.y &lt; b.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> == (<span class="keyword">const</span> Point&amp; a, <span class="keyword">const</span> Point&amp; b) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dcmp</span>(a.x - b.x) == <span class="number">0</span> &amp;&amp; <span class="built_in">dcmp</span>(a.y - b.y) == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Dot</span><span class="params">(Vector a, Vector b)</span> </span>&#123; <span class="keyword">return</span> a.x * b.x + a.y * b.y; &#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Length</span><span class="params">(Vector a)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">sqrt</span>(<span class="built_in">Dot</span>(a, a)); &#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Angle</span><span class="params">(Vector a, Vector b)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">acos</span>(<span class="built_in">Dot</span>(a, b) / <span class="built_in">Length</span>(a) / <span class="built_in">Length</span>(b)); &#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Cross</span><span class="params">(Vector a, Vector b)</span> </span>&#123; <span class="keyword">return</span> a.x * b.y - a.y * b.x; &#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Area2</span><span class="params">(Point a, Point b, Point c)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">Cross</span>(b - a, c - a); &#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Dist2</span><span class="params">(<span class="keyword">const</span> Point&amp; A, <span class="keyword">const</span> Point&amp; B)</span> </span>&#123; <span class="keyword">return</span> (A.x - B.x) * (A.x - B.x) + (A.y - B.y) * (A.y - B.y); &#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">angle</span><span class="params">(Vector v)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">atan2</span>(v.y, v.x); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief å‘é‡æ—‹è½¬</span></span><br><span class="line"><span class="comment"> * @param[in]  a    å‘é‡</span></span><br><span class="line"><span class="comment"> * @param[in]  rad  æ—‹è½¬è§’åº¦(é€†æ—¶é’ˆ)</span></span><br><span class="line"><span class="comment"> * @return æ—‹è½¬åçš„å‘é‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Vector <span class="title">Rotate</span><span class="params">(Vector a, <span class="keyword">double</span> rad)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector</span>(a.x * <span class="built_in">cos</span>(rad) - a.y * <span class="built_in">sin</span>(rad), a.x * <span class="built_in">sin</span>(rad) + a.y * <span class="built_in">cos</span>(rad));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief æ±‚å•ä½å‘é‡</span></span><br><span class="line"><span class="comment"> * @param[in]  a  å‘é‡</span></span><br><span class="line"><span class="comment"> * @return æ²¿å‘é‡açš„å•ä½å‘é‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Vector <span class="title">Normal</span><span class="params">(Vector a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> L = <span class="built_in">Length</span>(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector</span>(-a.y / L, a.x / L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ä¸¤æ¡ç›´çº¿äº¤ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]  p  ç¬¬ä¸€æ¡ç›´çº¿çš„èµ·å§‹ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]  v  ç¬¬ä¸€æ¡ç›´çº¿çš„æ–¹å‘å‘é‡</span></span><br><span class="line"><span class="comment"> * @param[in]  q  ç¬¬äºŒæ¡ç›´çº¿çš„èµ·å§‹ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]  w  ç¬¬äºŒæ¡ç›´çº¿çš„æ–¹å‘å‘é‡</span></span><br><span class="line"><span class="comment"> * @return ä¸¤æ¡ç›´çº¿äº¤ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Point <span class="title">GetLineIntersection</span><span class="params">(Point p, Vector v, Point q, Vector w)</span> </span>&#123;</span><br><span class="line">    Vector u = p - q;</span><br><span class="line">    <span class="keyword">double</span> t = <span class="built_in">Cross</span>(w, u) / <span class="built_in">Cross</span>(v, w);</span><br><span class="line">    <span class="keyword">return</span> p + v * t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ç‚¹åˆ°ç›´çº¿è·ç¦»</span></span><br><span class="line"><span class="comment"> * @param[in]  p    ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]  a,b  ç›´çº¿ä¸Šä¸¤ç‚¹</span></span><br><span class="line"><span class="comment"> * @return ç‚¹åˆ°ç›´çº¿è·ç¦»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">DistanceToLine</span><span class="params">(Point p, Point a, Point b)</span> </span>&#123;</span><br><span class="line">    Vector v1 = b - a, v2 = p - a;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fabs</span>(<span class="built_in">Cross</span>(v1, v2)) / <span class="built_in">Length</span>(v1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ç‚¹åˆ°çº¿æ®µè·ç¦»</span></span><br><span class="line"><span class="comment"> * @param[in]  p    ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]  a,b  çº¿æ®µä¸¤ç«¯ç‚¹</span></span><br><span class="line"><span class="comment"> * @return ç‚¹åˆ°çº¿æ®µè·ç¦»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">DistanceToSegment</span><span class="params">(Point p, Point a, Point b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a == b) <span class="keyword">return</span> <span class="built_in">Length</span>(p - a);</span><br><span class="line">    Vector v1 = b - a, v2 = p - a, v3 = p - b;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">dcmp</span>(<span class="built_in">Dot</span>(v1, v2)) &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="built_in">Length</span>(v2);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">dcmp</span>(<span class="built_in">Dot</span>(v1, v3)) &gt; <span class="number">0</span>) <span class="keyword">return</span> <span class="built_in">Length</span>(v3);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">fabs</span>(<span class="built_in">Cross</span>(v1, v2)) / <span class="built_in">Length</span>(v1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ç‚¹åœ¨ç›´çº¿ä¸ŠæŠ•å½±ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]  p    ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]  a,b  ç›´çº¿ä¸Šä¸¤ç‚¹</span></span><br><span class="line"><span class="comment"> * @return ç‚¹åœ¨ç›´çº¿ä¸ŠæŠ•å½±ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Point <span class="title">GetLineProjection</span><span class="params">(Point p, Point a, Point b)</span> </span>&#123;</span><br><span class="line">    Vector v = b - a;</span><br><span class="line">    <span class="keyword">return</span> a + v * (<span class="built_in">Dot</span>(v, p - a) / <span class="built_in">Dot</span>(v, v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief çº¿æ®µç›¸äº¤åˆ¤å®š(ä¸å«ç«¯ç‚¹)</span></span><br><span class="line"><span class="comment"> * @param[in]  a1,a2  ç¬¬ä¸€æ¡çº¿æ®µç«¯ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]  b1,b2  ç¬¬äºŒæ¡çº¿æ®µç«¯ç‚¹</span></span><br><span class="line"><span class="comment"> * @return æ˜¯å¦ç›¸äº¤(bool)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SegmentProperIntersection</span><span class="params">(Point a1, Point a2, Point b1, Point b2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> c1 = <span class="built_in">Cross</span>(a2 - a1, b1 - a1), c2 = <span class="built_in">Cross</span>(a2 - a1, b2 - a1),</span><br><span class="line">           c3 = <span class="built_in">Cross</span>(b2 - b1, a1 - b1), c4 = <span class="built_in">Cross</span>(b2 - b1, a2 - b1);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dcmp</span>(c1) * <span class="built_in">dcmp</span>(c2) &lt; <span class="number">0</span> &amp;&amp; <span class="built_in">dcmp</span>(c3) * <span class="built_in">dcmp</span>(c4) &lt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ç‚¹åœ¨çº¿æ®µä¸Šåˆ¤å®š(ä¸åŒ…æ‹¬ç«¯ç‚¹)</span></span><br><span class="line"><span class="comment"> * @param[in]  p      ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]  a1,a2  çº¿æ®µä¸¤ç«¯ç‚¹</span></span><br><span class="line"><span class="comment"> * @return æ˜¯å¦åœ¨çº¿æ®µä¸Š(bool)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">OnSegment</span><span class="params">(Point p, Point a1, Point a2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dcmp</span>(<span class="built_in">Cross</span>(a1 - p, a2 - p)) == <span class="number">0</span> &amp;&amp; <span class="built_in">dcmp</span>(<span class="built_in">Dot</span>(a1 - p, a2 - p)) &lt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief å¤šè¾¹å½¢é¢ç§¯</span></span><br><span class="line"><span class="comment"> * @param[in]  *p  é¡¶ç‚¹æ•°ç»„</span></span><br><span class="line"><span class="comment"> * @param[in]</span></span><br><span class="line"><span class="comment"> * @return </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">PolygonArea</span><span class="params">(Point* p, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> area = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        area += <span class="built_in">Cross</span>(p[i] - p[<span class="number">0</span>], p[i + <span class="number">1</span>] - p[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> area / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ç›´çº¿(å‚æ•°å¼)</span></span><br><span class="line"><span class="comment"> * @param p   ç›´çº¿ä¸Šçš„ä¸€ç‚¹</span></span><br><span class="line"><span class="comment"> * @param v   æ–¹å‘å‘é‡</span></span><br><span class="line"><span class="comment"> * @param ang æ–¹å‘å‘é‡æè§’</span></span><br><span class="line"><span class="comment"> * @function point(double t)</span></span><br><span class="line"><span class="comment"> *     @brief        ç›´çº¿ä¸Šçš„ç‚¹</span></span><br><span class="line"><span class="comment"> *     @param[in] t  æ¨ªåæ ‡</span></span><br><span class="line"><span class="comment"> *     @return       ç›´çº¿ä¸Šçš„ç‚¹</span></span><br><span class="line"><span class="comment"> * @function move(double d)</span></span><br><span class="line"><span class="comment"> *     @brief        æ²¿ç›´çº¿ç§»åŠ¨</span></span><br><span class="line"><span class="comment"> *     @param[in] d  å¹³ç§»è·ç¦»</span></span><br><span class="line"><span class="comment"> *     @return       å¹³ç§»åçš„ç›´çº¿</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Line</span> &#123;</span></span><br><span class="line">    Point p;</span><br><span class="line">    Vector v;</span><br><span class="line">    <span class="keyword">double</span> ang;</span><br><span class="line">    <span class="built_in">Line</span>() &#123;&#125;</span><br><span class="line">    <span class="built_in">Line</span>(Point p, Vector v): <span class="built_in">p</span>(p), <span class="built_in">v</span>(v) &#123; ang = <span class="built_in">atan2</span>(v.y, v.x); &#125;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Line&amp; L) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ang &lt; L.ang;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Point <span class="title">point</span><span class="params">(<span class="keyword">double</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> p + v * t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Line <span class="title">move</span><span class="params">(<span class="keyword">double</span> d)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Line</span>(p + <span class="built_in">Normal</span>(v) * d, v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief æ˜¯å¦åœ¨ç›´çº¿å·¦ä¾§</span></span><br><span class="line"><span class="comment"> * @param[in]  L  ç›´çº¿</span></span><br><span class="line"><span class="comment"> * @param[in]  p  ç‚¹</span></span><br><span class="line"><span class="comment"> * @return æ˜¯å¦åœ¨ç‚¹å·¦ä¾§(bool)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">OnLeft</span><span class="params">(Line L, Point p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Cross</span>(L.v, p - L.p) &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ä¸¤æ¡ç›´çº¿äº¤ç‚¹(é‡è½½)</span></span><br><span class="line"><span class="comment"> * @param[in]  a  ç¬¬ä¸€æ¡ç›´çº¿</span></span><br><span class="line"><span class="comment"> * @param[in]  b  ç¬¬äºŒæ¡ç›´çº¿</span></span><br><span class="line"><span class="comment"> * @return ä¸¤æ¡ç›´çº¿äº¤ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Point <span class="title">GetLineIntersection</span><span class="params">(Line a, Line b)</span> </span>&#123;</span><br><span class="line">    Vector u = a.p - b.p;</span><br><span class="line">    <span class="keyword">double</span> t = <span class="built_in">Cross</span>(b.v, u) / <span class="built_in">Cross</span>(a.v, b.v);</span><br><span class="line">    <span class="keyword">return</span> a.p + a.v * t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief åœ†</span></span><br><span class="line"><span class="comment"> * @param c   åœ†å¿ƒ</span></span><br><span class="line"><span class="comment"> * @param r   åŠå¾„</span></span><br><span class="line"><span class="comment"> * @function point(double a)</span></span><br><span class="line"><span class="comment"> *     @brief         åœ†ä¸Šçš„ç‚¹</span></span><br><span class="line"><span class="comment"> *     @param[in]  a  æ¨ªåæ ‡</span></span><br><span class="line"><span class="comment"> *     @return        åœ†ä¸Šçš„ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Circle</span> &#123;</span></span><br><span class="line">    Point c;</span><br><span class="line">    <span class="keyword">double</span> r;</span><br><span class="line">    <span class="built_in">Circle</span>(Point c, <span class="keyword">double</span> r): <span class="built_in">c</span>(c), <span class="built_in">r</span>(r) &#123;&#125;</span><br><span class="line">    <span class="function">Point <span class="title">point</span><span class="params">(<span class="keyword">double</span> a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Point</span>(c.x + <span class="built_in">cos</span>(a) * r, c.y + <span class="built_in">sin</span>(a) * r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ç›´çº¿å’Œåœ†äº¤ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]   L      ç›´çº¿</span></span><br><span class="line"><span class="comment"> * @param[in]   C      åœ†</span></span><br><span class="line"><span class="comment"> * @param[out]  t1,t2  äº¤ç‚¹æ¨ªåæ ‡</span></span><br><span class="line"><span class="comment"> * @param[out]  sol    äº¤ç‚¹é›†(vector)</span></span><br><span class="line"><span class="comment"> * @return äº¤ç‚¹ä¸ªæ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GetLineCircleIntersection</span><span class="params">(Line L, Circle C, <span class="keyword">double</span>&amp; t1, <span class="keyword">double</span>&amp; t2, vector&lt;Point&gt;&amp; sol)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> a = L.v.x, b = L.p.x - C.c.x, c = L.v.y, d = L.p.y - C.c.y;</span><br><span class="line">    <span class="keyword">double</span> e = a * a + c * c, f = <span class="number">2</span> * (a * b + c * d), g = b * b + d * d - C.r * C.r;</span><br><span class="line">    <span class="keyword">double</span> delta = f * f - <span class="number">4</span> * e * g;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">dcmp</span>(delta) &lt; <span class="number">0</span> ) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">dcmp</span>(delta) == <span class="number">0</span>) &#123;</span><br><span class="line">        t1 = t2 = -f / (<span class="number">2</span> * e);</span><br><span class="line">        sol.<span class="built_in">push_back</span>(L.<span class="built_in">point</span>(t1));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    t1 = (-f - <span class="built_in">sqrt</span>(delta)) / (<span class="number">2</span> * e); sol.<span class="built_in">push_back</span>(L.<span class="built_in">point</span>(t1));</span><br><span class="line">    t2 = (-f + <span class="built_in">sqrt</span>(delta)) / (<span class="number">2</span> * e); sol.<span class="built_in">push_back</span>(L.<span class="built_in">point</span>(t2));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief åœ†å’Œåœ†äº¤ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]   C1,C2  ä¸¤åœ†</span></span><br><span class="line"><span class="comment"> * @param[out]  sol    äº¤ç‚¹é›†(vector)</span></span><br><span class="line"><span class="comment"> * @return äº¤ç‚¹ä¸ªæ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GetCircleCircleIntersection</span><span class="params">(Circle C1, Circle C2, vector&lt;Point&gt;&amp; sol)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> d = <span class="built_in">Length</span>(C1.c - C2.c);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">dcmp</span>(d) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">dcmp</span>(C1.r - C2.r) == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">dcmp</span>(C1.r + C2.r - d) &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">dcmp</span>(<span class="built_in">fabs</span>(C1.r - C2.r) - d) &gt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">double</span> a = <span class="built_in">angle</span>(C2.c - C1.c);</span><br><span class="line">    <span class="keyword">double</span> da = <span class="built_in">acos</span>((C1.r * C1.r + d * d - C2.r * C2.r) / (<span class="number">2</span> * C1.r * d));</span><br><span class="line">    Point p1 = C1.<span class="built_in">point</span>(a - da), p2 = C1.<span class="built_in">point</span>(a + da);</span><br><span class="line">    sol.<span class="built_in">push_back</span>(p1);</span><br><span class="line">    <span class="keyword">if</span> (p1 == p2) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    sol.<span class="built_in">push_back</span>(p2);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief æ±‚åˆ‡çº¿</span></span><br><span class="line"><span class="comment"> * @param[in]   p   ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]   C   åœ†</span></span><br><span class="line"><span class="comment"> * @param[out]  *v  åˆ‡çº¿</span></span><br><span class="line"><span class="comment"> * @return åˆ‡çº¿æ¡æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getTangents</span><span class="params">(Point p, Circle C, Vector* v)</span> </span>&#123;</span><br><span class="line">    Vector u = C.c - p;</span><br><span class="line">    <span class="keyword">double</span> dist = <span class="built_in">Length</span>(u);</span><br><span class="line">    <span class="keyword">if</span> (dist &lt; C.r) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">dcmp</span>(dist - C.r) == <span class="number">0</span>) &#123;</span><br><span class="line">        v[<span class="number">0</span>] = <span class="built_in">Rotate</span>(u, PI / <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">double</span> ang = <span class="built_in">asin</span>(C.r / dist);</span><br><span class="line">        v[<span class="number">0</span>] = <span class="built_in">Rotate</span>(u, -ang);</span><br><span class="line">        v[<span class="number">1</span>] = <span class="built_in">Rotate</span>(u, +ang);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ä¸¤åœ†å…¬åˆ‡çº¿</span></span><br><span class="line"><span class="comment"> * @param[in]   A,B    ä¸¤åœ†</span></span><br><span class="line"><span class="comment"> * @param[out]  *a,*b  åˆ‡ç‚¹</span></span><br><span class="line"><span class="comment"> * @return å…¬åˆ‡çº¿æ¡æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getTangents</span><span class="params">(Circle A, Circle B, Point* a, Point* b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (A.r - B.r) &#123; <span class="built_in">swap</span>(A, B); <span class="built_in">swap</span>(a, b); &#125;</span><br><span class="line">    <span class="keyword">int</span> d2 = (A.c.x - B.c.x) * (A.c.x - B.c.x) + (A.c.y - B.c.y) * (A.c.y - B.c.y);</span><br><span class="line">    <span class="keyword">int</span> rdiff = A.r - B.r;</span><br><span class="line">    <span class="keyword">int</span> rsum  = A.r + B.r;</span><br><span class="line">    <span class="keyword">if</span> (d2 &lt; rdiff * rdiff) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">double</span> base = <span class="built_in">atan2</span>(B.c.y - A.c.y, B.c.x - A.c.x);</span><br><span class="line">    <span class="keyword">if</span> (d2 == <span class="number">0</span> &amp;&amp; A.r == B.r) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (d2 == rdiff * rdiff) &#123;</span><br><span class="line">        a[cnt] = A.<span class="built_in">point</span>(base);</span><br><span class="line">        b[cnt] = B.<span class="built_in">point</span>(base);</span><br><span class="line">        cnt++;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">double</span> ang = <span class="built_in">acos</span>((A.r - B.r) / <span class="built_in">sqrt</span>(d2));</span><br><span class="line">    a[cnt] = A.<span class="built_in">point</span>(base + ang); b[cnt] = B.<span class="built_in">point</span>(base + ang); cnt++;</span><br><span class="line">    a[cnt] = A.<span class="built_in">point</span>(base - ang); b[cnt] = B.<span class="built_in">point</span>(base - ang); cnt++;</span><br><span class="line">    <span class="keyword">if</span> (d2 == rsum * rsum) &#123;</span><br><span class="line">        a[cnt] = A.<span class="built_in">point</span>(base);</span><br><span class="line">        b[cnt] = B.<span class="built_in">point</span>(PI + base);</span><br><span class="line">        cnt++;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (d2 &gt; rsum * rsum) &#123;</span><br><span class="line">        <span class="keyword">double</span> ang = <span class="built_in">acos</span>((A.r + B.r) / <span class="built_in">sqrt</span>(d2));</span><br><span class="line">        a[cnt] = A.<span class="built_in">point</span>(base + ang); b[cnt] = B.<span class="built_in">point</span>(PI + base + ang); cnt++;</span><br><span class="line">        a[cnt] = A.<span class="built_in">point</span>(base - ang); b[cnt] = B.<span class="built_in">point</span>(PI + base - ang); cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> vector&lt;Point&gt; Polygon;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief åˆ¤å®šç‚¹åœ¨å¤šè¾¹å½¢å†…</span></span><br><span class="line"><span class="comment"> * @param[in]  p     ç‚¹</span></span><br><span class="line"><span class="comment"> * @param[in]  poly  å¤šè¾¹å½¢</span></span><br><span class="line"><span class="comment"> * @return æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…(åœ¨1,ä¸åœ¨0,åœ¨è¾¹ä¸Š-1)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isPointInPolygon</span><span class="params">(Point p, Polygon poly)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> wn = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> n = poly.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">OnSegment</span>(p, poly[i], poly[(i + <span class="number">1</span>) % n])) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> k = <span class="built_in">dcmp</span>(<span class="built_in">Cross</span>(poly[(i + <span class="number">1</span>) % n] - poly[i], p - poly[i]));</span><br><span class="line">        <span class="keyword">int</span> d1 = <span class="built_in">dcmp</span>(poly[i].y - p.y);</span><br><span class="line">        <span class="keyword">int</span> d2 = <span class="built_in">dcmp</span>(poly[(i + <span class="number">1</span>) % n].y - p.y);</span><br><span class="line">        <span class="keyword">if</span> (k &gt; <span class="number">0</span> &amp;&amp; d1 &lt;= <span class="number">0</span> &amp;&amp; d2 &gt; <span class="number">0</span>) wn++;</span><br><span class="line">        <span class="keyword">if</span> (k &lt; <span class="number">0</span> &amp;&amp; d2 &lt;= <span class="number">0</span> &amp;&amp; d1 &gt; <span class="number">0</span>) wn--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (wn != <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief å‡¸åŒ…</span></span><br><span class="line"><span class="comment"> * @param[in]  p  ç‚¹é›†</span></span><br><span class="line"><span class="comment"> * @return å‡¸åŒ…å¤šè¾¹å½¢</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Polygon <span class="title">ConvexHull</span><span class="params">(vector&lt;Point&gt; p)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">sort</span>(p.<span class="built_in">begin</span>(), p.<span class="built_in">end</span>());</span><br><span class="line">    p.<span class="built_in">erase</span>(<span class="built_in">unique</span>(p.<span class="built_in">begin</span>(), p.<span class="built_in">end</span>()), p.<span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">int</span> n = p.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">int</span> m = <span class="number">0</span>;</span><br><span class="line">    <span class="function">Polygon <span class="title">ch</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (m &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">Cross</span>(ch[m - <span class="number">1</span>] - ch[m - <span class="number">2</span>], p[i] - ch[m - <span class="number">2</span>]) &lt;= <span class="number">0</span>) m--;</span><br><span class="line">        ch[m++] = p[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> k = m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (m &gt; k &amp;&amp; <span class="built_in">Cross</span>(ch[m - <span class="number">1</span>] - ch[m - <span class="number">2</span>], p[i] - ch[m - <span class="number">2</span>]) &lt;= <span class="number">0</span>) m--;</span><br><span class="line">        ch[m++] = p[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n &gt; <span class="number">1</span>) m--;</span><br><span class="line">    ch.<span class="built_in">resize</span>(m);</span><br><span class="line">    <span class="keyword">return</span> ch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief æ—‹è½¬å¡å£³</span></span><br><span class="line"><span class="comment"> * @param[in]  points  ç‚¹é›†</span></span><br><span class="line"><span class="comment"> * @return ç›´å¾„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">diameter2</span><span class="params">(vector&lt;Point&gt;&amp; points)</span> </span>&#123; <span class="comment">//æ—‹è½¬å¡å£³</span></span><br><span class="line">    vector&lt;Point&gt; p = <span class="built_in">ConvexHull</span>(points);</span><br><span class="line">    <span class="keyword">int</span> n = p.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">2</span>) <span class="keyword">return</span> <span class="built_in">Dist2</span>(p[<span class="number">0</span>], p[<span class="number">1</span>]);</span><br><span class="line">    p.<span class="built_in">push_back</span>(p[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> u = <span class="number">0</span>, v = <span class="number">1</span>; u &lt; n; ++u) &#123;</span><br><span class="line">        <span class="keyword">for</span>(;;) &#123;</span><br><span class="line">            <span class="keyword">int</span> diff = <span class="built_in">Cross</span>(p[u + <span class="number">1</span>] - p[u], p[v + <span class="number">1</span>] - p[v]);</span><br><span class="line">            <span class="keyword">if</span> (diff &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                ans = <span class="built_in">max</span>(ans, (<span class="keyword">int</span>)<span class="built_in">Dist2</span>(p[u], p[v]));</span><br><span class="line">                <span class="keyword">if</span> (diff == <span class="number">0</span>) ans = <span class="built_in">max</span>(ans, (<span class="keyword">int</span>)<span class="built_in">Dist2</span>(p[u], p[v + <span class="number">1</span>]));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            v = (v + <span class="number">1</span>) % n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief åˆ‡å¤šè¾¹å½¢</span></span><br><span class="line"><span class="comment"> * @param[in]  poly  å¤šè¾¹å½¢</span></span><br><span class="line"><span class="comment"> * @param[in]  A,B   ç›´çº¿ä¸Šä¸¤ç‚¹</span></span><br><span class="line"><span class="comment"> * @return æ–°å¤šè¾¹å½¢</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Polygon <span class="title">CutPolygon</span><span class="params">(Polygon poly, Point A, Point B)</span> </span>&#123;</span><br><span class="line">    Polygon newpoly;</span><br><span class="line">    <span class="keyword">int</span> n = poly.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        Point C = poly[i];</span><br><span class="line">        Point D = poly[(i + <span class="number">1</span>) % n];</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">dcmp</span>(<span class="built_in">Cross</span>(B - A, C - A)) &gt;= <span class="number">0</span>) newpoly.<span class="built_in">push_back</span>(C);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">dcmp</span>(<span class="built_in">Cross</span>(B - A, C - D)) != <span class="number">0</span>) &#123;</span><br><span class="line">            Point ip = <span class="built_in">GetLineIntersection</span>(A, B - A, C, D - C);</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">OnSegment</span>(ip, C, D)) newpoly.<span class="built_in">push_back</span>(ip);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newpoly;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief åŠå¹³é¢äº¤</span></span><br><span class="line"><span class="comment"> * @param[in]  L  ç›´çº¿é›†</span></span><br><span class="line"><span class="comment"> * @return å¤šè¾¹å½¢</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">vector&lt;Point&gt; <span class="title">HalfplaneIntersection</span><span class="params">(vector&lt;Line&gt; L)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = L.<span class="built_in">size</span>();</span><br><span class="line">    <span class="built_in">sort</span>(L.<span class="built_in">begin</span>(), L.<span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">int</span> first, last;</span><br><span class="line">    <span class="function">vector&lt;Point&gt; <span class="title">p</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;Line&gt;  <span class="title">q</span><span class="params">(n)</span></span>;</span><br><span class="line">    vector&lt;Point&gt; ans;</span><br><span class="line">    q[first = last = <span class="number">0</span>] = L[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (first &lt; last &amp;&amp; !<span class="built_in">OnLeft</span>(L[i], p[last - <span class="number">1</span>])) last--;</span><br><span class="line">        <span class="keyword">while</span> (first &lt; last &amp;&amp; !<span class="built_in">OnLeft</span>(L[i], p[first]))   first++;</span><br><span class="line">        q[++last] = L[i];</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">fabs</span>(<span class="built_in">Cross</span>(q[last].v, q[last - <span class="number">1</span>].v)) &lt; eps) &#123;</span><br><span class="line">            last--;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">OnLeft</span>(q[last], L[i].p)) q[last] = L[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (first &lt; last) p[last - <span class="number">1</span>] = <span class="built_in">GetLineIntersection</span>(q[last - <span class="number">1</span>], q[last]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (first &lt; last &amp;&amp; !<span class="built_in">OnLeft</span>(q[first], p[last - <span class="number">1</span>])) last--;</span><br><span class="line">    <span class="keyword">if</span> (last - first &lt;= <span class="number">1</span>) <span class="keyword">return</span> ans;</span><br><span class="line">    p[last] = <span class="built_in">GetLineIntersection</span>(q[last], q[first]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = first; i &lt;= last; i++) ans.<span class="built_in">push_back</span>(p[i]);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
        <tag>ç¬”è®°</tag>
        <tag>è®¡ç®—å‡ ä½•</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒNOIp2018ã€é¢˜è§£</title>
    <url>/p/34a76f7d.html</url>
    <content><![CDATA[<pre><code>emmmï¼Œä»Šå¤©å¼€å§‹ä»2018å‘å‰åšNOIpçš„çœŸé¢˜ï¼Œå¹¶å†™ä¸€äº›é¢˜è§£ï¼Œå¤ªè’»äº†Orz
</code></pre>
<span id="more"></span>

<h2 id="D1T1-é“ºè®¾é“è·¯"><a href="#D1T1-é“ºè®¾é“è·¯" class="headerlink" title="$D1T1$ é“ºè®¾é“è·¯"></a>$D1T1$ <a href="https://www.luogu.org/problemnew/show/P5019">é“ºè®¾é“è·¯</a></h2><p>å—¯ï½13å¹´åŸé¢˜ï¼Œ__<em>è´ªå¿ƒAC</em>__</p>
<h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å¯¹åŒºé—´è¿›è¡Œâ€œå¡«å‘â€<br>è´ªå¿ƒç­–ç•¥ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (d[i] &gt; d[i - <span class="number">1</span>]) ans += d[i] - d[i - <span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<p>$proof:$<br>    å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªå‘ï¼Œæ—è¾¹è¿˜æœ‰ä¸€ä¸ªå‘ã€‚<br>    é‚£è‚¯å®šä¼šåŒæ—¶å¡«ä¸Šä¸¤ä¸ªå‘ï¼Œæ‰€ä»¥__å°çš„å‘ä¼šè¢«å¤§çš„å‘å¸¦ç€å¡«ä¸Š__ï¼ŒåŠ__<em>å°å‘å…è´¹ï¼Œå¤§å‘å‡å°‘<code>a[i] - a[i - 1]</code></em>__<br>$Q.E.D$<br>ç»“æœè¿˜è¦åŠ ä¸Š<code>a[1]</code></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, d[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;d[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (d[i] &gt; d[i - <span class="number">1</span>]) &#123;</span><br><span class="line">            ans += d[i] - d[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>, ans + d[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 41ms 1220kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="D1T2-è´§å¸ç³»ç»Ÿ"><a href="#D1T2-è´§å¸ç³»ç»Ÿ" class="headerlink" title="$D1T2$ è´§å¸ç³»ç»Ÿ"></a>$D1T2$ <a href="https://www.luogu.org/problemnew/show/P5020">è´§å¸ç³»ç»Ÿ</a></h2><p>è¡¨é¢ä¸Šæ˜¯æ•°è®ºï¼Œå…¶å®å°±æ˜¯ä¸ª__<em>åŠ¨æ€è§„åˆ’</em>__</p>
<h3 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>é¦–å…ˆè®¾$A = (n, a) \ \ B = (m, b)$<br>å¯ä»¥è¯æ˜$B \subseteq A$<br>$proof:$<br>    æˆ‘ä»¬è®¾$x\in A$ä¸”$x$ä¸èƒ½è¢«$A$é›†åˆå†…é™¤å®ƒä»¥å¤–çš„å…ƒç´ ç»„æˆã€‚<br>    ç„¶åæˆ‘ä»¬å‡è®¾$x \notin B$ï¼Œé‚£ä¹ˆå°±è¯´æ˜$B$é›†åˆä¸­å¿…ç„¶å­˜åœ¨ä¸€äº›å…ƒç´ èƒ½å¤Ÿç»„æˆ$x$ã€‚<br>    é‚£ä¹ˆè¿™äº›å…ƒç´ è‡³å°‘å­˜åœ¨ä¸€ä¸ªä¸åœ¨é›†åˆ$A$å†…å¹¶ä¸”ä¸èƒ½è¢«é›†åˆ$A$é‡Œçš„å…ƒç´ ç»„æˆçš„æ•°ï¼ˆå› ä¸ºå¦‚æœä¸å­˜åœ¨çš„è¯é›†åˆ$A$å†…çš„å…ƒç´ å°±å¯ä»¥ç»„æˆ$x$äº†ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸é›†åˆ$B$çš„å®šä¹‰äº§ç”Ÿäº†çŸ›ç›¾ã€‚<br>    ç»¼ä¸Šæ‰€è¿°ï¼Œ$A$é›†åˆå†…ä¸èƒ½è¢«å…¶å®ƒæ•°ç»„æˆçš„æ•°å¿…ç„¶å­˜åœ¨äº$B$é›†åˆå†…<br>$Q.E.D$</p>
<p>ç„¶ååŠ¨æ€è§„åˆ’<br><code>dp[i]</code>è¡¨ç¤º$i$é¢å€¼æœ€å¤šèƒ½è¢«å‡ å¼ é’±è¡¨ç¤º<br>åˆ™è‹¥å…¶ä¸èƒ½è¢«è¡¨ç¤º<code>dp[i] = -inf</code><br>èƒ½è¡¨ç¤ºä¸”åªæœ‰å®ƒè‡ªå·±åˆ™<code>dp[i] = 1</code><br>åˆå§‹åŒ–<code>dp[] = -inf; dp[0] = 0</code><br>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º<code>dp[j] = max(dp[j], dp[j - a[i]] + 1)</code></p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, T, ans, a[<span class="number">1010</span>], dp[<span class="number">30010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">-0x3f</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(a));</span><br><span class="line">        ans = <span class="number">0</span>; dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = a[i]; j &lt;= <span class="number">25010</span>; ++j) &#123;</span><br><span class="line">                dp[j] = <span class="built_in">max</span>(dp[j], dp[j - a[i]] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dp[a[i]] == <span class="number">1</span>) &#123;</span><br><span class="line">                ans++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 862ms 944kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="D1T3-èµ›é“ä¿®å»º"><a href="#D1T3-èµ›é“ä¿®å»º" class="headerlink" title="$D1T3$ èµ›é“ä¿®å»º"></a>$D1T3$ <a href="https://www.luogu.org/problemnew/show/P5021">èµ›é“ä¿®å»º</a></h2><p>è¿™é¢˜æ¯”è¾ƒå¤æ‚ï¼Œå…ˆå¾—éƒ¨åˆ†åˆ†</p>
<h3 id="I-m-1-æ—¶"><a href="#I-m-1-æ—¶" class="headerlink" title="$I.$ $m = 1$ æ—¶"></a>$I.$ $m = 1$ æ—¶</h3><p>æœ€ç®€å•çš„æƒ…å†µ<br>æ±‚ä¸€æ¡æœ€é•¿é“¾ï¼Œå³æ±‚æ ‘çš„ç›´å¾„ï¼ˆè®°å½•ä¸€ä¸‹æœ€å¤§å€¼å’Œæ¬¡å¤§å€¼ï¼Œæ¯æ¬¡æŠŠæœ€å¤§å€¼ä¼ åˆ°å®ƒçš„çˆ¶äº²ï¼‰<br>å¯ä»¥é€šè¿‡ç¬¬$1,4,5,6$ä¸ªç‚¹ï¼Œ$20$åˆ†</p>
<h4 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> Meq1 &#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res1 = <span class="number">0</span>, res2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = head[now]; i; i = edges[i].nxt) &#123;</span><br><span class="line">            <span class="keyword">int</span> to = edges[i].to;</span><br><span class="line">            <span class="keyword">if</span> (to == fa) <span class="keyword">continue</span>;</span><br><span class="line">            res2 = <span class="built_in">max</span>(res2, <span class="built_in">dfs</span>(to, now) + edges[i].val);</span><br><span class="line">            <span class="keyword">if</span> (res2 &gt; res1) <span class="built_in">swap</span>(res1, res2);</span><br><span class="line">        &#125;</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, res1 + res2);</span><br><span class="line">        <span class="keyword">return</span> res1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="II-a-i-1-æ—¶"><a href="#II-a-i-1-æ—¶" class="headerlink" title="$II.$ $a_i = 1$ æ—¶"></a>$II.$ $a_i = 1$ æ—¶</h3><p>å³ä¸€ä¸ªèŠèŠ±å›¾<br>æŠŠæ‰€æœ‰è¾¹æƒè®°å½•ä¸‹æ¥ï¼Œä»å¤§åˆ°å°æ’åºã€‚è®¾è¾¹æƒä¸º$w$ï¼Œç­”æ¡ˆå³ä¸º$w_1+w_{2m-1},w_2+w_{2m-2},â€¦,w_m+w_{m+1}$çš„æœ€å°å€¼<br>å¯ä»¥é€šè¿‡$1,5,7,8$å››ä¸ªç‚¹ï¼Œ$20$åˆ†ï¼ŒåŠ ä¸Š$m = 1$çš„æƒ…å†µå…±$35$åˆ†</p>
<h4 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> Aeq1 &#123;</span><br><span class="line">    <span class="keyword">int</span> arr[maxn];</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a &gt; b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = head[<span class="number">1</span>]; i; i = edges[i].nxt) &#123;</span><br><span class="line">            <span class="keyword">int</span> to = edges[i].to;</span><br><span class="line">            arr[to - <span class="number">1</span>] = edges[i].val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(arr + <span class="number">1</span>, arr + n, cmp);</span><br><span class="line">        ans = inf;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">            ans = <span class="built_in">min</span>(ans, arr[i] + arr[<span class="number">2</span> * m - i + <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="III-b-i-a-i-1-æ—¶"><a href="#III-b-i-a-i-1-æ—¶" class="headerlink" title="$III.$ $b_i = a_i + 1$ æ—¶"></a>$III.$ $b_i = a_i + 1$ æ—¶</h3><p>ä¸ºä¸€æ¡é“¾<br>æŠŠæ‰€æœ‰è¾¹æƒè®°å½•ä¸‹æ¥ï¼Œè¿™ç§æƒ…å†µç­‰ä»·äºå°†åºåˆ—åˆ†å‰²æˆ$m$æ®µï¼Œä½¿$m$æ®µåŒºé—´å’Œçš„æœ€å°å€¼æœ€å¤§<br>é‚£ä¹ˆäºŒåˆ†$m$æ®µåŒºé—´å’Œçš„æœ€å°å€¼ï¼Œç„¶åè´ªå¿ƒæ‰«ä¸€é<br>å¯ä»¥é€šè¿‡$2,9,10,11$å››ä¸ªç‚¹ï¼Œ$20$åˆ†ï¼ŒåŠ ä¸Šä¸€å…±$55$åˆ†</p>
<h4 id="ä»£ç -4"><a href="#ä»£ç -4" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> BeqApl1 &#123;</span><br><span class="line">    <span class="keyword">int</span> arr[maxn], ans;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Dfs</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res1 = <span class="number">0</span>, res2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = head[now]; i; i = edges[i].nxt) &#123;</span><br><span class="line">            <span class="keyword">int</span> to = edges[i].to;</span><br><span class="line">            <span class="keyword">if</span> (to == fa) <span class="keyword">continue</span>;</span><br><span class="line">            res2 = <span class="built_in">max</span>(res2, <span class="built_in">Dfs</span>(to, now) + edges[i].val);</span><br><span class="line">            <span class="keyword">if</span> (res2 &gt; res1) <span class="built_in">swap</span>(res1, res2);</span><br><span class="line">        &#125;</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, res1 + res2);</span><br><span class="line">        <span class="keyword">return</span> res1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = head[now]; i; i = edges[i].nxt) &#123;</span><br><span class="line">            <span class="keyword">int</span> to = edges[i].to;</span><br><span class="line">            <span class="keyword">if</span> (to == fa) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="built_in">dfs</span>(to, now);</span><br><span class="line">            arr[now] = edges[i].val;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">judge</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> t = <span class="number">0</span>, now = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (now + arr[i] &gt;= x) &#123;</span><br><span class="line">                now = <span class="number">0</span>;</span><br><span class="line">                t++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                now += arr[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> t &gt;= m;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">Dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">1</span>, r = ans, mid;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            mid = l + r + <span class="number">1</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">judge</span>(mid)) l = mid;</span><br><span class="line">            <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, l);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ­£è§£"><a href="#æ­£è§£" class="headerlink" title="æ­£è§£"></a>æ­£è§£</h3><p>æœ€å°å€¼æœ€å¤§ï¼Œæ˜¾ç„¶æ˜¯äºŒåˆ†è¿™ä¸ªæœ€å°å€¼$lim$<br>å¯¹äºä¸€ä¸ªèŠ‚ç‚¹$u$ï¼Œæˆ‘ä»¬å¯ä»¥è®°å½•ä¸€ä¸ªè¿æ¥åˆ°$u$çš„èµ›é“çš„é•¿åº¦$val_i$ï¼Œé‚£ä¹ˆå¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µè¿›è¡Œè®¨è®ºï¼š<br>$$\begin{cases} val_i+dis \geq lim \text{ç›´æ¥ç»™ç­”æ¡ˆ+1} \\ val_i+dis&lt; lim \text{åˆ©ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç»´æŠ¤}\end{cases}$$</p>
<h4 id="ä»£ç -5"><a href="#ä»£ç -5" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span>&amp; x)</span> </span>&#123;</span><br><span class="line">    x = <span class="number">0</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (ch &lt; <span class="string">&#x27;0&#x27;</span> || ch &gt; <span class="string">&#x27;9&#x27;</span>) ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (ch &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; ch &lt;= <span class="string">&#x27;9&#x27;</span>) &#123;x = (x &lt;&lt; <span class="number">3</span>) + (x &lt;&lt; <span class="number">1</span>) + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50050</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, cnt, num, s[maxn], mid;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> from, to, val;</span><br><span class="line">    <span class="built_in">Edge</span>(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> w) : <span class="built_in">from</span>(u), <span class="built_in">to</span>(v), <span class="built_in">val</span>(w) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">    G[u].<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(u, v, w));</span><br><span class="line">    G[v].<span class="built_in">push_back</span>(<span class="built_in">Edge</span>(v, u, w));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>&gt; lh;</span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>, vector&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt; &gt; sh;</span><br><span class="line">    <span class="keyword">int</span> ln = <span class="number">0</span>, sn = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (G[u][i].to != fa) &#123;</span><br><span class="line">            <span class="keyword">int</span> d = G[u][i].val + <span class="built_in">dfs</span>(G[u][i].to, u);</span><br><span class="line">            sh.<span class="built_in">push</span>(d); lh.<span class="built_in">push</span>(d);</span><br><span class="line">            ln++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (ln &gt; <span class="number">0</span> &amp;&amp; lh.<span class="built_in">top</span>() &gt;= mid) &#123;num++; lh.<span class="built_in">pop</span>(); ln--;&#125;</span><br><span class="line">    <span class="keyword">int</span> now = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (ln &gt; sn) &#123;</span><br><span class="line">        <span class="keyword">if</span> (u != <span class="number">1</span> &amp;&amp; lh.<span class="built_in">top</span>() + sh.<span class="built_in">top</span>() &gt;= mid) &#123;</span><br><span class="line">            <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (ln &gt; sn &amp;&amp; lh.<span class="built_in">top</span>() + sh.<span class="built_in">top</span>() &gt;= mid) &#123;s[++cnt] = lh.<span class="built_in">top</span>(); lh.<span class="built_in">pop</span>(); ln--;&#125;</span><br><span class="line">            num++; sh.<span class="built_in">pop</span>(); sn++;</span><br><span class="line">            <span class="keyword">while</span> (cnt &gt; <span class="number">1</span>) &#123;lh.<span class="built_in">push</span>(s[--cnt]); ln++;&#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (u == <span class="number">1</span> &amp;&amp; lh.<span class="built_in">top</span>() + sh.<span class="built_in">top</span>() &gt;= mid) &#123;</span><br><span class="line">            lh.<span class="built_in">pop</span>(); sh.<span class="built_in">pop</span>(); ln--; sn++; num++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            now = sh.<span class="built_in">top</span>(); sh.<span class="built_in">pop</span>(); sn++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (num &gt;= m) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (ln &gt;= sn &amp;&amp; !lh.<span class="built_in">empty</span>()) <span class="keyword">return</span> lh.<span class="built_in">top</span>();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> now;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    num = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (num &gt;= m) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">read</span>(n); <span class="built_in">read</span>(m); <span class="keyword">int</span> all = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> u, v, w;</span><br><span class="line">        <span class="built_in">read</span>(u); <span class="built_in">read</span>(v); <span class="built_in">read</span>(w);</span><br><span class="line">        <span class="built_in">add</span>(u, v, w);</span><br><span class="line">        all += w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, r = all / m, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">check</span>()) &#123;</span><br><span class="line">            l = mid + <span class="number">1</span>;</span><br><span class="line">            ans = mid;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 1050ms 11964kB with O2 */</span></span><br></pre></td></tr></table></figure>

<h2 id="D2T1-æ—…è¡Œ"><a href="#D2T1-æ—…è¡Œ" class="headerlink" title="$D2T1$ æ—…è¡Œ"></a>$D2T1$ <a href="https://www.luogu.org/problemnew/show/P5022">æ—…è¡Œ</a></h2><p>åˆ†ä¸¤ç§æƒ…å†µè®¨è®º</p>
<h3 id="I-m-n-1"><a href="#I-m-n-1" class="headerlink" title="$I.$ $m = n - 1$"></a>$I.$ $m = n - 1$</h3><p>å³æ— ç¯ï¼Œåªè¦ç»™ä¸€ä¸ªç‚¹æ‰€èƒ½åˆ°è¾¾çš„ç‚¹çš„ç¼–å·è¿›è¡Œä¸€æ¬¡ä»å°åˆ°å¤§çš„æ’åºï¼Œåœ¨æ ‘ä¸Šdfsä¸€éå³å¯è§£å†³<br>æ ·ä¾‹1å›¾ç¤ºï¼š<img src="/p/34a76f7d/P5022_1.png"></p>
<h4 id="ä»£ç -6"><a href="#ä»£ç -6" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> SolveOne &#123;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">bool</span> vis[maxn];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">        ans[++cnt] = u;</span><br><span class="line">        vis[u] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> v = G[u][i];</span><br><span class="line">            <span class="keyword">if</span> (!vis[v]) &#123;</span><br><span class="line">                <span class="built_in">dfs</span>(v, u);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">sort</span>(G[i].<span class="built_in">begin</span>(), G[i].<span class="built_in">end</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, ans[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 1050ms 11964kB with O2 */</span></span><br></pre></td></tr></table></figure>

<h3 id="II-m-n"><a href="#II-m-n" class="headerlink" title="$II.$ $m = n$"></a>$II.$ $m = n$</h3><p>å­˜åœ¨ä¸€ä¸ªç¯ï¼ˆåŸºç¯æ ‘ï¼‰<br>æ‰‹ç®—ä¸€ä¸‹æ ·ä¾‹2å¯ä»¥å‘ç°ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€æ¡è¾¹ä¸ä¼šé€šè¿‡<br>é€ä¸ªåˆ è¾¹å°è¯•å³å¯ï¼Œåˆ è¾¹åå’Œ$m = n - 1$ç›¸åŒ<br>æ ·ä¾‹2å›¾ç¤ºï¼š<img src="/p/34a76f7d/P5022_2.png"></p>
<h3 id="ä»£ç -7"><a href="#ä»£ç -7" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5050</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf  = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>; <span class="keyword">char</span> ch = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) &#123;<span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))  &#123;x = x * <span class="number">10</span> + ch - <span class="number">48</span>; ch = <span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, ans[maxn], in[maxn][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> SolveOne &#123;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">bool</span> vis[maxn];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">        ans[++cnt] = u;</span><br><span class="line">        vis[u] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> v = G[u][i];</span><br><span class="line">            <span class="keyword">if</span> (!vis[v]) &#123;</span><br><span class="line">                <span class="built_in">dfs</span>(v, u);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">sort</span>(G[i].<span class="built_in">begin</span>(), G[i].<span class="built_in">end</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, ans[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> SolveTwo &#123;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>, res[maxn], du, dv;</span><br><span class="line">    <span class="keyword">bool</span> vis[maxn];</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">notdel</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span> </span>&#123; <span class="comment">//åˆ¤æ–­è¯¥è¾¹æ˜¯å¦è¢«åˆ </span></span><br><span class="line">        <span class="keyword">if</span> ((u == du &amp;&amp; v == dv) || (u == dv &amp;&amp; v == du)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">        res[++cnt] = u;</span><br><span class="line">        vis[u] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[u].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> v = G[u][i];</span><br><span class="line">            <span class="keyword">if</span> (!vis[v] &amp;&amp; <span class="built_in">notdel</span>(u, v)) &#123;</span><br><span class="line">                <span class="built_in">dfs</span>(v, u);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">judge</span><span class="params">()</span> </span>&#123; <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºæ›´ä¼˜æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ans[i] != res[i]) &#123;</span><br><span class="line">                <span class="keyword">return</span> ans[i] &gt; res[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">memset</span>(ans, <span class="number">0x3f</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(ans));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">sort</span>(G[i].<span class="built_in">begin</span>(), G[i].<span class="built_in">end</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">            cnt = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">memset</span>(res, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(res));</span><br><span class="line">            <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">            du = in[i][<span class="number">0</span>]; <span class="comment">//åˆ è¾¹</span></span><br><span class="line">            dv = in[i][<span class="number">1</span>];</span><br><span class="line">            <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">judge</span>() &amp;&amp; cnt == n) &#123; <span class="comment">//å¦‚æœæ›´ä¼˜åˆ™æ›´æ”¹ans[]</span></span><br><span class="line">                <span class="built_in">memcpy</span>(ans, res, <span class="built_in"><span class="keyword">sizeof</span></span>(res));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, ans[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> u = <span class="built_in">read</span>(), v = <span class="built_in">read</span>();</span><br><span class="line">        G[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">        G[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">        in[i][<span class="number">0</span>] = u;  <span class="comment">//å­˜å‚¨è¾“å…¥ä¿¡æ¯</span></span><br><span class="line">        in[i][<span class="number">1</span>] = v;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (m == n - <span class="number">1</span>) &#123;</span><br><span class="line">        SolveOne::<span class="built_in">solve</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        SolveTwo::<span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 2244ms 1276kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="D2T2-å¡«æ•°æ¸¸æˆ"><a href="#D2T2-å¡«æ•°æ¸¸æˆ" class="headerlink" title="$D2T2$ å¡«æ•°æ¸¸æˆ"></a>$D2T2$ <a href="https://www.luogu.org/problemnew/show/P5023">å¡«æ•°æ¸¸æˆ</a></h2><p><del>æš´åŠ›æ¨æŸ¿å­</del><br>é¦–å…ˆæ˜ç¡®ä¸€ä¸ªæ¦‚å¿µ:æœ¬æ–‡çš„å¯¹è§’çº¿æŒ‡çš„æ˜¯ä»å·¦ä¸‹æ–¹åˆ°å³ä¸Šæ–¹çš„æœ‰å‘çº¿æ®µ<br><img src="/p/34a76f7d/d2t2_1.png" alt="Lemma I."><br>$\mathcal{Lemma}\ I.$ å¯¹è§’çº¿ä¸Šçš„æ•°åªä¼šç›¸åŒæˆ–é€’å‡<br>$proof:$<br>ç”±ä¸Šå›¾ä¸¤æ¡é»‘çº¿å’Œé¢˜ç›®æè¿°å³å¯è¯æ˜<br>$Q.E.D$</p>
<p><img src="/p/34a76f7d/d2t2_2.png" alt="Lemma II."><br>$\mathcal{Lemma}\ II.$ è‹¥$(x-1, y)$ä¸$(x, y-1)$çš„æ•°ç›¸åŒ,åˆ™ä»¥$(x,y)$ä¸ºå·¦ä¸Šè§’,æ•´ä¸ªå›¾å½¢å³ä¸‹è§’çš„å­çŸ©é˜µçš„æ¯æ¡å¯¹è§’çº¿(è“)ä¸Šå¡«çš„æ•°å­—ç›¸åŒ<br>$proof:$<br>ç”±å›¾ä¸Šä¸¤æ¡æ©™çº¿åŠé¢˜ç›®æè¿°å³å¯è¯æ˜<br>$Q.E.D$</p>
<p>$\mathcal{Lemma}\ III.$ $Ans(n,m)=Ans(m,n)$</p>
<p>æ­£å¼æ¨å¼å­(é»˜è®¤$n \leq m$)</p>
<h3 id="I-n-1-æ—¶"><a href="#I-n-1-æ—¶" class="headerlink" title="$I.$ $n = 1$ æ—¶"></a>$I.$ $n = 1$ æ—¶</h3><p><img src="/p/34a76f7d/d2t2_3.png"><br>æ¯ä¸ªæ ¼å†…éƒ½æœ‰2ç§å¡«æ³•,æ•…$\Ans(1,m)=2^{m}$</p>
<h3 id="II-n-2-æ—¶"><a href="#II-n-2-æ—¶" class="headerlink" title="$II.$ $n = 2$ æ—¶"></a>$II.$ $n = 2$ æ—¶</h3><p><img src="/p/34a76f7d/d2t2_4.png"><br>ä¸¤ä¸ªè§’ä¸Šå„ä¸¤ç§,å‰©ä½™$m-1$æ¡å¯¹è§’çº¿æ¯æ¡æœ‰3ç§(11,10,00)<br>æ•…$Ans(2,m)=2\times 2\times 3^{m-1}=4\times 3^{m-1}$</p>
<h3 id="III-n-geq-4-æ—¶-åªè€ƒè™‘-n-m-æ—¶"><a href="#III-n-geq-4-æ—¶-åªè€ƒè™‘-n-m-æ—¶" class="headerlink" title="$III. $ $n \geq 4$ æ—¶ (åªè€ƒè™‘$n = m$æ—¶)"></a>$III. $ $n \geq 4$ æ—¶ (åªè€ƒè™‘$n = m$æ—¶)</h3><h4 id="case-I-å·¦ä¸Šè§’ä¸¤æ•°ç›¸åŒ"><a href="#case-I-å·¦ä¸Šè§’ä¸¤æ•°ç›¸åŒ" class="headerlink" title="$case I.$ å·¦ä¸Šè§’ä¸¤æ•°ç›¸åŒ"></a>$case I.$ å·¦ä¸Šè§’ä¸¤æ•°ç›¸åŒ</h4><p><img src="/p/34a76f7d/d2t2_5.png"><br>å›¾ä¸­æ•°å­—è¡¨ç¤ºæ¯æ¡å¯¹è§’çº¿æ–¹æ¡ˆæ•°<br>å¯ä»¥å¾—å‡º$Ans(caseI.)=2\times 2\times 4^{n-2}\times 2^{n-1}=8^{n-1}$</p>
<h4 id="case-II-ç¬¬ä¸‰æ¡å¯¹è§’çº¿æ•°å­—ç›¸åŒ"><a href="#case-II-ç¬¬ä¸‰æ¡å¯¹è§’çº¿æ•°å­—ç›¸åŒ" class="headerlink" title="$case II.$ ç¬¬ä¸‰æ¡å¯¹è§’çº¿æ•°å­—ç›¸åŒ"></a>$case II.$ ç¬¬ä¸‰æ¡å¯¹è§’çº¿æ•°å­—ç›¸åŒ</h4><p><img src="/p/34a76f7d/d2t2_6.png"><br>å›¾ä¸­çº¢è‰²æ•°å­—è¡¨ç¤ºæ–¹æ¡ˆæ•°<br>å¯ä»¥å¾—å‡º$Ans(caseII.)=2\times 2\times 5\times 4^{n-4}\times 2^{n-1}=5\times 2^{3n-7}$</p>
<h4 id="case-III-ç¬¬ä¸‰æ¡å¯¹è§’çº¿ä¸Šæ•°å­—ä¸åŒ"><a href="#case-III-ç¬¬ä¸‰æ¡å¯¹è§’çº¿ä¸Šæ•°å­—ä¸åŒ" class="headerlink" title="$case III.$ ç¬¬ä¸‰æ¡å¯¹è§’çº¿ä¸Šæ•°å­—ä¸åŒ"></a>$case III.$ ç¬¬ä¸‰æ¡å¯¹è§’çº¿ä¸Šæ•°å­—ä¸åŒ</h4><p><img src="/p/34a76f7d/d2t2_7.png"><br>å¯ä»¥å‘ç°å·¦ä¾§ä¸¤è¡Œåªèƒ½å¡«01,æ‰€ä»¥å¯èƒ½ä¼šå†æ¬¡å‡ºç°å¯¹è§’æ•°å­—ç›¸åŒçš„æƒ…å†µ</p>
<h5 id="ç¬¬ä¸€ä¸ªå‡ºç°"><a href="#ç¬¬ä¸€ä¸ªå‡ºç°" class="headerlink" title="ç¬¬ä¸€ä¸ªå‡ºç°"></a>ç¬¬ä¸€ä¸ªå‡ºç°</h5><p><img src="/p/34a76f7d/d2t2_8.png" alt="çº¢è‰²è¡¨ç¤ºæ–¹æ¡ˆæ•°"></p>
<h5 id="æœ€åä¸€ä¸ªå‡ºç°"><a href="#æœ€åä¸€ä¸ªå‡ºç°" class="headerlink" title="æœ€åä¸€ä¸ªå‡ºç°"></a>æœ€åä¸€ä¸ªå‡ºç°</h5><p><img src="/p/34a76f7d/d2t2_9.png"></p>
<h5 id="å€’æ•°ç¬¬äºŒä¸ªå‡ºç°"><a href="#å€’æ•°ç¬¬äºŒä¸ªå‡ºç°" class="headerlink" title="å€’æ•°ç¬¬äºŒä¸ªå‡ºç°"></a>å€’æ•°ç¬¬äºŒä¸ªå‡ºç°</h5><p><img src="/p/34a76f7d/d2t2_10.png"></p>
<h5 id="æ²¡æœ‰å‡ºç°"><a href="#æ²¡æœ‰å‡ºç°" class="headerlink" title="æ²¡æœ‰å‡ºç°"></a>æ²¡æœ‰å‡ºç°</h5><p><img src="/p/34a76f7d/d2t2_11.png"></p>
<p>æ³¨æ„ç¬¬ä¸‰æ¡å¯¹è§’çº¿å¯èƒ½æœ‰100,110ä¸¤ç§æƒ…å†µ<br>æ‰€ä»¥$Ans(case III.)=2\times (2\times 4\times 5\times 2^{n-1}\times \sum_{i=0}^{n-5}{4^i} + 2\times 4\times 3\times 2^{n-2} + 2\times 3\times 2^{n-2})$</p>
<p>$Ans(n, n)=Ans(case I.) + Ans(case II.) + Ans(case III.)$<br>$$Ans(n,n)=\frac{83\times 8^n + 5\times 2^{n+7}}{384}$$</p>
<h3 id="IV-n-3"><a href="#IV-n-3" class="headerlink" title="$IV.$ $n = 3$"></a>$IV.$ $n = 3$</h3><p>è¯æ˜ä¸å‰ç±»ä¼¼<br>$$Ans(3,m)=112\times 3^{m-3}$$</p>
<h3 id="V-n-neq-m-æ—¶"><a href="#V-n-neq-m-æ—¶" class="headerlink" title="$V.$ $n \neq m$ æ—¶"></a>$V.$ $n \neq m$ æ—¶</h3><p>ä¸å‰ç±»ä¼¼<br>$$Ans(n,n+1)=\frac{83\times 8^n + 2^{n+8}}{128}$$<br>åŒæ—¶æ˜“è¯å¾—$Ans(n,m+1)=3\times Ans(n,m)$</p>
<p>äºæ˜¯å°±è§£å†³äº†</p>
<h3 id="ä»£ç -8"><a href="#ä»£ç -8" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mod 1000000007</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">poww</span><span class="params">(LL a, LL b)</span> </span>&#123;</span><br><span class="line">    LL res = <span class="number">1</span>; </span><br><span class="line">    <span class="keyword">for</span> ( ; b; a = a * a % mod, b &gt;&gt;= <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (b &amp; <span class="number">1</span>) &#123;</span><br><span class="line">            res = res * a % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">if</span> (n &gt; m) <span class="built_in">swap</span>(n, m);</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="built_in">poww</span>(<span class="number">2</span>, m));</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (n == <span class="number">2</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="number">4</span> * <span class="built_in">poww</span>(<span class="number">3</span>, m - <span class="number">1</span>) % mod);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (n == <span class="number">3</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="number">112</span> * <span class="built_in">poww</span>(<span class="number">3</span>, m - <span class="number">3</span>) % mod);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (m == n) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ((<span class="number">83</span> * <span class="built_in">poww</span>(<span class="number">8</span>, n) % mod + <span class="number">5</span> * <span class="built_in">poww</span>(<span class="number">2</span>, n + <span class="number">7</span>) % mod) * <span class="number">190104168</span> % mod));</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ((<span class="number">83</span> * <span class="built_in">poww</span>(<span class="number">8</span>, n) % mod + <span class="built_in">poww</span>(<span class="number">2</span>, n + <span class="number">8</span>)) * <span class="built_in">poww</span>(<span class="number">3</span>, m - n - <span class="number">1</span>) % mod * <span class="number">570312504</span> % mod ));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 55ms 1048kB */</span></span><br></pre></td></tr></table></figure>

<h2 id="D2T3-ä¿å«ç‹å›½"><a href="#D2T3-ä¿å«ç‹å›½" class="headerlink" title="$D2T3$ ä¿å«ç‹å›½"></a>$D2T3$ <a href="https://www.luogu.org/problemnew/show/P5024">ä¿å«ç‹å›½</a></h2><p>åŠ¨æ€DP,æ ‘å‰–,<del>è’Ÿè’»ä¸ä¼š</del></p>
<p><del>é€ƒ</del></p>
<hr>
<p><strong><em>å¦‚æœ‰ç–‘é—®,å¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€</em></strong></p>
]]></content>
      <categories>
        <category>é¢˜è§£</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>NOIp</tag>
        <tag>é¢˜è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoæ­å»ºåšå®¢</title>
    <url>/p/178c0d2c.html</url>
    <content><![CDATA[<p>ç”±äº<code>mkdocs</code>ä¸Šæœ‰å¾ˆå¤šä¸è¶³ï¼Œä¾‹å¦‚æ²¡æœ‰æ ‡ç­¾ï¼Œåˆ†ç±»ï¼Œè¯„è®ºï¼Œè®¡æ•°ç­‰ç­‰ï¼Œæ•…è½¬è‡³ä½¿ç”¨<code>Hexo</code>æ­å»ºåšå®¢ï¼Œä»¥ä¸‹æ˜¯æˆ‘æŠ˜è…¾çš„è¿‡ç¨‹</p>
<span id="more"></span>

<h2 id="å®‰è£…Hexo"><a href="#å®‰è£…Hexo" class="headerlink" title="å®‰è£…Hexo"></a>å®‰è£…Hexo</h2><p>æˆ‘æ˜¯ç”¨çš„æ˜¯<code>Ubuntu16.04</code>ç³»ç»Ÿï¼Œå…¶ä»–ç³»ç»Ÿå®‰è£…æ–¹æ³•å¯åˆ°å®˜ç½‘æŸ¥è¯¢<br>åœ¨<a href="https://nodejs.org/">nodejså®˜ç½‘</a>ä¸‹è½½<code>node.js</code>ï¼Œå¹¶è§£å‹<br>æ·»åŠ ç¯å¢ƒå˜é‡<br><code>echo &quot;export PATH=$PATH:/home/tony/node-v8.11.4-linux-x64/bin&quot; &gt;&gt; ~/.zshrc</code>ï¼ˆå¦‚æœä½¿ç”¨çš„æ˜¯bashï¼Œå°†æœ€åä¸€å¥æ”¹ä¸º<code>~/.bashrc</code>ï¼‰<br><code>source ~/.zshrc</code>åº”ç”¨æ›´æ”¹</p>
<p>ä¸‹è½½hexo<br><code>npm install -g hexo-cli</code></p>
<h2 id="æ­å»ºåšå®¢"><a href="#æ­å»ºåšå®¢" class="headerlink" title="æ­å»ºåšå®¢"></a>æ­å»ºåšå®¢</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir blog</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> blog</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hexo init</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>hexo s</code>å¯åŠ¨æœåŠ¡,åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>localhost:4000</code>ä¾¿å¯çœ‹åˆ°é¢„è§ˆç½‘é¡µ</p>
<h3 id="éƒ¨ç½²åˆ°GitPages"><a href="#éƒ¨ç½²åˆ°GitPages" class="headerlink" title="éƒ¨ç½²åˆ°GitPages"></a>éƒ¨ç½²åˆ°GitPages</h3><p>åˆ›å»º<code>&lt;username&gt;.github.io</code>å­˜å‚¨åº“<br>æ›´æ”¹<code>_config.yml</code>æ–‡ä»¶ä¸­è¿™ä¸€éƒ¨åˆ†</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>hexo d -g</code>å‘å¸ƒ</p>
<h2 id="ä¸»é¢˜"><a href="#ä¸»é¢˜" class="headerlink" title="ä¸»é¢˜"></a>ä¸»é¢˜</h2><p>æˆ‘å½“å‰ä½¿ç”¨çš„æ˜¯<code>maupassant</code>ä¸»é¢˜<br>è¯¦ç»†é…ç½®è§<a href="https://www.haomwei.com/technology/maupassant-hexo.html">å®˜æ–¹ä¸­æ–‡æ–‡æ¡£</a></p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://hexo.io/">Hexoå®˜ç½‘</a><br><a href="https://afar5277.blog.luogu.org/post-zzq-hexoblog">zzqæµ…è°ˆç”¨Hexo+GitHubæ­å»ºè‡ªå·±çš„blog</a><br><a href="https://www.luogu.org/blog/0Umaru0/hexo-bo-ke-da-jian-shuo-ming-shu-zhi-bei-shu-post">Hexoåšå®¢æ­å»ºè¯´æ˜ä¹¦ï¼ˆæŒ‡åŒ—ä¹¦ï¼‰</a><br><a href="https://www.luogu.org/blog/Venus/build-hexo-github-blog">ä»é›¶æ­å»º Hexo + Github åšå®¢</a></p>
]]></content>
      <tags>
        <tag>hexo</tag>
        <tag>blog</tag>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>æ›´æ–°æ—¥å¿—</title>
    <url>/p/5a717bf0.html</url>
    <content><![CDATA[<p><a href="https://tony031218.github.io/">æœ¬åšå®¢</a>åœ¨<code>2019.3.10</code>æ›´æ”¹è‡³ç”±<code>Hexo</code>é©±åŠ¨ï¼Œå¹¶åœ¨<code>2019.3.12</code>å®Œæˆæ›´æ”¹ã€‚<br>åŸæ–‡ç« æ—¶é—´å‡æ”¹ä¸º<code>2019.1.9</code>ï¼Œç®—æ³•æ¨¡æ¿æ—¶é—´æ”¹ä¸º<code>2019.1.10</code>ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å¹¶æŸ¥é›†</title>
    <url>/p/9603fc0b.html</url>
    <content><![CDATA[<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>n, m, q</code>ç‚¹æ•°ã€è¾¹æ•°ã€é—®é¢˜æ•°<br><code>x, y</code>éœ€è¦åˆå¹¶çš„ä¸¤ä¸ªæ•°<br><code>ufs[]</code>å¹¶æŸ¥é›†<br><code>find(int)</code>æŸ¥æ‰¾å¹¶æŸ¥é›†ä¸­ä¸€ä¸ªæ•°çš„ç¥–å…ˆ<br><code>unionn(int, int)</code>åˆå¹¶ä¸¤ä¸ªæ•°æ‰€åœ¨é›†åˆ</p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">int</span> ufs[maxn];</span><br><span class="line"><span class="keyword">int</span> n, m, x, y, q;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ufs[x] != x) <span class="keyword">return</span> ufs[x] = <span class="built_in">find</span>(ufs[x]);</span><br><span class="line">    <span class="keyword">return</span> ufs[x] = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unionn</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> fx = <span class="built_in">find</span>(x);</span><br><span class="line">    <span class="keyword">int</span> fy = <span class="built_in">find</span>(y);</span><br><span class="line">    <span class="keyword">if</span> (fx != fy)</span><br><span class="line">    &#123;</span><br><span class="line">        ufs[fx] = fy;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) ufs[i] = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">        <span class="built_in">unionn</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">find</span>(x) == <span class="built_in">find</span>(y)) <span class="built_in">printf</span>(<span class="string">&quot;YES\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;NO\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-STLæ ‡å‡†åº“</title>
    <url>/p/ac108281.html</url>
    <content><![CDATA[<h2 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h2><hr>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å†™å‡½æ•°/ç»“æ„ä½“</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    T x, y;</span><br><span class="line">    <span class="built_in">Point</span>(T x = <span class="number">0</span>, T y = <span class="number">0</span>):<span class="built_in">x</span>(x), <span class="built_in">y</span>(y) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Point&lt;T&gt; <span class="keyword">operator</span> + (<span class="keyword">const</span> Point&lt;T&gt;&amp; A, <span class="keyword">const</span> Point&lt;T&gt;&amp; B)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> Point&lt;T&gt;(A.x + B.x, A.y + B.y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream&amp; out, <span class="keyword">const</span> Point&lt;T&gt;&amp; p)</span><br><span class="line">&#123;</span><br><span class="line">    out &lt;&lt; <span class="string">&quot;(&quot;</span> &lt;&lt; p.x &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; p.y &lt;&lt; <span class="string">&quot;)&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="vector-ä¸å®šé•¿æ•°ç»„"><a href="#vector-ä¸å®šé•¿æ•°ç»„" class="headerlink" title="vector(ä¸å®šé•¿æ•°ç»„)"></a>vector(ä¸å®šé•¿æ•°ç»„)</h2><hr>
<h3 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h3><p><code>vector&lt;æ•°æ®ç±»å‹&gt; å;</code> ä¾‹ <code>vector&lt;int&gt; a;</code></p>
<h3 id="ç®€å•ç”¨æ³•"><a href="#ç®€å•ç”¨æ³•" class="headerlink" title="ç®€å•ç”¨æ³•"></a>ç®€å•ç”¨æ³•</h3><p><code>a.size();</code>è¯»å–å¤§å°<br><br><code>a.resize();</code>æ”¹å˜å¤§å°<br><br><code>a.push_back(x);</code>å°¾éƒ¨æ·»åŠ å…ƒç´ x<br><br><code>a.pop_back();</code>åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ <br><br><code>a.clear();</code>æ¸…ç©º<br><br><code>a.empty()</code>è¯¢é—®æ˜¯å¦ä¸ºç©º(boolç±»å‹)<br><br><code>a[]</code>è®¿é—®å…ƒç´ (å¯ä¿®æ”¹)<br></p>
<h2 id="priority-queue-ä¼˜å…ˆé˜Ÿåˆ—-å †"><a href="#priority-queue-ä¼˜å…ˆé˜Ÿåˆ—-å †" class="headerlink" title="priority_queue(ä¼˜å…ˆé˜Ÿåˆ—/å †)"></a>priority_queue(ä¼˜å…ˆé˜Ÿåˆ—/å †)</h2><hr>
<h3 id="å£°æ˜-1"><a href="#å£°æ˜-1" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h3><p><strong>å¤´æ–‡ä»¶</strong>: <code>#include &lt;queue&gt;</code><br><br><strong>å‚æ•°</strong>: <code>priority_queue&lt;Type, Container, Functional&gt;</code><br><br>&emsp;<code>Type</code>æ•°æ®ç±»å‹ <em>ä¸å¯çœ</em><br><br>&emsp;<code>Container</code>å®¹å™¨(vector,deque)é»˜è®¤vector<br><br>&emsp;<code>Functional</code>æ¯”è¾ƒæ–¹å¼,é»˜è®¤<code>operator &lt;</code>å¤§æ ¹å †</p>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>ä¸queueç±»ä¼¼<br></p>
<h4 id="å°æ ¹å †"><a href="#å°æ ¹å †" class="headerlink" title="å°æ ¹å †"></a>å°æ ¹å †</h4><p><code>priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt; &gt; q;</code>ä½¿ç”¨ä»¿å‡½æ•°<code>greater&lt;&gt;</code><br></p>
<h4 id="è‡ªå®šä¹‰ç±»å‹-struct"><a href="#è‡ªå®šä¹‰ç±»å‹-struct" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹(struct)"></a>è‡ªå®šä¹‰ç±»å‹(struct)</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="built_in">Node</span>(<span class="keyword">int</span> a = <span class="number">0</span>, <span class="keyword">int</span> b = <span class="number">0</span>):<span class="built_in">x</span>(a), <span class="built_in">y</span>(b)&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="é‡è½½operator-lt"><a href="#é‡è½½operator-lt" class="headerlink" title="é‡è½½operator &lt;"></a>é‡è½½operator &lt;</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (Node a, Node b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (a.x == b.x) <span class="keyword">return</span> a.y &gt; b.y;</span><br><span class="line">    <span class="keyword">return</span> a.x &gt; b.x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">priority_queue&lt;Node&gt; q;</span><br></pre></td></tr></table></figure>
<p>xå€¼å¤§çš„ä¼˜å…ˆçº§ä½,æ’åœ¨é˜Ÿå‰<br><br>xç›¸ç­‰,yå¤§çš„ä¼˜å…ˆçº§ä½</p>
<h5 id="é‡å†™ä»¿å‡½æ•°"><a href="#é‡å†™ä»¿å‡½æ•°" class="headerlink" title="é‡å†™ä»¿å‡½æ•°"></a>é‡å†™ä»¿å‡½æ•°</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">cmp</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span> <span class="params">()</span> <span class="params">(Node a, Node b)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (a.x == b.x) <span class="keyword">return</span> a.y &gt; b.y;</span><br><span class="line">        <span class="keyword">return</span> a.x &gt; b.x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">priority_queue&lt;Node, vector&lt;Node&gt;, cmp&gt; q;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-èƒŒåŒ…é—®é¢˜</title>
    <url>/p/990bbe9a.html</url>
    <content><![CDATA[<h2 id="01èƒŒåŒ…é—®é¢˜"><a href="#01èƒŒåŒ…é—®é¢˜" class="headerlink" title="01èƒŒåŒ…é—®é¢˜"></a>01èƒŒåŒ…é—®é¢˜</h2><p>æœ‰ $n$ ä»¶ç‰©å“ï¼Œå’Œä¸€å®¹ç§¯ä¸º $V$ çš„èƒŒåŒ…ï¼Œç¬¬ $i$ ä»¶ç‰©å“çš„ä½“ç§¯ä¸º $w_i$ ï¼Œä»·å€¼ä¸º $c_i$ ã€‚å°†ç¬¬å‡ ä»¶ç‰©å“è£…å…¥ï¼Œä½¿ä½“ç§¯ä¸è¶…è¿‡æ€»ä½“ç§¯ï¼Œä¸”ä»·å€¼å’Œæœ€å¤§ï¼Œæ±‚æœ€å¤§ä»·å€¼ã€‚</p>
<p>ç”±é¢˜æ„æ˜“çŸ¥çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š $F_{i,j} = max(F_{i-1,j}\ , F_{i-1,j-w_i} + c_i)$</p>
<p>$F_{i, j}$ ä¸ºå‰ $i$ ä»¶ç‰©å“æ”¾å…¥å®¹é‡ä¸º $V$ çš„èƒŒåŒ…ä¸­æœ€å¤§ä»·å€¼<br><br>æ—¶é—´å¤æ‚åº¦ $O(n\times V)$ ï¼Œç©ºé—´å¤æ‚åº¦ $O(n\times V)$</p>
<h4 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h4><p>æ³¨æ„å€’åºï¼Œä¿è¯<code>f[n][V]</code>ä¸ºç»“æœ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = V; j &gt;= w[i]; --j)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i][j] = <span class="built_in">max</span>(f[i - <span class="number">1</span>][j], f[i - <span class="number">1</span>][j - w[i]] + c[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[n][V])</span><br></pre></td></tr></table></figure>

<h4 id="ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–"><a href="#ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–" class="headerlink" title="ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–"></a>ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–</h4><p>é™è‡³ä¸€ç»´æ•°ç»„<br><br>æ—¶é—´å¤æ‚åº¦ $O(n\times V)$ ï¼Œç©ºé—´å¤æ‚åº¦ $O(V)$</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = V; j &gt;= w[i]; --j)</span><br><span class="line">    &#123;</span><br><span class="line">        f[j] = <span class="built_in">max</span>(f[j], f[j - w[i]] + c[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[V]);</span><br></pre></td></tr></table></figure>

<h2 id="å®Œå…¨èƒŒåŒ…é—®é¢˜"><a href="#å®Œå…¨èƒŒåŒ…é—®é¢˜" class="headerlink" title="å®Œå…¨èƒŒåŒ…é—®é¢˜"></a>å®Œå…¨èƒŒåŒ…é—®é¢˜</h2><p>æœ‰ $n$ ç§ç‰©å“ï¼ˆæ¯ç§ <strong>æ— é™ä»¶</strong> ï¼‰ï¼Œå’Œä¸€å®¹ç§¯ä¸º $V$ çš„èƒŒåŒ…ï¼Œç¬¬ $i$ ç§ç‰©å“çš„ä½“ç§¯ä¸º $w_i$ ï¼Œä»·å€¼ä¸º $c_i$ ã€‚å°†ç¬¬å‡ ç§ç‰©å“å–ä»»æ„ä»¶è£…å…¥ï¼Œä½¿ä½“ç§¯ä¸è¶…è¿‡æ€»ä½“ç§¯ï¼Œä¸”ä»·å€¼å’Œæœ€å¤§ï¼Œæ±‚æœ€å¤§ä»·å€¼ã€‚</p>
<p>å°†<a href="../pack#01%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98">01èƒŒåŒ…</a>ç¬¬äºŒä¸ªå¾ªç¯æ”¹ä¸ºæ­£åºå³å¯<br><br>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š$F_j = max(F_j\ , F_{j-w_i}+c_i)$</p>
<h4 id="æ¡†æ¶-1"><a href="#æ¡†æ¶-1" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = w[i]; j &lt;= V; ++j)</span><br><span class="line">    &#123;</span><br><span class="line">        f[j] = <span class="built_in">max</span>(f[j], f[j - w[i]] + c[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[V]);</span><br></pre></td></tr></table></figure>

<h2 id="å¤šé‡èƒŒåŒ…é—®é¢˜"><a href="#å¤šé‡èƒŒåŒ…é—®é¢˜" class="headerlink" title="å¤šé‡èƒŒåŒ…é—®é¢˜"></a>å¤šé‡èƒŒåŒ…é—®é¢˜</h2><p>æœ‰ $N$ ç§ç‰©å“ï¼Œå’Œä¸€å®¹ç§¯ä¸º $V$ çš„èƒŒåŒ…ï¼Œç¬¬ $i$ ç§ç‰©å“æœ‰ $n_i$ ä»¶ï¼Œä½“ç§¯ä¸º $w_i$ ï¼Œä»·å€¼ä¸º $c_i$ ã€‚å°†ç¬¬å‡ ä»¶ç‰©å“è£…å…¥ï¼Œä½¿ä½“ç§¯ä¸è¶…è¿‡æ€»ä½“ç§¯ï¼Œä¸”ä»·å€¼å’Œæœ€å¤§ï¼Œæ±‚æœ€å¤§ä»·å€¼ã€‚</p>
<h3 id="è§£æ³•-I-åŒ–ä¸ºå®Œå…¨èƒŒåŒ…"><a href="#è§£æ³•-I-åŒ–ä¸ºå®Œå…¨èƒŒåŒ…" class="headerlink" title="è§£æ³• $I.$ åŒ–ä¸ºå®Œå…¨èƒŒåŒ…"></a>è§£æ³• $I.$ åŒ–ä¸ºå®Œå…¨èƒŒåŒ…</h3><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š$F_{i,v} = max(F_{i-1,v-k\times w_i} + k\times c_i | 0\leqslant k\leqslant n_i)$<br><br>æ—¶é—´å¤æ‚åº¦ï¼š$O(V\times \sum{n_i})$</p>
<h4 id="æ¡†æ¶-2"><a href="#æ¡†æ¶-2" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; ++i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = V; j &gt;= <span class="number">0</span>; --j)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= n[i]; ++k)</span><br><span class="line">        &#123;</span><br><span class="line">            f[i][j] = <span class="built_in">max</span>(f[i - <span class="number">1</span>][j], [i - <span class="number">1</span>][j - k * w[i]] + k * c[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[N][V]);</span><br></pre></td></tr></table></figure>

<h3 id="è§£æ³•-II-åŒ–ä¸º01èƒŒåŒ…"><a href="#è§£æ³•-II-åŒ–ä¸º01èƒŒåŒ…" class="headerlink" title="è§£æ³• $II.$ åŒ–ä¸º01èƒŒåŒ…"></a>è§£æ³• $II.$ åŒ–ä¸º01èƒŒåŒ…</h3><p>æŠŠ $n_i$ ä»¶ä¸€ç§ç‰©å“åŒ–ä¸ºå•ç‹¬çš„ $n_i$ ä»¶ç‰©å“å³å¯<br><br>æ—¶é—´å¤æ‚åº¦ï¼š$O(V\times \sum{n_i})$<br><br>æ¡†æ¶ç•¥</p>
<h3 id="è§£æ³•-III-äºŒè¿›åˆ¶ä¼˜åŒ–"><a href="#è§£æ³•-III-äºŒè¿›åˆ¶ä¼˜åŒ–" class="headerlink" title="è§£æ³• $III.$ äºŒè¿›åˆ¶ä¼˜åŒ–"></a>è§£æ³• $III.$ äºŒè¿›åˆ¶ä¼˜åŒ–</h3><p>$$<br>n_i\to 1+2+4+\dots +2^{k-1}+\dots +(n_i-2^k+1)<br>$$<br>$$<br>\sum{n_i}\to \sum{\log_2{n_i}}<br>$$<br>æ—¶é—´å¤æ‚åº¦ï¼š$O(V\times \sum{\log_2{n_i}})$</p>
<h4 id="æ¡†æ¶-3"><a href="#æ¡†æ¶-3" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> w, c, n, t = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;w, &amp;c, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n &gt;= t)</span><br><span class="line">    &#123;</span><br><span class="line">        v[++N] = x * t;</span><br><span class="line">        w[N]   = y * t;</span><br><span class="line">        n -= t;</span><br><span class="line">        t *= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    v[++N] = x * n;</span><br><span class="line">    w[N]   = y * n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; ++i)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = V; j &gt;= v[i]; --j)</span><br><span class="line">        f[j] = <span class="built_in">max</span>(f[j], f[j - v[i]] + w[i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[V]);</span><br></pre></td></tr></table></figure>

<h2 id="æ··åˆä¸‰ç§èƒŒåŒ…é—®é¢˜"><a href="#æ··åˆä¸‰ç§èƒŒåŒ…é—®é¢˜" class="headerlink" title="æ··åˆä¸‰ç§èƒŒåŒ…é—®é¢˜"></a>æ··åˆä¸‰ç§èƒŒåŒ…é—®é¢˜</h2><p>æœ‰ $N$ ç§ç‰©å“ï¼Œå’Œä¸€å®¹ç§¯ä¸º $V$ çš„èƒŒåŒ…ï¼Œç¬¬ $i$ ç§ç‰©å“æœ‰ $n_i$ ä»¶æˆ–æ— ç©·ä»¶ï¼Œä½“ç§¯ä¸º $w_i$ ï¼Œä»·å€¼ä¸º $c_i$ ã€‚å°†ç¬¬å‡ ä»¶ç‰©å“è£…å…¥ï¼Œä½¿ä½“ç§¯ä¸è¶…è¿‡æ€»ä½“ç§¯ï¼Œä¸”ä»·å€¼å’Œæœ€å¤§ï¼Œæ±‚æœ€å¤§ä»·å€¼ã€‚</p>
<h4 id="ä¼ªæ¡†æ¶"><a href="#ä¼ªæ¡†æ¶" class="headerlink" title="ä¼ªæ¡†æ¶"></a>ä¼ªæ¡†æ¶</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; ++i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (ç¬¬iä»¶æ˜¯æœ‰ç©·ä»¶)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = V; j &gt;= <span class="number">0</span>; --j)</span><br><span class="line">            f[j] = <span class="built_in">max</span>(f[j], f[j - w[i]] + c[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="comment">//æœ‰æ— ç©·ä»¶</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= V; ++j)</span><br><span class="line">            f[j] = <span class="built_in">max</span>(f[j], f[j - w[i]] + c[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜"><a href="#äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜" class="headerlink" title="äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜"></a>äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜</h2><p>æœ‰ $N$ ä»¶ç‰©å“ï¼Œå®¹ç§¯ä¸º $V,U$ çš„ä¸¤ä¸ªèƒŒåŒ…ï¼Œæ¯ä»¶ç‰©å“æœ‰ä¸¤ç§è´¹ç”¨ï¼Œé€‰æ‹©ç‰©å“éœ€è¦ä»˜å‡ºä¸¤ç§ä»£ä»·ï¼Œç¬¬ $i$ ä»¶ä»£ä»·ä¸º $a_i,b_i$ï¼Œä»·å€¼ä¸º $c_i$ã€‚å°†ç¬¬å‡ ä»¶ç‰©å“è£…å…¥ï¼Œä½¿ä½“ç§¯ä¸è¶…è¿‡æ€»ä½“ç§¯ï¼Œä¸”ä»·å€¼å’Œæœ€å¤§ï¼Œæ±‚æœ€å¤§ä»·å€¼ã€‚</p>
<p>æ”¹ä¸ºäºŒç»´æ•°ç»„å³å¯<br><br>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š$F_{v,u} = max(F_{v,u}\ , F_{v-a_i,u-b_i} + c_i)$<br><br>$F_{v,u}$ è¡¨ç¤ºå‰é¢çš„ç‰©å“ä»˜å‡ºä»£ä»·åˆ†åˆ«ä¸º $v,u$ æ—¶çš„æœ€å¤§ä»·å€¼<br><br>æ¡†æ¶ç•¥</p>
<p>å¾ªç¯é¡ºåº</p>
<ul>
<li>ç±»01èƒŒåŒ…ï¼š<code>v = V..0  u = U..0</code><br></li>
<li>ç±»å®Œå…¨èƒŒåŒ…ï¼š<code>v = 0..V  u = 0..U</code><br></li>
<li>ç±»å¤šé‡èƒŒåŒ…ï¼šæ‹†åˆ†ç‰©å“</li>
</ul>
<h2 id="åˆ†ç»„çš„èƒŒåŒ…é—®é¢˜"><a href="#åˆ†ç»„çš„èƒŒåŒ…é—®é¢˜" class="headerlink" title="åˆ†ç»„çš„èƒŒåŒ…é—®é¢˜"></a>åˆ†ç»„çš„èƒŒåŒ…é—®é¢˜</h2><p>æœ‰ $K$ ç»„ç‰©å“ï¼Œ $V$ çš„èƒŒåŒ…ï¼Œç¬¬ $k$ ç»„æœ‰ $N_k$ ä»¶ç‰©å“ï¼Œç¬¬ $i$ ä»¶ç‰©å“çš„ä½“ç§¯ä¸º $w_i$ ï¼Œä»·å€¼ä¸º $c_i$ ï¼Œæ¯ç»„ä¸­åªèƒ½é€‰ä¸€ä»¶ç‰©å“ã€‚å°†ç¬¬å‡ ä»¶ç‰©å“è£…å…¥ï¼Œä½¿ä½“ç§¯ä¸è¶…è¿‡æ€»ä½“ç§¯ï¼Œä¸”ä»·å€¼å’Œæœ€å¤§ï¼Œæ±‚æœ€å¤§ä»·å€¼ã€‚</p>
<h4 id="æ¡†æ¶-4"><a href="#æ¡†æ¶-4" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= K; ++k)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> v = V; v &gt;= <span class="number">0</span>; --v)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N[k]; ++i)</span><br><span class="line">            f[v] = <span class="built_in">max</span>(f[v], f[v - w[i]] + c[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="èƒŒåŒ…é—®é¢˜çš„æ–¹æ¡ˆæ•°"><a href="#èƒŒåŒ…é—®é¢˜çš„æ–¹æ¡ˆæ•°" class="headerlink" title="èƒŒåŒ…é—®é¢˜çš„æ–¹æ¡ˆæ•°"></a>èƒŒåŒ…é—®é¢˜çš„æ–¹æ¡ˆæ•°</h2><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š$F_{i,v} = sum(F_{i-1,v}, F_{i-1,v-w_i})\ \ \ (F_{0,0} = 1)$</p>
<h4 id="æ¡†æ¶-5"><a href="#æ¡†æ¶-5" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; ++i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = w[i]; j &lt;= V; ++j)</span><br><span class="line">        f[j] += f[j - w[i]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[V]);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å †</title>
    <url>/p/bb233fbc.html</url>
    <content><![CDATA[<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>heap[]</code>å †<br><br><code>heap_size</code>å †å¤§å°<br><br><code>put(int)</code>å‹å…¥ä¸€ä¸ªæ•°<br><br><code>get()</code>å¼¹å‡ºå †é¡¶</p>
<h4 id="æ™®é€šå®ç°"><a href="#æ™®é€šå®ç°" class="headerlink" title="æ™®é€šå®ç°"></a>æ™®é€šå®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> heap[maxn];</span><br><span class="line"><span class="keyword">int</span> heap_size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> now, next;</span><br><span class="line">    heap[++heap_size] = d;</span><br><span class="line">    now = heap_size;</span><br><span class="line">    <span class="keyword">while</span> (now &gt; <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        next = now &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (heap[now] &lt;= heap[next]) <span class="keyword">break</span>;</span><br><span class="line">        <span class="built_in">swap</span>(heap[now], heap[next]);</span><br><span class="line">        now = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> now, next, res;</span><br><span class="line">    res = heap[<span class="number">1</span>];</span><br><span class="line">    heap[<span class="number">1</span>] = heap[heap_size--];</span><br><span class="line">    now = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (now * <span class="number">2</span> &lt;= heap_size)</span><br><span class="line">    &#123;</span><br><span class="line">        next = now * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (next &lt; heap_size &amp;&amp; heap[next + <span class="number">1</span>] &lt; heap[next]) next++;</span><br><span class="line">        <span class="keyword">if</span> (heap[now] &lt;= heap[next]) <span class="keyword">break</span>;</span><br><span class="line">        <span class="built_in">swap</span>(heap[now], heap[next]);</span><br><span class="line">        now = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="STLå®ç°"><a href="#STLå®ç°" class="headerlink" title="STLå®ç°"></a>STLå®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> heap[maxn];</span><br><span class="line"><span class="keyword">int</span> heap_size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    heap[++heap_size] = d;</span><br><span class="line">    <span class="built_in">push_heap</span>(heap + <span class="number">1</span>, heap + heap_size + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//push_heap(heap + 1, heap + heap_size + 1, greater&lt;int&gt;()); </span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">pop_heap</span>(heap + <span class="number">1</span>, heap + heap_size + <span class="number">1</span>);                   </span><br><span class="line">    <span class="comment">//pop_heap(heap + 1, heap + heap_size + 1, greater&lt;int&gt;()); </span></span><br><span class="line">    <span class="keyword">return</span> heap[heap_size--];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å›¾è®º-SPFA</title>
    <url>/p/8ed8c69a.html</url>
    <content><![CDATA[<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>n, m, s</code>ç‚¹æ•°ã€è¾¹æ•°ã€æºç‚¹<br><br><code>cnt, head[], edge[], add(int, int, int)</code>é“¾å¼å‰å‘æ˜Ÿ<br><br><code>dist[]</code>å„ç‚¹åˆ°æºç‚¹è·¯å¾„é•¿<br><br><code>vis[]</code>è®°å½•</p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm = <span class="number">500010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, dist[maxn], vis[maxn];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> cnt, head[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> next, to, dis;</span><br><span class="line">&#125;edge[maxm];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> dis)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[++cnt].next = head[from];</span><br><span class="line">    edge[cnt].to     = to;</span><br><span class="line">    edge[cnt].dis    = dis;</span><br><span class="line">    head[from]       = cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SPFA</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        dist[i] = INT_MAX;</span><br><span class="line">    &#125;</span><br><span class="line">    q.<span class="built_in">push</span>(s);</span><br><span class="line">    dist[s] = <span class="number">0</span>; vis[s] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>(); vis[u] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = head[u]; i; i = edge[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> v = edge[i].to;</span><br><span class="line">            <span class="keyword">if</span> (dist[v] &gt; dist[u] + edge[i].dis)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[v] = dist[u] + edge[i].dis;</span><br><span class="line">                <span class="keyword">if</span> (!vis[v])</span><br><span class="line">                &#123;</span><br><span class="line">                    vis[v] = <span class="literal">true</span>;</span><br><span class="line">                    q.<span class="built_in">push</span>(v);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å›¾è®º-é“¾å¼å‰å‘æ˜Ÿ</title>
    <url>/p/dda660a4.html</url>
    <content><![CDATA[<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>cnt</code>è®°æ•°<br><br><code>head[]</code>è®°å½•è¾¹çš„å¤´<br><br><code>struct Edge&#123;int, int, int&#125;</code>è¾¹ä¿¡æ¯: å¼€å§‹ç‚¹ã€ç»“æŸç‚¹ã€æƒå€¼<br><br><code>add_edge(int, int, int)</code>æ·»åŠ è¾¹</p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> cnt, head[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> next, to, val;</span><br><span class="line">&#125;edge[maxm];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	edge[++cnt].next = head[from];</span><br><span class="line">	edge[cnt].to     = to;</span><br><span class="line">	edge[cnt].val    = val;</span><br><span class="line">	head[from]       = cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å›¾è®º-Prim</title>
    <url>/p/8760af74.html</url>
    <content><![CDATA[<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>n, m, _map[][]</code>ç‚¹æ•°ã€è¾¹æ•°ã€é‚»æ¥çŸ©é˜µ<br><br><code>dist[]</code>æ ‘æ ¹åˆ°å„ç‚¹è·¯å¾„é•¿<br><br><code>pre[]</code>ç”Ÿæˆæ ‘è·¯å¾„ </p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">101</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, dist[maxn], _map[maxn][maxn], pre[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">			_map[i][j] = INT_MAX;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) _map[i][i] = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> from, to, w;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;from, &amp;to, &amp;w);</span><br><span class="line">		_map[from][to] = w;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Prim</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i, j, k;</span><br><span class="line">	<span class="keyword">int</span> min;</span><br><span class="line">	<span class="keyword">bool</span> p[maxn];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		p[i] = <span class="literal">false</span>;</span><br><span class="line">		dist[i] = _map[<span class="number">1</span>][i];</span><br><span class="line">		pre[i] = <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	dist[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">	p[<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - <span class="number">1</span>; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		min = INT_MAX;</span><br><span class="line">		k = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (!p[j] &amp;&amp; dist[j] &lt; min)</span><br><span class="line">			&#123;</span><br><span class="line">				min = dist[j]</span><br><span class="line">				k = j;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (k == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">		p[k] = <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (!p[j] &amp;&amp; _map[k][j] != INT_MAX &amp;&amp; dist[j] &gt; _map[k][j])</span><br><span class="line">			&#123;</span><br><span class="line">				dist[j] = _map[k][j];</span><br><span class="line">				pre[j] = k;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å›¾è®º-Kruskal</title>
    <url>/p/c4fb1928.html</url>
    <content><![CDATA[<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>ufs[], find(int), unionn(int, int)</code>å¹¶æŸ¥é›†ç»“æ„<br><br><code>edge[]</code>é“¾å¼å‰å‘æ˜Ÿ<br><br><code>cmp(Edge, Edge)</code>è¾¹æ’åºæ–¹æ¡ˆ</p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> ufs[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ufs[x] != x) <span class="keyword">return</span> ufs[x] = <span class="built_in">find</span>(ufs[x]);</span><br><span class="line">    <span class="keyword">return</span> ufs[x] = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unionn</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="built_in">find</span>(x);</span><br><span class="line">    <span class="keyword">int</span> b = <span class="built_in">find</span>(y);</span><br><span class="line">    <span class="keyword">if</span> (a != b)</span><br><span class="line">    &#123;</span><br><span class="line">        ufs[a] = b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> a, b, w;</span><br><span class="line">    <span class="keyword">bool</span> select;</span><br><span class="line">&#125;edge[maxm];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Edge a, Edge b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a.w != b.w) <span class="keyword">return</span> a.w &lt; b.w;</span><br><span class="line">    <span class="keyword">if</span> (a.a != b.a) <span class="keyword">return</span> a.a &lt; b.a;</span><br><span class="line">    <span class="keyword">return</span> a.b &lt; b.b; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">kruskal</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        ufs[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>, x, y;</span><br><span class="line">    <span class="built_in">sort</span>(edge + <span class="number">1</span>, edge + <span class="number">1</span> + m, cmp);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (k == n - <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">        x = <span class="built_in">find</span>(edge[i].a);</span><br><span class="line">        y = <span class="built_in">find</span>(edge[i].b);</span><br><span class="line">        <span class="keyword">if</span> (x != y)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">unionn</span>(x, y);</span><br><span class="line">            k++;</span><br><span class="line">            edge[i].select = <span class="literal">true</span>;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å­—ç¬¦ä¸²ç®—æ³•-KMP</title>
    <url>/p/632c6631.html</url>
    <content><![CDATA[<p>ä¾‹ï¼š<a href="https://www.luogu.org/problemnew/show/P3375">æ´›è°·P3375</a></p>
<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>pre()</code>æ±‚å‰ç¼€æ•°ç»„<br><br><code>kmp()</code>åŒ¹é…å­—ç¬¦ä¸²<br></p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">char</span> s1[<span class="number">1000010</span>], s2[<span class="number">1000010</span>];</span><br><span class="line"><span class="keyword">int</span> nxt[<span class="number">1000010</span>], l1, l2;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pre</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    nxt[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; l2; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (j &gt; <span class="number">0</span> &amp;&amp; s2[j + <span class="number">1</span>] != s2[i + <span class="number">1</span>]) j = nxt[j];</span><br><span class="line">        <span class="keyword">if</span> (s2[j + <span class="number">1</span>] == s2[i + <span class="number">1</span>]) j++;</span><br><span class="line">        nxt[i + <span class="number">1</span>] = j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">kmp</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l1; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (j &gt; <span class="number">0</span> &amp;&amp; s2[j + <span class="number">1</span>] != s1[i + <span class="number">1</span>]) j = nxt[j];</span><br><span class="line">        <span class="keyword">if</span> (s2[j + <span class="number">1</span>] == s1[i + <span class="number">1</span>]) j++;</span><br><span class="line">        <span class="keyword">if</span> (j == l2)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, i - l2 + <span class="number">2</span>);</span><br><span class="line">            j = nxt[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; s1 + <span class="number">1</span>;</span><br><span class="line">    cin &gt;&gt; s2 + <span class="number">1</span>;</span><br><span class="line">    l1 = <span class="built_in">strlen</span>(s1 + <span class="number">1</span>);</span><br><span class="line">    l2 = <span class="built_in">strlen</span>(s2 + <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">pre</span>();</span><br><span class="line">    <span class="built_in">kmp</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å­—ç¬¦ä¸²ç®—æ³•-å“ˆå¸Œè¡¨</title>
    <url>/p/666f05c6.html</url>
    <content><![CDATA[<p>ä¾‹ï¼š<a href="https://www.luogu.org/problemnew/show/P4305">æ´›è°·P4305</a></p>
<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>hash[]</code>å“ˆå¸Œè¡¨<br><br><code>find(int x)</code>æŸ¥æ‰¾å“ˆå¸Œè¡¨ä¸­ $x$ çš„ä½ç½®<br><br><code>push(int x)</code>å°† $x$ æ’å…¥åˆ°å“ˆå¸Œè¡¨ä¸­<br><br><code>check(int x)</code>æŸ¥æ‰¾ $x$ æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­</p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> p 100003</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> hash(a) a%p</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> h[p], t, n, x;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span>) y = <span class="built_in">hash</span>(-x);</span><br><span class="line">    <span class="keyword">else</span> y = <span class="built_in">hash</span>(x);</span><br><span class="line">    <span class="keyword">while</span> (h[y] &amp;&amp; h[y] != x) y = <span class="built_in">hash</span>(++y);</span><br><span class="line">    <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    h[<span class="built_in">find</span>(x)] = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> h[<span class="built_in">find</span>(x)] == x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">while</span> (t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(h, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(h));</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="keyword">while</span> (n--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">check</span>(x))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, x);</span><br><span class="line">                <span class="built_in">push</span>(x);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å­—ç¬¦ä¸²ç®—æ³•-å­—ç¬¦ä¸²å“ˆå¸Œ</title>
    <url>/p/114af1e8.html</url>
    <content><![CDATA[<p>ä¾‹ï¼š<a href="https://www.luogu.org/problemnew/show/P3370">æ´›è°·P3370</a></p>
<h4 id="å•å“ˆå¸Œ-è‡ªç„¶æº¢å‡º"><a href="#å•å“ˆå¸Œ-è‡ªç„¶æº¢å‡º" class="headerlink" title="å•å“ˆå¸Œ(è‡ªç„¶æº¢å‡º)"></a>å•å“ˆå¸Œ(è‡ªç„¶æº¢å‡º)</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ULL;</span><br><span class="line">ULL base = <span class="number">131</span>, a[<span class="number">10010</span>];</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">10010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function">ULL <span class="title">hash</span><span class="params">(<span class="keyword">char</span>* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(s);</span><br><span class="line">    ULL Ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">        Ans = Ans * base + (ULL)s[i];</span><br><span class="line">    <span class="keyword">return</span> Ans &amp; <span class="number">0x7fffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å•å“ˆå¸Œ-å•æ¨¡æ•°"><a href="#å•å“ˆå¸Œ-å•æ¨¡æ•°" class="headerlink" title="å•å“ˆå¸Œ(å•æ¨¡æ•°)"></a>å•å“ˆå¸Œ(å•æ¨¡æ•°)</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ULL;</span><br><span class="line">ULL base = <span class="number">131</span>, a[<span class="number">10010</span>], mod = <span class="number">19260817</span>;</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">10010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function">ULL <span class="title">hash</span><span class="params">(<span class="keyword">char</span>* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(s);</span><br><span class="line">    ULL Ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">        Ans = (Ans * base + (ULL)s[i]) % mod;</span><br><span class="line">    <span class="keyword">return</span> Ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å•å“ˆå¸Œ-å¤§æ¨¡æ•°"><a href="#å•å“ˆå¸Œ-å¤§æ¨¡æ•°" class="headerlink" title="å•å“ˆå¸Œ(å¤§æ¨¡æ•°)"></a>å•å“ˆå¸Œ(å¤§æ¨¡æ•°)</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ULL;</span><br><span class="line">ULL base = <span class="number">131</span>, a[<span class="number">10010</span>], mod = <span class="number">212370440130137957LL</span>;</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">10010</span>];</span><br><span class="line"><span class="keyword">int</span> prime = <span class="number">233317</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">ULL <span class="title">hash</span><span class="params">(<span class="keyword">char</span>* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(s);</span><br><span class="line">    ULL Ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i)</span><br><span class="line">        Ans = (Ans * base + (ULL)s[i]) % mod + prime;</span><br><span class="line">    <span class="keyword">return</span> Ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åŒå“ˆå¸Œ"><a href="#åŒå“ˆå¸Œ" class="headerlink" title="åŒå“ˆå¸Œ"></a>åŒå“ˆå¸Œ</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ULL;</span><br><span class="line">ULL base = <span class="number">131</span>, mod1=<span class="number">19260817</span>, mod2=<span class="number">19660813</span>;</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">10010</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">data</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ULL x,y;</span><br><span class="line">&#125;a[<span class="number">10010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function">ULL <span class="title">hash1</span><span class="params">(<span class="keyword">char</span>* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(s);</span><br><span class="line">    ULL Ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">        Ans = (Ans * base + (ULL)s[i]) % mod1;</span><br><span class="line">    <span class="keyword">return</span> Ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ULL <span class="title">hash2</span><span class="params">(<span class="keyword">char</span>* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(s);</span><br><span class="line">    ULL Ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">        Ans = (Ans * base + (ULL)s[i]) % mod2;</span><br><span class="line">    <span class="keyword">return</span> Ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-æ•°è®º-çº¿æ€§ç­›ç´ æ•°</title>
    <url>/p/cff9d95.html</url>
    <content><![CDATA[<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>p[]</code> æœ€ç»ˆç»“æœ</p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="keyword">int</span> p[N], cnt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">get_prime</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; N; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!vis[i])</span><br><span class="line">            p[++cnt] = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cnt; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> v = i * p[j];</span><br><span class="line">            <span class="keyword">if</span> (v &gt;= N) <span class="keyword">break</span>;</span><br><span class="line">            vis[v] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (i % p[j] == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å›¾è®º-Floyd</title>
    <url>/p/ba77762f.html</url>
    <content><![CDATA[<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>n, m, G[][]</code>ç‚¹æ•°ã€è¾¹æ•°ã€é‚»æ¥çŸ©é˜µ<br><br><code>dist[][]</code>æ¯å¯¹é¡¶ç‚¹é—´è·¯å¾„é•¿åº¦<br><br><code>pre[][]</code>æ¯å¯¹é¡¶ç‚¹ä¹‹é—´è·¯å¾„<br><br><code>make()</code>å»ºå›¾</p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, G[maxn][maxn], dist[maxn][maxn], pre[maxn][maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            G[i][j] = INT_MAX;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) G[i][i] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> from, to, w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;from, &amp;to, &amp;w);</span><br><span class="line">        G[from][to] = w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Floyd</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            dist[i][j] = G[i][j];</span><br><span class="line">            pre[i][j]  = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= n; ++k)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (dist[i][k] != INT_MAX &amp;&amp; dist[k][j] != INT_MAX &amp;&amp; dist[i][k] + dist[k][j] &lt; dist[i][j])</span><br><span class="line">                &#123;</span><br><span class="line">                    dist[i][j] = dist[i][k] + dist[k][j];</span><br><span class="line">                    pre[i][j]  = pre[k][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å›¾è®º-æ¬§æ‹‰å›è·¯</title>
    <url>/p/57662471.html</url>
    <content><![CDATA[<h2 id="é‚»æ¥çŸ©é˜µ"><a href="#é‚»æ¥çŸ©é˜µ" class="headerlink" title="é‚»æ¥çŸ©é˜µ"></a>é‚»æ¥çŸ©é˜µ</h2><h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>G[][]</code>é‚»æ¥çŸ©é˜µ<br><br><code>deg[]</code>åº¦<br><br><code>ans[]</code>æ¬§æ‹‰å›è·¯<br><br><code>n, e</code>ç‚¹æ•°ã€è¾¹æ•°</p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> G[maxn][maxn], deg[maxn], ans[maxn];</span><br><span class="line"><span class="keyword">int</span> n, e, x, y, ansi, s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Euler</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (G[i][j])</span><br><span class="line">		&#123;</span><br><span class="line">			G[i][j] = G[j][i] = <span class="number">0</span>;</span><br><span class="line">			<span class="built_in">Euler</span>(j);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	ans[++ansi] = i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;e);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= e; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">		G[x][y] = G[y][x] = <span class="number">1</span>;</span><br><span class="line">		deg[x]++;</span><br><span class="line">		deg[y]++;</span><br><span class="line">	&#125;</span><br><span class="line">	s = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">		<span class="keyword">if</span> (deg[i] % <span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line">			s = i;</span><br><span class="line">	<span class="built_in">Euler</span>(s);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= ansi; ++i)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, ans[i]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é“¾å¼å‰å‘æ˜Ÿ"><a href="#é“¾å¼å‰å‘æ˜Ÿ" class="headerlink" title="é“¾å¼å‰å‘æ˜Ÿ"></a>é“¾å¼å‰å‘æ˜Ÿ</h2><h4 id="è¯´æ˜-1"><a href="#è¯´æ˜-1" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>n, m</code>ç‚¹æ•°ã€è¾¹æ•°<br><br><code>head, edge[]</code>é“¾å¼å‰å‘æ˜Ÿ<br><br><code>ans[], ansi</code>è·¯å¾„ã€æ•°ç»„å¤§å°<br><br><code>vis[]</code>è®°å½•<br><br><code>make()</code>å»ºå›¾</p>
<h4 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> head[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> to, next;</span><br><span class="line">&#125;edge[maxm];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= m; ++k)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> i, j;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;i, &amp;j);</span><br><span class="line">		edge[k].to = i;</span><br><span class="line">		edge[k].next = head[i];</span><br><span class="line">		head[i] = k;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans[maxm];</span><br><span class="line"><span class="keyword">int</span> ansi = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">2</span> * maxm];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = head[now]; k != <span class="number">0</span>; k = edge[k].next)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="keyword">if</span> (!vis[k])</span><br><span class="line">        &#123;</span><br><span class="line">            vis[k] = <span class="literal">true</span>;</span><br><span class="line">            vis[k ^ <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">dfs</span>(edge[k].to);</span><br><span class="line">            ans[ansi++] = k;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-åŠ¨æ€è§„åˆ’</title>
    <url>/p/8364d7e9.html</url>
    <content><![CDATA[<p><strong><em>å¾…å®Œæˆ</em></strong></p>
<h2 id="å¤šé˜¶æ®µè¿‡ç¨‹å†³ç­–çš„æœ€ä¼˜åŒ–é—®é¢˜"><a href="#å¤šé˜¶æ®µè¿‡ç¨‹å†³ç­–çš„æœ€ä¼˜åŒ–é—®é¢˜" class="headerlink" title="å¤šé˜¶æ®µè¿‡ç¨‹å†³ç­–çš„æœ€ä¼˜åŒ–é—®é¢˜"></a>å¤šé˜¶æ®µè¿‡ç¨‹å†³ç­–çš„æœ€ä¼˜åŒ–é—®é¢˜</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A --5--&gt; B1</span><br><span class="line">    A --3--&gt; B2</span><br><span class="line">    B1 --1--&gt; C1</span><br><span class="line">    B1 --6--&gt; C2</span><br><span class="line">    B1 --3--&gt; C3</span><br><span class="line">    B2 --8--&gt; C2</span><br><span class="line">    B2 --4--&gt; C4</span><br><span class="line">    C1 --5--&gt; D1</span><br><span class="line">    C1 --6--&gt; D2</span><br><span class="line">    C2 --5--&gt; D1</span><br><span class="line">    C3 --8--&gt; D3</span><br><span class="line">    C4 --3--&gt; D3</span><br><span class="line">    D1 --3--&gt; E</span><br><span class="line">    D2 --4--&gt; E</span><br><span class="line">    D3 --3--&gt; E</span><br></pre></td></tr></table></figure>

<p>!!! tldr â€œé¢˜ç›®åŠæ³¨è§£â€<br>    æ±‚ä¸Šå›¾ä» $A$ åˆ° $E$ çš„æœ€çŸ­è·ç¦»<br><br><br>    $K$: é˜¶æ®µ<br><br>    $D(X_I, (X+1)_J)$: ä» $X_I$ åˆ° $(X+1)_J$ çš„è·ç¦»<br><br>    $F_K(X_I)$: $K$ é˜¶æ®µä¸‹ $X_I$ åˆ°ç»ˆç‚¹ $E$ çš„æœ€çŸ­è·ç¦»</p>
<p>å€’æ¨:<br>$$<br>K=4\qquad F_4(D_1)=3\qquad F_4(D_2)=4\qquad F_4(D_3)=3<br>$$<br>$$<br>K=5\qquad F_3(C_1)=min(D(C_1,D_1)+F_4(D_1),D(C_1,D_2)+F_4(D_2))=min(5+3,6+4)=8<br>F_3(C_2)<br>$$</p>
]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å›¾è®º-Dijkstra</title>
    <url>/p/982e7a01.html</url>
    <content><![CDATA[<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>n, m</code>ç‚¹æ•°ã€è¾¹æ•°<br><br><code>G[][]</code>é‚»æ¥çŸ©é˜µå­˜å›¾<br><br><code>dist[]</code>è·¯å¾„é•¿åº¦<br><br><code>pre[]</code>è·¯å¾„<br><br><code>make()</code>å»ºå›¾</p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, G[maxn][maxn], dist[maxn], pre[maxn], s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            G[i][j] = INT_MAX;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) G[i][i] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> from, to, w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;from, &amp;to, &amp;w);</span><br><span class="line">        G[from][to] = w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k, min;</span><br><span class="line">    <span class="keyword">bool</span> p[maxn];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        p[i] = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (i != s)</span><br><span class="line">        &#123;</span><br><span class="line">            dist[i] = G[s][i];</span><br><span class="line">            pre[i]  = s;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dist[s] = <span class="number">0</span>; p[s] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - <span class="number">1</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        min = INT_MAX; k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!p[j] &amp;&amp; dist[j] &lt; min)</span><br><span class="line">            &#123;</span><br><span class="line">                min = dist[j];</span><br><span class="line">                k = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        p[k] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!p[j] &amp;&amp; G[k][j] != INT_MAX &amp;&amp; dist[j] &gt; dist[k] + G[k][j])</span><br><span class="line">            &#123;</span><br><span class="line">                dist[j] = dist[k] + G[k][j];</span><br><span class="line">                pre[j] = k;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å †ä¼˜åŒ–-é“¾å¼å‰å‘æ˜Ÿ"><a href="#å †ä¼˜åŒ–-é“¾å¼å‰å‘æ˜Ÿ" class="headerlink" title="å †ä¼˜åŒ–(é“¾å¼å‰å‘æ˜Ÿ)"></a>å †ä¼˜åŒ–(é“¾å¼å‰å‘æ˜Ÿ)</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> to, nxt, t;</span><br><span class="line">&#125;edge[maxm &lt;&lt; <span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> head[maxn], cnt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[++cnt].to  = b;</span><br><span class="line">    edge[cnt].nxt = head[a];</span><br><span class="line">    edge[cnt].t   = t;</span><br><span class="line">    head[a]       = cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">heap</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> u, d;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> heap&amp; a) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> d &gt; a.d;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    priority_queue&lt;heap&gt; q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; ++i) dist[i] = INF;</span><br><span class="line">    dist[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    q.<span class="built_in">push</span>((heap)&#123;<span class="number">1</span>, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        heap top = q.<span class="built_in">top</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">int</span> tx = top.u;</span><br><span class="line">        <span class="keyword">int</span> td = top.d;</span><br><span class="line">        <span class="keyword">if</span> (td != dist[tx]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = head[tx]; i; i = edge[i].nxt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> v = edge[i].to;</span><br><span class="line">            <span class="keyword">if</span> (dist[v] &gt; dist[tx] + edge[i].t)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[v] = dist[tx] + edge[i].t;</span><br><span class="line">                dy[v] = i; </span><br><span class="line">                dx[v] = tx;    <span class="comment">//è®°å½•è·¯å¾„</span></span><br><span class="line">                q.<span class="built_in">push</span>((heap)&#123;v, dist[v]&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="è·¯å¾„"><a href="#è·¯å¾„" class="headerlink" title="è·¯å¾„"></a>è·¯å¾„</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> q = n, p[maxm];</span><br><span class="line"><span class="keyword">while</span> (q != <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">    p[++tot] = dy[q];</span><br><span class="line">    q = dx[q];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-æ ‘çŠ¶æ•°ç»„</title>
    <url>/p/72c90980.html</url>
    <content><![CDATA[<h1 id="æ ‘çŠ¶æ•°ç»„"><a href="#æ ‘çŠ¶æ•°ç»„" class="headerlink" title="æ ‘çŠ¶æ•°ç»„"></a>æ ‘çŠ¶æ•°ç»„</h1><p>æ¨¡æ¿ï¼š<a href="https://www.luogu.org/problemnew/show/P3374">æ´›è°·P3374</a></p>
<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p><code>tree[]</code>æ ‘çŠ¶æ•°ç»„<br><br><code>lowbit(int)</code>ç¥å¥‡çš„å‡½æ•°<br><br><code>add(int x, int k)</code>ç¬¬ $x$ ä¸ªæ•°åŠ ä¸Š $k$ <br><br><code>sum(int x)</code>å‰ $x$ ä¸ªæ•°çš„å’Œ</p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> tree[<span class="number">2000010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> k &amp; -k;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (x &lt;= n)</span><br><span class="line">    &#123;</span><br><span class="line">        tree[x] += k;</span><br><span class="line">        x += <span class="built_in">lowbit</span>(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        ans += tree[x];</span><br><span class="line">        x -= <span class="built_in">lowbit</span>(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-å¤§æ•´æ•°ç±»</title>
    <url>/p/b995b9d7.html</url>
    <content><![CDATA[<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iosfwd&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxl = <span class="number">5000</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> max(a, b) a&gt;b ? a : b</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> min(a, b) a&lt;b ? a : b</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BigInteger</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="keyword">int</span> len, s[maxl];</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">BigInteger</span>();</span><br><span class="line">		<span class="built_in">BigInteger</span>(<span class="keyword">const</span> <span class="keyword">char</span>*);</span><br><span class="line">		<span class="built_in">BigInteger</span>(<span class="keyword">int</span>);</span><br><span class="line">		<span class="keyword">bool</span> sign;</span><br><span class="line">		<span class="function">string <span class="title">toStr</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">		<span class="keyword">friend</span> istream&amp; <span class="keyword">operator</span>&gt;&gt;(istream&amp;, BigInteger&amp;);</span><br><span class="line">		<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp;, BigInteger&amp;);</span><br><span class="line"></span><br><span class="line">		BigInteger <span class="keyword">operator</span>=(<span class="keyword">const</span> <span class="keyword">char</span>*);</span><br><span class="line">		BigInteger <span class="keyword">operator</span>=(<span class="keyword">int</span>);</span><br><span class="line">		BigInteger <span class="keyword">operator</span>=(<span class="keyword">const</span> string);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">bool</span> <span class="keyword">operator</span>&gt;(<span class="keyword">const</span> BigInteger&amp;) <span class="keyword">const</span>;</span><br><span class="line">		<span class="keyword">bool</span> <span class="keyword">operator</span>&gt;=(<span class="keyword">const</span> BigInteger&amp;) <span class="keyword">const</span>;</span><br><span class="line">		<span class="keyword">bool</span> <span class="keyword">operator</span>&gt;(<span class="keyword">const</span> BigInteger&amp;) <span class="keyword">const</span>;</span><br><span class="line">		<span class="keyword">bool</span> <span class="keyword">operator</span>&gt;=(<span class="keyword">const</span> BigInteger&amp;) <span class="keyword">const</span>;</span><br><span class="line">		<span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> BigInteger&amp;) <span class="keyword">const</span>;</span><br><span class="line">		<span class="keyword">bool</span> <span class="keyword">operator</span>!=(<span class="keyword">const</span> BigInteger&amp;) <span class="keyword">const</span>;</span><br><span class="line"></span><br><span class="line">		BigInteger <span class="keyword">operator</span>+(<span class="keyword">const</span> BigInteger&amp;) <span class="keyword">const</span>;</span><br><span class="line">		BigInteger <span class="keyword">operator</span>++();</span><br><span class="line">		BigInteger <span class="keyword">operator</span>++(<span class="keyword">int</span>);</span><br><span class="line">		BigInteger <span class="keyword">operator</span>+=(<span class="keyword">const</span> BigInteger&amp;);</span><br><span class="line">		BigInteger <span class="keyword">operator</span>-(<span class="keyword">const</span> BigInteger&amp;) <span class="keyword">const</span>;</span><br><span class="line">		BigInteger <span class="keyword">operator</span>--();</span><br><span class="line">		BigInteger <span class="keyword">operator</span>--(<span class="keyword">int</span>);</span><br><span class="line">		BigInteger <span class="keyword">operator</span>-=(<span class="keyword">const</span> BigInteger&amp;);</span><br><span class="line">		BigInteger <span class="keyword">operator</span>*(<span class="keyword">const</span> BigInteger&amp;) <span class="keyword">const</span>;</span><br><span class="line">		BigInteger <span class="keyword">operator</span>*(<span class="keyword">const</span> <span class="keyword">int</span> num) <span class="keyword">const</span>;</span><br><span class="line">		BigInteger <span class="keyword">operator</span>*=(<span class="keyword">const</span> BigInteger&amp;);</span><br><span class="line">		BigInteger <span class="keyword">operator</span>/(<span class="keyword">const</span> BigInteger&amp;) <span class="keyword">const</span>;</span><br><span class="line">		BigInteger <span class="keyword">operator</span>/=(<span class="keyword">const</span> BigInteger&amp;);</span><br><span class="line"></span><br><span class="line">		BigInteger <span class="keyword">operator</span>%(<span class="keyword">const</span> BigInteger&amp;) <span class="keyword">const</span>;</span><br><span class="line">		<span class="function">BigInteger <span class="title">factorial</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">		<span class="function">BigInteger <span class="title">Sqrt</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">		<span class="function">BigInteger <span class="title">Pow</span><span class="params">(<span class="keyword">const</span> BigInteger&amp;)</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">clean</span><span class="params">()</span></span>;</span><br><span class="line">		~BigInteger;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BigInteger::<span class="built_in">BigInteger</span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">memset</span>(s, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(s));</span><br><span class="line">	len = <span class="number">1</span>;</span><br><span class="line">	sign = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger::<span class="built_in">BigInteger</span>(<span class="keyword">const</span> <span class="keyword">char</span> *num)</span><br><span class="line">&#123;</span><br><span class="line">	*<span class="keyword">this</span> = num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger::<span class="built_in">BigInteger</span>(<span class="keyword">int</span> num)</span><br><span class="line">&#123;</span><br><span class="line">	*<span class="keyword">this</span> = num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">BigInteger::toStr</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	string res;</span><br><span class="line">	res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i)</span><br><span class="line">		res = (<span class="keyword">char</span>)(s[i] + <span class="string">&#x27;0&#x27;</span>) + res;</span><br><span class="line">	<span class="keyword">if</span> (res == <span class="string">&quot;&quot;</span>) res = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">	<span class="keyword">if</span> (!sign &amp;&amp; res != <span class="string">&quot;0&quot;</span>) res = <span class="string">&quot;-&quot;</span> + res;</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">istream&amp; <span class="keyword">operator</span>&gt;&gt;(istream&amp; in, BigInteger&amp; num)</span><br><span class="line">&#123;</span><br><span class="line">	string str;</span><br><span class="line">	in&gt;&gt;str;</span><br><span class="line">	num = str;</span><br><span class="line">	<span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, BigInteger&amp; num)</span><br><span class="line">&#123;</span><br><span class="line">	out&lt;&lt;num.<span class="built_in">toStr</span>();</span><br><span class="line">	<span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>=(<span class="keyword">const</span> <span class="keyword">char</span>* num)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">memset</span>(s, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(s));</span><br><span class="line">	<span class="keyword">char</span> a[maxl] = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">if</span> (num[<span class="number">0</span>] != <span class="string">&quot;-&quot;</span>)</span><br><span class="line">		<span class="built_in">strcpy</span>(a, num);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="built_in">strlen</span>(num); ++i)</span><br><span class="line">			a[i - <span class="number">1</span>] = num[i];</span><br><span class="line">	sign = !(num[<span class="number">0</span>] == <span class="string">&quot;-&quot;</span>);</span><br><span class="line">	len = <span class="built_in">strlen</span>(a);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(a); ++i)</span><br><span class="line">		s[i] = a[len - i - <span class="number">1</span>] - <span class="number">48</span>;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>=(<span class="keyword">int</span> num)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (num &lt; <span class="number">0</span>)</span><br><span class="line">		sign = <span class="number">0</span>, num = -num;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		sign = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">char</span> temp[MAX_L];</span><br><span class="line">	<span class="built_in">sprintf</span>(temp, <span class="string">&quot;%d&quot;</span>, num);</span><br><span class="line">	*<span class="keyword">this</span> = temp;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>=(<span class="keyword">const</span> string num)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* tmp;</span><br><span class="line">	tmp = num.<span class="built_in">c_str</span>();</span><br><span class="line">	*<span class="keyword">this</span> = tmp;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> BigInteger::<span class="keyword">operator</span>&lt;(<span class="keyword">const</span> BigInteger&amp; num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (sign^num.sign)</span><br><span class="line">		<span class="keyword">return</span> num.sign;</span><br><span class="line">	<span class="keyword">if</span> (len != num.len)</span><br><span class="line">		<span class="keyword">return</span> len &lt; num.len;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">		<span class="keyword">if</span> (s[i] != num.s[i])</span><br><span class="line">			<span class="keyword">return</span> sign ? (s[i] &lt; num.s[i]) : (s[i] &gt; num.s[i])</span><br><span class="line">	<span class="keyword">return</span> !sign;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> BigInteger::<span class="keyword">operator</span>&gt;(<span class="keyword">const</span> BigInteger&amp; num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> num &lt; *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> BigInteger::<span class="keyword">operator</span>&lt;=(<span class="keyword">const</span> BigInteger&amp; num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> !(*<span class="keyword">this</span> &gt; num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> BigInteger::<span class="keyword">operator</span>&gt;=(<span class="keyword">const</span> BigInteger&amp; num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> !(*<span class="keyword">this</span> &lt; num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> BigInteger::<span class="keyword">operator</span>!=(<span class="keyword">const</span> BigInteger&amp; num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span> &gt; num || *<span class="keyword">this</span> &lt; num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> BigInteger::<span class="keyword">operator</span>==(<span class="keyword">const</span> BigInteger&amp; num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> !(num != *<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>+(<span class="keyword">const</span> BigInteger&amp; num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	 <span class="keyword">if</span> (sign^num.sign)</span><br><span class="line">	 &#123;</span><br><span class="line">		 BigInteger tmp = sign ? num : *<span class="keyword">this</span>;</span><br><span class="line">		 tmp.sign = <span class="number">1</span>;</span><br><span class="line">		 <span class="keyword">return</span> sign ? *<span class="keyword">this</span> - tmp : num - tmp;</span><br><span class="line">	 &#125;</span><br><span class="line">	 BigInteger result;</span><br><span class="line">	 result.len = <span class="number">0</span>;</span><br><span class="line">	 <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; temp || i &lt; (<span class="built_in">max</span>(len, num.len)); i++)</span><br><span class="line">	 &#123;</span><br><span class="line">		 <span class="keyword">int</span> t = s[i] + num.s[i] + temp;</span><br><span class="line">		 result.s[result.len++] = t % <span class="number">10</span>;</span><br><span class="line">		 temp = t / <span class="number">10</span>;</span><br><span class="line">	 &#125;</span><br><span class="line">	 result.sign = sign;</span><br><span class="line">	 <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>++()</span><br><span class="line">&#123;</span><br><span class="line">	*<span class="keyword">this</span> = *<span class="keyword">this</span> + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>++(<span class="keyword">int</span>)</span><br><span class="line">&#123;</span><br><span class="line">	BigInteger old = *<span class="keyword">this</span>;</span><br><span class="line">	++(*<span class="keyword">this</span>);</span><br><span class="line">	<span class="keyword">return</span> old;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>+=(<span class="keyword">const</span> BigInteger&amp; num)</span><br><span class="line">&#123;</span><br><span class="line">	*<span class="keyword">this</span> = *<span class="keyword">this</span> + num;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>-(<span class="keyword">const</span> BigInteger&amp; num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	 BigInteger b = num, a = *<span class="keyword">this</span>;</span><br><span class="line">	 <span class="keyword">if</span> (!num.sign &amp;&amp; !sign)</span><br><span class="line">	 &#123;</span><br><span class="line">		 b.sign = <span class="number">1</span>;</span><br><span class="line">		 a.sign = <span class="number">1</span>;</span><br><span class="line">		 <span class="keyword">return</span> b - a;</span><br><span class="line">	 &#125;</span><br><span class="line">	 <span class="keyword">if</span> (!b.sign)</span><br><span class="line">	 &#123;</span><br><span class="line">		 b.sign = <span class="number">1</span>;</span><br><span class="line">		 <span class="keyword">return</span> a + b;</span><br><span class="line">	 &#125;</span><br><span class="line">	 <span class="keyword">if</span> (!a.sign)</span><br><span class="line">	 &#123;</span><br><span class="line">		 a.sign = <span class="number">1</span>;</span><br><span class="line">		 b = <span class="built_in">BigInteger</span>(<span class="number">0</span>) - (a + b);</span><br><span class="line">		 <span class="keyword">return</span> b;</span><br><span class="line">	 &#125;</span><br><span class="line">	 <span class="keyword">if</span> (a &lt; b)</span><br><span class="line">	 &#123;</span><br><span class="line">		 BigInteger c = (b - a);</span><br><span class="line">		 c.sign = <span class="literal">false</span>;</span><br><span class="line">		 <span class="keyword">return</span> c;</span><br><span class="line">	 &#125;</span><br><span class="line">	 BigInteger result;</span><br><span class="line">	 result.len = <span class="number">0</span>;</span><br><span class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, g = <span class="number">0</span>; i &lt; a.len; i++)</span><br><span class="line">	 &#123;</span><br><span class="line">		 <span class="keyword">int</span> x = a.s[i] - g;</span><br><span class="line">		 <span class="keyword">if</span> (i &lt; b.len) x -= b.s[i];</span><br><span class="line">		 <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) g = <span class="number">0</span>;</span><br><span class="line">		 <span class="keyword">else</span></span><br><span class="line">		 &#123;</span><br><span class="line">			 g = <span class="number">1</span>;</span><br><span class="line">			 x += <span class="number">10</span>;</span><br><span class="line">		 &#125;</span><br><span class="line">		 result.s[result.len++] = x;</span><br><span class="line">	 &#125;</span><br><span class="line">	 result.<span class="built_in">clean</span>();</span><br><span class="line">	 <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>--()</span><br><span class="line">&#123;</span><br><span class="line">	*<span class="keyword">this</span> = *<span class="keyword">this</span> - <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>--(<span class="keyword">int</span>)</span><br><span class="line">&#123;</span><br><span class="line">	BigInteger old = *<span class="keyword">this</span>;</span><br><span class="line">	--(*<span class="keyword">this</span>);</span><br><span class="line">	<span class="keyword">return</span> old;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>-=(<span class="keyword">const</span> BigInteger&amp; num)</span><br><span class="line">&#123;</span><br><span class="line">	*<span class="keyword">this</span> = *<span class="keyword">this</span> - num;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>*(<span class="keyword">const</span> BigInteger&amp; num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	BigInteger result;</span><br><span class="line">	result.len = len + num.len;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; num.len; j++)</span><br><span class="line">			result.s[i + j] += s[i] * num.s[j];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; result.len; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		 result.s[i + <span class="number">1</span>] += result.s[i] / <span class="number">10</span>;</span><br><span class="line">		 result.s[i] %= <span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	result.<span class="built_in">clean</span>();</span><br><span class="line">	result.sign = !(sign^num.sign);</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>*(<span class="keyword">const</span> <span class="keyword">int</span> num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	BigInteger x = num;</span><br><span class="line">	BigInteger z = *<span class="keyword">this</span>;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>/(<span class="keyword">const</span> BigInteger&amp; num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	 BigInteger ans;</span><br><span class="line">	 ans.len = len - num.len + <span class="number">1</span>;</span><br><span class="line">	 <span class="keyword">if</span> (ans.len &lt; <span class="number">0</span>)</span><br><span class="line">	 &#123;</span><br><span class="line">		 ans.len = <span class="number">1</span>;</span><br><span class="line">		 <span class="keyword">return</span> ans;</span><br><span class="line">	 &#125;</span><br><span class="line">	 BigInteger divisor = *<span class="keyword">this</span>, divid = num;</span><br><span class="line">	 divisor.sign = divid.sign = <span class="number">1</span>;</span><br><span class="line">	 <span class="keyword">int</span> k = ans.len - <span class="number">1</span>;</span><br><span class="line">	 <span class="keyword">int</span> j = len - <span class="number">1</span>;</span><br><span class="line">	 <span class="keyword">while</span> (k &gt;= <span class="number">0</span>)</span><br><span class="line">	 &#123;</span><br><span class="line">		 <span class="keyword">while</span> (divisor.s[j] == <span class="number">0</span>) j--;</span><br><span class="line">		 <span class="keyword">if</span> (k &gt; j) k = j;</span><br><span class="line">		 <span class="keyword">char</span> z[MAX_L];</span><br><span class="line">		 <span class="built_in">memset</span>(z, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(z));</span><br><span class="line">		 <span class="keyword">for</span> (<span class="keyword">int</span> i = j; i &gt;= k; i--)</span><br><span class="line">			 z[j - i] = divisor.s[i] + <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">			 BigInteger dividend = z;</span><br><span class="line">			 <span class="keyword">if</span> (dividend &lt; divid) &#123; k--; <span class="keyword">continue</span>; &#125;</span><br><span class="line">			 <span class="keyword">int</span> key = <span class="number">0</span>;</span><br><span class="line">			 <span class="keyword">while</span> (divid*key &lt;= dividend) key++;</span><br><span class="line">			 key--;</span><br><span class="line">			 ans.s[k] = key;</span><br><span class="line">			 BigInteger temp = divid*key;</span><br><span class="line">			 <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)</span><br><span class="line">				 temp = temp * <span class="number">10</span>;</span><br><span class="line">				 divisor = divisor - temp;</span><br><span class="line">				 k--;</span><br><span class="line">	 &#125;</span><br><span class="line">	 ans.<span class="built_in">clean</span>();</span><br><span class="line">	 ans.sign = !(sign^num.sign);</span><br><span class="line">	 <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>/=(<span class="keyword">const</span> BigInteger&amp; num)</span><br><span class="line">&#123;</span><br><span class="line">	*<span class="keyword">this</span> = *<span class="keyword">this</span> / num;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger BigInteger::<span class="keyword">operator</span>%(<span class="keyword">const</span> BigInteger&amp; num) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	BigInteger a = *<span class="keyword">this</span>, b = num;</span><br><span class="line">	a.sign = b.sign = <span class="number">1</span>;</span><br><span class="line">	BigInteger result, temp = a / b*b;</span><br><span class="line">	result = a - temp;</span><br><span class="line">	result.sign = sign;</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">BigInteger <span class="title">BigInteger::Pow</span><span class="params">(<span class="keyword">const</span> BigInteger&amp; num)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	BigInteger result = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (BigInteger i = <span class="number">0</span>; i &lt; num; i++)</span><br><span class="line">		result = result * (*<span class="keyword">this</span>);</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">BigInteger <span class="title">BigInteger::factorial</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	BigInteger result = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (BigInteger i = <span class="number">1</span>; i &lt;= *<span class="keyword">this</span>; i++)</span><br><span class="line">		result *= i;</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BigInteger::clean</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (len == <span class="number">0</span>) len++;</span><br><span class="line">	<span class="keyword">while</span> (len &gt; <span class="number">1</span> &amp;&amp; s[len - <span class="number">1</span>] == <span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">		len--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">BigInteger <span class="title">BigInteger::Sqrt</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(*<span class="keyword">this</span> &lt; <span class="number">0</span>) <span class="keyword">return</span> - <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span>(*<span class="keyword">this</span> &lt;= <span class="number">1</span>)<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	BigInteger l = <span class="number">0</span>, r = *<span class="keyword">this</span>, mid;</span><br><span class="line">	<span class="keyword">while</span>(r - l &gt; <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span>(mid * mid &gt; *<span class="keyword">this</span>)</span><br><span class="line">			r = mid;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			l = mid;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigInteger::~<span class="built_in">BigInteger</span>()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-BFS</title>
    <url>/p/99890668.html</url>
    <content><![CDATA[<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>æœ¬æ–‡å®ç°åªæ˜¯æ¡†æ¶ï¼Œåº”å½“çµæ´»è¿ç”¨ï¼Œbfs()å‡½æ•°å†…éƒ¨æ ¹æ®æƒ…å†µçµæ´»æ›´æ”¹<br>å¹¿æœç®—æ³•åŸºäºæ ‘ã€é˜Ÿåˆ—å®ç°ï¼Œå…·ä½“æ€è·¯: <code>å°†å½“å‰ç‚¹çš„å­èŠ‚ç‚¹å…¥é˜Ÿï¼Œå½“å‰ç‚¹å‡ºé˜Ÿï¼Œå¦‚æœå­èŠ‚ç‚¹æ»¡è¶³æ¡ä»¶åˆ™è®°å½•</code>å¹¶é‡å¤æ­¤è¿‡ç¨‹</p>
<h2 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h2><h3 id="æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—"><a href="#æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—" class="headerlink" title="æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—"></a>æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> head = <span class="number">1</span>, tail = <span class="number">2</span>;</span><br><span class="line">    vis[start_x][start_y] = <span class="literal">true</span>;            <span class="comment">//æ ‡è®°èµ·å§‹ç‚¹</span></span><br><span class="line">    que[head][<span class="number">0</span>] = start_x; </span><br><span class="line">    que[head][<span class="number">1</span>] = start_y;                  <span class="comment">//èµ·å§‹ç‚¹å…¥é˜Ÿ</span></span><br><span class="line">    <span class="keyword">while</span>(head &lt; tail)                       <span class="comment">//é˜Ÿä¸ä¸ºç©º</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x = que[head][<span class="number">0</span>], y = que[head][<span class="number">1</span>]  <span class="comment">//è·å–é˜Ÿé¦–ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; å­èŠ‚ç‚¹æ•°; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> x2 = xå­èŠ‚ç‚¹, y2 = yå­èŠ‚ç‚¹;</span><br><span class="line">            <span class="keyword">if</span> (x2, y2æ»¡è¶³æ¡ä»¶ &amp;&amp; !vis[x2][y2])</span><br><span class="line">            &#123;</span><br><span class="line">                è®°å½•ç»“æœ;</span><br><span class="line">                vis[x2][y2] = <span class="literal">true</span>;</span><br><span class="line">                que[tail][<span class="number">0</span>] = x2;</span><br><span class="line">                que[tail][<span class="number">0</span>] = y2;</span><br><span class="line">                tail++;                         <span class="comment">//å…¥é˜Ÿ</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        head++;                                 <span class="comment">//é˜Ÿé¦–å‡ºé˜Ÿ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="STL-queue"><a href="#STL-queue" class="headerlink" title="STL-queue"></a>STL-queue</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">&#125;node, top;</span><br><span class="line"></span><br><span class="line">queue&lt;Node&gt; que;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vis[sx][sy] = <span class="literal">true</span>;</span><br><span class="line">    node.x = sx;</span><br><span class="line">    node.y = sy;</span><br><span class="line">    que.<span class="built_in">push</span>(node);</span><br><span class="line">    ans[sx][sy] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!que.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        top = que.<span class="built_in">front</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> x2 = ..., y2 = ...;</span><br><span class="line">            <span class="keyword">if</span> (x2, y2æ»¡è¶³æ¡ä»¶ &amp;&amp; !vis[x2][y2])</span><br><span class="line">            &#123;</span><br><span class="line">                è®°å½•ç»“æœ;</span><br><span class="line">                vis[x2][y2] = <span class="literal">true</span>;</span><br><span class="line">                node.x = x2;</span><br><span class="line">                node.y = y2;</span><br><span class="line">                que.<span class="built_in">push</span>(node);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        que.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h2><p><a href="https://www.luogu.org/problemnew/show/P1443">æ´›è°·P1443</a></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, sx, sy, vis[<span class="number">210</span>][<span class="number">210</span>], ans[<span class="number">210</span>][<span class="number">210</span>];</span><br><span class="line"><span class="keyword">int</span> gox[<span class="number">8</span>] = &#123;<span class="number">-2</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-2</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> goy[<span class="number">8</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-2</span>, <span class="number">-2</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">horse</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">&#125;node, top;</span><br><span class="line"></span><br><span class="line">queue&lt;horse&gt; que;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vis[sx][sy] = <span class="number">1</span>;</span><br><span class="line">    node.x = sx;</span><br><span class="line">    node.y = sy;</span><br><span class="line">    que.<span class="built_in">push</span>(node);</span><br><span class="line">    ans[sx][sy] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!que.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        top = que.<span class="built_in">front</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> x2 = top.x + gox[i];</span><br><span class="line">            <span class="keyword">int</span> y2 = top.y + goy[i];</span><br><span class="line">            <span class="keyword">if</span> (x2 &gt;= <span class="number">1</span> &amp;&amp; x2 &lt;= n &amp;&amp; y2 &gt;= <span class="number">1</span> &amp;&amp; y2 &lt;= m &amp;&amp; !vis[x2][y2])</span><br><span class="line">            &#123;</span><br><span class="line">                ans[x2][y2] = ans[top.x][top.y] + <span class="number">1</span>;</span><br><span class="line">                vis[x2][y2] = <span class="number">1</span>;</span><br><span class="line">                node.x = x2;</span><br><span class="line">                node.y = y2;</span><br><span class="line">                que.<span class="built_in">push</span>(node);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        que.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;n, &amp;m, &amp;sx, &amp;sy);</span><br><span class="line">    <span class="built_in">memset</span>(ans, <span class="number">-1</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(ans));</span><br><span class="line">    <span class="built_in">bfs</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%-5d&quot;</span>, ans[i][j]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, sx, sy, vis[<span class="number">210</span>][<span class="number">210</span>], que[<span class="number">50000</span>][<span class="number">2</span>], ans[<span class="number">210</span>][<span class="number">210</span>];</span><br><span class="line"><span class="keyword">int</span> gox[<span class="number">8</span>] = &#123;<span class="number">-2</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-2</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> goy[<span class="number">8</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-2</span>, <span class="number">-2</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> head = <span class="number">1</span>, tail = <span class="number">2</span>;</span><br><span class="line">    vis[sx][sy] = <span class="number">1</span>;</span><br><span class="line">    que[head][<span class="number">0</span>] = sx;</span><br><span class="line">    que[head][<span class="number">1</span>] = sy;</span><br><span class="line">    ans[sx][sy] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (head &lt; tail)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x, x2, y, y2;</span><br><span class="line">        x = que[head][<span class="number">0</span>];</span><br><span class="line">        y = que[head][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            x2 = x + gox[i];</span><br><span class="line">            y2 = y + goy[i];</span><br><span class="line">            <span class="keyword">if</span> (x2 &gt;= <span class="number">1</span> &amp;&amp; x2 &lt;= n &amp;&amp; y2 &gt;= <span class="number">1</span> &amp;&amp; y2 &lt;= m &amp;&amp; !vis[x2][y2])</span><br><span class="line">            &#123;</span><br><span class="line">                ans[x2][y2] = ans[x][y] + <span class="number">1</span>;</span><br><span class="line">                vis[x2][y2] = <span class="number">1</span>;</span><br><span class="line">                que[tail][<span class="number">0</span>] = x2;</span><br><span class="line">                que[tail][<span class="number">1</span>] = y2;</span><br><span class="line">                tail++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        head++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;n, &amp;m, &amp;sx, &amp;sy);</span><br><span class="line">    <span class="built_in">memset</span>(ans, <span class="number">-1</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(ans));</span><br><span class="line">    <span class="built_in">bfs</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%-5d&quot;</span>, ans[i][j]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Cppç®—æ³•-DFS</title>
    <url>/p/9d047ada.html</url>
    <content><![CDATA[<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>æœ¬æ–‡å®ç°åªæ˜¯æ¡†æ¶ï¼Œåº”å½“çµæ´»è¿ç”¨ï¼Œdfs(â€¦)å‡½æ•°è¿”å›å€¼ç±»å‹ã€å‚æ•°åˆ—è¡¨æ ¹æ®æƒ…å†µçµæ´»æ›´æ”¹</p>
<h2 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(å‚æ•°åˆ—è¡¨)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (åˆ°è¾¾ç›®çš„åœ°) è¾“å‡ºç»“æœ;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; è¡ŒåŠ¨æ–¹æ³•æ•°; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (ä¸‹ä¸€æ­¥å¯è¡Œ)</span><br><span class="line">            &#123;</span><br><span class="line">                è®°å½•æ­¤æ­¥;</span><br><span class="line">                <span class="built_in">dfs</span>(æ”¹åŠ¨åçš„å‚æ•°åˆ—è¡¨);</span><br><span class="line">                å–æ¶ˆè®°å½•æ­¤æ­¥;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h2><p><a href="https://www.luogu.org/problemnew/show/P1605">æ´›è°·P1605</a></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, t, sx, sy, fx, fy, ans;</span><br><span class="line"><span class="keyword">int</span> mg[<span class="number">6</span>][<span class="number">6</span>], now[<span class="number">6</span>][<span class="number">6</span>];</span><br><span class="line"><span class="keyword">int</span> go[<span class="number">4</span>][<span class="number">2</span>] = &#123;&#123;<span class="number">-1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x2, y2;</span><br><span class="line">    <span class="keyword">if</span> (x == fx &amp;&amp; y == fy) ans++;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            x2 = x + go[i][<span class="number">0</span>];</span><br><span class="line">            y2 = y + go[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (x2 &gt; <span class="number">0</span> &amp;&amp; x2 &lt;= n &amp;&amp; y2 &gt; <span class="number">0</span> &amp;&amp; y2 &lt;= m &amp;&amp; mg[x2][y2] == <span class="number">0</span> &amp;&amp; now[x2][y2] == <span class="number">0</span>)</span><br><span class="line">                </span><br><span class="line">            &#123;</span><br><span class="line">                now[x2][y2] = <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">dfs</span>(x2, y2);</span><br><span class="line">                now[x2][y2] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(mg, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(mg));</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;n, &amp;m, &amp;t);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;sx, &amp;sy, &amp;fx, &amp;fy);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">        mg[x][y] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    now[sx][sy] = <span class="number">1</span>;</span><br><span class="line">    ans = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(sx, sy);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Cpp</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxç¾åŒ–æ–¹æ¡ˆ</title>
    <url>/p/f2ddc0e6.html</url>
    <content><![CDATA[<h3 id="I-åˆæ­¥ç³»ç»Ÿä¼˜åŒ–"><a href="#I-åˆæ­¥ç³»ç»Ÿä¼˜åŒ–" class="headerlink" title="I. åˆæ­¥ç³»ç»Ÿä¼˜åŒ–"></a>I. åˆæ­¥ç³»ç»Ÿä¼˜åŒ–</h3><hr>
<ul>
<li>æ›´æ”¹ç³»ç»Ÿæ—¶é—´</li>
<li>å®‰è£…python<br>  <code>sudo apt install python</code></li>
<li>å®‰è£…gitå¹¶æ·»åŠ sshå¯†é’¥<br>  <code>sudo apt install git</code><br>  <code>git config --global user.name &quot;your_name&quot;</code><br>  <code>git config --global user.email &quot;you@example.com&quot;</code><br>  <code>ssh-keygen -t rsa -C &quot;your_email@youremail.com&quot;</code>ä¸€è·¯å›è½¦<br>  <code>cat ~/.ssh/id_rsa.pub</code>å¹¶å¤åˆ¶ç²˜è´´åˆ°githubä¸Š<br>  <code>ssh -T git@github.com</code>æµ‹è¯•<br>  <code>git clone https://github.com/Tony031218/Beautiful_Linux.git</code>å…‹éš†ä¸‹æœ¬ä»“åº“</li>
<li>æ·»åŠ è¯­è¨€<pre>
  settings -> Region&Language -> manage installed language -> install/remove languages
                              -> input sources
</pre></li>
<li>è½¯ä»¶æ›´æ–°<br>  <code>sudo apt update</code><br>  <code>sudo apt upgrade</code></li>
<li>å®‰è£…GDebi<br>  <code>sudo apt install gdebi</code></li>
<li>å¸è½½libreoffice å®‰è£… WPS(å¯é€‰)<br>  <code>sudo apt remove libreoffice-common</code><br>  ä»<a href="http://www.wps.cn/product/wpslinux/">http://www.wps.cn/product/wpslinux/</a> ä¸Šä¸‹è½½WPS<br>  <code>sudo dpkg -i wps-office_10.1.0.6757_amd64.deb</code></li>
<li>å¸è½½firefox å®‰è£… Chrome(å¯é€‰)<br>  <code>sudo apt remove firefox</code><br>  <code>wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</code><br>  <code>sudo dpkg -i google-chrome*</code><br>  <code>sudo apt -f install</code></li>
<li>æ›´æ¢æ›´æ–°æº<br>  å·¦ä¸‹è§’ -&gt; all -&gt; Software&amp;Updates<br>  <code>sudo apt update</code></li>
<li>å®‰è£…vim<br>  <code>sudo apt install vim</code></li>
<li>èœå•æ ä½ç½®<br>  <code>gsettings set com.canonical.Unity.Launcher launcher-position Bottom</code>åº•éƒ¨<br>  <code>gsettings set com.canonical.Unity.Launcher launcher-position Left</code>å·¦ä¾§</li>
</ul>
<h3 id="II-ä¸»é¢˜é…ç½®"><a href="#II-ä¸»é¢˜é…ç½®" class="headerlink" title="II. ä¸»é¢˜é…ç½®"></a>II. ä¸»é¢˜é…ç½®</h3><hr>
<ul>
<li><p>å®‰è£… Unity-tweak-tool<br><code>sudo apt install unity-tweak-tool</code><br>å¦‚æœå‡ºç°æŠ¥é”™éœ€è¦å®‰è£…ç¼ºå¤±çš„åŒ…</p>
</li>
<li><p>å®‰è£… Flatabulous ä¸»é¢˜<br><code>sudo add-apt-repository ppa:noobslab/themes</code><br><code>sudo apt update</code><br><code>sudo apt install flatabulous-theme</code>ä¸»é¢˜<br><code>sudo add-apt-repository ppa:noobslab/icons</code><br><code>sudo apt update</code><br><code>sudo apt install ultra-flat-icons</code>å›¾æ ‡<br>unity-tweak-tool -&gt; ä¸»é¢˜/å›¾æ ‡</p>
</li>
<li><p>å­—ä½“<br>Monaco Powerline ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–å­—ä½“,ä½†ä¸€å®šè¦æ”¯æŒPowerlineçš„,å¦åˆ™åæ–‡ä¼šå‡ºç°ä¹±ç </p>
</li>
</ul>
<h3 id="III-ç»ˆç«¯Terminalç¾åŒ–"><a href="#III-ç»ˆç«¯Terminalç¾åŒ–" class="headerlink" title="III. ç»ˆç«¯Terminalç¾åŒ–"></a>III. ç»ˆç«¯Terminalç¾åŒ–</h3><hr>
<ul>
<li>Terminal zsh<br>  <code>sudo apt install zsh</code><br>  <code>git clone https://github.com/robbyrussell/oh-my-zsh.git</code><br>  <code>cd oh-my-zsh/tools</code><br>  <code>./install.sh</code></li>
<li>æ›´æ¢é»˜è®¤shell<br>  <code>chsh</code>æŒ‰æ­¥éª¤æ¥è¾“å…¥zshåœ°å€</li>
<li>zshæ’ä»¶<ul>
<li>è‡ªåŠ¨è¡¥å…¨<br>  <code>git clone https://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions</code></li>
<li>å¿«é€Ÿè·³è½¬<br>  <code>git clone https://github.com/joelthelion/autojump.git</code><br>  <code>cd autojump</code><br>  <code>./install.py</code>æŒ‰è¦æ±‚æŠŠä»£ç å¡«å†™åˆ°~/.zshrcæ–‡ä»¶å°¾</li>
<li>é…ç½®<br>  <code>vim ~/.zshrc</code><br>  ä¿®æ”¹60è¡Œå·¦å³çš„plugins<code>plugins=(git autojump zsh-suggestions)</code></li>
<li>ä¿®æ”¹çš®è‚¤<br>  <code>~/.zshrc</code>ä¸­çš„<code>ZSH_THEME=&quot;robbyrussell&quot;</code>æ›´æ”¹</li>
</ul>
</li>
</ul>
<h3 id="IV-vimç¾åŒ–"><a href="#IV-vimç¾åŒ–" class="headerlink" title="IV. vimç¾åŒ–"></a>IV. vimç¾åŒ–</h3><hr>
<ul>
<li>molokai<br>  <code>mkdir ~/.vim/colors</code><br>  å°†æœ¬ä»“åº“ä¸­çš„<code>molokai.vim</code>å¤åˆ¶åˆ°<code>~/.vim/colors/</code>ä¸‹</li>
<li>Powerline<br>  <code>sudo apt install python-pip</code><br>  <code>pip install git+git://github.com/powerline/powerline</code><br>  <code>pip show powerline-status</code><br>  æŒ‰ç…§å…·ä½“ä½ç½®æ›´æ”¹<code>~/.vimrc</code>ä¸­çš„<code>set rtp+=...</code>ä¸€è¡Œ(åæ–‡)</li>
<li>æ’ä»¶<ul>
<li>pathogenæ’ä»¶ç®¡ç†<br>  <code>mkdir -p ~/.vim/autoload ~/.vim/bundle</code><br>  <code>curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim</code></li>
<li>nerdtreeæ–‡ä»¶æµè§ˆå™¨<br>  <code>cd ~/.vim/bundle</code><br>  <code>git clone https://github.com/scrooloose/nerdtree.git</code></li>
<li>taglistå¤§çº²ç•Œé¢<br><a href="https://www.vim.org/scripts/scripts.php?script_id=273">taglistå®˜ç½‘</a><br>  ä¸‹è½½åè§£å‹åˆ°<code>~/.vim/bundle/</code>ä¸‹</li>
</ul>
</li>
<li>vimrc<br>  å°†æœ¬ä»“åº“ä¸­çš„<code>vimrc.txt</code>å¤åˆ¶åˆ°<code>~/.vimrc</code>ä¸­<br>  å†…åŒ…å«æ‹¬å·åŒ¹é…,htmlæ ‡ç­¾åŒ¹é…,powerlineé…ç½®(å¯èƒ½éœ€è¦æ”¹åŠ¨),cpp.sh.java.pyçš„æ–‡ä»¶å¤´è‡ªåŠ¨è¾“å…¥,æ’ä»¶çš„é…ç½®(F3æ‰“å¼€nerdtree,F4æ‰“å¼€taglist)</li>
</ul>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><hr>
<p><a href="https://blog.csdn.net/qq_35208390/article/details/78441013">CSDNåšå®¢</a><br><a href="https://www.linuxprobe.com/use-powerline-for-bash.html">powerline</a><br><a href="https://blog.csdn.net/zcube/article/details/42525973">vimæ’ä»¶</a><br><a href="https://github.com/ocxo/monaco-powerline-vim">monaco powerlineå­—ä½“</a><br><a href="https://github.com/sickill/vim-monokai">monokaiä¸»é¢˜</a><br><a href="http://www.wps.cn/product/wpslinux/">WPS</a></p>
]]></content>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitç®€å•ç”¨æ³•</title>
    <url>/p/e779c345.html</url>
    <content><![CDATA[<p><code>Git</code>æ˜¯ä¸€æ¬¾ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œé…åˆ<code>GitHub</code>å¯ä»¥æ›´å¥½çš„æ§åˆ¶ä»£ç </p>
<span id="more"></span>

<h3 id="SSH-Key"><a href="#SSH-Key" class="headerlink" title="SSH Key"></a>SSH Key</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> ssh<span class="literal">-keygen</span> <span class="literal">-t</span> rsa <span class="literal">-C</span> <span class="string">&quot;975062472@qq.com&quot;</span></span><br><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> ~/.ssh</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> id_rsa.pub</span><br><span class="line"><span class="variable">$</span> ssh <span class="literal">-T</span> git@github.com</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºä»“åº“"><a href="#åˆ›å»ºä»“åº“" class="headerlink" title="åˆ›å»ºä»“åº“"></a>åˆ›å»ºä»“åº“</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> mkdir study_cpp</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> study_cpp/</span><br><span class="line"><span class="variable">$</span> <span class="built_in">echo</span> <span class="string">&quot;# test&quot;</span> &gt;&gt; README.md</span><br><span class="line"><span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line">README.md</span><br><span class="line"><span class="variable">$</span> git init</span><br><span class="line"><span class="variable">$</span> git add README.md</span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;æ·»åŠ  README.md æ–‡ä»¶&quot;</span></span><br><span class="line"><span class="variable">$</span> git remote add origin git@github.com:Tony031218/study_cpp.git</span><br><span class="line"><span class="variable">$</span> git push <span class="literal">-u</span> origin master</span><br></pre></td></tr></table></figure>
<h3 id="å…‹éš†"><a href="#å…‹éš†" class="headerlink" title="å…‹éš†"></a>å…‹éš†</h3><figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">$ git <span class="keyword">clone</span> <span class="title">git</span>@github.com:Tony031218/study_cpp</span><br></pre></td></tr></table></figure>
<h3 id="æå–"><a href="#æå–" class="headerlink" title="æå–"></a>æå–</h3><figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ </span>git fetch origin</span><br><span class="line"><span class="variable">$ </span>git merge origin/master</span><br></pre></td></tr></table></figure>
<h3 id="æ¨é€"><a href="#æ¨é€" class="headerlink" title="æ¨é€"></a>æ¨é€</h3><figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ </span>git add &lt;filename&gt;</span><br><span class="line"><span class="variable">$ </span>git commit -m <span class="string">&quot;æ¨é€ä¿¡æ¯&quot;</span></span><br><span class="line"><span class="variable">$ </span>git push origin master</span><br></pre></td></tr></table></figure>
<h3 id="è¿œç¨‹ä»“åº“"><a href="#è¿œç¨‹ä»“åº“" class="headerlink" title="è¿œç¨‹ä»“åº“"></a>è¿œç¨‹ä»“åº“</h3><figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ </span>git remote add origin2 git<span class="variable">@github</span>.<span class="symbol">com:</span>Tony031218/study_cpp.git</span><br><span class="line"><span class="variable">$ </span>git remote -v</span><br><span class="line"><span class="variable">$ </span>git remote rm origin2</span><br><span class="line"><span class="variable">$ </span>git remote -v</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ”¯"><a href="#åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯"></a>åˆ†æ”¯</h3><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">$ git checkout -b graph  <span class="regexp">//</span>åˆ›å»ºåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢è¿‡å»</span><br><span class="line">$ git checkout master    <span class="regexp">//</span>å›åˆ°ä¸»åˆ†æ”¯</span><br><span class="line">$ git push origin graph  <span class="regexp">//</span>å°†åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“</span><br><span class="line">$ git pull               <span class="regexp">//</span>å°†æœ¬åœ°ä»“åº“æ›´æ–°</span><br><span class="line">$ git diff graph master  <span class="regexp">//</span>æ˜¾ç¤ºå·®åˆ«</span><br></pre></td></tr></table></figure>
<h3 id="å…‹éš†åˆ†æ”¯"><a href="#å…‹éš†åˆ†æ”¯" class="headerlink" title="å…‹éš†åˆ†æ”¯"></a>å…‹éš†åˆ†æ”¯</h3><figure class="highlight dts"><table><tr><td class="code"><pre><span class="line">$ git clone -b <span class="params">&lt;branch_name&gt;</span> <span class="params">&lt;repo_url&gt;</span>   <span class="comment">//å…‹éš†å•ä¸ªåˆ†æ”¯</span></span><br><span class="line">$ cd <span class="params">&lt;repo&gt;</span></span><br><span class="line">$ git branch -a                           <span class="comment">//æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯</span></span><br><span class="line">$ git checkout -b <span class="params">&lt;branch_name&gt;</span> origin/<span class="params">&lt;branch_name&gt;</span>  <span class="comment">//å…³è”åˆ†æ”¯</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>git</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownè¯­æ³•</title>
    <url>/p/3c50d03d.html</url>
    <content><![CDATA[<p><code>Markdown</code>æ˜¯ä¸€æ¬¾ç®€æ´å®ç”¨çš„æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œå¯ä»¥åœ¨<code>mkdocs</code>,<code>hexo</code>ä¸­ä½¿ç”¨</p>
<span id="more"></span>

<figure class="highlight clean"><table><tr><td class="code"><pre><span class="line"># ä¸€çº§æ ‡é¢˜</span><br><span class="line">## äºŒçº§æ ‡é¢˜</span><br><span class="line">### ä¸‰çº§æ ‡é¢˜</span><br><span class="line">#### å››çº§æ ‡é¢˜</span><br><span class="line">##### äº”çº§æ ‡é¢˜</span><br><span class="line">###### å…­çº§æ ‡é¢˜</span><br></pre></td></tr></table></figure>

<p>ä¸‹åˆ’çº¿</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="string">***</span></span><br><span class="line"><span class="string">****</span></span><br><span class="line"><span class="string">----</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h4><p><code>[TOC]</code></p>
<hr>
<h4 id="æ–‡å­—æ ·å¼"><a href="#æ–‡å­—æ ·å¼" class="headerlink" title="æ–‡å­—æ ·å¼"></a>æ–‡å­—æ ·å¼</h4><p><strong><code>** **</code>åŠ ç²—</strong><br><br><em><code>* *</code>å€¾æ–œ</em><br><br><em><strong><code>*** ***</code>å€¾æ–œåŠ ç²—</strong></em><br><br><code>~~ ~~</code><del>åˆ é™¤</del></p>
<hr>
<h4 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h4><p><code>&gt;</code>ä¸€çº§ <code>&gt;&gt;</code>äºŒçº§</p>
<blockquote>
<p>å¼•ç”¨</p>
<blockquote>
<p>äºŒçº§å¼•ç”¨</p>
</blockquote>
</blockquote>
<blockquote>
<p>å¼•ç”¨</p>
</blockquote>
<hr>
<h4 id="ç©ºè¡Œ"><a href="#ç©ºè¡Œ" class="headerlink" title="ç©ºè¡Œ"></a>ç©ºè¡Œ</h4><p><code>&amp;nbsp; æˆ– &lt;br/&gt;</code><br>&nbsp;<br><br></p>
<hr>
<h4 id="ç©ºæ ¼"><a href="#ç©ºæ ¼" class="headerlink" title="ç©ºæ ¼"></a>ç©ºæ ¼</h4><p><code>&amp;emsp;</code><br><br>&emsp;&emsp;ç©ºæ ¼</p>
<hr>
<h4 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h4><p><code>![å›¾ç‰‡å](å›¾ç‰‡åœ°å€ &quot;title&quot;)</code><br><img src="https://gss2.bdstatic.com/9fo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike180%2C5%2C5%2C180%2C60/sign=d997317c11ce36d3b6098b625b9a51e2/00e93901213fb80ef9ceac7132d12f2eb938947d.jpg" alt="markdown"></p>
<p>æˆ–ä½¿ç”¨htmlæ ‡ç­¾<code>&lt;img src=&quot;...&quot; width=&quot;...&quot; height=&quot;...&quot; /&gt;</code></p>
<hr>
<h4 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h4><p><code>[ç½‘é¡µå](åœ°å€ &quot;title&quot;)</code><br><a href="http://www.baidu.com/" title="ç™¾åº¦ä¸€ä¸‹">ç™¾åº¦</a></p>
<hr>
<h4 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;hello markdown&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="åºè¡¨"><a href="#åºè¡¨" class="headerlink" title="åºè¡¨"></a>åºè¡¨</h4><ol>
<li>æœ‰åº1</li>
<li>æœ‰åº2</li>
<li>æœ‰åº3</li>
</ol>
<hr>
<p><code>+ æˆ– - æˆ– *</code></p>
<ul>
<li>æ— åº</li>
</ul>
<ul>
<li>æ— åº</li>
</ul>
<ul>
<li>æ— åº</li>
</ul>
<hr>
<ul>
<li>ä¸€çº§æ— åº<ul>
<li>äºŒçº§æ— åº<ul>
<li>ä¸‰çº§æ— åº<ul>
<li>å››çº§æ— åº</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h4 id="ä»»åŠ¡åˆ—è¡¨"><a href="#ä»»åŠ¡åˆ—è¡¨" class="headerlink" title="ä»»åŠ¡åˆ—è¡¨"></a>ä»»åŠ¡åˆ—è¡¨</h4><p><code>- [ ] ...</code><br><br><code>- [x] ...</code><br><br><code>mkdocs</code>éœ€è¦<code>pymdown</code>ä¸­çš„<code>pymdownx</code>æ¨¡å—<br><br><code>GitHub</code>æ”¯æŒ</p>
<hr>
<h4 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h4><figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line">|è¡¨å¤´|è¡¨å¤´|è¡¨å¤´|</span><br><span class="line">|<span class="symbol">:----------|</span><span class="symbol">:----------</span><span class="symbol">:|----------</span><span class="symbol">:|</span></span><br><span class="line">| å·¦å¯¹é½ |å±…ä¸­|å³å¯¹é½|</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">è¡¨å¤´</th>
<th align="center">è¡¨å¤´</th>
<th align="right">è¡¨å¤´</th>
</tr>
</thead>
<tbody><tr>
<td align="left">å·¦å¯¹é½</td>
<td align="center">å±…ä¸­</td>
<td align="right">å³å¯¹é½</td>
</tr>
<tr>
<td align="left"></td>
<td align="center"></td>
<td align="right"></td>
</tr>
</tbody></table>
<hr>
<h4 id="å†…è”CSS"><a href="#å†…è”CSS" class="headerlink" title="å†…è”CSS"></a>å†…è”CSS</h4><p><code>&lt;p style=&quot;color: #AD5D0F;font-size: 30px; font-family: &#39;Consolas&#39;;&quot;&gt;CSS&lt;/p&gt;</code></p>
<p style="color: #AD5D0F;font-size: 30px; font-family: 'Consolas';">CSS</p>

<hr>
<h4 id="è¯­ä¹‰æ ‡è®°"><a href="#è¯­ä¹‰æ ‡è®°" class="headerlink" title="è¯­ä¹‰æ ‡è®°"></a>è¯­ä¹‰æ ‡è®°</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span>&gt;</span>æ–œä½“<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span>åŠ ç²—<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span>å¼ºè°ƒ<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">ä¸Šæ ‡ï¼š Z<span class="tag">&lt;<span class="name">sup</span>&gt;</span>a<span class="tag">&lt;/<span class="name">sup</span>&gt;</span></span><br><span class="line">ä¸‹æ ‡ï¼š Z<span class="tag">&lt;<span class="name">sub</span>&gt;</span>a<span class="tag">&lt;/<span class="name">sub</span>&gt;</span></span><br><span class="line">é”®ç›˜æ–‡æœ¬ï¼š <span class="tag">&lt;<span class="name">kbd</span>&gt;</span>Ctrl<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> <i>æ–œä½“</i><br><br> <b>åŠ ç²—</b><br><br> <em>å¼ºè°ƒ</em><br><br> ä¸Šæ ‡ï¼š Z<sup>a</sup><br><br> ä¸‹æ ‡ï¼š Z<sub>a</sub><br><br> é”®ç›˜æ–‡æœ¬ï¼š <kbd>Ctrl</kbd><br></p>
<hr>
<h4 id="å…¬å¼"><a href="#å…¬å¼" class="headerlink" title="å…¬å¼"></a>å…¬å¼</h4><p>æ–‡æ¡£æœ«å°¾æ·»åŠ </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">async</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/x-mathjax-config&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">MathJax.Hub.Config(&#123;</span></span><br><span class="line"><span class="javascript">	  <span class="attr">tex2jax</span>: &#123;<span class="attr">inlineMath</span>: [[<span class="string">&#x27;$&#x27;</span>,<span class="string">&#x27;$&#x27;</span>], [<span class="string">&#x27;\\(&#x27;</span>,<span class="string">&#x27;\\)&#x27;</span>]]&#125;</span></span><br><span class="line"><span class="javascript">&#125;);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨$\LaTeX$è¯­æ³•ç¼–å†™å…¬å¼<br>$$<br>x \href{why-equal.html} {=} y^2 + 1<br>$$<br>$$<br>x = {-b \pm \sqrt{b^2-4ac} \over 2a}<br>$$</p>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
]]></content>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>MkDocsä½¿ç”¨æ–¹æ³•</title>
    <url>/p/ce42b873.html</url>
    <content><![CDATA[<p>mkdocsæ˜¯ä¸€æ¬¾åŸºäºpython markdownçš„é¡¹ç›®æ–‡æ¡£å·¥å…·,å¯ä»¥ç”¨æ¥ç¼–å†™ä¸€ä¸ªç½‘ç«™</p>
<span id="more"></span>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h4 id="å®‰è£…python3åŠpip"><a href="#å®‰è£…python3åŠpip" class="headerlink" title="å®‰è£…python3åŠpip"></a>å®‰è£…python3åŠpip</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt install python3        <span class="comment">#å®‰è£…python</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt install python3-pip    <span class="comment">#å®‰è£…pip</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> python3 --version               <span class="comment">#æ£€æŸ¥pythonæ˜¯å¦å®‰è£…æˆåŠŸ</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> pip3 --version                  <span class="comment">#æ£€æŸ¥pipæ˜¯å¦å®‰è£…æˆåŠŸ</span></span></span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…mkdocs"><a href="#å®‰è£…mkdocs" class="headerlink" title="å®‰è£…mkdocs"></a>å®‰è£…mkdocs</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> pip3 install mkdocs             <span class="comment">#æ³¨æ„ä»¥rootæƒé™å®‰è£…</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdocs --version                <span class="comment">#æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</span></span></span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdocs new <span class="built_in">test</span>                 <span class="comment">#åˆ›å»ºä¸€ä¸ªåä¸ºtestçš„æ–‡ä»¶å¤¹,å­˜å‚¨ä»£ç </span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> <span class="built_in">test</span></span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶çš„ç›®å½•ç»“æ„</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">test/</span><br><span class="line"> â”œâ”€â”€ docs/                        #å­˜æ”¾markdownæ–‡æ¡£</span><br><span class="line"> â”‚     â””â”€â”€ index.md               #ä¸»é¡µ</span><br><span class="line"> â””â”€â”€ mkdocs.yml                   #é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdocs serve                    <span class="comment">#å¼€å¯å†…å»ºæœåŠ¡å™¨</span></span></span><br></pre></td></tr></table></figure>
<p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>127.0.0.1:8000</code>é¢„è§ˆ,ç»ˆç«¯é”®å…¥<code>Ctrl+C</code>å…³é—­æœåŠ¡å™¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdocs build                    <span class="comment">#ç”Ÿæˆé™æ€ç½‘é¡µä»£ç </span></span></span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å·²ç»ç”Ÿæˆäº†<code>site/</code>æ–‡ä»¶å¤¹,å¯ä»¥å°†é‡Œé¢çš„å†…å®¹éƒ¨ç½²åˆ°ç½‘ç«™ä¸Šäº†</p>
<h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p><code>site_name: </code>  <strong><em>å¿…é¡»å­˜åœ¨</em></strong>,æ–‡æ¡£ä¸»æ ‡é¢˜åç§°<br><code>site_favicon: </code>  å›¾æ ‡,å­˜æ”¾åœ¨<code>docs/</code>æ–‡ä»¶å¤¹ä¸‹<br><code>theme: </code>  ä¸»é¢˜æ ·å¼ä¾‹å¦‚:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">theme:</span> </span><br><span class="line">  <span class="attr">name:</span> <span class="string">&#x27;material&#x27;</span>                <span class="comment">#ä½¿ç”¨materialä¸»é¢˜,éœ€è¦pipå®‰è£…mkdocs-material</span></span><br><span class="line">  <span class="attr">language:</span> <span class="string">&#x27;zh&#x27;</span>                  <span class="comment">#ä½¿ç”¨ä¸­æ–‡</span></span><br><span class="line">  <span class="attr">feature:</span></span><br><span class="line">    <span class="attr">tabs:</span> <span class="literal">true</span>                    <span class="comment">#ä½¿ç”¨ä¸Šæ–¹tabæ ï¼ˆå¯æ”¹ä¸ºfalseï¼‰</span></span><br></pre></td></tr></table></figure>
<h4 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">nav:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">&#x27;Index&#x27;:</span> <span class="string">index.md</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">&#x27;About&#x27;:</span> <span class="string">about.md</span></span><br></pre></td></tr></table></figure>
<h4 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h4><p>æ‰§è¡Œ<code>$ pip3 install pymdown-extensions</code>å®‰è£…æ‰©å±•åŒ…</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">markdown_extensions:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">admonition</span>                    <span class="comment">#æ”¯æŒæ³¨è§£</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">codehilite:</span>                   <span class="comment">#ä»£ç å—é«˜äº®</span></span><br><span class="line">      <span class="attr">linenums:</span> <span class="literal">true</span>              <span class="comment">#ä»£ç å—æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pymdownx.tasklist</span>             <span class="comment">#æ”¯æŒä»»åŠ¡åˆ—è¡¨</span></span><br></pre></td></tr></table></figure>

<p>!!! warning â€œæ³¨æ„â€<br>    ä¸€å®šè¦äº‹å…ˆå®‰è£…å¥½æ‰©å±•ï¼Œå¦åˆ™ä¸èƒ½å‡ºç°é¢„æœŸæ•ˆæœ</p>
<hr>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://markdown-docs-zh.readthedocs.io/zh_CN/latest/">MkDocsä¸­æ–‡æ–‡æ¡£</a><br><a href="https://www.mkdocs.org/">MkDocså®˜æ–¹æ–‡æ¡£</a><br><a href="https://cyent.github.io/markdown-with-mkdocs-material">cyentçš„æ•™ç¨‹</a></p>
]]></content>
      <tags>
        <tag>blog</tag>
        <tag>markdown</tag>
        <tag>mkdocs</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äº</title>
    <url>/about/index.html</url>
    <content><![CDATA[<style type="text/css">
.intro {
    text-align: center; 
    font-weight: bold
}
.intro a {
    color:var(--font-color)!important
}
.intro a:hover {
    text-decoration: underline
}
.intro p {
    line-height: 1.75
}
</style>

<div class="intro">

<p>(ï½¡ï½¥âˆ€ï½¥)ï¾‰ï¾<br>ZJUer | å“”å“©å“”å“©upä¸»<a href="https://space.bilibili.com/171431343">é¹¤ç¿”ä¸‡é‡Œ</a></p>
<p><a href="https://github.com/3b1b/manim">3b1b/manim</a>é¡¹ç›®Collaborator<br><a href="https://github.com/manim-kindergarten">manim-kindergarten</a>ç»„ç»‡Maintainer</p>
<p><a href="https://www.16personalities.com/ch/infj-%E4%BA%BA%E6%A0%BC">INFJ-T</a> | <a href="https://www.wizardingworld.com/">HUFFLEPUFF</a><br>VSCode é‡åº¦ä½¿ç”¨ | Python/C++<br>ç±³ç²‰<del>ä½†ä¸­æ„MacBook</del> | èŒæ–°åˆ€å®¢å¡”<br>YOASOBI | æ©™æ˜Ÿ | èŠ±è°± | è¯ºå…° | æ–°æµ·è¯š</p>
<br>

<p>å’•å’•å’•ï½ï½ï½ï¼ï¼<br>è¿™é‡Œåº”è¯¥ä¹Ÿä¸å¸¸æ›´æ–°_(:Ğ·ã€âˆ )_<br>ä½†å¸Œæœ›ä½ èƒ½å–œæ¬¢(ï½ï¿£â–½ï¿£)ï½</p>
</div>

<details>
<summary>å†å²è®°å½•</summary>
<br>

<blockquote>
<p>è¿™é‡Œæ˜¯Bç«™upä¸»<a href="https://space.bilibili.com/171431343">é¹¤ç¿”ä¸‡é‡Œ</a>çš„ä¸ªäººåšå®¢<br>é«˜è€ƒç»“æŸï¼Œhexoé‡æ–°é…ç½®ï¼Œæ¢å¤æ›´æ–°<br>ä¸»è¦è®°å½•ä¸€äº›å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°çš„æŠ€æœ¯é—®é¢˜è§£å†³åŠæ³•</p>
<div style="text-align: right">äº`2021.6.12`</div>
</blockquote>
<blockquote>
<p>è¿™é‡Œæ˜¯Bç«™upä¸»<a href="https://space.bilibili.com/171431343">é¹¤ç¿”ä¸‡é‡Œ</a>çš„ä¸ªäººåšå®¢<br>åŒæ—¶ä¹Ÿæ˜¯<a href="https://github.com/3b1b/manim">3b1b/manim</a>é¡¹ç›®çš„Collaboratorï¼Œ<a href="https://github.com/manim-kindergarten">manim-kindergarten</a>ç»„ç»‡çš„Maintainer<br><del>æ­£åœ¨é«˜è€ƒå¤‡è€ƒï¼Œæ²¡æœ‰æ›´æ–°</del><br><del>è¿™æ®µæ—¶é—´ç”±äºhexoç¯å¢ƒçš„é—®é¢˜ï¼Œåšå®¢æ²¡æœ‰æ›´æ–°</del></p>
<div style="text-align: right">äº`2020.9.30`</div>
</blockquote>
<blockquote>
<p>è¿™é‡Œæ˜¯Bç«™upä¸»<a href="https://space.bilibili.com/171431343">é¹¤ç¿”ä¸‡é‡Œ</a>çš„ä¸ªäººåšå®¢<br>ç›®å‰å·²ç»ä¿¡ç«é€€å½¹ï¼Œåœ¨Bç«™åˆ¶ä½œä¸€äº›manimæ•™ç¨‹å’Œç§‘æ™®è§†é¢‘<br><del>è¿™æ®µæ—¶é—´ç”±äºhexoç¯å¢ƒçš„é—®é¢˜ï¼Œåšå®¢æ²¡æœ‰æ›´æ–°</del></p>
<div style="text-align: right">äº`2020.6.21`</div>
</blockquote>
<blockquote>
<p>è¿™é‡Œæ˜¯Bç«™upä¸»<a href="https://space.bilibili.com/171431343">é¹¤ç¿”ä¸‡é‡Œ</a>çš„ä¸ªäººåšå®¢<br>ç°åœ¨è¿˜æ˜¯ä¸€å$JL$çš„$OIer$,è¿™ä¸ªåšå®¢ç›®å‰ä¸»è¦å †æ”¾äº†æˆ‘å­¦ä¹ $OI$ç®—æ³•æ—¶çš„ç¬”è®°å’Œä¸€äº›é¢˜è§£<br>è¿˜å¯èƒ½æœ‰ä¸€äº›ä¹±ä¸ƒå…«ç³Ÿçš„æ–‡ç« (æ¯”å¦‚æ¸¸è®°,åšè§†é¢‘çš„ç»éªŒä¹‹ç±»çš„)â€ _(:3ã€âˆ )_<br>æ€»ä¹‹,éå¸¸æ„Ÿè°¢æ‚¨èƒ½å¤Ÿæ¥åˆ°è¿™é‡Œ,ä¸€èµ·åŠ æ²¹â€å§(ã€œï¿£â–³ï¿£)ã€œ</p>
<div style="text-align: right">äº`2020.4.27`</div>
</blockquote>
<blockquote>
<p>æœ¬åšå®¢äº <code>2019.1.9</code> é¦–æ¬¡å¼€é€š<br>äº <code>2019.3.10</code> æ›´æ–°è‡³Hexo<br>æœ¬åšå®¢ä¸»è¦è®°è½½ä¸€äº›ç»éªŒå’Œç®—æ³•æ¨¡æ¿(<code>C++</code>)</p>
<div style="text-align: right">äº`2019.3.10`</div>
</blockquote>
</details>]]></content>
  </entry>
  <entry>
    <title>C++ç®—æ³•(OI)</title>
    <url>/algorithms/index.html</url>
    <content><![CDATA[<h2 id="åŸºç¡€ç®—æ³•"><a href="#åŸºç¡€ç®—æ³•" class="headerlink" title="åŸºç¡€ç®—æ³•"></a>åŸºç¡€ç®—æ³•</h2><p><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-DFS">æ·±åº¦ä¼˜å…ˆæœç´¢</a><br><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-BFS">å¹¿åº¦ä¼˜å…ˆæœç´¢</a><br><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92">åŠ¨æ€è§„åˆ’</a>&emsp;<a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98">èƒŒåŒ…é—®é¢˜</a></p>
<h2 id="æ•°è®º"><a href="#æ•°è®º" class="headerlink" title="æ•°è®º"></a>æ•°è®º</h2><p><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E6%95%B0%E8%AE%BA-%E7%BA%BF%E6%80%A7%E7%AD%9B%E7%B4%A0%E6%95%B0">æ¬§æ‹‰çº¿æ€§ç­›</a><br><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%A4%A7%E6%95%B4%E6%95%B0%E7%B1%BB">å¤§æ•´æ•°ç±»</a></p>
<h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><p><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%A0%86">å †</a><br><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%B9%B6%E6%9F%A5%E9%9B%86">å¹¶æŸ¥é›†</a><br><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-STL%E6%A0%87%E5%87%86%E5%BA%93">æ ‡å‡†æ¨¡æ¿åº“STL</a><br><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84">æ ‘çŠ¶æ•°ç»„</a></p>
<h2 id="å­—ç¬¦ä¸²ç®—æ³•"><a href="#å­—ç¬¦ä¸²ç®—æ³•" class="headerlink" title="å­—ç¬¦ä¸²ç®—æ³•"></a>å­—ç¬¦ä¸²ç®—æ³•</h2><p><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%93%88%E5%B8%8C">å­—ç¬¦ä¸²å“ˆå¸Œ</a><br><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95-%E5%93%88%E5%B8%8C%E8%A1%A8">å“ˆå¸Œè¡¨</a><br><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95-KMP">KMPç®—æ³•</a></p>
<h2 id="å›¾è®ºç®—æ³•"><a href="#å›¾è®ºç®—æ³•" class="headerlink" title="å›¾è®ºç®—æ³•"></a>å›¾è®ºç®—æ³•</h2><h3 id="é“¾å¼å‰å‘æ˜Ÿå­˜å‚¨å›¾"><a href="#é“¾å¼å‰å‘æ˜Ÿå­˜å‚¨å›¾" class="headerlink" title="é“¾å¼å‰å‘æ˜Ÿå­˜å‚¨å›¾"></a><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%9B%BE%E8%AE%BA-%E9%93%BE%E5%BC%8F%E5%89%8D%E5%90%91%E6%98%9F">é“¾å¼å‰å‘æ˜Ÿå­˜å‚¨å›¾</a></h3><h3 id="å›¾çš„éå†"><a href="#å›¾çš„éå†" class="headerlink" title="å›¾çš„éå†"></a>å›¾çš„éå†</h3><p><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%9B%BE%E8%AE%BA-%E6%AC%A7%E6%8B%89%E5%9B%9E%E8%B7%AF">æ¬§æ‹‰å›è·¯</a></p>
<h3 id="æœ€å°ç”Ÿæˆæ ‘"><a href="#æœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘"></a>æœ€å°ç”Ÿæˆæ ‘</h3><p><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%9B%BE%E8%AE%BA-Prim">Prim</a><br><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%9B%BE%E8%AE%BA-Kruskal">Kruskal</a></p>
<h3 id="æœ€çŸ­è·¯å¾„"><a href="#æœ€çŸ­è·¯å¾„" class="headerlink" title="æœ€çŸ­è·¯å¾„"></a>æœ€çŸ­è·¯å¾„</h3><p><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%9B%BE%E8%AE%BA-Dijkstra">Dijkstra</a><br><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%9B%BE%E8%AE%BA-SPFA">SPFA</a><br><a href="/2019/01/10/Cpp%E7%AE%97%E6%B3%95-%E5%9B%BE%E8%AE%BA-Floyd">Floyd</a></p>
]]></content>
  </entry>
  <entry>
    <title>Oct, 2021</title>
    <url>/diary/21-oct.html</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç ä¸å¯¹å“¦" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹">
  <script id="hbeData" type="hbeData" data-hmacdigest="f8d2f5194b0473c088346152c37bcf96e4980742676cd4967692b09a491db0c0">e1fa201b2d31525bf9f1e5c19d32d0972c907596765b0eac77f58cdd3eed557c1458fc94dc9504ad0cd5bbf23c62bfbb95138f0e18782c3c668818ca370f300a7f70b9bb3e51de3c674a0e618dfe9a6141ca2d5927615430c498b998fa12d26101375fffe94ef9b701e4bc55febe75e4b99e28ea76f2853f627b77eb564a40b4071a38a614d631503107320530be978f6efc594360499cc3f89f0fd1aacf1dff8dd051c854146422d5e0da21d7a86686617e4599ff1129034789f7396545b64ea15204fcb6e17c5897ac939684ee95828d33d35001b9677ae7cdf82ee3cc501d4d9212263d0912c0219499f14c53b3017c8d457af112a08f15d78611255ed1597f07a170708a31942e1e8e751bbbae94c0e58322856772159e6a536947c8fef9d877465b8d268923c21b211ea1db04c1f96471d94231b18f5c2ecb3df1661c94db664eddcd132dd8ecab015cdd2e1f5b18e0c88176a22fa8c3e8c6be8cc813c06604c5ea071a19c8be210fabd54c8feb8a04dd0975752a9306863a9abdc6e989b03d83d69dc52b26b5e3023e37392d52379db3d16ee19c8229a8996ac1fccda696832988aeedf0a25901ee3866e32d138e2aae9943726e4272d7d0e654a1739a215dbbb3370c09ee30820f10c7e791c9da3ad64b414d5b0537fb6ff94d44b19c11aed9ec033fef3bc14e83864a674153af5ccf73e64cfc6201443a32e2a8b510bb9953dc6a5c0ede365238c354fdb313318100051e8d48a1505a3b1424bf03d7e4a1e51e1aee09a39c4fdc06599275d8ed2c022f5fe445c2e1daa9f20343c4defa471e3b16b43ceeee9fa5cfd38f1d7ba5f01cc8c2d1fbde7d2712633959199e09339878676ec561283ec92db96c61c8e8a0887c2c6a3f40c6bbe58ed8e4efdbd416ac6466b042405fdf2b7e708e589a4f39af6fbe346d17615a090dc53d070fe5a145024dd1f2d105fcf12d0cb509b69e0c02d14f3946b20a6e5da16adf7d3e82ce331ced11d5e10c160c1efbfc6c4e99c95fb0cc90d7a19fa6a2ae89c7021071ba1f386212a8d4648cb31e6a57ec14e8482e297b2a6948599555110e332f00c9981b7afeb04dac16d1043007018dc8b7e2c9764085e9e0a477d9a79fe1d9864a86e0b79edb8817b22a68d04c2938335e4a8b422b2de377dd3a4b44cab916bb8536c7a257153384da144398a55adc91507bc5ff0112b631a4a1a429ecbd749d0f92c9c48975c1fb4bcb493f89631e0995f42aa77bfa8014ecff3d0241d3162862b8553b935f0fa659cd1c2d22fde7f4372c727a6f7798e9232d1c08f3f0f7d34de0ffe22b51bb0461e18cf15e140f907f281b09d6cb6cf406300fcc6a2ff717e47227bd688cac3ec029152e56fe8b62a62b6ca037c6c835592e1e37df77a125c6ad34216cbdd7a4770f0bc4d37a81d09a2318f705d3757a65b6a9b07996acf5affa814ef3548d8055ffee1a8a4c3c9657b96a3b43f7a9e53b81f3a0bb942131987df362185279026fcf06c78bad548b8239ffb2cda4e880da3ccca648b147808834e39bcb5365365c4117468a1dc43e3dce1ed44dedfe9ef6eef225c112f7ee2dc1261c74fecaee7831e0618153fe09dbed85d547b8d0cf8733b201b3ed14731bdf3727325b12bf8721a0871bbb5cce3a0df6a5ea1b9e519ecf6126310dbf7d85f613812d2300294c721b04406b00c2b168b3b95a338973e009ed0445eb11deee13c07ac89f6d979623c5e8d862370b40f2b30ad5edfc022ef9df945aa8f69f46fc78c5e32ed7f2ec046d94e51e36a93d70b9630ebc12cd2b22023f19a740f0560de5fb169efca7a0b15ad0ef83920c0a70d1e62203c3c46a828c49b2c8bb08d3a0700b9ae3721b70b2f1a2f2c8feb0babf640ef4a874fd35128b46ede6f85fc1cf4c0c0f4842c3b2c24d6b453e92a8de82e67cde34d6c9c58d1c7ec168c82aa6dee565dcecd62134e7b9f38e0feb03c2670b2f1b367a59f34728142763b393c665f20dd35e264922db62af61c197f6e01c6f8a8f4e0cbd331990a3a65d9ba15b8accbfccca620605c5ed0f6a04fa2dd2fc729b43f77afc1c2b2b45ac56a3f6cad6b28c681d6678e6c7fd0504e6256b504d2f20ea9ec3e50d415e1029b75930f1edd01b2baff089f6efc7c794a0ef0b8467949a92415fc115c13f3341b90c09d8804847e57f0db20e9f3d29a787cdab95681900c26a3675146e468680901c0bc89f2a75c684be62ddfdd4506a89f3fc9cbd8837c6aef40e37b56899a4a129e4e15b2e1e55fdc928fc9f23eaf7a3063ce14d644b2552bb0d21e8acee3c535459ef87dab16acc86ff833cb20017f6033e8ee23c214a6b55bea01a764690e02bdf16882ec7971bd58121dc9dabd80708b27f1095d22d53758dbf54e2c423ce11382982dbc79041d971a8a712e58e5594b2cbf2edc2335e30eb27df6fda641af86e14a4adc6e2ff33d8752bb8b3744fa9383c2e8e2d7c101bb984f5f580d53c116797c05353d820c9b44e37cb30f762c5848de45674a8cd718b35183cb296a04f3195700d023e1c55c74429d46abfbcfd3b9adf4f6bb70838a271a8cc854df9e5a266fcb99d79b25d012577f9786822ad4b5d6401b75e67121b2d391cdb6e8b3096486110f4be065dfc1121cd676f5262a1985a05427da5b3b3a0e34b279743cbca06350ca29f9f2e819683d23c23d4453cfc4d9e9202be51960b717b5059347c2a61b91e69373f42364b1a234d99cee8bec030523d65a00eececd9f682b790d7e18bc2064cffab23322b8644e070299c7e1e69d4f6b4f999d8044ada0ab2452b6d020182e22ddeaddf9a0b0d71a8bc7751b7a785766549835130a70ced62d80811ce72f4c4d0b6232814a8dbb9433843b284db918543a088c0463872dc9cb539831a146450ce96ba348c8665180c50f82326ae8d5e2a553bf938ff80b8ae6b5ab0716c4af4f34944a4497a13f32c39b19f563ecee46d1a4ad069faffc4773de67a0c3abe3cf147c5a44fe9304fe49edf23c76ac41402ebcd56c6d77f14e6ba79a745d09186ffbd5a1579b60a176680ee28e1fa189e3c413b8f840a32efa40fd273ea8e5c415640691af118913d500655d154c888fed8681a7628c78a60e60b44c521d321d0f8b288cbaba273729d72cc548d29848b9ecad9e6b839a58f35c357d2a35d627590369591b27f3914a9dda4a5ff76dda3e10d74e20124cc2bfaafbec8b1be86dba37b00e4a684dfd4fa2276380838e3de6430dc9e46906b0ac2df0da398b9a45d7c2fd099b724d029c725086b48ce48f1a489ce89f213d4ac562d901e4a9607962132036c07209df1d5b65387a5ba88398ac34f0ce231220caef4e9d26c5be735e2a643a71370cc8289bc57bfcdb1e9bd234b24ebd1a7ffdb0d4d568b033e73b5e0c5464f5a7ac4d7801814209290869047b38361e527b8c399656ae62e586a80980a05c818477a7d13dc689df265ac1c32162871a568ecbd5f3631fa1f1a53d06ca8adcf19135defedeef3574355449ea065190e48d0e873a67db3b37f6a2fc9d914aa4b9af5adcc626df8da96d958160914b952b817636644b66e45368d479e303126058ad9bb4439870125fef273bdbbe1ad47e354c07fcd2a06cf7366a8eaacec7347668939f6ef6389b9ee2f2d2beb972b180fe1c1a29f8d6e15b749a9fa53a535be783dc9f6e3f7963d6477d612bb6a8ffb554dc069af3158a0c78fb51fe013bc390c4cfb07ae4da2858a33f44abfcf548d4b29b34314743155a03f355c78ced141f69e4d1de0936d68271a5ae292698fd59be4628df149a5f5b3bcea6133e908623670f1374062a25a719f91e72b13a8889f5d2ba14f336c0bdd08daf0c428032d4162a1a7694d4657f372854def8b3339aff203e7de02e7213e51a455a891122f6f534d906bd44c87626bbc322770a275d1dee6573207d96704213135e311ab28443ce0fd36c1805f93ad6566194e76b130ef2fb2f4213b527e4a841478d363c65e1a0b7456a8deafbee8e3aa1759bd175a659e592a4edd30200ade9ada9c16d892bd29617e8cf16420b36984467a22c951b1598c12e911c71ee3991bdef00c1953c4b4142d04373f375b436ddd614a9972f5e5899ee40286402c6f55bfb24a64cb39fbff9be040f60ed64f208aa33ae06ff1e38aed975d3ce2c7156e33554c0130db4dc6781fb186eeb88cdc2a903dd8e8dd876389e230362fe0aa605ce36d1ba108d948f49987745b43376e1764faa58d088086bf93df0ca5589670c6bb4da7532747cffa38386c53383ef8ce9f64d755cfe514615e843d76dd5aec0789775084b94b634a1c198b57bd6ed9ce5620c4470244e74631f4a9233fdcc214d8968553b3819134eac7124f9f048eb947b8490f76f3d70961b858bc3e26150c11848a9fc3cfb7e9f9cf74393e53b4cf74e412f0bb36e0ca38d6f8c7e8872f7973c66bd8b92526858a8bfa2412e2308d6f39d8be82c2a6fdc91c6e5441f78ed460119b499263831568e7cf7d052edc0fe12167c575cc317ccc98d750f804d9659c9929b3dd216646d3b0b6d91485a1a333cc304ef8d2ccbeed675f086275cc2f9cc651222c1aa9ba5c2cff7f52f09aee900b535c7af024fd9f009a848f993c5b4abe62286bded005f947fff83cff8627b32f1eddd15339fd2c55892b290de9d6759fb7f073ebb3c7b3bef0d3456a8452705445581e64412a13a0ca412f51c514553ee304a7224a73cacbf18095e4e4acba9f6c85a9459972b66533f36f06fca7573ac3453670cac11a68fd3728578345ae5411ce8e79c0e4b7d3973840175b75e6e88052f98d92f22e8fe4df88fe9d49b08484b83b0bb8ca772dd8135ecf4253f5aedcd81b92d9200926b993af3f5a6f08365621ce2dc4aa2476cf68313248a0a3fda0048e31e836f0886df3a04cee4482a1987fdc427bf1f2bf6463cac9f5ffcabf4d4751b7b7e60a404d2b758ea71616fb524fc15c0a9d5e4241cee150093036e8eca8a60821f5bce7d30075b1d1abf4ee69fbdb452152e9244fba9d36492b61ce5f3b5e6805ee90128e287e88dc70896d3c73f72cb2b6446faafc31655adfb7e7c0e1823f003c2d9d504d6233352cb44e6b655ff35a57ca9ffbb6b48a800675df73b8033c897023ec68b45084a030e99ee1bd35ce73034d6369bc45ecd9f0645e32542fe55f3268d48cfb4de31629ad4a39f770eb250475986272ced6158c00cb653ca594acaa7856e7c3e9a38367d2d2749f93a834f05c6f26237b983a738b19206fd783b5cab34b196644d2dcd7ae305b334601b51d6c39a37ad6ac995ddd003aa9e948a3f71e924838e43de834cdbd851b44b8286d625fb1368304bedef096990e420f66adbebdd4b153c2ed409cc1fcc786bf3d72176d7fe0d234603c3d1c0c8aa93fda5b6efecb97c3b1f76db811c2da9d6906d0d31d185cb131dc0a33e82f4af9fcc9a4fe6fff4044b96853654aaa0fe8c60421d2ff1ef1b5402ea23a30d4a45a846451baaaa618c51d8b6421933d48be1dde1ff8e2e8de8be81b4644beffa70fb62e149df443684a6896c44b7b771db914eaaf01c1e40f6a6cb5c843c1c599ef0e8311efa359413f941dad905c323a7d7486a159f919e080c97ca89f07a2ecd72587cb2dfa9555b001b08395f94e413fab2e88610cdf0f6917c2c84bf48a3a809da72781cff6c5a1c068f899d7ee8ff55cd241a9d9431ccb751322171932ca784548d6caee5b32bf9fee6eea10e3e055c386cd680f866b88f808aeee49e633b88ffac4458b2e15c3e34dc71a5630ffa2701cc62f66a42c2b24a2a638fa04e63be06755b09d26bdc617deb3b6acbcc8dcfb62cdd832d81538a6327969f81445326c65be15ec071ff9f539a9e01679a15d5e98636c15d017f3ea4ead3ba3eb1abff78bbd3712b6c5dbf4ffc793b9673b085a347c282cd630d416cc85b290571e9c9ca6655df6416328e68f4ba802998e676865420094192e8b3cda7f13c11330d1ae301f5eaf617372e6899f8a59e35e08e56577b69862bdd84388ae6226815df261ca5105d77d8e7745b0d3a23273350e120e58c17d6d8c623142dc3c80b8caf9a9f9f275937d1321ec9c261aa640597cad3171ca3a9492f886733fca37e8531c38d9b5fa9b689b1361801409524b838459b6d886289df67321d861c0fa8595bbef44252995f1b5cc8ba0683537ff5a9847dfd7102cfca358609d182535a974b850e789d1903efe2b2fb670e0d61ecd3596a44a47318dd66863fcd101772760f7d27516776bfdd6de3776a819c24185f81063b79fdbbc1898c0e3571019f72c53b4d0f033df6310615d897ca01cc26ee6c46855e8d261b3b8eaad426f536e888482c69674f4ba871d69ca8567bb30f19716d267fe753e43758c91c08820ae7796665033085308e6544c491e6ae6b709a7ad2a180942edd836e93378b79ae1dff6785f412217776a1ca65d9922db7442e463f0cb9dd40dbde430dd0bf54b6c83a74f950a092e87b0ad11f7fa1593d416f1fc56c32a01c1436e928fa0eef24544c649a203ec0488bf3c1c6eedafa35356849752cb09c0a57a895f281ed639a9a87bd8510741e633b40078ab39ad98979069e1ea586e6fc421093626f06fc3314a2b1b7f7c1f169049ecccc46097f218cb510a32a5e5ee9fa367d1fae79d3f74ffe4be94ff5a336179b593e4840783565e3708ecc264c69313e6749d559a6b4ce08745ce05ea8116467ed5437730f9c178fbde2483424be6fceaa49fc7bcd4b68fc18a63140dd0c1ca45bcf5d7a62dafade1950413b61cb94587756ea5362de32e387b29e613cdafe288651fe00a4dcb548335f8a35549c0ca472575f41e7ba196fa468bd6bf52f56115e8c5e37e6936736fa62f131dc0ed3295586122aa907d8510e047f8dbb18bf2a09876e4189bf61978896d41787ee7a221ae5525f7974163a00aeda509c6ab454f96e4fb9c257f1b59e7629badad54882991f5d363afb916aee0739123ede15a5290fc95f3dab28539e258caf9ebede416bc7792b4e36700ba44f187c86dbd1efa2aa33e042b827a0d5beabd0821c3023ec46763f809b12d5e28aafeb767efc572cdd6d25527f56adcc7c3d798ba903f448242117cd323ebd2a3fbeb1af52ee84b23d818450da7c4432cb337dbf94b15d70e1145193a464184bbcbeb5404fb4a7d925af2705fe21c6c68d6d95fbc79be5c933f4354201330285bade2cf536fbd316d6c3741bfbb67e32d924453485f3c18e77031f889b5b98be15d807f0ff429adf81dba9fc7a3c79f8b7d2e5dc1131d04222738ba253bc83991e3248cceb73b6669059de548c852c523cafea31b81c489ef77c0297cb6d75c0c62286430b7bf55ef9c22845f3e640fba891696a446df85cb3fbceb9e9d4354eb42595030174b42a99d9aa58de455126316f969bec2eb3c5d9d8be9be3c782adceea432f8bc63f2279aaf838b6136092455ef0c531b5d074391f662adc2726d8427af0b5ab760d77988d02940936f0ed5a1504126549717709fc7574dd82e8a202551d21a72b1ca2e13e67e30afdee4e3be21570df0935df9702beeb3e99afab1dda96827eba9b45203becb5310768ee5be713b91a6c83ac616283055719ae18971374db9550cdd263235faac2f212de6456869744a2bbc3fa24a1d8c7d21654cba08927a1cb1f4cbf1c50a8b356ad1d10c957da4acdbff70a0cbf995944ca52e6faec1fefdbdc3fa7b285edfa18328ee80468bd08d257c11aedfd2b3b38c7b36efb0244b5eb8cf7805603fc018c095575a72b62b812bda166c4a3d72e75c6e241a130d2b7e62395673994194dea85bcfe1ffd2fc75cc6461d36a6a3761d20a10d04ecf3a170e6989518f21789ff582490dee79aa154a989e436e7a49e0de5f7638a70e98bbd1551e2e9ad66592a2480575c2eded4c2d776c74336c6ca7b2fbe5ae43b18a5ecae9dd153298251608e617d16bd9f908cb0e726559111264e09644ff78bf1f32df9dd1cd5e976aa3b6f0443081504ff488e8263df3041f69572d58872b2b1e9bad22fc892bb919476fa5d25d85829595beb26a23342f383a39a417cd772844ee05fe7faf1a6080d35a65d2ba4d08164366143f55e61b5b7d83c7ce4732e21f5ef4e40111d08a8e477e156a0e199fce806d8bb343ca7d1324f80a5907abec2c09bd8b2568e4d4a5406dd3b328be95a27f3d0723f78a8b38c65144ca20d0be4522c96aca4e115f71af42144e0288b955cf908fdc9a356067c13bf1f5a1f21f0b316bfb42a5bacb4d952f4445e1db9732b9f8c8aa5ed1b64ba7da5403feeb163759d5c94fc9e243ceca4ab65f9650da00ee53afccabc323959316024d49180fc28c187e561c6797ee681a1d31ae5cdfbcaef2845e231c0df18ab9a5d52d359fb8faf44acb0e6ca09e0a38949401241dd0f134d86624cb829494c47f39e64497e2da9f32d21da6a389347b60d1c383117461bb5798aa2dfd5bb7de2887381971c22f7b9d15ee99f4d1b7f3a5f9a3a6954299a0b1f0f29d3ae71083fc90a5e5af8a48d45710f73066f6f7f9290a8bc826b70fe9a683515e55521a82d3212ba60e855cc9e19ff3d9f894c170bafbbd706152ba6b62ad0ed11ea28854ed5378da1c83229656e56ac8c37d65c9c30feeb5acedf9762560e2af9755ed604cb40cc3c37941b87098b29c728f11cb4e6e27a63935d6fa8b616fa62bd9c26a02d442e1f1b6df6b66a7861ec8f5faa59d2f941f847466bf561aef3ae4124a62e9f8394c83532b3840d54a3fa6e1e082cf799d62d7db7ad3fa3bbf26640b88afca31800f344505ba0886095f52066aa19e405acd7f3b1208791587ca2496bb2df269e978591444581224e6fae54ce3fc9b3a15eefbff40f51d623910fc274fe22a21bc20f3bf101764f520f58dece515f91c2e39395195bfba6e43fc7526e32f32d250f85952f25bfd3ebce4bac2f35e60d39cb94bbfc61598667d2f879d8be0f67b96703b161d49978ca730c6734e948dde3efcff2c9139c88d4abfe6d633eb13c8a434aa4dc780f1067615b4ef44f8960d90cc3ad0a8e2f2e150ed51d406f5f02ab41984a0870634ccb3c8d04cf7a9619677e43979a032b74b8716e772a308161823837b828cae1adbdd1799d628c580497022d536e23c202a8c8c29791d8c50b771616ef86671586c6cff2ae945167e4369262cda013a4b5637ed95f4b5aea3ca8b9b230892392123a717055c020804fd1ca059b57c2fca0106692bfc2faf233af5b3205dbbc13d14b567603cc122ae8bb1c245dc2ca145a19ba21a3ea218bfebe9c0052a84f9b5b6e9f9b133fff89e275a6197ecd8d210c74e012e4fb8091d9905852be27fd4b5125df271fdf6f7abb2ccb9023dd1176301d39cb87e0a007c54ab2ef9bb58eb06ef2076b7ffd69034dfb50b81f5cd1941690a9270aebc77397fd6dd8a7dd9538876fd1eb14cc32246bdc0102fa09e60d2418e34170b709b408373751dfd7b255c38102a60d0436f4340749b90afac787fed6304bac479434158ee47db8812ba0ffa1ceaf1655d1598fc7a15502ec240d35d06de860bad247a64eeaf935db1cef68fe3795f92a323c0d3278bec71827b007d523672c73853a8931ce0c25b9ee1963e9efa75b1ad1df1d5a65939503a0afcf7dd9785cc8412bf5f72cbb3f405f6990b74fcd865d63869f526018a33b957ee26bdcd341d8e7fc68370af301cc6b305f6bfb0cceca008aac85097721cb119c649e59cc6f01ebebc9c8c6fe33eaa433cc52fb2846cf1179ac2701247195115ffc8a4e77635660ebf278516798f66a313ae6e3f4419a0997eda2cec895b8c4966e208c66775b8881b73f2c113bd945cb208f65dbc41189a09b8b1c97a669908897be2865890af3270b4957c28fa2432e54bcc5d4a0f864436b48a5860af13a71d6485820125125c1738001f90f8b1168fd89f9db2fe24a5cdf5aae40c491d7d3f8360d81f9e378737a99fbb240e4f2f4d98663e4e54daae731ad671b2d66f371294cf56c8ccd4526db42145eaffaf92f35d472d4027afd7758fc59c2ef594f68ccea148564660ef87fe3d3e717e657ad24c2e2cec62f8e4bf28b89e3ec9021f87566dfadac69d111425afe9ac22418d79e60230fa9137cf832e15df21b1b9da9357743c6e92acc8ca7c2f6375ce07f27e79a583ec16c2ea6a5b5c93120de8f67b64f7a3f24c5968a647e2a222a15ff7f2877e184093e600c1a141ba08001497fce3888b168e98ba3eb27bd91df5440872157a25dc1378e4ac14c5ad3f649d7171bc85fdb7176bd3a1e0cffb6bb7fb3f0a675a647b9723e5f18491a5114a7d7cd3c04ce5fc5658ba1e9c914d04657112f2841e7d0142c803f52f2b918a773c3abe034b6cc5c3a6e95bf14a87236d5dda45c0014e1b9ada92a116e2a303ca7477200d68270f6be748c7c0312fe998a727074990b576a48d0f8ed9e8aed02b16bd360acb152ebde717d6a5e7d2e85b2e73439e7b6385a1892565465d173e5d48b383bf19ae233b4d70b62df0a10b66c9af577a39765bd8140465aa45339ca406507ebcbadc18992528ec41f40b4710f9035e769231ff2ccb08ac50df259f4c6d94a870aaa9b93d9a3099116be3ba26e55532933e6d63ee336019f80e7eb076ec102a9143e5045da5e08becefb72cb3601036863dc2f6779aabf10310b443ae9be3489b2cae3cdef3369ba84e908e121bb48694bd30b04edc8aab74ad5814ea1ff2043a9bf86f9ed0c0ec7356798ba4001e5e059a509aea085ec35dd57155cfcd18778bc499d49a4607dbd813d2833416c53180ac15508c5642d290861ebdf9d2c39bf845be723b156e5b752ab5f2c032936f7ef72e764671a1ca09c883186021f80ccbbad1f7dcd1a8d4b2af958ca618ec7db340602a18e37783221bd7f3978bbc4e8c36b0cd300cff162ad241da220c326ce6487ae5c14c23aad14dc4bbcb504e6c17d4fea3163c47f7a830a1f0f10e03e300e66a259aae8f52a3c9cfb9c75c20b4a88f3f961afe98612bf793da03ca1e4034a2a9020ccbb0dd9b11b53e3a119cda9517545b8199c09323bc7d66077382661a4aa22d5a6c8ce0729786f058fdef92f903b71d639d39546b668e54b30e25cd6eeec77106e26cf34b3995836c30a8c9df6d303af464d7f6b04a1126c1a74ae0c3e4bb27685b66680bc07df4154b5d5742342316faaa87f42e682e61e08cff8246a17711c05e26abdfb24701424fddddfe9aaaae48d25fd6c421d6008de9abb309c7541318effad58ba2879dfba75637f8cefc3609e1bb62ad393c619f6dfdb8b85c24480a8dbc6c2f9b2b3198a440adb36348788eb988d93f9a47cd41a389019dacac4524f3da6323ecd7771d260811ccf14a3ee3d80758a5a12e08db9440a5a954ec5d765f2d197b5a9c36d8b968c28ea2862602ad55357bfa84660d76fe7f075ffc0ac23e4d19f6427352b79676895e5dd870bad0aa4dd90daec68837979e884c497fcd948dc1e72504ca3cf8e034cf4e72a14690c4541ff181d54e19fadd60055af23e8250b1bb1d65c7a53339387c459e5dbfc6f6f92dff111f56cb524c0bd5f1c44686c20b8caa1fb106578c96da9045aa0e2ae239ac80bc8b48ec2406c432581fb081ebc55201d9c857665a4908240e2d64f488f24531536daf249c5c3ab36eb398c18a03c240233b7b30c3a4ad4d766f2c5e928a54ae94046a47f89f00baa57b6958e6145211363501636beadb6afba20003c9614047d38a050922c8bee7ae07289adec57cca9586df8a00b29f911e6630e0ae27e61d69c3506342a6f431042cb3a521dfd874022db486fafbe66aebbb27e38f6e16a0655d8362d44294769419b21bdade50c34cc39ea9830e48431300401d78eb9143c00aea40f351c9e05d823286829111c196c2e9e9c4bb1879e427f4dec67acf8c899e7bcd4e7361f1254641d14b5af314a283fc495f3d84fb21a6489bbc506cc539716e8023f4884e7fa227a97e5e0c4d1ca6c589be55c470344fb3a1b54982ae12caae14ec027ac9f5f721f544887d1f7760ed7fd6a569a808f652707f75a9e09bfc8bd303556178b667de63a494bd9943c242211564dd2d8d87ca1f2151bf5330311aafd6ab50a6e209dc327cb62be9cf63017a9cd65796eead7480c551a32883d2d3aed5989527515c1762d8cfb340ba1f4fa2e6dd8ebf4eb3e629a22987e55b6fb34aa896716b70e3284fa12ebe5e86c40aa63a5775ff0b7c705730f79f62f4276e0e48a34ca0fc481a17fdc3d91660a89447d1f9eb8d9412d3c669eb92e3615c7bf59dd121203e28b0606343ca3a131e512430a73d1dff617b0990f194329b3cbb0ec3d3e6d87d54a8bb77a5869a4eab56c17c83928814440d78a7b03f4c5747fd18de1c23d204ee649d034e0c999fe5c44b708e02c0dd938f9316b80f06801b30d982fa78aacbc97d5f968bdfd6a6af4eb7efb6ba650b770da5e5db9a3e2959b19a398e9cb5eaa9b3bf95904410db530617887bf39a9b641ec0220879be5465e5598fe98ce9b6b326388879cedb9f178871e0a30c72dfb7f0df3e3f1fb35c1cf17933c26df7caf287a15096f0cfb87505dca2efbae82236e2aecfbf94783ec84268b344e87fe6cdc9ad2ee3768a6340b097a2c24574162f0ed38343af6245d0ce3fcae36afa6e988b8a63a4615dc98126be451a729884e6f46d2c22b27d396c2c31954e0dc697a578a7ec3321a29afda6cb1a7bdb9bae5d2451fcc0f34cfa10fc2f2a9380bbec8b62eab0cd24d88406fed238e7b77fb7367406dc757ba43f024ee607cc8c58b82ce65f8cfe3570733c45694875037152a335d9f0d0fa4ccdf3ed1e9e7407e58a8b17c87704740c77be5273ac0246caee9f54679cc87b96beadfe3f4cf0280ddbd72e890d3ff8ef2ade416523daf3b61a068421c7eeb082d82e5b1a0971c1af3b9d54f18bb5d8dd95bff2e69e911d8cd49b0a69a10687f46b918b781bd0c57a39fb0fc87c8a56c58e9675694eac681ac3c94f6529575ab5f44cbf1b3a704bab54e0b3a328b3a589186cdb0b5cb62c0663de859a3847da46c79c0a8bb7566d8c33f9d91f29cb7da206831e0b20c56ec52a81c5bd471135582e5e7e56fa28f12d2d1f8a41a639ff7cd8d22bd6a61b3642742a4613e19421a21a9b39372ad558fac0d126fab1048c8911230410a5fcc9f0180595f993cdc92fe453aabf257391a407b768d12b050a1ea4ed190cc2d3ca36675095d9807f870d24f860b2d65a1fa7a39a46509372a59b308f3a86a11700b66c6da65607577aa7f407f17ebad87ceab77b082148cd59c105bfbc6479bd7b497dab232e6c7235cb0637fe173c61618b1a0f69379438990719623a2f2324ea18fff71f02d1f8dcdbd4a55068cf9afb83d5a752b0afa732e97a99ecfab6637668830a96afe4c44973b3b5a9f64c5391f53cc72db69268975468397395fe2546021c543fe9ee24a2e6320d8a2a194f054ace70dac66895b507a72e4ede45fbe507c0ae5569d608346b42b094b200658b84f7cc5ad7eba8a375c314e4ca695d40519308ac282fb7e732283c02e45a4b5ca27ae5994db6608cd32698670b0156352df0dd57d230535ec4c4598f2e5d17579ee1b658419513727d19e6181ce478fd9ecbdb569831c8f54bb1d7addb7c0adddf18d5729f569e462a37062215894ed788c49ee8231ff2477664537fa272053c83f54ab3b8fbde1ca3f1c700d3e9e0a1bd9a4da6696572976a6240b843e4366fcac25d236e02e4d2b1fe33c2b752931c216bff559d9b68cbc76c03f39c240ffbed046865c2fbb60bbcc56dbf76f2a99cd5e090db89bf2e0fa9899c4839dc74515958730da97f4c602b9bf8a79f0436d67e861cbab18170037421fc5be1f285efff66af4fd897871c324156f589c72e806123df8954aa78bfba1e644263ff44b5ca006f6f65ecc2bb10f696fa1e17295f320d5a3dfa19526910b452e71756169d73e74110551ab0bf980fed6c3f53ecdce005513027e7f3375c28a3e1c4d880d0732d6cd484a76ca1331536dd909f77d22372c548e656c22b7479345bf07f245d86a7f0c72e6d3c11ed088af1c8f0f268733743ceb924b53d9d8620a70344a460614dfd2f1117407b6e70c597d26ee4dbd6c964626affa0b0be0d3201c5974fbc2670f939cb9c74ed85043ff71193ad31b58809db1f6aee3550ac42403fe9bbb6f18d0fa1acdb6a6da6729385eac0106be375973ab51433bd408955cf59e827f096fee3ca38101ff2fecb9a0e7c8cea526367fb31b355aa947fdb03edcf0eb0e49a39fc1af50124397f03e0f3a09c12f833175a075fa2357eb224ec6e3f3e4ef081750e7a2c5684b90b5b64fd33aa69b4579ea792a6d5313388667bc5c787aa7872fd3ea0a656ff24ce3a256644cf02cbe0e57c3e6b5a39cd722ea79142aabd82cf22dd89ae682705f325b4a71a663207e34092c7647c2d714e997ad0edf0cfb0bcefabbe31a017954712536bd07028eb91d71c54381a304a722167e3aac3a724ffccbc27214c818ab7c946aff93c7b9abbad50c3577545c70bd36665b3a7b3d6a78d4510fedfc840aa58c2052a03464fd71ddbaafb6c6161698c506996d1826439e333704ee9e584b004f5664233e20c1e4f75eccd70b0957d1ebf1ac616f0aaec0a68d7769704dd7decac6d1f260a0e6f760f13915dbff9786280c45030f380f43e7a8276adcf075b3c3d16ac9647d2ce1bc206c65896252792d638000b6189d6df98f1d1948c7a31938d843715841236e44589a4431335a82867a343e11b890b0a5f7a8e19d2d0ad28a5991db69122c542366ffbd42e9acd769b2ef555adb2f720f38e0d69fb4473a0353a577b02db16167674503688501b3dd858a5ab330548f3c175501b0e8f7ddf611355cbf24184d4d04ab1d1a024fce11b62a6a429a3e618896fc15a0a6df591b428e9f951ee8d66c2a57970b0dd928f9ba5f467b451e07076c15ee22bb2675293088b4a969c7bf40fa80231753a3bbe891c2bd8d31a09f8d49067eba4048cb0ecafcb5b38107d1024f12fe7226267ee9640a54ceddcd955510a7281a989f0899572104383448c83195cd0b0e2b2acc5cdece0af831f8c4a1b42ea0af0658ed75c0f7e809e6ae0599296476d4b54bb0e56abb89833756a722e802bfab6461502100ce88e3402c811190b7f177d4e25988f4f961b4bc68d2860c16579dfbbb3d2e70a3b94daef870bf5a3d71a7787242e53342c7e003f37a5e56f1620840b4b411ae04de3286ad3a87259ffde31eb597cd5bbc52bc21b1e66568ffc4be1376086106bf07fffdd868bf4f1621582effbc809b064cea78fcad2085e63dd2d48c81e05985623dc79a424034cc5d7d36b8bc03047bd8aec1220e56c864984ab1233a250430fd9b3b776f68a47349fb3ee4dfccf5015905c09e8000fee13a16ce84764d168ffa8b187e32dcb9d60194e5acd6df048505950670eacf651d600c3e7b62a40fb97f039713942f9e341a3bf903da5c266bc34412e959aa230bc49e053d1d61cdea6d8b6dd624b33114f43537a0c2d701b538975017fc8e6397150370b2457b0ddc5e008048cf288db21c91d1c4fece18b60bddc840b370d7c14ba5032236cd3d0679f64f033b2fe1657e40d9136102d892cd9152e8f72f657b4dee5c7fe50dd3ad73c0646ef3450d3ac03abac0809f870fbb64a5cec6cdf29db8b9cc617a2b81254cb0afb460b3508bbc93e1d73dfaf2980e56f7380cad569343e64b58db6fb742f0551ea5443a4a4329af791318858c4d9ea0be4f0b4680ce32bac9becd672b3aeb4620852d48292894fbdd0aec672a2e64f8bf273a15be995edfb9a60e56f88920c815173c503373f4cf0030b15a25b8301649d3e6cf48f6c8c37e04424f453fcb2958aff2b2588743cc9d6f95024bf1c89308e174ceb2172f7585a89f5f01651b4c79c46a509853170fc1db13b435a47b2fba9c22ac4d81698a5b1c64af859e996b23d48959bc24d8f798e2c79dd5db532f48c0d53fd60582aa481efaf3e27b2125a6c124a24e7569def611cac099ddca8f497034ea1f77e215507714fd352134999fd3bc86777ed931b3592707c4ed5baa58567453d4a58c760c8f04aed79ef132dcb54b4c0f9e0892dda7e0f1e719646c5523b1fdfcfb8d12ece6a0ba59ea2f705069dedf3a678e9db37fa8aa0bc21c931c3f34c2e9bf4b53ed1d36e82727b461e43256c7c104235e481aa2123301efa5c1157a383d3a38021bf73c6fa70e3e5b481f99f78edb5475daaebaa2985e8c74450e47a615466c3f8e8792bc3120745c4b322e2ae7fbad0bd1f4c4a0e9d7b370087dfe79df58c5d49c4bf62d0a0013917ec7b82777742947ae8f0a18584732d6bf9c3247b23a34297c3048a054df4b5a94883563cdb55ad25fc7752aff52defd0e6168b96416b7b2854d4cd04569815ae8263f6b6f9db2d55c18d7d075d20058abef7c69f6b76b4d234ffc9de9b257890fc07ac517641526f9d88b6c3e13eaca202bd3fc4508a4046835546e68b30063e2f176a2c00a0c34c5d66371f69120ce0a12d81951b97286ca802ac3e77b5531d407de153fa51a04f296f0787a9e43fd940f8ded1247a2770f14f541bb0baf1271b1cd262c05b301199c86852060267ec4f7384821076dccecc6e38acb893703f742167a0afe340a9bdfa6ee31b465e18ba77d4b5144e74b96bb8fbe694d8c17ecd0868dfeb65f031f4217551a4c92e5f7f85dc26a4a2bdd93532d10bef90681009aee4cd0f9b46d5d2d34529fa4a0ef09c43dc12a1bf52010c5efc2c703a87d5e2ddaa1fe3ee39ae3067b6029be6b663b1636c875281dcbff5d73b27d620f7eeb2954dfc90286a3e1749cbb4285d90d728f9c13d56b2bf13fe8cff744db14006dd95685616d6d0808dbaab0e846824c51785df89cf84430fdefc78d42eb0dbec4e28c9170589a89df0307b99ebf831128e3ddeac6bcacad9b3ffe1fad2d797ecabc3cdab51fb8ddab04d77d8f4c9d045cf099d43e918b2ecf3564eb378c1047a7428eb5fc84125d1cd21194d7e7af3794132430168fdd22e7d459969154cf330a7dbfeb30a9d45aee3eea566c00da1568c460becf0be38cdbc24928a7ffa0d3f7c95896f112567d56dfc976849de72a6d0f35ba97e629203234e0673a257b30c2188cbf29d3bc7e12b1e7780ae6f1e9e44704027b4b1b5ee9e8b1828ea4caab5b04918e6ddffac3a0aa8fbf6d13495281f42000583c0f3047d94beb810be6585730b68600bab1c6c7e86fdfd6003fd5a14a77789e511677c9f84e10be00420d64b4a9d7d6860c15178afb233ed04e5a5f10b692a466c4ada962b957e156603f4c35e11a691c5f7688d40bfe1e7465b2bbf1bc8f05178607a10e79c8f065190073e3ca78678d6bcae4c8b988909769b710942b1e73cf520d08f79048d92d1e0b5bf6ecbea5082b84b5210eb1babac9bf3f07b27813e65f5008717998be5a2c3f625b4cd8f7a178fd3046ae4ab2c394b89ed516aace6968a51a09dc6996a98baa8b5da2224f5476c30e2280e95f49f3eda50d5a079333dddafd1988357b413aa097d84d3c2c954ef92e1719d570e06dd114f0d47eaa3b4d42de2427c2eca958c04f692084e2e9df13292b5af43189de971250040e276939049d0f6c91fbeedd7aa3356cdfc5d136375ce10f541b9177852da10c7045768fe406e1e5c53e626559579181d68efebd0b62a64dbde738f433bdf1338d509ece0d39dcaa09c4c67c6aff3bb4bc9c93d8045a7afbb9125bbbc74eee17451bed717af9dd95340955fe903c130b88dc790e8204407b1bd6b1ce17bf6d4aead4b498932164ca60936bb297549b2c6767924bd18ac2ae94f7f46667b1a329d346a8ee3811d0eaed06b9cce838c8ac66063af1de1e5b74fdb268a54e0e53b05b011bb5bb3c9e19d361d5289b8049fa572da476780df76328afca14de9581b8e3a4653e90546ad5fa71f0c40cba17428ab563ab269249eec82f749be0462ec32084bbe1d8eb2c21ebba6e6e8d174b40b4c9144449411b161f39f41f514f59476765b9a28f9042a1f6a17ecb801deae3300c1ded9b01b6e5abcbf1d3302e6a775c4d73bd9e7734a24b53af028a6869e3ff4f4aea4cca791758e34681e6548ddf1579b30d096445c3ab66dddf0564cc9e4ddac2b258a384a16e3355dfa7e344380086c98312bf78bfc5d1a3d3241937a90fa53481aa1d179382af84939b62d267486cd2dd97e537b842ccf3b5dcc6c8335515e51917bab13d67345b1cf9f5ecb7c49c851ed3cbd4d2594222e7c76421efbad0b15b07136a24047e1cdf903bce42fecd4d7cd3833040b70589e780d825d1cea2631143a848a894293264ed91ca07040d62acd9f09e5b5a1492b76f07065c71482830e58ce52b49d2becec04abaf6b28b34d3eddc551e1812fd20e3cdb987e512c8998b26b861ad2f92e41cfd49b1165335516ff4ae4bfc9f5cf289da4ed469f1481a837f9cd4099b815a68a92877c635b79d99e7b221030e706153062a5010089581c0cb8dee9adc5c534726cef2ea8a4ea66ec806345f5433d22057eab846ccc6e55b58a1de2aeae92e783f694ac02634cc9897d618b31275a190700d7c72f77a10aaa2b541e5b1c85198a80752025177be7eda9a65650ddbbc2ebc6f0ee9de4893cc821ce31f75c4136498d833a087f42d7ee172d00d6c9449a58f8df702e2edf9c90937a8794d6ac0caa1c0e754c6b625d6dc7461e7249bc7b648b6ba1a89733866d6aa54bf1c41e76c587ebab8b9480e9adc2639524fc9ffef196ae09b05d93f149474431cfb282266b50141a344ec8e73f944c07a25df31c4909142b696a6fbe371bb8374a74d461299a57b9d4eed2dc3128dc0541f7293c4a381b483a133c09f9818a009c6dd942582480f718927b1d834cc4ff60fb68df19e7031adb37989c29ff8348b00751bbaffb868856ab500570b4863043abc264bd9a873a18b0942af51b1440c4318bf46fb3184eb4b065e2c82bec769659e0468aa3f3eec8437337035e1cef85116541dbc37efbd0879a8dfcf98ddadf1938f05888b35bc33e14e1df8d902ceabaa52fab5814ca5698633e6e8ce1688887a8eb978447e9ba661632d54a3f7784c84fb9c7e773dc6d00d5b3d0e3d879f40709303ab32f5e59eccfb9aeb9841e1946dfa6687a32d89da9a14eed26ebc085d0c2ad3e326c0757e337fd211473aef6f1f52a297a7a2a2f898b57c05e2e811688a955cb043be6c582ec5cdb2a4aa920fba591906c857df2be8d8654644da1f4a5ba3225fe3464d72ee6156e3979f4275a5491bffea87f34d580ac388481dcb8c4a9adea19326614b280b06557cda8f0c7ae7b399443f1b993e00604879d0b10226af1160416e0669b8bbff1ccaf06725460ec2d090de9f22982da81c8cd114ca5a6e5b6269d19e94f84c554dc8ca6cafbce7432e3e62961d312e44fdda2a2194ce353090dd11618d55b2d9fa69a4f7fa5ddb56cfd57488e49e3a72129d3fe41cda8338f667595458c28d18429faaba8e17190280350fcb3fee72e8d1b6382c884bc5c5a734d2f4bc2881ec8786ee52761e8526b4e8f18ad95721dad92a288c6e9d109dee374edbfd0eb56f01b5712fc90109056b50da1f48daf95e9935f4e382832cd2f6044ecdb1c7c34274127395787b77576090eac3243bed620f9685c4972631b26e02d9254110fab5374cced1dcc6c8a6aa16813342e1b973d177271b476583e623d23982a6949b216fe1605089441c7b17614cf9c54f629ba241d26e5abea08375b2426eb4fd82024ec97e881eaecf00703803811d428a51b144aaf3f4ea059856b813a8818a9cf0121ca713bde00603f15a3b0a13398d9853764ec2bd19484b85f1bf85bf6073ba78e64f77154922ec8622aed3eb946c26ecec43918f3a703a00de38d843a332faa0b952a17773c4b53760a5f0b5f05c05246cf9851a9657c7683a6fc192c0378658d4c65041d41405bb627b2035fa683cd764070af0cfa4e48a9a0d8db3bef2efe76424732b1856ed407268aab564dfb2dfe434bcf22a0e0f4543c8a6b4e4b830df63cb5dd30f4df7125f7c1488c29c0ae200548a92e0454c009df0cce937aecbb3c18a66cb144ec8cfe943bdee1768872ff619d2ae80c6c136229424815dcdc6d58bfcac5d745b635e3fb80e9a31c6ea7a79b593e60409c0153cf1941bd5567dd0812cc6aaa1a9c607ee4ac3f08a6e593795edd7e65f70b6f2bddd808e414849729631434adef2cec9d6cc530282bb9773bd6996e6b44be42c08ebbcb5ec0a58400bce13253f70edcb23004c8a9386d662212ec049d01dcc3485c8498b7af395946af8f6e86dab6b7d00240de5e31fec2a9eadc0587db4b9eaabed34069338238983906ef411dc06fe7e209971e8c2dc1fd62ace8e9adf603cc772dea77ab7972bcbc1f2ae3ec8a6983d1503d42659e8ab59a966de8774b4bb7cfddd293fa9c9f76714d13d05591a14e3bea4c102bab1fd6c08fef75fdcbf277b83d56524cdbfc739835c7c7203df97eb271b6777a47c3710cccfe309862287020545e5d07e57540b0907b858dd7a67450db733c905f72186d40b1570b40b91af341d12e465fff0b1ac7336ad7601028be96b5104a623cf1b8c0f43e0f838a7d0eea51c18cd3eae5d79716dcebe66ac2e08262be98f62081ba4ebf98ecb91c270648ce608e9451e3d4670f13e27c5c9e85b02b56362baa667359b684ae1cf5031fb618e6b6bba2fc0ca30f435a06204a20f457d460b0b59b9fc7260621ec2276a77294a160f1e351b9618ff7d51b823687bf6aead92ff669413132bf095c6c37b519d58d730934a8b25d523da24d8a3d1e3e8774a81e975bf6282770b1a8d0bf1c1258131e5939c425128a0e396a191da946c1f3691fb99db33830334752f94bed83e52ba14161a7f102a9b53f594858b0475c63eebde380d625b84998937b4ac2c38ea8faecefdb17374cf217fbfa7ac5b685ff6ccb254feb2de5f6fd0e1b619f6148715442b234545ba2f1f67527fa204fcfcac4a229046e41054c8f0a810f1c771d8f013f32df4d51272d54ddf828399aed6106de2bb8bb8a441507fbeb4ac6fc7fe9af9da3440508f6f9a90a378d6cf86ccd5292c3315d9b5258919a179e38590d8f57c984808e703faaafa812e15b4ea102e48c496e86ef8d65e89ecc26fe07fa7715375c6a0235994bca34900345068b21d3555f7dc1b9ff51dabf56d7048d5b3a5f1ee4b6a1011bbfe7218cf0a6c88b3a893522b268cacf345b8fb62754b37a3fc5d5524dcaf4a44c93fb482f6a9a76e6ebd220d330f70bbefb37cfb43622a25c8d074d7e34628a0aa97b54bc74307006c856e4ad75a93ed2e45b70999470e210bdc725b9f3ae7e5016f1b15ac27ff7ee8eed7fb4cc28e2bc9fa820ad956794158b5e0250daf79cfbe16cc8fe6e0baa6c2a30948b980bcf4cf8e6144330d6fb5d6ca202d93482b8566103bcec3dc8c740073fba06e704d499b1efc4341ab3d724cd56651d9acee2357146be7dc1596d79d28ce9e72c48a4ba1f5baf538687fee82455f32acdaf826bcf14fa3affecb9dce3a7d26198779605db7991582ba345d7fe9c89749db54ae8994a7cfb4efc3ae3faf558fc30b0546f735280f3598cbcd91444715b8fa24cb11fc716fd0decc6cb89d5b71132454f8e7612616a410ef3bed0cd4f6ef310173573c17d56f154e5d05382a3d940b833938ee66dac8652de7e0827e6f69fd3fb49e1d3a4a057d22a9c703bdb7f5e5bde3ae7d4724e01dc1a3971eaa0ea40d4c43545bf142bf3ce36411a19234ab03be1dea542ee1e911554b1e30bfaff7eed2653dba826e4f40e60f1d2041bf3a578d3eabb780bb19336cc5d305161231c727d87a25196afee5bd1c1b6145d64808bfe4ac46f7c0edae254f923ca96a4c09f80e2bd6b419ccd8c7c9eb7d4d61b977ec5f9755e846e3bf7a1dd23a0b248d8b04912f9693e46c5ea3be7533ce983f48e1d7c6fe4c581d87e893e9d45bcc701bd970b7b717461eed1f16ffd911eb2ed90fdabf09e4e6739ed64370e7f99d7226661c21eb32e932cf6feb1bd605abe91cf8b4170c93b7f382aabecade3070157e5dc0f7b131bf62c5200b2d37d6d49e0711f6413cf5a10d6e291c3f8f68ad3857bd26fb6c43a530e0af3bb867d043bbfcd3fa2b595b26fdb2df906b07df1c0bff54b78871ac8c586b92d1a7012fbe740d0e13e3e5f86b427717c105dd4a2a608275d758153b66ccd430809a62f07f73276a473c4efe53eb70ae2ba46ced7222fe2ae6eb6d19fc3011e1d70b8063bf908d8c5b693bd78714a3ed97ac486c7e8ed1ed0317e04d9223edc7b2fe98e9f5647cc316c77b9f169e1babf2d7f52f01565e3b352616adfa54d79a242137e31e8ae26af789987f1caa58f3e31379b6520e2f4d6550167cf26eb534df4e638f368abf84d5d1e3346d5191929ac9cf6058026f761e46d4035789ca92a7a4bdc111f4a29037e6d50a3a0d538be9e6a35dc56cd89e7791fb279f6f2e4903ccec63a355f5e8aa4c68a8ae9b689c35f4875f371d5a344991f2e6622b8fae31e7439d77bcebc2c9d7d410231f863e1bdc59a5296b5235e62ef94ef0eaf9c4add8b0421a031a9ff892b935c99ca416b9b65cd3822135169d5f0c5b80f017e8e8724d484667a7c0a66049d643793d2be12da28196cc53ec0cfac06643c445336802bff9fdf2b890b08bbcc1b31b21f337c20c015b5ab9301ec712598d44f22b19a697c3f4550fe885e70778567d19f6acfcc1db4da109cffb2efc3dd4d6b04ba877a7aa76030ad809f71b9ad975a6e12f0bdfa782e785604e92dcf938cc3642f036f667bd47b560039b272a250e2db3cbcb09b025d6fc2b4562bb34704e350874ea5db61f8d523997181e85bcd416af0978b5295a025e4433783764fe715ce4f8cdef7cf2c8bbdc9fb508e01d68bc67081d3e27125768b81a9ec675c49bb3ac6a63ab055f51b2bbcb0c3450db8816211c72670a5c91283aa5e2c65c85075bc29f69fc7d63bb7dc2d3f89169b32072bd6b0533d6811b969fafeb178216b4f024a9205d685fc7cc8a948d4ffaf149568d511e166becbb0ca9528b99f55f61e81f2b78c1b59afa493a43e2db66bae55568eff827695bcced399092f821095a7286cf2fb20858544f5fd8f53ad2f33faf8054589041e7a306586a0b50c602c2daf49bc221fcba163860d3f8dfc10e5738d204dc84b2950946c33e7260ab92f8c0cf7ec6873b3489f53fff427747039bfe58b6ac0be9647401f35075323637390c27e902dc5dfefc9587db0c0ababb5c9eeb15c6477ba193439054860321ab6fc346180f4f80a404321c48e2bc7f9d59a9d4a15abdce15a74fb7944298089b0357d3e5cdb0da637be70a62050c127389db409689044775638211c5690bd4de40139c3f24a6445716f7e744ad507fcdd49f6e18a2cb5bce374821f520a90b8ff037260f9f86a08bc573d39231b09144b4aacd987cdeb1907f7e35000346234b5f85f639c6a7822cec27f7e3528d123db0fc744be7365d85e84566d74aec1241bc17c0bea97c23dbd7bbdbff93840d3c1bfc08cea295010e1b10616bbfc8afc969689cb169cfcfca7e684233f687adaa3ea429131589db980c69b169d28a76bbfd80fbdd30b71227f1af5fa5535be75a83679b8c3205bc060a6b39746a6b39ff9965e7c6b79f95f5264aa5fe209f9083a063746317b0ac122f1502153741bff53a114e70fece975e4fe87c19a24d46b064c6e6fb5f4b1d934079ea173482089528ecf383be284d86b43838e93bfe9a6f78f307c729573127116bd82dbf4729d70d9bcc20386857b163315de682dbe7ad18d515494ddff3b13b1b81a42d60629668fb530c600f1b4026fd2197790c13a9d0bf91100e4af57425a32f5c72e97a3f7fc3e2bf06f52d2b86cc51fd230c8910e49c8bb455fb4868a325b8bf0afcd5a6c86f110b839f51db8e33f850ac8b15d9772bd2a6837161c46facb7f7d97f0987e677ddd4edb5ec3a4513898d67b5652e6769033bb9000b2005c663ee6b9c562836b38f8b57bc799c3f3969e1dd4d67b302c855e036e0d5db9f501a22197d482595e83edb2c65f4679d8b9515a94feecd6d98e6b947f3f41c691278cc879f8712f6b1c072b937efe0613281570a6fef1335bf6663ac6158b49ac9b5c9c40ce5063f3bd87404f2c408865c0c0771b58bbb647594eaebe5bb062831ca8d2f064d4618201c00833a8997ffeb4f945e25c3982240684c47e66c3f290ce36d572c56da97f526ce7c5e0cf390bcb25deb0ecc600aad990286249d8f0f72ed4363643d75c608cec8f91ea72601335ef3895e89cf6732b8c696529e4bf89eb9033f92402b0c101370d28796b5ea65bc9c3c95146e9e3850e5ef98786ca00b65ece73ab52f9d3708167082bfa6c842b9f9299f744a624a686fa304c292886221cc490d6e91200abf71e42c8aab147993bba1b6083f99da77566fb4269cf59d12e6c1f7c7f0d002c1bc6a9ba0fcf131a59a72448b42147ff169838fa97f90ff5bf0f86f105f49566ff2fe1bf611a0c814eeff98db3a981bad5670e28559a017e31b9abedec4d29be0a1f5ea22c1e32522d5bf7e7e8d18a58961dad599b085d3d2b9f4630fd8d1ac4d293f7e947cac459d4b887a06297793bd121002a3217010a4d74caf5e93b0da11182239b1564feb815b1dc474b0a11b8c240a7e5b3f7ced006982524630240837c5a93f1d31297cc35275b4cb74ec36d8f98c131e7c8e91b761ad5ae6f5355aaa3d2e5593b522a6b2287f9683376c3edc39b1108342f1e3347d189095006096d3a11efb3f214533db95ca686b86d7d24be6428015d6f205c44e8cc5b99c0262539950c2cc9c5ee46537056f2efc64cc12f81f906636f2ad01a117c37507ecfc7468bcc721795a4a1f9f96a2f6ec04126f5404727231f9724413c6a6a46c39720a888e23189874e9bcd8486c7539c5e6c1849a931847ac2f8de5a6381ce65e5a657b58c8ba7921dff813b1ca52d2545bd6fd7375e18160ce497bff4a2feb9d6d4191c9c93e2b5d069cf88471164eedb78ef557529a8b97b2bea9ae05a9342330b8ecdd7d5f9f3b55e3b34d6f8e4f8832d15b4a3dcd424dee552393c77a412c297c4dcc93ec7bfd1629219d24a2b4c7e16353d61a0e2de0aa1b834054d67e7cf9e6e8e80e67779388aeb747066e0e7e97423262445d03e8e8e64998342cff14fc6d83fbed8423a577065db276bff48913e479b5c077fafed8ab156badde0fb318d7be9cbeac4533baa12dafabea04a7e7555eec27ef643ad3ab56aebe030c3233195d8a6e9362acd04c928741a3203f97349bbc11cf71a0f3a00062ea53ae672e626bf691e9e073d18a556274611eb2be4dc4ef20bf0160ac6e4a79303c3ce026fddd73a8c855ddff36f2ed74d0a74549f4e8fda5a938891ba559001997c1432c5d21164b2dd5db8e725a08eeeaa5472fea8e481ffa1791ec9fa47a076f0c8cf860c52d65db33a6f4b0bb1de035c5dfabc011fe3faa4cef764d6f6e9764aa33f1f1ffd9112998f562966197afc5b33f1efdc4c144b96a3e1949d61965f3230f04cbb8e6de2dfe2d24902e63100927c245e4b3311910922756fc4fe4b6c6cc7bd858d5af90c265a5dee6d5431d75acd909bcae0958acb7bfd30b3f44d8b5edb8a8fd98adfc92d77ee1522e27aebf2d6ca81dd7d8bf921707b8d7bedeacf936245c2d5a7b801e4dc0d3482d71fd79ecdbc054079760aa754274ee0f36b7bb3e752f13e48e8d20a49a4e1dc499ea82f931642524ee85bbfbb71924e36046c484c9f6547041b0f72c09cbc08af1508238c77f8bc55f6cd16177be4ce1092b77c5e7da861c823d57f859728759125b7ee8d27f9357b70b17936ec4f1d871678a6d1c91be924e7d8749e3d31af5e6cf71cb176c53bb6459d4d71f13f4769eefb1ab2a7f1343f3bf031f896f9f03651d066d7384ba2606387d32116d1a0ad8c88815f39ee587f1159d1e529c9b8bd8be3af952af7858f5d96da91f751b220a0605d0bf0f4e479cc795026775caeaebdbefd8d2c2d03865b85dcad497204974ef2e1fa7047512d74df656631c6921d113f8a376419d7fb4b4c5a7d18f65b21132ac9606308dbd2d1c4ca7d0966138e1a1e3c1593f9283534f30fdab826390a4dd29711b173faf08b5dcb6827e82bf80667e06c5e2d4830552e0e74fb19e6e065cb02d8d947cf73c821ec499f37644cf22f0616d17c4f02927e7e2c0872c02467632d0b19038d8e3d9db389e13f3faeaad0444b02d389374102d0cff59e8aae8182781d6f83535835506569f5a375dc4510878485a39cc74877b74b6524b3f44075b5fc048e37951604393675cff00a33f99449d8d735115f7e1e3c12e8b60e6a348209b6f716263ac837474bd48fe7ca88184c695e6a79939e9512387cb821605116d27eac98c6aaa46e08e4991245f78865ec7cd2b79eb8b461e6c65b1cf7f9edf222e6c98b8f72feccac503be53580b055acf4adb787e81ab7f37cf72068bb3b5b83cf144a3b73759b6e760dfe33028a8f29e1ef5e727b9bf24345bac2fd8d4f977f8607ec2e8a4bed7160afca320d0fb7e1a4544f31e92a96011387549bdc0cd3a38cb89bb0837d88596f1c44780929f8c5ac334c837d9da1e3791e81cf96f6d561b2cfcfa2845cd6450f5e1f701c9f01c1b5b3a79a21729849cd16a1b8b0cbf63ac443b44e82466530a78f37118defef32176aa333d7e29b8387eff06c3850d332e2246954dba534ac159b0da6d5506d7054f25645b06e4afa72e135af13c83a1331b34a4f4712c3b32afc9a3cfb797218a936ff84a336b9d50dc5122358a91cb82d34f55ca41e58cf61258d43a1c701ae6237ca181b25098a2cb1ee19bb8e7c51cd38c1bf14422daf9b38972b814cc952a70620621fea3f7faf66eb72a46285b69a9d018d3977bd0ce014e0fb827e5f872ee9f779ecbc87c3c5bc398a4014c7d1390004be60761c0da7780c74aa612faa779e42e21ea5bb26e92af4556903fa290f93498ef3ee60dac219d428d9e09acfee5af2e282493a4238be68b97e121e27cf3e3f26ab7e92d2d350d6fe2a46e61984d91af597d419b539ac21d5f32b1667c45d81e1a769979bf29b870a03d3abd78359a4173bd1c169fd637f8548ccd5b7a6e31711e6f1e0fdab35cef2696a85775a1e313df700cc70eda281067c8fd9c4777edf4937bbd6b9c0f54f033102007f72333bb86b3ac154aa30acef0690e7d77e60c6f85c7359db2e568bca75129b82d379b2fb5c1ab74d7ce5c8af94f1785e7a1d1b96b81bb0ac20f752ba240a85812efb610cc20208e9d76d8e1ce46243ba0ea320d7032dcb741d99113cfc989049e8837d970dd277ed4c09774f71d3549e36e4a514e07c7046d7e4128fb0b968d383b1c5302ef9403c5614f3f2640aa8bfcc42fc04e00fdf6c0223325717f10a596700d33e4492da0c069196df9b22d7378ea03744b07c85105446cdae2387a05117ddf4b4711b0eeef3caa674d09cfeb8954c31a29cb8776d73278e8e316e14dbed4c52bcd78683b82ee8418ed5563e7084ed5def5713fb0641211675981f7b29b01f31221e4958b23007133fbb062b8313d9f0517bfe222bf13189764df4d69859a3b9a887d306891caa5238f3b66c8b538010ad7bce058d34185a6e7b6c8d17cd754a75fa4903d4aaf360c8f5eaef550679403faf1ffbf33dc40a26e0985f04d6824451e653862bcc9ec8a1f42a0b1465da6bdafb8b75d7cc330c65a6a9c26d493470c85be8cde9b8e9ed289650c34cd05c78f6acb23cce855c3b4caf97a76efb5734db3ec3a10cacea746a00bcfaecddfcc0be35308d5034f42bd239432dd219008945c3fef1c919d90fc28e4f17082a2a5f6b984d31e9777124e5e9585e7351b254f9c233cde300e56f194cf3d8be196ca1f7319bdb6591133f12bd704370860b6460f7b70e44b9371b063923ef2238297e8242cafe1881d7a9923d2915709b7162686a743ed62af9e8035ca06f138ec45ca8d49c4b1c7100b06d7a53537ce78d233c9e8af1e8cbe43d9a14df673d5256072bd104504b8e0720142016224399e7b330cdd5add526684aa91533b6233eb4a83eb402b8460c788312bba938914caca96d1c7e43ca23a7ba50d17e9edd828ac07ec4a5dc348f0d5cde493f7ad3d387b359609f9c28612fc703ef56684752424557d0e9900f97d41a410f739c9382416b71251ab155cc455051c6058b475651f63a34b7c5c25e5ece84d446efefff00a2c2cb4a23072355898034d0fb4f7d2b69c0dfc1bf106e5b1b74c165cec90703f8601cd80e3dcf9c584464a17e46cd84db37974a01e49acdc7303c0f4a3efc1a44ecc41fff2a91acbf96f39aaa62615b7f8a213429322c012c340b01d0e7deb4ff8e2c932ce1a15c811ab50366b3616828d7be086407436a1b69b2fded5a6431199a771875a44f28c50ec1a5a5f5a5605d3b64219a4d66858d0cf7e3bc0ee574dcc4f7b11e4a54ff110e43c2a0dd1820caf4d0dc3596b0c77dd025ef92da59e081e4bde95ad3d77061388f28bf93f75d4fa3e9381b78b63c5b82c8401384f3361a6d6a641e49c28e8fcdb8531535773c2e98e4c5dde0ce23c88e927e01a1861c360331fc6758ad8c25c2803aa97be6d86f4da61c0e6e8bcf98ecaa3ff2ed0515d4a87d631ccbbe0ddacf85358569fb38e19653f77fc44d5576b71b68264addc525be55efc6bab4bcda47fe7c37e591f4fb329bc891099835fe751ab4dfa97268e399dc9421eb03e15f9994bb8ba260a4c3e0ba499d9ba65b2c897862654aab91c40c3dc33ee07e120f06019b374f6917f652c66b0382c5c97467fc8770bfc61bbc75477b871c879cf77bd79f7daa406806e75dc11d43902fdb3bee7a1ddc11d7e4498c0f5483b4322e0f93fe479c8ae8452e8f43f4e4c9c7d02e086add46ae2911d1ce67d39f6acca98677b2a85c7f93aaf14493fd485ad89336272679464827fdafb892289582fa1ae66577961631fefd84655544d00af6610267bc661ece0666a8858d192df847154aaa2729755558e2e5fb21ac9ebd1cc477a847d44a8585d9158d44777d30233843bd540dbbdd686745214f506ab67d58a7c201d2f60f64dac7f7bf8af85ea9fccba58557c0023d4dcd464f7139108529a658904ddc6ef4527b7b3ce81e14b831a325c7faa2f9fb9a12fde465e515427091a7cee6303a79f9119cccb4f68ee517898c00f987e1197844c5e923892fadc5dfb6f0596fecb289fe6a01f6f41834ab8c6f344e635284797d1dd8dd2af6b8871c9a9f3048904b393325d5cdae0d06bcb11551fbf65b7431ca7490901a11a1eee6661f2d3d90d3662c23faabf8726fe6ae11bffae4086498f8eda2566efbac499ded75a35f22b30e89acc4053d32a1d358413321da9f1cf5016491a8787eda3638c419c9cb535800f37fda418ba57418ed045f6e5396a43f5c75313ed20e9ae3a5eb0155e6e38e25b455d7ce81c5d142568df1e75db7fcb1e6bc200e4cdcd6cc22390f430d1be6e5df1681cf9b6881e60f86d27d284fd80a690deab92595cd39007a7d086ab8a1d49ef356755beb6b17f283c93e81d3f053aa1863a9cc425ea0f4fceb9df88ad0e76b0e11035c5517e0f3e37f301c8c8fd486904833ddb34696e0454ffa65b89096b343be04dd28aab17adcd9a4f01de944c6a342394d9d7bd363fdc41b0560b817e2c29cb2a7b6e9c4d21dca93d1b77db865bbcb3ab08763368a32cf78c0fd34950c68403f58a72aa39275ef119233405cd70d6e95ed3e40450f787f4bafa91c47eeae1c8ba2fdc02d85b4013bf8f11bfb6c3150c26c82094e53c12cae7a3ccd02287a979f0a992638181aac759ae9d2473768e23e968e98013abb7ca86812bf249d6b70e1d6e40eeb795e9d69736725f088e932448ec57c2252074db2158b22cd5292a3c10631f460cf1bc39add8219c4a1614d6a238ae86d5f472b9b7c29d33aac3eec46c4c4e5ddf542606fa31031b7eca30fa806aac6f1bf7e0d4078bc265f3902d8eadbe8a0f13d5292f3dcbce9c225ffd45568d5da96bb11de10cecb9502ded0449f5e5654217b82b568e0d2356e6705193b4735fca58eaa8b2e202177867e83b8b870790777996fd8bb906d5dd1e3f107f80141b9ad4bba2ce750dbce6f3c9cf024ce33ac83eb25275ab37c0f58ae1f020f02bf0250764e6679e91a98fb9ace86fd1ea43551a95fd478303b14361ed3ebd0097ef3e3781eee9e0d28d152ed5726c0fd3f58b9ec654fc5737b89bb5ee264cf9d1de05bc55cd90458395f4d74a6ff9d5d93df8edf608829e39dbff8bba53d013857d2cb5fa1739047f1714dfc1e7276e1844153918d6a25092354e94febe7d482a5f43788a450e3529689b77210cb191d037cb003a6a361dc30f66f3e44b82e3054bbda58a3cbe7da90181aed4d0a90baf7924cfdd0eebac4648f7aa17c3a9993539f7538fd6a2d3b08235f83d403ee0e76ce6dbc6294632d4464915c54eed96b3098f1135d1be52c3af207c0efe16759643a80f126f92606b63ec4278528677349e5c60b29818736be27c84d6124c44522e35c04ccc620ad6d672cc960dddcfc5f472da78962a75f197db910f54b52c62984a8ecfa9fe20a3a2f9039cc4de6f6fdf0c682e72f98ebc9ef90530a67bfa8f0ad6ac43277fee5a8076dba27811463c5fbae69a4d98a03e663c7c1971b44a3b69c21ae35239b9c6f7f61c3be647052e36dc25b939c1b5b4d542aaf7385880a21620a2895b8b0c891673448973a8776a0ceeff3e1c1c91df5350c389d81aba733be0f0459f8713dce2d1a8ea32ff3bbba024a86c6cf7e7db380449369764a3155feefce5ea4efd360352dcaf49d08efeb2e2b384dd8d3634382a67bb8f3ff0f9a62032e4fa4c9a01ff03d9c34b09078abdeb7ef68cefd1f57d26ae2dd954a556d98241a9bf810fe48650ebffb6be9c78751287760528f150fe1b5dc622fb42fcf922879cac231c25c6e92761cb42723a71ad7d00342692d13e11e044baaa376ab3ec7874f0703d753fc26ac786f77efd63e2ecfc603b65d9b2d8b91184072f9f2cad5cd2e7cc6693deb99eeaea1ca5a399671d56487e94bd873550e92e2e8d678d327362ff2b4d6b4dcca55a57ac83ff9566905a2b4596a2b0d052d98570debf9dd50710bfb8b18958fa6b6a7bbd6d1b917eaf5dc8559a2296144178cb2eded6e0c2132a3eacf327f4b55f4f453e76e51a7e90b5ececdabb03ea05500dde34568bafc457ef1f9637402a8d4759076d1deab3cb67ff64c28b53f2a0e9ff36b565abf86e35839038aee2443482db1dd692b5395c3280997d89622107b5b5fefdb70389260f73ac649c7b300a47fbb2de8e01a9e51d009e0cadf36be18acf734681ac15148f2762cebd4f148f3b42d6b2c9432cbe1671248ee5b2a73ee4349fd00586870b829f446173dc4fc89d004c4daf9b8ecd52cca3e083c868572384f68f22eab6a39326a3fa28c2630972941aaedf661f9d8ed45cf3e6b25f88c5a3ea34a8be5eae4c13a7441a176a772c12562cd3239baf0cd9098a044eb94f02db0df19e8066c9fe185a9113e681b3f40feb4520f23aaecad7912f0730a7a4aa57d929fcd2efb05b3eb0f533bb5485cb4f8df7414f992d76f07779aecf620bcb5e5810d92bd17de96e80421dd2be6c827b9c80b10596fe3ddbc51252ded1e1b0d579b63568046eaf1ad10010e8f7adbf0946c6ef71e18480183f87fb3e30f63b25df34ce2ab11e7e6ccc3004edcbcc32e6c506ef32f04541e83cb2cd3f6ddd49322358a002bbff5009b5e9c7ae49df35e077ac13c25255eba1ef4eadd26752fb32ce090b47f63014ba8c5be439b5b96e34a6ee61477f46cb0255c09894fb0e468b4190de6edd825e3911a8394d7f882ee3885e73d247a8bed0e8684f1854854da6ce246f3baf397cf5417309e857c82e8f3ae9374579ff3ed9b4f2af21e28b7be3f85d28c787a2878adfaed350d902113d1cddc79803cc8b3</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">æœ‰å¯†ç çš„æ‰å¯ä»¥çœ‹å“¦</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
  </entry>
  <entry>
    <title>ç§äººæ—¥è®°</title>
    <url>/diary/index.html</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><del>æ­£ç»äººè°å†™æ—¥è®°å•Šï¼ˆ</del></p>
<h2 id="2021å¹´"><a href="#2021å¹´" class="headerlink" title="2021å¹´"></a>2021å¹´</h2><ul>
<li><a href="21-oct.html">Oct.</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>ã€ŒLearn Haskellã€#1 åŸºç¡€è¯­æ³•ä¸å‡½æ•°</title>
    <url>/diary/test.html</url>
    <content><![CDATA[<p>just a test</p>
<h1 id="a"><a href="#a" class="headerlink" title="a"></a>a</h1><h2 id="b"><a href="#b" class="headerlink" title="b"></a>b</h2>]]></content>
  </entry>
  <entry>
    <title>categories</title>
    <url>/categories/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>å‹é“¾</title>
    <url>/friends/index.html</url>
    <content><![CDATA[<style type="text/css">
@media screen and (min-width: 1280px) {
    .column.is-6-widescreen {
        flex: none;
        width: 75%;
    }
}
.flink-list {
    overflow: auto;
    padding: 10px 10px 0;
    text-align: center;
}
.flink-list a {
    color: #4a4a4a;
}
[data-theme='dark'] .flink-list a {
    color: rgba(255,255,255,0.7)
}
.flink-list-item {
    position: relative;
    float: left;
    overflow: hidden;
    margin: 15px 7px;
    width: calc(100% / 3 - 15px);
    height: 90px;
    border-radius: 8px;
    line-height: 17px;
    -webkit-transform: translateZ(0);
    transition: 0.25s;
}
.flink-item-icon {
    float: left;
    overflow: hidden;
    margin: 15px 10px;
    width: 60px;
    height: 60px;
    border-radius: 35px;
}
.flink-item-name {
    padding: 16px 10px 0 0;
    height: 40px;
    font-weight: bold;
    font-size: 1.43em;
}
.flink-item-desc {
    padding: 16px 10px 16px 0;
    height: 50px;
    font-size: 0.93em;
}
.flink-list-item:hover {
    background-color: #81ACF9;
}
@media screen and (max-width: 1280px) {
    .flink-list-item {
        width: calc(50% - 15px) !important;
    }
}
@media screen and (max-width: 810px) {
    .flink-list-item {
        width: calc(100% - 15px) !important;
    }
}
</style>

<div class="flink-list">

<div class="flink-list-item">
    <a href="https://blog.gztime.cc/" title="GZTime" target="_blank">
        <div class="flink-item-icon">
            <img src="https://cdn.gztime.cc/avatar/GZTime_2021.png" alt="GZTime">
        </div>
        <div class="flink-item-name">GZTime</div>
        <div class="flink-item-desc">Walking on the Time Axis.</div>
    </a>
</div>

<div class="flink-list-item">
    <a href="https://cigar666.github.io/" title="Cigar666" target="_blank">
        <div class="flink-item-icon">
            <img src="https://cigar666.github.io/media/cigar.png" alt="Cigar666">
        </div>
        <div class="flink-item-name">Cigar666</div>
        <div class="flink-item-desc">_(:Ğ·ã€âˆ )_</div>
    </a>
</div>

<div class="flink-list-item">
    <a href="https://blog.flwfdd.xyz/" title="èŒƒæ»‡ä¸œ" target="_blank">
        <div class="flink-item-icon">
            <img src="https://z3.ax1x.com/2021/06/16/2LUYQA.jpg" alt="èŒƒæ»‡ä¸œ">
        </div>
        <div class="flink-item-name">èŒƒæ»‡ä¸œ</div>
        <div class="flink-item-desc">|ï½¥Ï‰ï½¥ï½€)</div>
    </a>
</div>

<div class="flink-list-item">
    <a href="https://www.cnblogs.com/yyy2015c01/" title="yyy2015c01" target="_blank">
        <div class="flink-item-icon">
            <img src="../images/yyy.jpg" alt="yyy2015c01">
        </div>
        <div class="flink-item-name">yyy2015c01</div>
        <div class="flink-item-desc">æ­ªæ­ªæ­ªæ­ªæ­ªæ­ªæ­ªæ­ªæ­ª</div>
    </a>
</div>

<div class="flink-list-item">
    <a href="https://widcardw.github.io/" title="widcardw" target="_blank">
        <div class="flink-item-icon">
            <img src="https://widcardw.github.io/links/avatar.jpg" alt="widcardw">
        </div>
        <div class="flink-item-name">widcardw</div>
        <div class="flink-item-desc">ä¸æ˜¯å¤šé¢æ‰‹</div>
    </a>
</div>

<div class="flink-list-item">
    <a href="https://hk-shao.github.io" title="çƒ§é£" target="_blank">
        <div class="flink-item-icon">
            <img src="https://avatars2.githubusercontent.com/u/24982550" alt="çƒ§é£">
        </div>
        <div class="flink-item-name">çƒ§é£</div>
        <div class="flink-item-desc">A human.</div>
    </a>
</div>

<div class="flink-list-item">
    <a href="https://matheart.github.io/" title="æ•¸å¿ƒ" target="_blank">
        <div class="flink-item-icon">
            <img src="https://matheart.github.io/media/profile.jpg" alt="æ•¸å¿ƒ">
        </div>
        <div class="flink-item-name">æ•¸å¿ƒ</div>
        <div class="flink-item-desc">è¬ç‰©çš†æ•¸.</div>
    </a>
</div>

</div>

<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><div class="flink-list">

<div class="flink-list-item">
    <a href="https://manim.org.cn" title="MKå®˜ç½‘" target="_blank">
        <div class="flink-item-icon">
            <img src="https://manim.org.cn/assets/mk.svg" alt="MKå®˜ç½‘">
        </div>
        <div class="flink-item-name">MKå®˜ç½‘</div>
        <div class="flink-item-desc">manim-kindergartenå®˜ç½‘</div>
    </a>
</div>

</div>]]></content>
  </entry>
</search>
